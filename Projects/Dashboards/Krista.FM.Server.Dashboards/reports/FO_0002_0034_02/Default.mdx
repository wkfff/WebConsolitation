<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0034_02_date">
    <![CDATA[
-- FO_0002_0034_02_date
with
    member Measures.[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        NonEmptyCrossjoin
        (
            Filter
            (
                Descendants
                (
                   [Период__Период].[Период__Период].[<%period_year%>],
                   [Период__Период].[Период__Период].[День],
                   SELF
                ),
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года"
            )
        )
    ) on rows
from  [ФО_АС Бюджет_КазнИсп_Факт расхода]
  ]]>
  </query>

  <query id="FO_0002_0034_02_grid_plan">
    <![CDATA[
-- FO_0002_0034_02_grid_plan
with       
    member [Measures].[План_]
    as '
        (
            [Measures].[Ассигнования],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Роспись],
            [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Аггрегированные плановые документы]
        ) / 1000000'  

    member [Measures].[План ]
    as 'IIF
        (
            IsEmpty([Measures].[План_]),
            0,
            [Measures].[План_]
        )' 

    member [Measures].[Удельный вес план ]
    as 'IIF 
        (
            IsEmpty 
            (
                (
                    [Measures].[План ],
                    [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
                ) 
            ) or 
            (
                [Measures].[План ],
                [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
            ) = 0,
            null,
            (
                [Measures].[План ],
                [Расходы__АС Бюджет].[Расходы__АС Бюджет].CurrentMember 
            ) / 
            (
                [Measures].[План ],
                [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
            ) 
        )'    
        
    member [Measures].[Факт ]
    as '0'
    member [Measures].[Удельный вес факт ]
    as '0'        
        
    <%member_declaration%>
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Расходы в отраслях социальной сферы и выплат гражданам ] 
    as 'Sum
        (
            {
                <%member_list%>
            }
        )'    
        
     member [Measures].[Уровень ]
     as 'IIF
         (
              [Расходы__АС Бюджет].[Расходы__АС Бюджет].CurrentMember is [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Расходы в отраслях социальной сферы и выплат гражданам ] or
              [Расходы__АС Бюджет].[Расходы__АС Бюджет].CurrentMember is [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ],
              0, 
              1
         )'

    member [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Аггрегированные плановые документы]
    as 'Sum
        (
            {
                Filter  
                (
                    [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Все].Children,
                    not  
                    (
                        [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].CurrentMember is [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Все].[Смета по ПД (расходы)] 
                    )  
                )  
            }
        )  '
        
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
    as '([Расходы__АС Бюджет].[Расходы__АС Бюджет].DefaultMember, [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>])'        
select
    {   
        [Measures].[План ],
        [Measures].[Удельный вес план ],
        [Measures].[Факт ],
        [Measures].[Удельный вес факт ],
        [Measures].[Уровень ]
    } on columns,
    {
        { <%member_list%> } +
        { [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Расходы в отраслях социальной сферы и выплат гражданам ] } +
        { [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ] }
    } on rows    
from [ФО_АС Бюджет_План расходов]       
where       
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_year%>],
        <%selected_admin%>,
        [Тип средств__АС Бюджет].[Тип средств__АС Бюджет].[Данные всех источников].[ФО\0001 АС Бюджет - УФиНП <%period_year%>].[Бюджетные средства],
        [Фиксированный__БА_ЛБО].[Фиксированный__БА_ЛБО].[Все].[Бюджетные ассигнования, лимиты бюджетных обязательств]
    )       
  ]]>
  </query>

  <query id="FO_0002_0034_02_grid_fact">
    <![CDATA[
-- FO_0002_0034_02_grid_fact
with 
    member [Measures].[Факт_]
    as '
        (
            [Measures].[Расход с возвратом нараст итог]
        ) / 1000000'
    member [Measures].[Факт ]
    as 'IIF
        (
            IsEmpty([Measures].[Факт_]),
            0,
            [Measures].[Факт_]
        )'

    member [Measures].[Удельный вес факт ]
    as 'IIF
        (
            IsEmpty
            (
                (
                    [Measures].[Факт ],
                    [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
                )
            ) or
            (
                [Measures].[Факт ],
                [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
            ) = 0,
            null,
            (
                [Measures].[Факт ],
                [Расходы__АС Бюджет].[Расходы__АС Бюджет].CurrentMember
            ) /
            (
                [Measures].[Факт ],
                [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
            )
        )'
        
    <%member_declaration%>
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Расходы в отраслях социальной сферы и выплат гражданам ] 
    as 'Sum
        (
            {
                <%member_list%>
            }
        )'   
        
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
    as '([Расходы__АС Бюджет].[Расходы__АС Бюджет].DefaultMember, [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>])'          
select
    {
        [Measures].[Факт ],
        [Measures].[Удельный вес факт ]
    } on columns,
    {
        { <%member_list%> } + 
        {
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Расходы в отраслях социальной сферы и выплат гражданам ] 
        }  +
        { [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ] }
    } on rows 
from [ФО_АС Бюджет_КазнИсп_Факт расхода]
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        <%selected_admin%>,
        [Тип средств__АС Бюджет].[Тип средств__АС Бюджет].[Данные всех источников].[ФО\0001 АС Бюджет - УФиНП <%period_year%>].[Бюджетные средства]
    )  
  ]]>
  </query>

  <query id="FO_0002_0034_02_chart_plan">
    <![CDATA[
-- FO_0002_0034_02_chart_plan
with 
    <%member_declaration%>
    
    member [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Аггрегированные плановые документы]
    as 'Sum
        (
            {
                Filter
                (
                    [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Все].Children,
                    not
                    (
                        [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].CurrentMember is [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Все].[Смета по ПД (расходы)]
                    )
                )
            }
        )  '

    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
    as '([Расходы__АС Бюджет].[Расходы__АС Бюджет].DefaultMember, [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>])'
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Уточненные плановые назначения для отдельного показателя]
    as '[Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ] - [Расходы__АС Бюджет].[Расходы__АС Бюджет].[<%selected_indicator%>]'
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Уточненные плановые назначения для итого]
    as '[Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ] - [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Итого по выбранным показателям] '
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Итого по выбранным показателям] 
    as 'Sum
        (
            {
               <%member_list%>
            }
        )'  
        
    set [Для отдельного показателя]  
    as '  
        {
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[<%selected_indicator%>],
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Уточненные плановые назначения для отдельного показателя]
        }'  
        
    set [Для итоговой строки]  
    as '  
        {
            <%member_list%>,
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Уточненные плановые назначения для итого]
        }'   

    member [Measures].[План ]  
    as ' 
        (
            [Measures].[Ассигнования],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Роспись],
            [Фиксированный__Плановые документы].[Фиксированный__Плановые документы].[Аггрегированные плановые документы]  
        ) / 1000000'
select
    {
       [Measures].[План ]
    } on columns,
    {
        <%chart_indicator_set%>
    } on rows 
from [ФО_АС Бюджет_План расходов] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_year%>],
        <%selected_admin%>,
        [Тип средств__АС Бюджет].[Тип средств__АС Бюджет].[Данные всех источников].[ФО\0001 АС Бюджет - УФиНП <%period_year%>].[Бюджетные средства],
        [Фиксированный__БА_ЛБО].[Фиксированный__БА_ЛБО].[Все].[Бюджетные ассигнования, лимиты бюджетных обязательств]
    ) 
  ]]>
  </query>

  <query id="FO_0002_0034_02_chart_fact">
    <![CDATA[
-- FO_0002_0034_02_chart_fact
with 
    <%member_declaration%>
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ]
    as '([Расходы__АС Бюджет].[Расходы__АС Бюджет].DefaultMember, [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>])'
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Фактическое исполнение для отдельного показателя]
    as '[Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ] - [Расходы__АС Бюджет].[Расходы__АС Бюджет].[<%selected_indicator%>]'
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Фактическое исполнениея для итого]
    as '[Расходы__АС Бюджет].[Расходы__АС Бюджет].[Всего расходов ] - [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Итого по выбранным показателям] '
    
    member [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Итого по выбранным показателям] 
    as 'Sum
        (
            {
               <%member_list%>
            }
        )'  
        
    set [Для отдельного показателя]  
    as '  
        {
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[<%selected_indicator%>],
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Фактическое исполнение для отдельного показателя]
        }'  
        
    set [Для итоговой строки]  
    as '  
        {
            <%member_list%>,
            [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Фактическое исполнениея для итого]
        }'   
    
    member [Measures].[Факт ]
    as '  [Measures].[Расход с возвратом нараст итог]  / 1000000'
select
    {
        [Measures].[Факт ]
    } on columns,
    {
        <%chart_indicator_set%>
    } on rows 
from [ФО_АС Бюджет_КазнИсп_Факт расхода]
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        <%selected_admin%>,
        [Тип средств__АС Бюджет].[Тип средств__АС Бюджет].[Данные всех источников].[ФО\0001 АС Бюджет - УФиНП <%period_year%>].[Бюджетные средства]
    ) 
  ]]>
  </query>

  <query id="FO_0002_0034_02_administratorDigest">
    <![CDATA[
-- FO_0002_0034_02_administratorDigest
with 
    set [Администраторы] 
    as 'Filter 
        (
            [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>].Children,
            not 
            (
                [Администратор__АС Бюджет].[Администратор__АС Бюджет].CurrentMember is [Администратор__АС Бюджет].[Администратор__АС Бюджет].CurrentMember.Parent.DataMember 
            ) and 
            not 
            IsEmpty
            (
               (
                  [Measures].[Расход с возвратом нараст итог],
                  [Расходы__АС Бюджет].[Расходы__АС Бюджет].[Данные всех источников].[ФО\0001 АС Бюджет - УФиНП <%period_year%>]
               )   
            )
        )'  
    member [Measures].[Имя]  
    as 'IIF 
        (
            [Measures].[Уровень] = 0,
            "Все ГРБС",
             "(" + [Measures].[Код] + ") " + [Администратор__АС Бюджет].[Администратор__АС Бюджет].CurrentMember.Name
        )' 
    member [Measures].[Уникальное имя] 
    as '[Администратор__АС Бюджет].[Администратор__АС Бюджет].CurrentMember.UniqueName' 
    member [Measures].[Уровень] 
    as 'IIF 
        (
            [Администратор__АС Бюджет].[Администратор__АС Бюджет].CurrentMember is [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>],
            0,
            1 
        ) ' 
    member [Measures].[Код]
    as '[Администратор__АС Бюджет].[Администратор__АС Бюджет].CurrentMember.Properties("Код")'        
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень] 
    } on columns,
    {
        {
            [Администратор__АС Бюджет].[Администратор__АС Бюджет].[Данные всех источников].[ФО АС Бюджет - УФиНП <%period_year%>] 
        } + [Администраторы] 
    } on rows 
from  [ФО_АС Бюджет_КазнИсп_Факт расхода] 
  ]]>
  </query>

</root>