<?xml version="1.0" encoding="Windows-1251"?>
<root>
<query id="FO_0008_0001_endYear">
    <![CDATA[
--FO_0008_0001_endYear
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период__Период].[Период__Период].Members,
                not IsEmpty
                (
                   [Measures].[План НПА]
                )
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from [ФО_Финансирование КАИП]
]]>
  </query>

<query id="FO_0008_0001_endDate">
<![CDATA[
--FO_0008_0001_endYear
with 
    member [Measures].[ДанныеНа] 
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                [Период__Период].[Период__Период].Members,
                not IsEmpty ( [Measures].[Финансирование] ) 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from   [ФО_АС Бюджет_КазнИсп_Финансирование] 
]]>
</query>

<query id="FO_0008_0001_CSRDigest">
<![CDATA[
	with
	set [Наименование программ, мероприятий и объектов]
	as ' Filter
	(
	Descendants
	(
	[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего],
	[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 2],
	Self
	) - [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего] -[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация],
	not
	(
	[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Parent.DataMember
	)
	)'
	member measures.[Имя]
	as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Name'
	member measures.[Уникальное имя]
	as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Unique_name")'
	member measures.[Уровень]
	as '0'
	select
	{
	  measures.[Имя],
	  measures.[Уникальное имя],
	  measures.[Уровень]
	} on columns,
	{
	  [Наименование программ, мероприятий и объектов]
	} on rows
	From [ФО_АС Бюджет_КазнИсп_Финансирование]
]]>
</query>

<query id="FO_0008_0001_grid_general_view">
<![CDATA[
-- FO_0008_0001_grid_general_view
with              
    member Measures.[СубКОСГУ]              
    as 'IIF              
        (
            Measures.[Количество],
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код"),
            null              
        )'              
    member Measures.[Количество]              
    as 'IIF              
        (
            StrToValue              
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код")              
            ) < 9999,
            false,
            true              
        )'               
    member Measures.[Целевая статья]              
    as 'IIF
        (
            Measures.[Количество],
            Tail 
            (
                Filter              
                (
                    Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+ Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+ Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+  Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+  Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+  Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+ Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+  Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    )+  Descendants              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self              
                    ),
                    not              
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember              
                    )  and  
                    (
                        not IsEmpty  
                        (
                            (
                                [Measures].[Финансирование нараст итог],
                                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember,
                                [Период__Период].[Период__Период].[Данные всех периодов].[<%cur_year%>]  
                            )   
                        )  
                    )  
                )              
            ).Item(0).Properties("Код"),
            null
        )' 
    member Measures.[Генподрядчик]              
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Генподрядчик")'              
    member Measures.[Получатель бюджетных средств]              
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Получатель бюджетных средств")'              
    member Measures.[План краевого бюджета]              
    as 'LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[План НПА],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+"
                            ) 
                        )  and  (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+"
                            ) <> 0
                    ) 
                ).Item(0) 
            )"              
        )/<%rub_multiplier%>'              
    member Measures.[Финансирование за месяц]              
    as 'sum              
        (
            {
               <%dates%>            
            },
            [Measures].[Финансирование]              
        )/<%rub_multiplier%>'              
    member Measures.[Финансирование на текущую дату]              
    as '              
        (
            [Measures].[Финансирование нараст итог],
            <%selected_period%>
        )/<%rub_multiplier%>'              
    member Measures.[Остаток от плана]              
    as '              
        (
            Measures.[План краевого бюджета] - Measures.[Финансирование на текущую дату]              
        )'              
    member Measures.[% исполнения]              
    as 'IIF              
        (
            IsEmpty              
            (
                Measures.[План краевого бюджета]              
            ) or              
            (
                Measures.[План краевого бюджета]              
            ) = 0,
            null,
            (
                Measures.[Финансирование на текущую дату] / Measures.[План краевого бюджета]              
            )              
        )              
        *100'              
    member Measures.[Софинансирование план]              
    as 'LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование План],
                 "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                 [Measures].[Софинансирование План],
                                 "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  and  (
                                   [Measures].[Софинансирование План],
                                   "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            )  <> 0 
                    ) 
                ).Item(0) 
            )"              
        )/<%rub_multiplier%>'        
		
    member Measures.[Софинансирование факт]              
    as 'LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование Факт],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        ) and   (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            )  <> 0
                    ) 
                ).Item(0) 
            )"              
        )/<%rub_multiplier%>'   
		
    member Measures.[% исполнения софинансирования]              
    as 'IIF              
        (
            IsEmpty              
            (
                Measures.[Софинансирование план]              
            )or              
            (
                Measures.[Софинансирование план]              
            ) =0,
            null,
            (
                Measures.[Софинансирование факт] / Measures.[Софинансирование план]              
            )              
        )              
        *100'              
    set [Наименование программ, мероприятий и объектов]      
    as ' Filter      
        (
            Descendants      
            (
                <%csr_param%>,
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 1],
                Self_and_after      
            ),
            not      
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Parent.DataMember      
            )      
        )'            
    set [Адресные инвестиционные программы]              
    as 'Filter              
        (
            Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+ Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+ Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+  Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+  Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+  Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+ Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+  Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            )+  Descendants              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self              
            ),
            not              
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember              
            )              
        )'              
    member Measures.[Целевая статья ]              
    as '[КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Properties("Код")'             
	
	member Measures.[Уровень]
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Level_number")'
	
select
    {
        <%param%>
        Measures.[План краевого бюджета],
        Measures.[Финансирование за месяц],
        Measures.[Финансирование на текущую дату],
        Measures.[Остаток от плана],
        Measures.[% исполнения],
        Measures.[Софинансирование план],
        Measures.[Софинансирование факт],
        Measures.[% исполнения софинансирования],
		Measures.[Уровень]
    } on columns,
    {
        {
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего],
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация]  
        } +  
        {
            [Наименование программ, мероприятий и объектов] 
        }  
    } on rows              
From [ФО_АС Бюджет_КазнИсп_Финансирование]
  ]]>
</query>

<query id="FO_0008_0001_grid_decoding_view">
<![CDATA[
 with   
    member Measures.[СубКОСГУ]   
    as 'IIF   
        (
            Measures.[Количество],
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код"),
            null   
        )'   
    member Measures.[Количество]   
    as 'IIF   
        (
            StrToValue   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код")   
            ) < 9999,
            false,
            true   
        )'   
    member Measures.[Целевая статья]   
    as 'IIF   
        (
            Measures.[Количество],
            Tail   
            (
                Filter   
                (
                    Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+ Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+ Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+  Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+  Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+  Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+ Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+  Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    )+  Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    ),
                    not   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember   
                    )  and   
                    (
                        not IsEmpty   
                        (
                            (
                               Measures.[Финансирование за месяц]
                            )   
                        )   
                    )   
                )   
            ).Item(0).Properties("Код"),
            null   
        )'   
    member Measures.[Генподрядчик]   
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Генподрядчик")'   
    member Measures.[Получатель бюджетных средств]   
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Получатель бюджетных средств")'   
   member Measures.[План краевого бюджета]              
    as 'LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[План НПА],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        )/<%rub_multiplier%>'    
    member Measures.[Финансирование за месяц]   
    as 'sum   
        (
            {
                <%dates%>
            },
            [Measures].[Финансирование]   
        )/<%rub_multiplier%>'   
    member Measures.[Финансирование на текущую дату]   
    as '   
        (
            [Measures].[Финансирование нараст итог],
            <%selected_period%>
        )/<%rub_multiplier%>'   
    member Measures.[Остаток от плана]   
    as '   
        (
            Measures.[План краевого бюджета] - Measures.[Финансирование на текущую дату]   
        )'   
    member Measures.[% исполнения]   
    as 'IIF   
        (
            IsEmpty   
            (
                Measures.[План краевого бюджета]   
            ) or   
            (
                Measures.[План краевого бюджета]   
            ) = 0,
            null,
            (
                Measures.[Финансирование на текущую дату] / Measures.[План краевого бюджета]   
            )   
        )   
        *100'   
     member Measures.[Софинансирование план]              
    as 'LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование План],
                 "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                 [Measures].[Софинансирование План],
                                 "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        )/<%rub_multiplier%>'        
		
    member Measures.[Софинансирование факт]              
    as 'LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование Факт],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        )/<%rub_multiplier%>'   
    member Measures.[% исполнения софинансирования]   
    as 'IIF   
        (
            IsEmpty   
            (
                Measures.[Софинансирование план]   
            )or   
            (
                Measures.[Софинансирование план]   
            ) =0,
            null,
            (
                Measures.[Софинансирование факт] / Measures.[Софинансирование план]   
            )   
        )   
        *100'   
    set [Наименование программ, мероприятий и объектов]   
    as ' Filter   
        (
            Descendants   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего] ,
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 1],
                Self_and_after   
            ) - Descendants   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация],
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 2],
                after   
            ) ,
            not   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Parent.DataMember   
            )  and (Measures.[Количество] ) 
        )'   
    set [Адресные инвестиционные программы]   
    as 'Filter   
        (
            Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+ Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+ Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+  Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+  Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+  Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+ Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+  Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            )+  Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            ),
            not   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember   
            )   
        )'   
    member Measures.[Целевая статья ]   
    as '[КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Properties("Код")'   
	member Measures.[Уровень]
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Level_number")'
	member Measures.[Номер]
    as 'null'
     member Measures.[Наименование ]
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Member_name")'
select
    {
	    Measures.[Номер],
        Measures.[Наименование ],
        <%param%>
        Measures.[Финансирование за месяц],
		Measures.[Уровень]
    } on columns,
    Filter(
            {
              [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего],
              [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация]  
             }  + [Наименование программ, мероприятий и объектов],
			 not IsEmpty
			 (
			   Measures.[Финансирование за месяц]
			 )
          )  on rows   
From [ФО_АС Бюджет_КазнИсп_Финансирование] 
	
]]>
</query>

<query id="FO_0008_0001_grid_helpMO_view">
<![CDATA[
--FO_0008_0001_grid_helpMO_view
  with             
    member Measures.[СубКОСГУ]            
    as 'IIF            
        (
            Measures.[Уровень]=1,
            1,
            IIF 
            (
                Measures.[Количество],
                StrToValue    
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код")    
                ),
                null
                
            ) 
        )'          
      member Measures.[Количество]          
    as 'IIF          
        (
            (
                StrToValue  
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код")          
                ) < 9999  
            )or ( Measures.[девятки] = "999" ),
            false,
            true          
        )'          
    member Measures.[девятки] 
    as 'mid      
        (
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код"),
            1,
            3      
        )'   
    member Measures.[Целевая статья]             
    as 'IIF 
        (
            Measures.[Уровень]=1,
            1,
			IIF             
            (
            Measures.[Количество],
            Tail             
            (
                Filter             
                (
                    Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+ Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+ Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+  Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+  Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+  Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+ Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+  Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    )+  Descendants             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self             
                    ),
                    not             
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember             
                    )  and             
                    (
                        not IsEmpty             
                        (
                            (
                                Measures.[Финансирование на текущую дату]             
                            )             
                        )             
                    )             
                )             
            ).Item(0).Properties("Код"),
            null             
        )
	 )'             
    member Measures.[Генподрядчик]             
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Генподрядчик")'             
    member Measures.[Получатель бюджетных средств]             
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Получатель бюджетных средств")'             
    member Measures.[План краевого бюджета]             
    as 'IIF           
        (
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу],
            sum  
            (
                      Filter  
                (
                    Descendants  
                    (
                        [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего] ,
                        [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 1],
                        Self_and_after  
                    ),
                    not  
                    (
                        [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Parent.DataMember  
                    )  and (Measures.[Количество] ) and not IsEmpty  
                    (
                        Measures.[Финансирование на текущую дату]  
                    )  
                )  ,
                Measures.[План краевого бюджета]  
            )*<%rub_multiplier%>,
            LookUpCube           
            (
                "[ФО_Финансирование КАИП]",
                "             
                (
                    [Measures].[План НПА],
                    
                    "+memberToStr             
                    (
                        [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember             
                    )+",
					Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                    
                               "+memberToStr             
                               (
                                  [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember             
                               )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
                )"             
            )        
        )/<%rub_multiplier%>'         
    member Measures.[Финансирование на текущую дату]             
    as 'IIF             
        (
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу],
            sum             
            (
                {
                    [Наименование программ, мероприятий и объектов]             
                },
                (
                    [Measures].[Финансирование нараст итог],
                    <%selected_period%>
                )             
            ),
            (
                [Measures].[Финансирование нараст итог],
                <%selected_period%>
            )             
        )/<%rub_multiplier%>'             
    member Measures.[Остаток от плана]             
    as '             
        (
            Measures.[План краевого бюджета] - Measures.[Финансирование на текущую дату]             
        )'             
    set [Наименование программ, мероприятий и объектов]             
    as ' Filter             
        (
            Descendants             
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего] ,
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 1],
                Self_and_after             
            ),
            not             
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Parent.DataMember             
            )  and (Measures.[Количество] ) and not IsEmpty             
            (
                Measures.[Финансирование на текущую дату]             
            )             
        )'             
    member [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Итог ]             
    as 'null'             
    set [районы]             
    as 'Filter             
        (
            Descendants             
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                self             
            ),
            not             
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Parent.DataMember             
            ) and not IsEmpty             
            (
                Measures.[Финансирование на текущую дату]             
            )             
        )'             
    set [города]             
    as 'Filter             
        (
            Descendants             
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                self             
            ),
            not             
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Parent.DataMember             
            ) and not IsEmpty             
            (
                Measures.[Финансирование на текущую дату]             
            )             
        )'             
     member Measures.[Уровень]                
    as 'IIF                
        (
            Measures.[Наименование ]="",
            1,
            3  
        )'     
      member Measures.[Порядковый номер]                 
    as 'IIF   
        (
            Measures.[Наименование ]="",
            StrToValue
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Краткое наименование")
            ),
            null   
        )'            
    member Measures.[Наименование]             
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Properties("Member_Name")'             
    member Measures.[Наименование ]       
    as 'IIF       
        (
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу],
            "",
            Tail
            (
                Filter
                (
                    Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+ Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+ Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+  Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+  Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+  Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+ Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+  Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    )+  Descendants
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self
                    ),
                    not
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember
                    )  and
                    (
                        not IsEmpty
                        (
                            (
                                Measures.[Финансирование на текущую дату]
                            )
                        )
                    )
                )
            ).Item(0).Properties("Member_Name")
        )'            
    member [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу]             
    as '1'    
select
    {
        Measures.[Порядковый номер],
		Measures.[Наименование],
        <%param%>
	    Measures.[План краевого бюджета],
        Measures.[Финансирование на текущую дату],
        Measures.[Остаток от плана],
        Measures.[Наименование ],
        Measures.[Уровень]             
    } on columns,
    Filter             
    (
        {
             [районы],
            [города] ,
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].DATAMEMBER 
        }     
        *             
        {
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу],
            [Наименование программ, мероприятий и объектов]             
        } ,
        not IsEmpty             
        (
            Measures.[Финансирование на текущую дату]             
        )             
    ) on rows             
From [ФО_АС Бюджет_КазнИсп_Финансирование]             

 ]]>
</query>

<query id="FO_0008_0001_grid_helpMO_detail">
<![CDATA[
--FO_0008_0001_grid_helpMO_detail
   with                                  
    member Measures.[Финансирование на текущую дату]                                 
    as 'IIF                                 
        (
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу],
            sum                                 
            (
                {
                    [Наименование программ, мероприятий и объектов]                          
                },
                (
                    [Measures].[Финансирование нараст итог],
                    <%selected_period%>                               
                )                                 
            ),
            (
                [Measures].[Финансирование нараст итог],
                 <%selected_period%>                               
            )                                 
        )/1000'                                  
    set [КЦСР]                               
    as ' Filter                               
        (
            Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+ Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+ Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+  Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+  Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+  Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+ Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+  Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            )+  Descendants                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self                               
            ),
            not                               
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember                               
            )  and                               
            (
                not IsEmpty                               
                (
                    (
                        Measures.[Финансирование на текущую дату]                               
                    )                               
                )                               
            )                               
        ) '                                
    set [районы]                                 
    as 'Filter                                 
        (
            Descendants                                 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                self                                 
            ),
            not                                 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Parent.DataMember                                 
            ) and not IsEmpty                                 
            (
                Measures.[Финансирование на текущую дату]                                 
            )                                 
        )'                                 
    set [города]                                 
    as 'Filter                                 
        (
            Descendants                                 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                self                                 
            ),
            not                                 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Parent.DataMember                                 
            ) and not IsEmpty                                 
            (
                Measures.[Финансирование на текущую дату]                                 
            )                                 
        )'                                  
    member Measures.[Наименование]                                 
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Properties("Member_Name")'                                 
    member Measures.[Наименование ]                                 
    as 'IIF                                 
        (
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Сумма по району, городу],
            "",
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Properties("Member_Name")                           
        )'                                  
    member Measures.[Замена на КЦСР]                     
    as ' LookUpCube   
        (
            "[ФО_Финансирование КАИП]",
            "   
            (
                [Measures].[План НПА],
                "+memberToStr   
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember   
                )+",
                "+memberToStr   
                (
                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember   
                )+",
                					Tail   
                (
                    Filter   
                    (
                         [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                        not IsEmpty   
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr   
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember   
                                )+" ,
                                "+memberToStr   
                                (
                                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember   
                                )+"   
                            )   
                        )   
                    )   
                ).Item(0)   
            )"   
        )/<%rub_multiplier%> '  
select
    {
   		Measures.[Наименование ],
        Measures.[Замена на КЦСР]                    
    } on columns,
    Filter                                 
    (
        {
            {
                [районы],
                [города],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].DATAMEMBER 
            }  
            *                     { [КЦСР] }                      
        },
        not IsEmpty                                 
        (
            Measures.[Финансирование на текущую дату]                                 
        )                                 
    ) on rows                                 
From [ФО_АС Бюджет_КазнИсп_Финансирование]                                  
 ]]>
</query>
	
<query id="FO_0008_0001_grid_gasification_view1">
<![CDATA[
   with     
    member Measures.[СубКОСГУ]     
    as 'IIF     
        (
            Measures.[Количество],
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код"),
            null     
        )'     
    member Measures.[Количество]     
    as 'IIF     
        (
            StrToValue     
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код")     
            ) < 9999,
            false,
            true     
        )'     
    member Measures.[Целевая статья]     
    as 'IIF     
        (
            Measures.[Количество],
            Tail     
            (
                Filter     
                (
                    Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+ Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_22],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+ Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_23],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+  Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_24],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+  Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_25],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+  Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_26],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+ Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_27],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+  Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_28],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    )+  Descendants     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_29],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self     
                    ),
                    not     
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember     
                    )  and     
                    (
                        not IsEmpty     
                        (
                            Measures.[Финансирование на текущую дату]     
                        )     
                    )     
                )     
            ).Item(0).Properties("Код"),
            null     
        )'     
    member Measures.[Генподрядчик]     
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Генподрядчик")'     
    member Measures.[Получатель бюджетных средств]     
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Получатель бюджетных средств")'     
   member Measures.[План краевого бюджета]              
    as 'IIF      
        (
          [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
          LookUpCube              
          (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[План НПА],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
           ),
		  LookUpCube              
          (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[План НПА],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				"+memberToStr     
                 (
                   [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember     
                 )+",  
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+",
                                "+memberToStr     
                                 (
                                   [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember     
                                 )+"  
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
           )
     )/<%rub_multiplier%>'    
    member Measures.[Финансирование на текущую дату]     
    as '     
        (
            [Measures].[Финансирование нараст итог],
           <%selected_period%>    
        )/<%rub_multiplier%>'     
    member Measures.[Финансирование за месяц]     
    as 'sum     
        (
            {
               <%dates%>      
            },
            [Measures].[Финансирование]     
        )/<%rub_multiplier%>'     
    member Measures.[Остаток от плана]     
    as '     
        (
            Measures.[План краевого бюджета] - Measures.[Финансирование на текущую дату]     
        )'     
    member Measures.[% исполнения]     
    as 'IIF     
        (
            IsEmpty     
            (
                Measures.[План краевого бюджета]     
            ) or     
            (
                Measures.[План краевого бюджета]     
            ) = 0,
            null,
            (
                Measures.[Финансирование на текущую дату] / Measures.[План краевого бюджета]     
            )     
        )     
        *100'     
     member Measures.[Софинансирование план]              
    as 'IIF      
        (
          [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
          LookUpCube              
          (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование План],
                 "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                 [Measures].[Софинансирование План],
                                 "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
         ),
		   LookUpCube              
          (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование План],
                 "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				"+memberToStr     
                 (
                   [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember     
                 )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                 [Measures].[Софинансирование План],
                                 "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+",
                                "+memberToStr     
                                 (
                                   [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember     
                                 )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
         )
	)/<%rub_multiplier%>'        
		
    member Measures.[Софинансирование факт]              
    as 'IIF      
        (
         [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
         LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование Факт],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        ),
		LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование Факт],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
                "+memberToStr     
                  (
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember     
                 )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+",
                                "+memberToStr     
                                 (
                                   [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember     
                                 )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        )
	)/<%rub_multiplier%>'   
    member Measures.[% исполнения софинансирования]     
    as 'IIF     
        (
            IsEmpty     
            (
                Measures.[Софинансирование план]     
            )or     
            (
                Measures.[Софинансирование план]     
            ) =0,
            null,
            (
                Measures.[Софинансирование факт] / Measures.[Софинансирование план]     
            )     
        )     
        *100'       
    set [КОСГУ]  
    as 'Filter  
        (
            (
                Descendants  
                (
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Статья],
                    Self
                )-[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Несопоставленные данные] -[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Неуказанная экономическая статья]-[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Итого расходов]  
            ),
            not  
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.DataMember  
            )and not IsEmpty  
            (
                Measures.[Финансирование на текущую дату]  
            )  
        )'   
    member  [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Всего ]     
    as 'null'     
    member Measures.[Код КОСГУ]     
    as ' [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("Код")'     
    member Measures.[Уровень]   
    as 'IIF   
        (
            IsEmpty ( Measures.[Код КОСГУ] ),
            1,
            3    
        )'   
	 member Measures.[Наименование ]
    as 'IIF
        (
            Measures.[Уровень]= 1,
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Member_name"),
            "ст." + [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("Код")
        )'
	  member Measures.[Уровень итого]
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Level_number")'
select
    {
	    
	    <%param%>
        Measures.[План краевого бюджета],
        Measures.[Финансирование за месяц],
        Measures.[Финансирование на текущую дату],
        Measures.[Остаток от плана],
        Measures.[% исполнения] ,
        Measures.[Софинансирование план],
        Measures.[Софинансирование факт],
        Measures.[% исполнения софинансирования],
		Measures.[Уровень итого],
		Measures.[Наименование ],
        Measures.[Код КОСГУ],
        Measures.[Уровень]
    } on columns,
    {
        Filter     
        (
            {
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация].[Приложение №1, финансирование через управление ЖКХ]     
                *     
                {
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                    [КОСГУ]     
                }     
            },
            not IsEmpty     
            (
                Measures.[Финансирование на текущую дату]     
            )     
        )     
    } on rows     
From [ФО_АС Бюджет_КазнИсп_Финансирование]

 ]]>
</query>

<query id="FO_0008_0001_grid_gasification_view2">
<![CDATA[
  with   
    member Measures.[СубКОСГУ]   
    as 'IIF   
        (
            Measures.[Количество],
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код"),
            null   
        )'   
    member Measures.[Количество]   
    as 'IIF   
        (
            StrToValue   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Код")   
            ) < 9999,
            false,
            true   
        )'   
    member Measures.[Целевая статья]   
    as 'IIF   
        (
            Measures.[Количество],
            Tail   
            (
                Filter   
                (
                    Descendants   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                        self   
                    ),
                    not   
                    (
                        [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember   
                    )  and   
                    (
                        not IsEmpty   
                        (
                            Measures.[Финансирование на текущую дату]   
                        )   
                    )   
                )   
            ).Item(0).Properties("Код"),
            null   
        )'   
    member Measures.[Генподрядчик]   
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Генподрядчик")'   
    member Measures.[Получатель бюджетных средств]   
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Получатель бюджетных средств")'   
   member Measures.[План краевого бюджета]              
    as 'IIF
	    (
		  [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
		  
		 LookUpCube              
         (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[План НПА],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
          ),
		  LookUpCube              
         (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[План НПА],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				"+memberToStr 
                  (
                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember
                 )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                [Measures].[План НПА],
                                "+memberToStr 
                                (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember 
                                )+",
								 "+memberToStr 
                                (
                                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember
                                )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
          )
	 )/<%rub_multiplier%>'   
    member Measures.[Финансирование на текущую дату]   
    as '   
        (
            [Measures].[Финансирование нараст итог],
             <%selected_period%>
        )/<%rub_multiplier%>'   
    member Measures.[Финансирование за месяц]   
    as 'sum   
        (
            {
              <%dates%>  
            },
            [Measures].[Финансирование]   
        )/<%rub_multiplier%>'   
    member Measures.[Остаток от плана]   
    as '   
        (
            Measures.[План краевого бюджета] - Measures.[Финансирование на текущую дату]   
        )'   
    member Measures.[% исполнения]   
    as 'IIF   
        (
            IsEmpty   
            (
                Measures.[План краевого бюджета]   
            ) or   
            (
                Measures.[План краевого бюджета]   
            ) = 0,
            null,
            (
                Measures.[Финансирование на текущую дату] / Measures.[План краевого бюджета]   
            )   
        )   
        *100'   
      member Measures.[Софинансирование план]              
    as 'IIF
	    (
		  [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
		  
		LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование План],
                 "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                 [Measures].[Софинансирование План],
                                 "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        ),
		LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование План],
                 "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
								 "+memberToStr 
                                (
                                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember
                                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                 [Measures].[Софинансирование План],
                                 "+memberToStr              
                                  (
                                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+",
								 "+memberToStr 
                                (
                                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember
                                )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        )
	)/<%rub_multiplier%>'        
		
    member Measures.[Софинансирование факт]              
    as 'IIF
	    (
		  [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
		 LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование Факт],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        ),
		 LookUpCube              
        (
            "[ФО_Финансирование КАИП]",
            "              
            (
                [Measures].[Софинансирование Факт],
                "+memberToStr              
                (
                    [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                )+",
								 "+memberToStr 
                                (
                                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember
                                )+",
				Tail 
                (
                    Filter 
                    (
                        [Период__Период].[Период__Период].[<%cur_year%>].[Полугодие 1].[Квартал 1].[январь].[1] : <%selected_period%>,
                       not IsEmpty  
                        (
                            (
                                  [Measures].[Софинансирование Факт],
                                  "+memberToStr              
                                  (
                                     [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember              
                                  )+",
								 "+memberToStr 
                                (
                                    [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember
                                )+"
                            ) 
                        )  
                    ) 
                ).Item(0) 
            )"              
        )
	)/<%rub_multiplier%>'      
    member Measures.[% исполнения софинансирования]   
    as 'IIF   
        (
            IsEmpty   
            (
                Measures.[Софинансирование план]   
            )or   
            (
                Measures.[Софинансирование план]   
            ) =0,
            null,
            (
                Measures.[Софинансирование факт] / Measures.[Софинансирование план]   
            )   
        )   
        *100'   
    set [районы]   
    as 'Filter   
        (
            Descendants   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                self   
            ),
            not  [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Parent.DataMember   
        )'   
    set [города]   
    as 'Filter   
        (
            Descendants   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                self   
            ),
            not  [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].Currentmember.Parent.DataMember   
        )'   
   member Measures.[Уровень] 
    as 'IIF 
        (
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
             1,
             3
        )'
    member Measures.[Порядковый номер]   
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Краткое наименование")'   
    member Measures.[Наименование]   
    as '  [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Member_Name")  '   
    set [Наименование программ, мероприятий и объектов]   
    as ' Filter   
        (
            Descendants   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация],
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[СубЭКР уровень 1],
                Self_and_after   
            ) - [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация].[Приложение №1, финансирование через управление ЖКХ],
            not   
            (
                [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember is [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Parent.DataMember   
            )  and (Measures.[Количество] )   
        )'   
    set [КОСГУ]   
    as 'Filter   
        (
            (
                Descendants   
                (
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Статья],
                    Self   
                )-[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Несопоставленные данные] -[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Неуказанная экономическая статья]-[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Итого расходов]   
            ),
            not   
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.DataMember   
            )and not IsEmpty   
            (
                Measures.[Финансирование на текущую дату]   
            )   
        )'   
    set [Инвестиционная программа]   
    as ' Filter   
        (
            Descendants   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Целевая статья 3],
                self   
            ),
            not   
            (
                [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember is [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Parent.DataMember   
            )and not IsEmpty   
            (
                Measures.[Финансирование на текущую дату]   
            )   
        )  '   
    member  [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Всего ]   
    as 'null'   
    member Measures.[Код КОСГУ]   
    as ' [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("Код")'   
	 member Measures.[Наименование ] 
    as 'IIF 
        (
            Measures.[Уровень]= 1,
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Member_name"),
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].CurrentMember.Properties("Member_name")  
        )' 
    member Measures.[Уровень итого]
    as '[СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].CurrentMember.Properties("Level_number")'
select
    {
	   
        <%param%>
        Measures.[План краевого бюджета],
        Measures.[Финансирование за месяц],
        Measures.[Финансирование на текущую дату],
        Measures.[Остаток от плана],
        Measures.[% исполнения] ,
        Measures.[Софинансирование план],
        Measures.[Софинансирование факт],
        Measures.[% исполнения софинансирования],
		Measures.[Уровень итого],
		Measures.[Наименование ],
        Measures.[Код КОСГУ],
        Measures.[Уровень]
    } on columns,
     Filter           
    (
        {
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация].[Всего софинансирование районам]                   
        }                   
        *                   
        {
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20]                 
        } +       
        {
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация].[Всего софинансирование районам].[Приложение №1, софинансирование районам]       
        }       
        *       
        {
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
            [Инвестиционная программа]       
        }  +       
        {
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация].[Всего софинансирование районам].[Приложение №2, софинансирование районам]       
        }       
        *       
        {
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20]       
        } +       
        {
            [СубЭКР__Сопоставимый].[СубЭКР__Сопоставимый].[Все субкоды ЭКР].[Капитальные вложения - всего].[Газификация].[Всего софинансирование районам].[Приложение №2, софинансирование районам].[Федеральная целевая программа "Социальное развитие села до 2013 года" (на условиях софинанси-рования), в том числе:]       
        }       
        *       
        {
            [КЦСР__Сопоставимый].[КЦСР__Сопоставимый].[Все целевые статьи расходов].[Региональные целевые программы].[Адресная инвестиционная программа_20],
            [Инвестиционная программа]       
        },
        not   IsEmpty  
        (
            Measures.[Финансирование на текущую дату]    
        )  or
        not   IsEmpty
        (
          	  Measures.[План краевого бюджета]
        )
    )   on rows   
From [ФО_АС Бюджет_КазнИсп_Финансирование]                    
 ]]>
	</query>
</root>