<?xml version="1.0" encoding="Windows-1251"?>
<root>
  
<query id="FO_0002_0011_01_date">
<![CDATA[
-- FO_0002_0011_01_date
with
    member [Measures].[ДанныеНа]
    as '<%period_dimension%>.CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                <%period_dimension%>.Members,
                not IsEmpty([Measures].[Факт])
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_МесОтч_Доходы]
]]>
</query>

<query id="FO_0002_0011_01_grid">
    <![CDATA[
-- FO_0002_0011_01_grid
With      
    member <%period_dimension%>.[<%period_last_year%> год]      
    as '<%period_dimension%>.[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]'
    member <%period_dimension%>.[<%period_year%> год]      
    as '<%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]'      
    member <%period_dimension%>.[<%period_year%> год к <%period_last_year%> году]
    as '<%period_dimension%>.[Данные всех периодов]'      
    member [Measures].[Отклонение (+,-)]      
    as '     
        (
            [Measures].[Факт],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) -      
        (
            [Measures].[Факт],
            <%period_dimension%>.[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        )'   
        
    member [Measures].[Факт прошлый год]  
    as ' 
        (
            [Measures].[Факт],
            ParallelPeriod 
            (
                [Период].[Период].[Год],
                1,
                <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
            ) 
        )'   
    member [Measures].[Темп роста]  
    as 'IIF
        (
            IsEmpty
            (
                [Measures].[Факт прошлый год]  
            ) or 
            (
                [Measures].[Факт прошлый год]  
            ) = 0,
            null,
            ([Measures].[Факт], <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>])
            / [Measures].[Факт прошлый год]  
        )' 

    member [Measures].[Рост (снижение)]      
    as ' [Measures].[Темп роста]  - 1'
    
    member [Measures].[Доля]
    as '
        (
            [Measures].[Факт],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
            <%incomes_kd_dimension%>.CurrentMember
        ) /
        (
            [Measures].[Факт],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
            <%incomes_kd_all_level%>.[<%incomes_kd_root_name%>]
        )'
    member [Measures].[Уровень]      
    as '<%incomes_kd_dimension%>.CurrentMember.Level.Name'    
    
    member [Уровни бюджета].[СКИФ].[Конс.бюдежт района ]
    as 'Aggregate({[Уровни бюджета].[СКИФ].[Все].[Бюджет района], [Уровни бюджета].[СКИФ].[Все].[Бюджет поселения]})'
    
    member [ТипДокумента].[СКИФ].[Тип документа] 
    as 'IIF  
        (
            IsEmpty 
            (
                (
                    [Measures].[Факт],
                    <%document_type%>
                ) 
            ),
            [ТипДокумента].[СКИФ].[Данные конс. отчета субъекта в разрезе городов, районов и поселений (5+6+7+8)],
            <%document_type%>
        )'    
Select
    {
        {
            {
                <%period_dimension%>.[<%period_last_year%> год],
                <%period_dimension%>.[<%period_year%> год]      
            }      
            *      
            {
                [Measures].[Годовые назначения],
                [Measures].[Факт],
                [Measures].[% выполнения годовых назначений]      
            }      
        } +      
        {
            {<%period_dimension%>.[<%period_year%> год к <%period_last_year%> году] }
            *
            {[Measures].[Отклонение (+,-)],
            [Measures].[Темп роста],
            [Measures].[Рост (снижение)]}
        }+
        {
            {
                <%period_dimension%>.[Данные всех периодов]      
            }      
            * {[Measures].[Доля], [Measures].[Уровень]}
        }      
    } on columns,
    Filter      
    (
        Descendants      
        (
            <%incomes_kd_all_level%>.[<%incomes_kd_root_name%>],
            <%incomes_kd_dimension%>.[Статья],
            SELF_AND_BEFORE      
        ),
        not      
        (
            <%incomes_kd_dimension%>.CurrentMember is <%incomes_kd_dimension%>.CurrentMember.Parent.DataMember or IsEmpty      
            (
                (
                    [Measures].[Факт],
                    <%period_dimension%>.[<%period_year%> год]
                ) 
            ) or IsEmpty     
            (
                (
                    [Measures].[Годовые назначения],
                    <%period_dimension%>.[<%period_year%> год]
                ) 
            ) or IsEmpty   
            (
                (
                    [Measures].[% выполнения годовых назначений],
                    <%period_dimension%>.[<%period_year%> год]
                ) 
            )   
        )   
    )  on rows   
From [ФО_МесОтч_Доходы]  
Where 
    (
        <%budget_SKIF_level%>,
        [ТипДокумента].[СКИФ].[Тип документа],
        <%selected_region%>
    )
  ]]>
</query>
  
  <query id="FO_0002_0011_01_chart1">
    <![CDATA[
-- FO_0002_0011_01_chart1
With          
    member <%incomes_kd_dimension%>.[Налог на прибыль организаций ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ].[Налог на прибыль организаций]'    
    member <%incomes_kd_dimension%>.[Налог на доходы физических лиц ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ].[Налог на доходы физических лиц]'    
    member <%incomes_kd_dimension%>.[Акцизы ]  
    as 'Aggregate  
        (
            {
                <%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ТОВАРЫ (РАБОТЫ, УСЛУГИ), РЕАЛИЗУЕМЫЕ НА ТЕРРИТОРИИ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Акцизы по подакцизным товарам (продукции), производимым на территории Российской Федерации],
                <%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ТОВАРЫ, ВВОЗИМЫЕ НА ТЕРРИТОРИЮ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Акцизы по подакцизным товарам (продукции), ввозимым на территорию Российской Федерации]
                
            }  
        )'    
    member <%incomes_kd_dimension%>.[Налог, взимаемый в связи с упрощенной системой ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА СОВОКУПНЫЙ ДОХОД].[Налог, взимаемый в связи с применением упрощенной системы налогообложения]'  
    member <%incomes_kd_dimension%>.[Единый налог на вмененный доход ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА СОВОКУПНЫЙ ДОХОД].[Единый налог на вмененный доход для отдельных видов деятельности]'  
    member <%incomes_kd_dimension%>.[Налог на имущество организаций ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ИМУЩЕСТВО].[Налог на имущество организаций]'  
    member <%incomes_kd_dimension%>.[Транспортный налог ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ИМУЩЕСТВО].[Транспортный налог]'  
    member <%incomes_kd_dimension%>.[Земельный налог ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ИМУЩЕСТВО].[Земельный налог]'  
    member <%incomes_kd_dimension%>.[Доходы от использования имущества ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[ДОХОДЫ ОТ ИСПОЛЬЗОВАНИЯ ИМУЩЕСТВА, НАХОДЯЩЕГОСЯ В ГОСУДАРСТВЕННОЙ И МУНИЦИПАЛЬНОЙ СОБСТВЕННОСТИ]'  
    member <%incomes_kd_dimension%>.[Плата за использование лесов ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ].[Плата за использование лесов]'  
    member <%incomes_kd_dimension%>.[Доходы от продажи имущества ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[ДОХОДЫ ОТ ПРОДАЖИ МАТЕРИАЛЬНЫХ И НЕМАТЕРИАЛЬНЫХ АКТИВОВ] '  
    member [Уровни бюджета].[СКИФ].[Конс.бюдежт района ]
    as 'Aggregate({[Уровни бюджета].[СКИФ].[Все].[Бюджет района], [Уровни бюджета].[СКИФ].[Все].[Бюджет поселения]})'   
    
   member [ТипДокумента].[СКИФ].[Тип документа] 
    as 'IIF  
        (
            IsEmpty 
            (
                (
                    [Measures].[Годовые назначения],
                    <%document_type%>
                ) 
            ),
            [ТипДокумента].[СКИФ].[Данные конс. отчета субъекта в разрезе городов, районов и поселений (5+6+7+8)],
            <%document_type%>
        )'     
Select
    {
        [Measures].[Годовые назначения],
        [Measures].[Факт]    
    } on columns,
    {
        <%incomes_kd_dimension%>.[Налог на прибыль организаций ],
        <%incomes_kd_dimension%>.[Налог на доходы физических лиц ],
        <%incomes_kd_dimension%>.[Акцизы ],
        <%incomes_kd_dimension%>.[Налог, взимаемый в связи с упрощенной системой ],
        <%incomes_kd_dimension%>.[Единый налог на вмененный доход ],
        <%incomes_kd_dimension%>.[Налог на имущество организаций ],
        <%incomes_kd_dimension%>.[Транспортный налог ],
        <%incomes_kd_dimension%>.[Земельный налог ],
        <%incomes_kd_dimension%>.[Доходы от использования имущества ],
        <%incomes_kd_dimension%>.[Доходы от продажи имущества ],
        <%incomes_kd_dimension%>.[Плата за использование лесов ]
    }  on rows  
From [ФО_МесОтч_Доходы]       
Where          
    (
        <%budget_SKIF_level%>,
        [ТипДокумента].[СКИФ].[Тип документа],
        <%selected_region%>,
        <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
    )          
  ]]>
      </query>

      <query id="FO_0002_0011_01_chart2">
        <![CDATA[
-- FO_0002_0011_01_chart2
With          
    member <%incomes_kd_dimension%>.[Налог на прибыль организаций ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ].[Налог на прибыль организаций]'    
    member <%incomes_kd_dimension%>.[Налог на доходы физических лиц ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ].[Налог на доходы физических лиц]'    
    member <%incomes_kd_dimension%>.[Акцизы ]  
    as 'Aggregate  
        (
            {
                <%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ТОВАРЫ (РАБОТЫ, УСЛУГИ), РЕАЛИЗУЕМЫЕ НА ТЕРРИТОРИИ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Акцизы по подакцизным товарам (продукции), производимым на территории Российской Федерации],
                <%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ТОВАРЫ, ВВОЗИМЫЕ НА ТЕРРИТОРИЮ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Акцизы по подакцизным товарам (продукции), ввозимым на территорию Российской Федерации]
                
            }  
        )'    
    member <%incomes_kd_dimension%>.[Налог, взимаемый в связи с упрощенной системой ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА СОВОКУПНЫЙ ДОХОД].[Налог, взимаемый в связи с применением упрощенной системы налогообложения]'  
    member <%incomes_kd_dimension%>.[Единый налог на вмененный доход ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА СОВОКУПНЫЙ ДОХОД].[Единый налог на вмененный доход для отдельных видов деятельности]'  
    member <%incomes_kd_dimension%>.[Налог на имущество организаций ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ИМУЩЕСТВО].[Налог на имущество организаций]'  
    member <%incomes_kd_dimension%>.[Транспортный налог ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ИМУЩЕСТВО].[Транспортный налог]'  
    member <%incomes_kd_dimension%>.[Земельный налог ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[НАЛОГИ НА ИМУЩЕСТВО].[Земельный налог]'  
    member <%incomes_kd_dimension%>.[Доходы от использования имущества ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[ДОХОДЫ ОТ ИСПОЛЬЗОВАНИЯ ИМУЩЕСТВА, НАХОДЯЩЕГОСЯ В ГОСУДАРСТВЕННОЙ И МУНИЦИПАЛЬНОЙ СОБСТВЕННОСТИ]'  
    member <%incomes_kd_dimension%>.[Плата за использование лесов ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ].[Плата за использование лесов]'  
    member <%incomes_kd_dimension%>.[Доходы от продажи имущества ]  
    as '<%incomes_kd_all_level%>.[<%incomes_kd_root_name%>].[ДОХОДЫ ОТ ПРОДАЖИ МАТЕРИАЛЬНЫХ И НЕМАТЕРИАЛЬНЫХ АКТИВОВ] ' 
    
    member <%period_dimension%>.[<%period_last_year%> год]
    as '<%period_dimension%>.[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]'
    
    member <%period_dimension%>.[<%period_year%> год]
    as '<%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]'
    member [Уровни бюджета].[СКИФ].[Конс.бюдежт района ]
    as 'Aggregate({[Уровни бюджета].[СКИФ].[Все].[Бюджет района], [Уровни бюджета].[СКИФ].[Все].[Бюджет поселения]})'
    
    member [ТипДокумента].[СКИФ].[Тип документа] 
    as 'IIF  
        (
            IsEmpty 
            (
                (
                    [Measures].[Годовые назначения],
                    <%document_type%>
                ) 
            ),
            [ТипДокумента].[СКИФ].[Данные конс. отчета субъекта в разрезе городов, районов и поселений (5+6+7+8)],
            <%document_type%>
        )' 
Select
   NON Empty {
        <%period_dimension%>.[<%period_last_year%> год],
        <%period_dimension%>.[<%period_year%> год]
    } on columns,
    Non Empty
    {
        <%incomes_kd_dimension%>.[Налог на прибыль организаций ],
        <%incomes_kd_dimension%>.[Налог на доходы физических лиц ],
        <%incomes_kd_dimension%>.[Акцизы ],
        <%incomes_kd_dimension%>.[Налог, взимаемый в связи с упрощенной системой ],
        <%incomes_kd_dimension%>.[Единый налог на вмененный доход ],
        <%incomes_kd_dimension%>.[Налог на имущество организаций ],
        <%incomes_kd_dimension%>.[Транспортный налог ],
        <%incomes_kd_dimension%>.[Земельный налог ],
        <%incomes_kd_dimension%>.[Доходы от использования имущества ],
        <%incomes_kd_dimension%>.[Доходы от продажи имущества ],
        <%incomes_kd_dimension%>.[Плата за использование лесов ]
    }  on rows  
From [ФО_МесОтч_Доходы]       
Where          
    (
        <%budget_SKIF_level%>,
        [ТипДокумента].[СКИФ].[Тип документа],
        <%selected_region%>,    
        [Measures].[% выполнения годовых назначений]
    )
  ]]>
</query>

</root>