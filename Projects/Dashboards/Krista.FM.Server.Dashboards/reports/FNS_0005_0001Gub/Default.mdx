<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FNS_0005_0001_date">
    <![CDATA[
-- FNS_0005_0001_date
with  
    member Measures.[ДанныеНа]  
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'  
select
    {Measures.[ДанныеНа]} on columns,
    Tail  
    (
        NonEmptyCrossjoin  
        (
            Filter  
            (
                OpeningPeriod  
                (
                    [Период__Период].[Период__Период].[Месяц],
                    [Период__Период].[Период__Период].[Данные всех периодов].[2008]  
                ) : ClosingPeriod  
                (
                    [Период__Период].[Период__Период].[Месяц],
                    [Период__Период].[Период__Период].[Данные всех периодов].[2012]  
                ),
                [Период__Период].[Период__Период].CurrentMember.Name = "Март" or
                [Период__Период].[Период__Период].CurrentMember.Name = "Июнь" or
                [Период__Период].[Период__Период].CurrentMember.Name = "Сентябрь" or
                [Период__Период].[Период__Период].CurrentMember.Name = "Декабрь"
            )  
        )  
    ) on rows  
from [ФНС_28н_с расщеплением]  
  ]]>
  </query>

  <query id="FNS_0005_0001_grid">
    <![CDATA[
-- FNS_0005_0001_grid
with                     
    set [Список ОКВЭД]                     
    as 'Filter                    
        (
            {[ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД]} +
            Descendants                    
            (
                [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД],
                [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Раздел],
                SELF                    
            ) - {[ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД].[Несопоставленные данные]},
            not                    
            (
                [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].CurrentMember is [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].CurrentMember.Parent.DataMember                    
            )                    
        )'                    
    member [Measures].[Удельный вес]                 
    as 'IIF                
        (
            IsEmpty                
            (
                (
                    [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД],
                    [Measures].[С начала года]             
                )              
            ) or                 
            (
                (
                    [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД],
                    [Measures].[С начала года]             
                )              
            ) = 0
            or ([ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].CurrentMember is [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД]),
            null,
            (
                [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].CurrentMember,
                [Measures].[С начала года]             
            ) /              
            (
                [ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].[Все коды ОКВЭД],
                [Measures].[С начала года]             
            )              
        )'            
    member [Measures].[Темп роста к прошлому году]          
    as 'IIF            
        (
            IsEmpty                   
            (
                (
                    ParallelPeriod       
                    (
                        [Период__Период].[Период__Период].[Год],
                        1,
                        [Период__Период].[Период__Период].CurrentMember                              
                    ),
                    [Measures].[С начала года]      
                )       
            ) or            
            (
                (
                    ParallelPeriod         
                    (
                        [Период__Период].[Период__Период].[Год],
                        1,
                        [Период__Период].[Период__Период].CurrentMember         
                    ),
                    [Measures].[С начала года]         
                )         
            ) = 0,
            null,
            (
                (
                    [Период__Период].[Период__Период].CurrentMember,
                    [Measures].[С начала года]            
                )            
            )/            
            (
                (
                    ParallelPeriod            
                    (
                        [Период__Период].[Период__Период].[Год],
                        1,
                        [Период__Период].[Период__Период].CurrentMember           
                    ),
                    [Measures].[С начала года]            
                )            
            )            
        )'       
    member [Measures].[Код]      
    as '[ОКВЭД__Сопоставимый].[ОКВЭД__Сопоставимый].CurrentMember.Properties("Код")'      
    
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налог на прибыль организаций ]
    as '[КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ].[Налог на прибыль организаций]'
    
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налог на доходы физических лиц ]
    as '[КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ].[Налог на доходы физических лиц]'
    
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налог на имущество организаций ]
    as '[КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ИМУЩЕСТВО].[Налог на имущество организаций]'
    
    member [Measures].[С начала года ]
    as '[Measures].[С начала года] / 1000'    
select
    {
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]   
            }      
            * {[Measures].[Код]}     
        } +     
        {
            {
                ParallelPeriod                 
                (
                    [Период__Период].[Период__Период].[Год],
                    2,
                    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]           
                )            
            }                 
            *               
            {
                [Measures].[С начала года ],
                [Measures].[Удельный вес]               
            }             
        } +             
        {
            {
                ParallelPeriod            
                (
                    [Период__Период].[Период__Период].[Год],
                    1,
                    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]            
                ),
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]          
            }             
            *             
            {
                [Measures].[С начала года ],
                [Measures].[Удельный вес],
                [Measures].[Темп роста к прошлому году]       
            }             
        }             
    } on columns,
    {
        Filter    
        (
            [Список ОКВЭД],
            not    
            (
                IsEmpty    
                (
                    (
                        ParallelPeriod     
                        (
                            [Период__Период].[Период__Период].[Год],
                            2,
                            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>] 
                        ),
                        [Measures].[С начала года]     
                    )     
                ) and IsEmpty   
                (
                    (
                        ParallelPeriod 
                        (
                            [Период__Период].[Период__Период].[Год],
                            1,
                            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]  
                        ),
                        [Measures].[С начала года]  
                    ) 
                ) and IsEmpty  
                (
                    (
                        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                        [Measures].[С начала года]    
                    )  
                )   
            )    
        )     
    } on rows     
from  [ФНС_28н_с расщеплением]                     
where                    
    (
        [ФНС_65н_Показатели].[Все].[Поступило - итого],
        [Уровни бюджетов].[Все].[Все уровни].[Конс.бюджет субъекта].[Конс.бюджет МО].[Бюджет ГО],
        [КД__Сопоставимый].[КД__Сопоставимый].[<%selected_kd%>]
    )                                   
  ]]>
  </query>

</root>