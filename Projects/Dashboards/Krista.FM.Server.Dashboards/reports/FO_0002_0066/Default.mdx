<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0002_0066_date">
    <![CDATA[
	-- FO_0002_0066_date
with  
    member [Measures].[ДанныеНа] 
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                [Период__Период].[Период__Период].Members,
                not IsEmpty
                (
                    [Measures].[Расход с возвратом]
                ) 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from   [ФО_АС Бюджет_КазнИсп_Факт расхода]  
	]]>
  </query>

  <query id="FO_0002_0066_grid">
    <![CDATA[
		-- FO_0002_0066_grid
WITH       
    Member [Из них кредиты]       
    as 'LookupCube      
        (
            "ФО_Показатели для планирования",
            "     
            (
                    [Показатели__Показатели для планирования Сопост].[Показатели__Показатели для планирования Сопост].[Все показатели].[Кредиты муниципальным образованиям на уголь в период отопительного сезона],
                    [Measures].[Факт],
					<%period_year%>,
                    " +  MemberToStr      
                    (
                        [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember      
                    ) + "       

            )"   
        )'       
    MEMBER [Блоки казначейства].[Блоки казначейства].[Slicer]                                
    AS ' Aggregate                                
        (
            {
                {
                    [Блоки казначейства].[Блоки казначейства].[Все блоки казначейства].[Приход средств (от прочих и восстановление расходов)] ,
                    [Блоки казначейства].[Блоки казначейства].[Все блоки казначейства].[Уход средств (через платежку)]                                
                }                                
            }                                
        )'                                
    MEMBER [Направление__Сопоставимый].[Направление__Сопоставимый].[Slicer]                                
    AS ' Aggregate                                
        (
            {
                {
                    [Направление__Сопоставимый].[Направление__Сопоставимый].[Все].[Газ] ,
                    [Направление__Сопоставимый].[Направление__Сопоставимый].[Все].[Прочие зима] ,
                    [Направление__Сопоставимый].[Направление__Сопоставимый].[Все].[Уголь]        
                }                                
            }                                
        )'                                
    SET [NonFilterColumnSet]                            
    AS '                           
        {
            Descendants                       
            (
                <%period_month%> ,
                [Период__Период].[Период__Период].[День],
                SELF                        
            ),
            <%period_month%>                     
        }'                       
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]  
    as 'aggregate([Гор. районы]+[Гор. окр])'   
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по районам] 
    as 'aggregate([Гор. районы])'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по городам]  
    as 'aggregate([Гор. окр])' 

    Set [Гор. районы]   
    as ' filter   
        (
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края].Children
            },
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and StrToValue   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("MEMBER_KEY")   
            ) > 0   
        )'   
    Set [Гор. окр]   
    as ' filter   
        (
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края].Children 
            },
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and StrToValue   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("MEMBER_KEY")   
            ) > 0   
        )'   
    SET [NonFilterRowSet]   
    AS '{[Гор. районы]}+ 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по районам]
        }+ {[Гор. окр]}+ 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по городам] 
        }+ 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]
        } '        
	MEMBER [Период__Период].[Период__Период].[Slicer]                      
    AS ' Aggregate   
        (
            filter    
            (
                {
					<%filter_period%>
				},
			StrToValue    
            (
                   [Период__Период].[Период__Период].CurrentMember.Properties("MEMBER_KEY")    
            ) > 0    
			)     
        )' 		
    member [ Расход с возвратом ]
    as '[Measures].[Расход с возвратом]/<%kd_level_un%>'    
    SET [Дни]                
    as '[NonFilterColumnSet]                 
        *                 
        {
          [ Расход с возвратом ]          
        } '                 
    SET [За период]                
    as '[Период__Период].[Период__Период].[Slicer]                 
        *                 
        {
           [ Расход с возвратом ]         
        }   '                 
    member Measures.[Расход с возвратом ]         
    as '        
        (
            [ Расход с возвратом ],
            [Направление__Сопоставимый].[Направление__Сопоставимый].[Все].[Уголь]         
        )'         
    SET [В том числе за уголь]                
    as ' [Период__Период].[Период__Период].[Slicer]               
        *                
        {
            [Measures].[Расход с возвратом ]        
        }  ' 
    member Measures.[Код] as' [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Краткое наименование")  + "_" '
    member Measures.[Наименование]
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name'		
    member [кредиты]
    as '[Из них кредиты]/<%kd_level_un%>'	
SELECT
    NON EMPTY                             
    {
        {
            
            {
                [Период__Период].[Период__Период].[Данные всех периодов] 
            } 
            *
            {
                Measures.[Код],
                Measures.[Наименование]     
            }
        },
        [Дни],
        [За период],
        [В том числе за уголь],
        [Период__Период].[Период__Период].[Slicer]
        *
        {[кредиты]}
    }   ON COLUMNS ,
    NON EMPTY                                
    {
        {
            [NonFilterRowSet]                           
        }                                
    }ON ROWS                                
FROM [ФО_АС Бюджет_КазнИсп_Факт расхода]                                
WHERE                                
    (
        [Блоки казначейства].[Блоки казначейства].[Slicer] ,
        [Направление__Сопоставимый].[Направление__Сопоставимый].[Slicer] ,
        [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[КОМИТЕТ АДМИНИСТРАЦИИ КРАЯ ПО ФИНАНСАМ].[КОМИТЕТ АДМИНИСТРАЦИИ КРАЯ ПО ФИНАНСАМ, НАЛОГОВОЙ И КРЕДИТНОЙ ПОЛИТИКЕ]                                
    )                                     
    ]]>
  </query>
	
  <query id="FO_0002_0066_grid_detail">
    <![CDATA[
		-- FO_0002_0066_grid_detail   
WITH    
    Member [Из них кредиты]    
    as 'LookupCube    
        (
            "ФО_Показатели для планирования",
            "    
            (
                [Показатели__Показатели для планирования Сопост].[Показатели__Показатели для планирования Сопост].[Все показатели].[Кредиты муниципальным образованиям на уголь в период отопительного сезона],
                [Measures].[Факт],
                <%period_year%>,
                " +  MemberToStr    
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember    
                ) + "     
            )"    
        )'    
    MEMBER [Блоки казначейства].[Блоки казначейства].[Slicer]    
    AS ' Aggregate    
        (
            {
                {
                    [Блоки казначейства].[Блоки казначейства].[Все блоки казначейства].[Приход средств (от прочих и восстановление расходов)] ,
                    [Блоки казначейства].[Блоки казначейства].[Все блоки казначейства].[Уход средств (через платежку)]    
                }    
            }    
        )'       
    SET [NonFilterColumnSet]    
    AS '    
        {
            Descendants    
            (
                <%period_month%> ,
                [Период__Период].[Период__Период].[День],
                SELF    
            ),
            <%period_month%>    
        }'    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]  
    as 'aggregate([Гор. районы]+[Гор. окр])'   
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по районам] 
    as 'aggregate([Гор. районы])'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по городам]  
    as 'aggregate([Гор. окр])' 

    Set [Гор. районы]   
    as ' filter   
        (
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края].Children
            },
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and StrToValue   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("MEMBER_KEY")   
            ) > 0   
        )'   
    Set [Гор. окр]   
    as ' filter   
        (
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края].Children 
            },
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and StrToValue   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("MEMBER_KEY")   
            ) > 0   
        )'   
    SET [NonFilterRowSet]   
    AS '{[Гор. районы]}+ 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по районам]
        }+ {[Гор. окр]}+ 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по городам] 
        }+ 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]
        } '
    MEMBER [Период__Период].[Период__Период].[Slicer]
    AS ' Aggregate    
        (
            filter    
            (
			{<%filter_period%>}
			,
			StrToValue    
            (
                   [Период__Период].[Период__Период].CurrentMember.Properties("MEMBER_KEY")    
            ) > 0    
            )    
        )' 		
    MEMBER [Период__Период].[Период__Период].[Slicer_]
    AS ' Aggregate
        (
            filter
            (
               {<%filter_period_analog%>}
			,
			StrToValue    
            (
                   [Период__Период].[Период__Период].CurrentMember.Properties("MEMBER_KEY")    
            ) > 0    
            )
        )' 	  
    member [ Расход с возвратом ]
    as '[Measures].[Расход с возвратом]/<%kd_level_un%>'            
    SET [Дни]    
    as '[NonFilterColumnSet]    
        *    
        {
            [ Расход с возвратом ]
        } '    
    SET [За период]    
    as '[Период__Период].[Период__Период].[Slicer]    
        *    
        {
            [ Расход с возвратом ]
        }   '    
    SET [За период аналогично общему виду] 
    as '[Период__Период].[Период__Период].[Slicer_]
        * 
        {
            [ Расход с возвратом ]
        }   ' 
    member Measures.[Расход с возвратом ]    
    as '    
        (
            [ Расход с возвратом ],
            [Направление__Сопоставимый].[Направление__Сопоставимый].[Все].[Уголь]    
        )'    
    SET [В том числе за уголь]    
    as ' [Период__Период].[Период__Период].[Slicer]    
        *    
        {
            [Measures].[Расход с возвратом ]    
        }  '    
    member Measures.[Код] as'[Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Краткое наименование") + "_" '   
    member Measures.[Наименование]    
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name'	
    member [кредиты]
    as '[Из них кредиты]/<%kd_level_un%>'	
SELECT
    NON EMPTY    
    {   {
            
            {
                [Период__Период].[Период__Период].[Данные всех периодов] 
            } 
            *
            {
                Measures.[Код],
                Measures.[Наименование]     
            }
        },
        [За период],
        [Дни],
        [За период аналогично общему виду],
        [Период__Период].[Период__Период].[Slicer]    
        * {[кредиты]}    
    }   ON COLUMNS ,
    NON EMPTY    
    {
        {
            [NonFilterRowSet] 
        }    
    }ON ROWS    
FROM [ФО_АС Бюджет_КазнИсп_Факт расхода]    
WHERE    
    (
        [Блоки казначейства].[Блоки казначейства].[Slicer] ,
        [Направление__Сопоставимый].[Направление__Сопоставимый].[Все].[Уголь],
        [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[КОМИТЕТ АДМИНИСТРАЦИИ КРАЯ ПО ФИНАНСАМ].[КОМИТЕТ АДМИНИСТРАЦИИ КРАЯ ПО ФИНАНСАМ, НАЛОГОВОЙ И КРЕДИТНОЙ ПОЛИТИКЕ]    
    )     
    ]]>
  </query>
</root>