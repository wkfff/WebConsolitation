<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="ORG_0001_0004_list_of_dates">
    <![CDATA[ -- name: ORG_0001_0004_list_of_dates
select
    {[Measures].[Цена]} on columns,
    {
        filter
        (
            [Период__День].[Период__День].[День].members,
            [Measures].[Цена] > 0
        )
    } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        --[Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - Департамент экономики],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Продовольственные товары],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена],
                [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ]
        --[Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]
    )
    ]]>
  </query>

  <query id = "ORG_0001_0004_unit">
    <![CDATA[ -- Query name: ORG_0001_0004_unit
with
    member [Measures].[Единица измерения]
    as '<%food%>.Properties("Единица измерения")'
select
    [Measures].[Единица измерения] on columns
from [ОРГАНИЗАЦИИ_Цены и тарифы]    
    ]]>
  </query>
  
  <query id = "ORG_0001_0004_data_part2">
    <![CDATA[ -- Query name: ORG_0001_0004_cities_data
with
    set [Города]
    as '
        {
           [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].children
        }'
select
    [Measures].[Средняя цена] on columns,
    non empty [Города] on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена],
        --[Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        <%date%>,
        <%food%>
    )
    ]]>
  </query>
  
  <query id = "ORG_0001_0004_data_part1">
    <![CDATA[ -- ORG_0001_0004_food_data
with
    set [Территории]
    as 'filter(except
        (
            {
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].Children
            },
            {
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].DataMember
            }
        ), [Measures].[Цена] > 0)'
    set [Организации]
    as 'filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0)'
select
    non empty [Организации] on columns,
    non empty [Территории] on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Measures].[Цена],
        --[Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - Департамент экономики],
        <%date%>,
        <%food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[<%price%>]
    )
    ]]>
  </query>
  <query id = "GridPartMax">
    <![CDATA[ 
with
    set [Территории]
    as 'filter(except
        (
            {
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].Children
            },
            {
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].DataMember
            }
        ), [Measures].[Цена] > 0)'
    set [Организации]
    as 'filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0)'
   member [Measures].[Цена ]
   as ' Aggregate(filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0),  [Measures].[Цена])/ filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0).count'
        

select
    non empty
    [Measures].[Цена ]
    on columns,
    non empty

Order(
    [Территории],
    [Measures].[Цена ],
    Desc)
    

     on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        <%date%>,
        <%food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[<%price%>]
    )
    ]]>
  </query>
  <query id = "GridPartMin">
    <![CDATA[ 
with
    set [Территории]
    as 'filter(except
        (
            {
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].Children
            },
            {
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].DataMember
            }
        ), [Measures].[Цена] > 0)'
    set [Организации]
    as 'filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0)'
   member [Measures].[Цена ]
   as ' Aggregate(filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0),  [Measures].[Цена])/ filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0).count'
        

select
    non empty
    [Measures].[Цена ]
    on columns,
    non empty

Order(
    [Территории],
    [Measures].[Цена ]
    )
    

     on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        --[Период__День].[Период__День].[Данные всех периодов].[2011].[Полугодие 2].[Квартал 3].[август].[22],
        --[Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Продовольственные товары].[Фрукты].[Яблоки],
        <%date%>,
        <%food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[<%price%>]
    )
    ]]>
  </query>

</root>