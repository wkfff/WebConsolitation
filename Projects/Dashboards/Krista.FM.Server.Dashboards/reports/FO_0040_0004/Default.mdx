<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0040_0004_date">
    <![CDATA[
-- FO_0040_0004_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Квартал],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Показатели__Оценка качества ОиОБП_Сопоставимый].[Показатели__Оценка качества ОиОБП_Сопоставимый].[Все показатели].[Рейтинг]
                    )
                ) and
                (
                    [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года"
                ) and
                (
                    [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала"
                ) and
                (
                    [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия"
                ) and
                (
                    [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца"
                ) and
                (
                    [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года"
                ) and
                (
                    [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
                )
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_Оценка качества ОиОБП_Показатели]
]]>
  </query>

  <query id="FO_0040_0004_chart">
    <![CDATA[
-- FO_0040_0004_chart
with       
    set [Список МО] 
    as 'Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF 
            ),
            not 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember 
            ) and 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО" 
            ) 
        )'      
    set [Кварталы] 
    as 'Filter 
        (
            Descendants 
            (
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
                [Период__Период].[Период__Период].[Квартал],
                SELF 
            ),
            not 
            (
                [Период__Период].[Период__Период].CurrentMember is [Период].[Период].CurrentMember.Parent.DataMember 
            ) and 
            (
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" 
            ) and 
            (
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" 
            ) and 
            (
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" 
            ) and 
            (
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" 
            ) and
            (
                [Период__Период].[Период__Период].CurrentMember.Properties("PKID") <= [Период__Период].[Период__Период].[Данные всех периодов].<%selected_period%>.Properties("PKID")
            )
        ) '
    set [Текущий и предыдущий кварталы] 
    as '
        {
            [Период__Период].[Период__Период].[Данные всех периодов].<%selected_prev_period%>,
            [Период__Период].[Период__Период].[Данные всех периодов].<%selected_period%>
        }'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Год]
    as '[Период__Период].[Период__Период].CurrentMember.Parent.Parent.Name'        
select
    { {[Районы__Сопоставимый].[Районы__Сопоставимый].[Год]} + [Список МО] } on columns,
    { [<%period_set%>] } on rows       
from  [ФО_Оценка качества ОиОБП_Показатели]       
where
    (
        [Measures].[Оценка показателя],
        <%selected_indicator%>
    )          
  ]]>
</query>

  <query id="FO_0040_0004_indicatorDescription">
    <![CDATA[
-- FO_0040_0004_indicatorDescription
With
    member [Measures].[Наименование]
    as '<%selected_indicator%>.Properties("Наименование")'
    member [Measures].[Формат]
    as '<%selected_indicator%>.Properties("Единицы измерения")'
Select
    {
       [Measures].[Наименование],
       [Measures].[Формат]
    } on columns
From [ФО_Оценка качества ОиОБП_Показатели]
  ]]>
  </query>

</root>