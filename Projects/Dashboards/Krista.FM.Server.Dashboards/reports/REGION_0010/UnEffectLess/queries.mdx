<?xml version="1.0" encoding="utf-8"?>
<root>

  <query id = "AllScope">
    <![CDATA[--Scope
with
    member [UniqueNameYear]
    as '[ОМСУ__Структура оценки].[ОМСУ__Структура оценки].currentmember.UniqueName'
    member [UniqueNameProvai]
    as '[Источники данных].[Источники данных].currentmember.UniqueName'

select
    non empty
    {
    Filter(
[ОМСУ__Структура оценки].[ОМСУ__Структура оценки].[Все уровни].children
        , [Measures].[Значение] > 0)
    }on rows ,
    non empty
    {
    [UniqueNameProvai],
        [UniqueNameYear]
    }   on columns
FROM  [РЕГИОН_Результаты оценки ОМСУ] ]]>
  </query>

  <query id = "AllYear">
    <![CDATA[--Period
with
    member [UniqueNameYear]
    as '[Период__Год Квартал Месяц].currentmember.UniqueName'
    member [UniqueNameProvai]
    as '[Источники данных].[Источники данных].currentmember.UniqueName'
    
member [UniqueName]
    as '[Период__Год Квартал Месяц].currentmember.UniqueName'
select
    non empty
    {
    Filter(
        [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год].members
        , [ОМСУ__Структура оценки].[ОМСУ__Структура оценки].[Все уровни].[Оценка эффективности деятельности ОМСУ] > 0)
    }on rows ,
    non empty
    {
    [UniqueName],
    [UniqueNameProvai],
        [UniqueNameYear]--,        [Источники данных].[Источники данных].[Все источники данных].children
    }   on columns
FROM  [РЕГИОН_Результаты оценки ОМСУ]--[РЕГИОН_Оценка ОМСУ] ]]>
 </query>
  <query id = "Grid">
    <![CDATA[with     
    member [UniqueNameYear]     
    as '[Период__Год Квартал Месяц].currentmember.UniqueName'     
    member [UniqueNameProvai]     
    as '[Источники данных].[Источники данных].currentmember.UniqueName'     
    member [Районы__Анализ].[Районы__Анализ].[CurrentSphere]     
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Сфера неэффективных расходов")'      
    member [Районы__Анализ].[Районы__Анализ].[Unit] 
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Единица измерения")'  
    member [Районы__Анализ].[Районы__Анализ].[NumberOfStruct] 
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Номер в структуре")'
    member [Районы__Анализ].[Районы__Анализ].[CountZero]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Разрядность")'
    member [Районы__Анализ].[Районы__Анализ].[dm]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.is_DataMember'
    member [CurrentPeriiod]    
    as 'str([Measures].[Значение отчётного года])+"str"'    
    member [PrevPeriiod]    
    as 'str([Measures].[Значение предыдущего года])+"str"'   
    set [test]
    as '{<%FilterGrid%>}'
select
    non empty     
    {
        Crossjoin  
        (
            [test],
            {
                <%CommentToYear%>[PrevPeriiod],
                [CurrentPeriiod]   
            }     
        )  
    }   on columns ,
    non empty     
    {
        [Районы__Анализ].[Районы__Анализ].[CountZero],        
        [Районы__Анализ].[Районы__Анализ].[Unit],        
        <%CommentToZdrav%>Except(
        filter(
        Except({[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].children+[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].children},{[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].DATAMEMBER,[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].DATAMEMBER}),
         Aggregate([test],[Measures].[Значение отчётного года])>0)
        <%CommentToZdrav%>,[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Ханты-Мансийский автономный округ Югра].[г.Ханты-Мансийск])
        --[Районы__Анализ].[Районы__Анализ].[NumberOfStruct],
        --[Районы__Анализ].[Районы__Анализ].[CurrentSphere],
    }on rows     
FROM [РЕГИОН_Оценка ОМСУ]     
where 
    (
     <%Scope%>
          ,
     [ОМСУ__Состояние данных].[ОМСУ__Состояние данных].[Все состояния].[Утвержден]
    ) 
]]>
  </query>
  
  <query id = "Chart">
    <![CDATA[with
    member [UniqueNameYear]
    as '[Период__Год Квартал Месяц].currentmember.UniqueName'
    member [UniqueNameProvai]
    as '[Источники данных].[Источники данных].currentmember.UniqueName'
    member [Районы__Анализ].[Районы__Анализ].[CurrentSphere]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Сфера неэффективных расходов")'
    member [Районы__Анализ].[Районы__Анализ].[Unit]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Единица измерения")'
    member [Районы__Анализ].[Районы__Анализ].[NumberOfStruct]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Номер в структуре")'
    member [Районы__Анализ].[Районы__Анализ].[CountZero]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Разрядность")'
    member [ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[11]
    as '[Районы__Анализ].[Районы__Анализ].currentmember.Properties("Тип территорий")'

    member [2010]
    as '[Measures].[Значение отчётного года]'
    member [2009]
    as '[Measures].[Значение предыдущего года]'

    member [del]
    as '100 - [Measures].[Значение отчётного года]'
    member [del2]
    as '100 - [Measures].[Значение предыдущего года]'

select
    non empty
    {
        Crossjoin
        (
            Filter
            (
                {
                filter([ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].members,[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010])
                }
                 ,
                  not IsEmpty( [Measures].[Значение отчётного года]) and
                [Районы__Анализ].[Районы__Анализ].[NumberOfStruct] = "1"
            ),
            {
                <%CommentToYear%>[2009],
                [2010],
<%CommentToYear%>[del2],
[del]

            }
        )
    }   on columns ,
    non empty
    {
Filter(
        Except({[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].children+[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].children},{[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].DATAMEMBER,[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].DATAMEMBER}),
         [ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[11] <> "1МР")
         

    }on rows
FROM [РЕГИОН_Оценка ОМСУ]
where
    (
     <%Scope%>
     ,
     [ОМСУ__Состояние данных].[ОМСУ__Состояние данных].[Все состояния].[Утвержден]
    )
]]>
  </query>

  <query id = "Chart2">
    <![CDATA[with
    member [UniqueNameYear]
    as '[Период__Год Квартал Месяц].currentmember.UniqueName'
    member [UniqueNameProvai]
    as '[Источники данных].[Источники данных].currentmember.UniqueName'
    member [Районы__Анализ].[Районы__Анализ].[CurrentSphere]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Сфера неэффективных расходов")'
    member [Районы__Анализ].[Районы__Анализ].[Unit]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Единица измерения")'
    member [Районы__Анализ].[Районы__Анализ].[NumberOfStruct]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Номер в структуре")'
    member [Районы__Анализ].[Районы__Анализ].[CountZero]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Разрядность")'
    member [ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[11]
    as '[Районы__Анализ].[Районы__Анализ].currentmember.Properties("Тип территорий")'

    member [2010]
    as '[Measures].[Значение отчётного года]'
    member [2009]
    as '[Measures].[Значение предыдущего года]'

    member [del]
    as '100 - [Measures].[Значение отчётного года]'
    member [del2]
    as '100 - [Measures].[Значение предыдущего года]'

select
    non empty
    {
        Crossjoin
        (
            Filter
            (
                {
                filter([ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].members,[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010])
                
                }
                 ,
                [Measures].[Значение отчётного года] > 0 and
                <%FilterChart2%>
            ),
            {
                <%CommentToYear%>[2009],
                [2010]

            }
        )
    }   on columns ,
    non empty
    {
Filter(
        Except({[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].children+[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].children},{[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].DATAMEMBER,[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].DATAMEMBER}),
         [ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[11] = "МР")

    }on rows
FROM [РЕГИОН_Оценка ОМСУ]
where
    (
     <%Scope%>--[ОМСУ__Сфера неэффективных расходов].[ОМСУ__Сфера неэффективных расходов].[Все сферы].[Здравоохранение]
     ,
     [ОМСУ__Состояние данных].[ОМСУ__Состояние данных].[Все состояния].[Утвержден]
    )
]]>
  </query>

  <query id = "MAP">
    <![CDATA[with
    member [UniqueNameYear]
    as '[Период__Год Квартал Месяц].currentmember.UniqueName'
    member [UniqueNameProvai]
    as '[Источники данных].[Источники данных].currentmember.UniqueName'
    member [Районы__Анализ].[Районы__Анализ].[CurrentSphere]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Сфера неэффективных расходов")'
    member [Районы__Анализ].[Районы__Анализ].[Unit]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Единица измерения")'
    member [Районы__Анализ].[Районы__Анализ].[NumberOfStruct]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Номер в структуре")'
    member [Районы__Анализ].[Районы__Анализ].[CountZero]
    as '[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.Properties("Разрядность")'
    member [ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[11]
    as '[Районы__Анализ].[Районы__Анализ].currentmember.Properties("Тип территорий")'
    member [2010]
    as '[Measures].[Значение отчётного года]'
    member [2009]
    as '[Measures].[Значение предыдущего года]'
    member [del]
    as '100 - [Measures].[Значение отчётного года]'
    member [del2]
    as '100 - [Measures].[Значение предыдущего года]'
select
    non empty
    {
         Filter
        (

                filter([ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].members,[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010]or[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].currentmember.parent.parent.parent.parent is[ОМСУ__Показатели ОМСУ].[ОМСУ__Показатели ОМСУ].[Данные всех источников].[РЕГИОН\0016 Оценка ОМСУ - 2010])
            ,
                              not IsEmpty( [Measures].[Значение отчётного года]) and
            (
                [Районы__Анализ].[Районы__Анализ].[NumberOfStruct] = "1"
            )
        )
    }   on columns ,
    non empty
    {

            Except({[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].children+[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].children},{[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Муниципальные районы].DATAMEMBER,[Районы__Анализ].[Районы__Анализ].[Данные всех источников].[ФО\0006 Анализ данных - 2010].[Консолидированный бюджет - Сахалинская область].[Городские округа].DATAMEMBER})


    }on rows
FROM [РЕГИОН_Оценка ОМСУ]
where
    (
        <%Scope%>,--[ОМСУ__Сфера неэффективных расходов].[ОМСУ__Сфера неэффективных расходов].[Все сферы].[Здравоохранение] ,
        [ОМСУ__Состояние данных].[ОМСУ__Состояние данных].[Все состояния].[Утвержден],
        [2010]
    ) 
]]>
  </query>
  
    <query id = "C2">
    <![CDATA[with
    member [ОМСУ__Показатели].[ОМСУ__Показатели].[1]
    as 'null' --member
    member [ОМСУ__Показатели].[ОМСУ__Показатели].[pri6]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Properties("Краткое наименование")'
    member [ОМСУ__Показатели].[ОМСУ__Показатели].[pri5]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Properties("Код объекта карты")'
select
    non empty
    {/*
filter(*/            
--[Территории__Сопоставимый].[Территории__Сопоставимый].[РФ].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].children
Except(
[Территории__Сопоставимый].[Территории__Сопоставимый].[РФ].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].children,
[Территории__Сопоставимый].[Территории__Сопоставимый].[РФ].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].DataMember)
/*,)<%Filter%>*/
    }on <%BC_R%>,
    non empty{
    [ОМСУ__Показатели].[ОМСУ__Показатели].[pri6],
    <%FieldGrid%>
/*[ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Уровни].[Оценка результативности в сфере «Образования»],
[ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Уровни].[Оценка эффективности расходования бюджетных средств органами местного самоуправления в сфере "Образование"] ,
[ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Уровни].[Оценка населением результатов деятельности ОМСУ в сфере "Образование"],
[ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Уровни].[Уровень эффективности деятельности ОМСУ в сфере "Образование"]*/
    } on <%BC_C%>
from [МО_Оценка ОМСУ_Характеристика деятельности]
where
(
	[Период__Год].[Период__Год].[Год].[<%year_%>]
)
]]>
  </query>
  <query id = "structChart">
    <![CDATA[with
member
[ОМСУ__Показатели].[ОМСУ__Показатели].[null] as 'null'
member [ОМСУ__Показатели].[ОМСУ__Показатели].[pri6]
as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Properties("Краткое наименование")'
member [ОМСУ__Показатели].[ОМСУ__Показатели].[Эфективные]
as '([ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Показатели докладов глав муниципальных образований].[Общий объем расходов бюджета муниципального образования на жилищно-коммунальное хозяйство] - [ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Показатели эффективности расходования бюджетных средств ОМСУ Объем неэффективных расходов в сфере жилищно-коммунального комплекса])'
member [ОМСУ__Показатели].[ОМСУ__Показатели].[Неэфективные]
as '([ОМСУ__Показатели].[ОМСУ__Показатели].[Всего].[Показатели эффективности расходования бюджетных средств ОМСУ].[Объем неэффективных расходов в сфере жилищно-коммунального комплекса])'

select
 non empty {
  Order
        (
<%RegionBaseDimension%>.children,
<%FieldChart%> 
)
--[Территории__Сопоставимый].[Территории__Сопоставимый].[РФ].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].children

    } on columns,
  --non empty
 non empty {
[ОМСУ__Показатели].[ОМСУ__Показатели].[pri6],
[ОМСУ__Показатели].[ОМСУ__Показатели].[Эфективные],
[ОМСУ__Показатели].[ОМСУ__Показатели].[Неэфективные]

    }on rows
from [МО_Оценка ОМСУ_Характеристика деятельности]
where
(
	[Период__Год].[Период__Год].[Год].[2009]
	
)
]]>
  </query>
</root>