<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0012_lastDate">
    <![CDATA[
-- FO_0035_0012_lastDate
with   
    member Measures.[ДанныеНа]    
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'    
select
    {Measures.[ДанныеНа]} on columns,
    Tail    
    (
        NonEmptyCrossJoin
        (Filter
        (
            Descendants
            (
                [Период__Период].[Период__Период].[Данные всех периодов],
                [Период__Период].[Период__Период].[Месяц],
                SELF
            ),
            (
                [Период__Период].[Период__Период].CurrentMember.Properties("MEMBER_KEY")
            ) > 0
        ) )
    )  on rows 
from [ФО_Информация по объектам]
  ]]>
  </query>

  <query id="FO_0035_0012_grid">
    <![CDATA[
-- FO_0035_0012_grid
with     
    set [Мероприятия]     
    as 'Filter     
        (
            Descendants     
            (
                [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Все].[ФО Исполнение кассового плана - 2012],
                [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Мероприятие],
                SELF     
            ),
            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember.Properties("Направление") = "Капитальное строительство"     
        )'    
    member [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ]
    as 'Aggregate({[Мероприятия]})'          
    member [Measures].[Год начала строительства]   
    as '[Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember.Properties("Год начала строительства")'   
    member [Measures].[Год планируемого ввода]   
    as '[Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember.Properties("Год планируемого ввода")'    
    member [Measures].[Сметная стоимость в ценах ]     
    as 'IIF
        (
           [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
           Sum([Мероприятия], [Measures].[Сметная стоимость в ценах ]),
           LookupCube     
              (
                  "[ФО_Информация по объектам]",
                  "Aggregate  
                 (
                    Filter  
                    (
                        Descendants  
                        (
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                            SELF  
                        ),
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> ""Собственный бюджет субъекта""
                    ),     
                    (
                        [Measures].[Сметная стоимость на начало года],
                        " + MemberToStr     
                        (
                            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember     
                        ) + ",
                        " + MemberToStr     
                        (
                            [Период__Период].[Период__Период].CurrentMember     
                        ) + "     
                    )
                  )"     
              ) / 1000 
        )  '     
    member [Measures].[Выполненный объём ]     
    as 'IIF
        (
           [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
           Sum([Мероприятия],  [Measures].[Выполненный объём ]),
           LookupCube     
          (
              "[ФО_Информация по объектам]",
              "Aggregate  
                (
                    Filter  
                    (
                        Descendants  
                        (
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                            SELF  
                        ),
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> ""Собственный бюджет субъекта""
                    ),     
                    (
                        [Measures].[Выполненный объем на начало года],
                        " + MemberToStr     
                        (
                            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember     
                        ) + ",
                        " + MemberToStr     
                        (
                            [Период__Период].[Период__Период].CurrentMember     
                        ) + "     
                    )
                )"     
          ) / 1000  
        )   '     
    member [Measures].[Остатки сметной стоимости в ценах ]     
    as 'IIF
        (
           [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
           Sum([Мероприятия],  [Measures].[Остатки сметной стоимости в ценах ]),
           LookupCube     
          (
              "[ФО_Информация по объектам]",
              "Aggregate  
                (
                    Filter  
                    (
                        Descendants  
                        (
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                            SELF  
                        ),
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> ""Собственный бюджет субъекта""
                    ),     
                    (
                        [Measures].[Остаток сметной стоимости на начало года],
                        " + MemberToStr     
                        (
                            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember     
                        ) + ",
                        " + MemberToStr     
                        (
                            [Период__Период].[Период__Период].CurrentMember     
                        ) + "     
                    )
                ) "     
          ) / 1000  
        )  '     
    member [Measures].[Кредиторская (-), дебиторская задолженность ]     
    as 'IIF
        (
           [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
           Sum([Мероприятия], [Measures].[Кредиторская (-), дебиторская задолженность ]),
           LookupCube     
          (
              "[ФО_Информация по объектам]",
              "Aggregate  
                (
                    Filter  
                    (
                        Descendants  
                        (
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                            SELF  
                        ),
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> ""Собственный бюджет субъекта""
                    ),     
                    (
                        [Measures].[Задолженность на начало года],
                        " + MemberToStr     
                        (
                            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember     
                        ) + ",
                        " + MemberToStr     
                        (
                            [Период__Период].[Период__Период].CurrentMember     
                        ) + "     
                    )
                )"     
          ) / 1000  
        )  '     
    member [Measures].[Объём выполненных работ по отчёту на дату]     
    as 'IIF
        (
           [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
           Sum([Мероприятия], [Measures].[Объём выполненных работ по отчёту на дату]),
           LookupCube     
          (
              "[ФО_Информация по объектам]",
              "Aggregate  
                (
                    Filter  
                    (
                        Descendants  
                        (
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                            SELF  
                        ),
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> ""Собственный бюджет субъекта""
                    ),     
                    (
                        [Measures].[Выполненный объем на дату],
                        " + MemberToStr     
                        (
                            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember     
                        ) + ",
                        " + MemberToStr     
                        (
                            [Период__Период].[Период__Период].CurrentMember     
                        ) + "     
                    )
                ) "     
          ) / 1000  
        )  '      
    member [Measures].[Областной бюджет на текущий год]   
    as '   
        (
            [Measures].[Бюджет ТФГ],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта]   
        ) / 1000'    
    member [Measures].[Объем выполненных работ по отчету на дату]   
    as 'IIF
        (
           [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
           Sum([Мероприятия], [Measures].[Объем выполненных работ по отчету на дату]),
           LookupCube   
          (
              "[ФО_Информация по объектам]",
              "Aggregate  
                (
                    Filter  
                    (
                        Descendants  
                        (
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                            [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                            SELF  
                        ),
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> ""Собственный бюджет субъекта""
                    ),   
                    (
                        [Measures].[Выполненный объем на дату],
                        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                        " + MemberToStr   
                        (
                            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember   
                        ) + "   
                    )
                )"   
          ) / 1000 
        )  '    
    member [Measures].[Кассовое исполнение на текущую дату за счет средств областного бюджета]   
    as '   
        (
            [Measures].[Факт],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>] 
        ) / 1000'    
    member [Measures].[Остаток годовых ассигнований областного бюджета текущего года]   
    as '[Measures].[Областной бюджет на текущий год] - [Measures].[Кассовое исполнение на текущую дату за счет средств областного бюджета]'     
    member [Measures].[Федеральный бюджет Плановые назначения]   
    as '   
        (
            [Measures].[Бюджет ТФГ],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Фед.бюджет],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'   
    member [Measures].[Федеральный бюджет Кассовое исполнение]   
    as '   
        (
            [Measures].[Факт],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Фед.бюджет],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'    
    member [Measures].[Местный бюджет Плановые назначения]   
    as '   
        (
            [Measures].[Бюджет ТФГ],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'   
    member [Measures].[Местный бюджет Кассовое исполнение]   
    as '   
        (
            [Measures].[Факт],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'    
    member [Measures].[Ожидаемый остаток сметной стоимости на конец года]   
    as '[Measures].[Остатки сметной стоимости в ценах ] - [Measures].[Областной бюджет на текущий год] - [Measures].[Федеральный бюджет Плановые назначения] - [Measures].[Местный бюджет Плановые назначения]'     
    member [Measures].[Областной бюджет плановый год]   
    as '   
        (
            [Measures].[Бюджет ОФГ],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта]
        ) / 1000'   
    member [Measures].[Федеральный бюджет плановый год]   
    as '   
        (
            [Measures].[Бюджет ОФГ],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Фед.бюджет]
        ) / 1000'   
    member [Measures].[Местный бюджет плановый год]   
    as '   
        (
            [Measures].[Бюджет ОФГ],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО]
        ) / 1000'    
    member [Measures].[Областной бюджет второй плановый год]   
    as '   
        (
            [Measures].[Бюджет второго года планового периода],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта]
        ) / 1000'   
    member [Measures].[Федеральный бюджет второй плановый год]   
    as '   
        (
            [Measures].[Бюджет второго года планового периода],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Фед.бюджет]
        ) / 1000'   
    member [Measures].[Местный бюджет второй плановый год]   
    as '   
        (
            [Measures].[Бюджет второго года планового периода],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО]
        ) / 1000'    
    member [Measures].[Ожидаемый остаток сметной стоимости на конец второго планового года]  
    as ' [Measures].[Ожидаемый остаток сметной стоимости на конец года] - 
         [Measures].[Областной бюджет плановый год] - 
         [Measures].[Федеральный бюджет плановый год] - 
         [Measures].[Местный бюджет плановый год]- 
         [Measures].[Областной бюджет второй плановый год]- 
         [Measures].[Федеральный бюджет второй плановый год]- 
         [Measures].[Местный бюджет второй плановый год]'            
    member [Measures].[Уровень]  
    as 'IIF
        (
            [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].CurrentMember is [Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ],
            0,
            1
        )'            
    member [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Фильтр по ФО_ИспКасПлан]   
    as 'Aggregate  
        (
            {
                Filter  
                (
                    Descendants  
                    (
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Все],
                        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Районы],
                        SELF  
                    ),
                    [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].CurrentMember.Name <> "Собственный бюджет субъекта"  
                )  
            }  
        )'     
select
    {
        [Measures].[Год начала строительства],
        [Measures].[Год планируемого ввода],
        [Measures].[Сметная стоимость в ценах ],
        [Measures].[Выполненный объём ],
        [Measures].[Остатки сметной стоимости в ценах ],
        [Measures].[Кредиторская (-), дебиторская задолженность ],
        [Measures].[Областной бюджет на текущий год],
        [Measures].[Объем выполненных работ по отчету на дату],
        [Measures].[Кассовое исполнение на текущую дату за счет средств областного бюджета],
        [Measures].[Остаток годовых ассигнований областного бюджета текущего года],
        [Measures].[Федеральный бюджет Плановые назначения],
        [Measures].[Федеральный бюджет Кассовое исполнение],
        [Measures].[Местный бюджет Плановые назначения],
        [Measures].[Местный бюджет Кассовое исполнение],
        [Measures].[Ожидаемый остаток сметной стоимости на конец года],
        [Measures].[Областной бюджет плановый год],
        [Measures].[Федеральный бюджет плановый год],
        [Measures].[Местный бюджет плановый год],
        [Measures].[Областной бюджет второй плановый год],
        [Measures].[Федеральный бюджет второй плановый год],
        [Measures].[Местный бюджет второй плановый год],
        [Measures].[Ожидаемый остаток сметной стоимости на конец второго планового года],
        [Measures].[Уровень]
    }  on columns,
    { [Мероприятия] + {[Мероприятия__ФО_ИспКасПлан].[Мероприятия__ФО_ИспКасПлан].[Итого ]} } on rows     
from [ФО_Финансирование по объектам] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Районы__ФО_ИспКасПлан].[Районы__ФО_ИспКасПлан].[Фильтр по ФО_ИспКасПлан]   
    ) 
  ]]>
  </query>

</root>