<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0063_grid">
    <![CDATA[
WITH                      
    MEMBER [Measures].[Доход]                      
    AS '       LookupCube 
        (
            "ФО_МесОтч_Доходы" ,
            "                     
            (
                AGGREGATE                     
                (
                    {
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[ДОХОДЫ ОТ ПРИНОСЯЩЕЙ ДОХОД ДЕЯТЕЛЬНОСТИ]                     
                    },
                    (
                        [Measures].[Факт],
                       [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[<%level_budget%>],
                        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Данные конс. отчета субъекта в разрезе городов, районов и поселений (5+6+7+8)],
                        " +  MemberToStr                
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember                
                        ) + ",
                        " +  MemberToStr              
                        (
                            [Период__Период].[Период__Период].CurrentMember              
                        ) + "              
                    )              
                )                     
            )"                      
        )    ' 
    SET [NonFilterColumnSet]                   
    AS ' {
          [Период__Период].[Период__Период].[Данные всех периодов].[<%period_prev_year%>].[Полугодие 2].[Квартал 4].[Декабрь],
          [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_halfyear%>].[<%period_quater%>].[<%period_month%>]
         } 
       '                   
    SET [NonFilterRowSet]                    
    AS ' Filter                    
        (
            Descendants                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF                    
            ),
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and not isEmpty ( [Measures].[Факт] )                    
        )'                    
    member [Measures].[Факт ]            
    as '[Measures].[Факт]/<%rubMultiplier%>'            
    member [Measures].[Доход ]           
    as '[Measures].[Доход]/<%rubMultiplier%>'          
    member [Measures].[Исполнение]          
    as 'IIF         
        (
            (
                IsEmpty([Measures].[Факт]) OR IsEmpty([Measures].[Доход])       
            ) OR ([Measures].[Доход] = 0),
            0,
            [Measures].[Факт ]/[Measures].[Доход ]       
        )',
        format_string = '0.0000'      
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]      
    as 'aggregate([NonFilterRowSet])'      
SELECT
    {
        {
            { [Measures].[Факт ],[Measures].[Доход ],[Measures].[Исполнение]} *[NonFilterColumnSet]
            
        }
    }ON COLUMNS ,
    NON EMPTY       
    {
        {
            [NonFilterRowSet],
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого],
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)].[Новосибирская Область (Бюджет Субъекта)]       
        }       
    } ON ROWS      
FROM [ФО_МесОтч_Дефицит Профицит]                      
WHERE                      
    (
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[<%level_budget%>] ,
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Данные конс. отчета субъекта в разрезе городов, районов и поселений (5+6+7+8)]                      
    )                                   
	]]>
  </query>

  <query id="FO_0002_0063_date">
    <![CDATA[
with 
    MEMBER [КД__Сопоставимый].[КД__Сопоставимый].[Slicer] 
    AS ' Aggregate 
        (
            {
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[ДОХОДЫ ОТ ПРИНОСЯЩЕЙ ДОХОД ДЕЯТЕЛЬНОСТИ] 
            } 
        )' 
    member [Measures].[ДанныеНа] 
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                Descendants 
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Месяц],
                    SELF 
                ),
                not IsEmpty   ( [Measures].[Факт] ) 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from [ФО_МесОтч_Доходы]
where 
    (
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Данные конс. отчета субъекта в разрезе городов, районов и поселений (5+6+7+8)],
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет субъекта],
        [КД__Сопоставимый].[КД__Сопоставимый].[Slicer] 
    ) 
]]>
  </query>
  <query id="FO_0002_0063_level_budget">
    <![CDATA[
-- FO_0002_0036_level_budget
  with
  member [Measures].[Уровень]
  as '0'
  member [Measures].[Уникальное имя]
  as ' [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].CurrentMember.UniqueName '
  member [Measures].[Имя]
  as ' [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].CurrentMember.Name '
  SELECT
  {
  [Measures].[Имя],
  [Measures].[Уникальное имя],
  [Measures].[Уровень]
  }ON COLUMNS,
  {
  {
  [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет субъекта],
  [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
  [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
  [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
  [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения],
  [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО]
  }
  } ON ROWS
  from   [ФО_МесОтч_Доходы]
  ]]>
  </query>


</root>