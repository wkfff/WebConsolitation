<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0020_date">
    <![CDATA[
-- FO_0002_0020_date
-- <#[ФО_МесОтч_Расходы]#>
with
    member Measures.[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        Filter
        (
            OpeningPeriod
            (
                [Период__Период].[Период__Период].[Месяц],
                [Период__Период].[Период__Период].[Данные всех периодов].[2008]
            ) : ClosingPeriod
            (
                [Период__Период].[Период__Период].[Месяц],
                [Период__Период].[Период__Период].[Данные всех периодов].[2011]
            ),
            not IsEmpty([Measures].[Факт])
        )
    ) on rows
from [ФО_МесОтч_Расходы]
  ]]>
  </query>

<query id="FO_0002_0020_grid">
<![CDATA[
-- FO_0002_0020_grid
-- <#[ФО_МесОтч_Расходы]#>
with  
    set [Города]  
    as 'Filter  
        (
            Descendants  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Самарская область],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF  
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"  
            ) and not  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember  
            )  
        )'  
    set [Районы]  
    as 'Filter  
        (
            Descendants  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Самарская область],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF  
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"  
            ) and not  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember  
            )  
        )'  
        set [Муниципальные образования]
    as '[Города] + [Районы]'
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по городским округам]
    as 'IIF ([КД__Сопоставимый].[КД__Сопоставимый].CurrentMember is [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности (пред.год)],
    Sum([Города],[КД__Сопоставимый].[КД__Сопоставимый].[Сумма]) / Sum([Города], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)]),
    IIF ([КД__Сопоставимый].[КД__Сопоставимый].CurrentMember is [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы ],
    Sum([Города],[КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы сумма]) / Sum([Города], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]),
    Sum([Города],[КД__Сопоставимый].[КД__Сопоставимый].[Сумма]) / Sum([Города], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения])))'
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным районам]
    as 'IIF ([КД__Сопоставимый].[КД__Сопоставимый].CurrentMember is [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности (пред.год)],
    Sum([Районы],[КД__Сопоставимый].[КД__Сопоставимый].[Сумма]) / Sum([Районы], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)]),
    IIF ([КД__Сопоставимый].[КД__Сопоставимый].CurrentMember is [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы ],
    Sum([Районы],[КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы сумма]) / Sum([Районы], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]),
    Sum([Районы],[КД__Сопоставимый].[КД__Сопоставимый].[Сумма]) / Sum([Районы], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения])))'
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным образованиям]
    as 'IIF ([КД__Сопоставимый].[КД__Сопоставимый].CurrentMember is [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности (пред.год)],
    Sum([Муниципальные образования],[КД__Сопоставимый].[КД__Сопоставимый].[Сумма]) / Sum([Муниципальные образования], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)]),
    IIF ([КД__Сопоставимый].[КД__Сопоставимый].CurrentMember is [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы ],
    Sum([Муниципальные образования],[КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы сумма]) / Sum([Муниципальные образования], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]),
    Sum([Муниципальные образования],[КД__Сопоставимый].[КД__Сопоставимый].[Сумма]) / Sum([Муниципальные образования], [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения])))'
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы сумма]
    as 'IIF
        (
            IsEmpty
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]
            ) or
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]
            ) = 0,
            null,
            (
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                    [Measures].[Факт]
                ) -
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                    [Measures].[Факт]
                ) -
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ]
                )
            )
        )'
    
    member [КД__Сопоставимый].[КД__Сопоставимый].[Сумма]
    as 'IIF
        (
            IsEmpty
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]
            ) or
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]
            ) = 0,
            null,
            (
                (
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                        [Measures].CurrentMember
                    ) -
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                        [Measures].CurrentMember
                    ) -
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                        [Measures].CurrentMember
                    ) +
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований].[Дотации на выравнивание бюджетной обеспеченности],
                        [Measures].CurrentMember
                    )
                )
            )
        )'
    member [Measures].[IsNotMO] 
    as '  
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по городским округам] or [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным районам] or [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным образованиям]  
        )'   
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure]  
    as 'IIF  
        (
            IsEmpty  
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]  
            ) or  
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]  
            ) = 0,
            null,
            (
                (
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                        [Measures].CurrentMember  
                    ) -  
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                        [Measures].CurrentMember  
                    ) -  
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                        [Measures].CurrentMember  
                    ) +  
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований].[Дотации на выравнивание бюджетной обеспеченности],
                        [Measures].CurrentMember  
                    ) 
                ) / [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения] 
            )  
        )'   
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure (пред.год)]  
    as 'IIF  
        (
            IsEmpty  
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)]  
            ) or  
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)]  
            ) = 0,
            null,
            (
                (
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                        [Measures].CurrentMember  
                    ) -  
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                        [Measures].CurrentMember  
                    ) -  
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                        [Measures].CurrentMember  
                    ) +  
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований].[Дотации на выравнивание бюджетной обеспеченности],
                        [Measures].CurrentMember  
                    ) 
                ) / [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)] 
            )  
        )'    
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]  
    as '[КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure]'
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности (пред.год)]  
    as '[КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure (пред.год)]'
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы ]  
    as 'IIF  
        (
            IsEmpty  
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]  
            ) or  
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]  
            ) = 0,
            null,
            (
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                    [Measures].[Факт]  
                ) -  
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                    [Measures].[Факт]  
                ) -  
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ]  
                )  
            )/[КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]   
        )'  
    member [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения (пред.год)]  
    as 'LookupCube  
        (
            "[ФО_Показатели для планирования]",
            "  
            (
                [Measures].[Факт],
                [Показатели__Показатели для планирования Сопост].[Показатели__Показатели для планирования Сопост].[Все показатели].[Данные по численности населения].[Численность постоянного населения МР(ГО)],
                " + MemberToStr  
                (
                    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].PrevMember.PrevMember  
                ) + ",
                " + MemberToStr  
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember  
                ) + "  
            )"  
        )'   
    member [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]  
    as 'LookupCube  
        (
            "[ФО_Показатели для планирования]",
            "  
            (
                [Measures].[Факт],
                [Показатели__Показатели для планирования Сопост].[Показатели__Показатели для планирования Сопост].[Все показатели].[Данные по численности населения].[Численность постоянного населения МР(ГО)],
                " + MemberToStr  
                (
                    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].PrevMember  
                ) + ",
                " + MemberToStr  
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember  
                ) + "  
            )"  
        )'   
    member [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Бюджет МР и ГО]  
    as '[Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района]'  
    member [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Тип документа МР и ГО]  
    as '[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] + [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]'  
    member Measures.[Всего]  
    as 'IIF 
        (
            [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
            ([Measures].[Годовые назначения], [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]),
            [Measures].[Факт] 
        )'  
    member Measures.[Ранг]  
    as 'IIF  
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР",
            IIF  
            (
                IsEmpty  
                (
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                        Measures.[Всего]  
                    )  
                ) or [Measures].[IsNotMO],
                null,
                Rank  
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                    Order  
                    (
                        Filter  
                        (
                            [Районы],
                            not IsEmpty  
                            (
                                (
                                    [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                                    Measures.[Всего]  
                                )  
                            )  
                        ),
                        (
                            [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                            Measures.[Всего]  
                        ),
                        BDESC  
                    ),
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                        Measures.[Всего]  
                    )  
                )  
            ),
            IIF  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО",
                IIF  
                (
                    IsEmpty  
                    (
                        (
                            [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                            Measures.[Всего]  
                        )  
                    ) or [Measures].[IsNotMO],
                    null,
                    Rank  
                    (
                        [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                        Order  
                        (
                            Filter  
                            (
                                [Города],
                                not IsEmpty  
                                (
                                    (
                                        [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                                        Measures.[Всего]  
                                    )  
                                )  
                            ),
                            (
                                [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                                Measures.[Всего]  
                            ),
                            BDESC  
                        ),
                        (
                            [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                            Measures.[Всего]  
                        )  
                    )  
                ),
                null  
            )  
        )'  
    member Measures.[Худший ранг]  
    as ' IIF  
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО",
            Max  
            (
                [Города],
                Measures.[Ранг]  
            ),
            Max  
            (
                [Районы],
                Measures.[Ранг]  
            )  
        )'  
SELECT
    {
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов].[2010].PrevMember  
            }  
            *  
            {
                {
                    [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности (пред.год)]  
                }  
                *  
                {
                    Measures.[Всего],
                    Measures.[Ранг],
                    Measures.[Худший ранг]  
                }  
            }  
        } +   
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>]
            }  
            *  
            {
                {
                    [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]  
                }  
                *  
                {
                    Measures.[Всего],
                    Measures.[Ранг],
                    Measures.[Худший ранг]  
                }  
            }  
        }  +   
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
            }  
            *  
            {
                {
                    [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы ],
                    [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]  
                }  
                *  
                {
                    Measures.[Всего],
                    Measures.[Ранг],
                    Measures.[Худший ранг]  
                }  
            }  
        }  
    } on columns,
    {
        [Города] +  
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по городским округам] 
        } + [Районы] +  
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным районам] 
        } + [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным образованиям]  
    } on rows  
FROM [ФО_МесОтч_Доходы]  
where  
    (
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Бюджет МР и ГО],
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Тип документа МР и ГО]  
    ) 

           
  ]]>
</query>

<query id="FO_0002_0020_map">
<![CDATA[
-- FO_0002_0020_map
-- <#[ФО_МесОтч_Расходы]#>
with      
    set [Города]      
    as 'Filter      
        (
            Descendants      
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Самарская область],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF      
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"      
            ) and not      
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember      
            )      
        )' 
    set [Районы]      
    as 'Filter      
        (
            Descendants      
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Самарская область],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF      
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"
            ) and not      
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember      
            )      
        )' 
    set [Муниципальные образования]     
    as '[Города] + [Районы]' 
    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по городским округам]
    as 'Aggregate({[Города]})'

    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным районам]
    as 'Aggregate({[Районы]})'

    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным образованиям]
    as 'Aggregate({[Муниципальные образования]})'

    member [Measures].[IsNotMO]
    as '
        (
           [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по городским округам] or
           [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным районам] or
           [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Среднее по муниципальным образованиям]
        )'

    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure]      
    as 'IIF      
        (
            IsEmpty      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]      
            ) or      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]      
            ) = 0,
            null,
            ((
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                [Measures].CurrentMember      
            ) -      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                [Measures].CurrentMember      
            ) -      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                [Measures].CurrentMember      
            ) +      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований].[Дотации на выравнивание бюджетной обеспеченности],
                [Measures].CurrentMember      
            ) / [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]) / 1000      
        )'      
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]      
    as 'IIF      
        (
            [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure],
                [Measures].[Годовые назначения]      
            ),
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности_CurrentMeasure],
                [Measures].[Факт]      
            )     
        )'      
    member [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы ]      
    as 'IIF      
        (
            IsEmpty      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]      
            ) or      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]      
            ) = 0,
            null,
            ((
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                [Measures].[Факт]      
            ) -      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                [Measures].[Факт]      
            ) -      
            (
                [КД__Сопоставимый].[КД__Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                [Measures].[Факт]      
            )) / 1000      
        )'      
    member [КД__Сопоставимый].[КД__Сопоставимый].[Численность постоянного населения]      
    as 'LookupCube      
        (
            "[ФО_Показатели для планирования]",
            "      
            (
                [Measures].[Факт],
                [Показатели__Показатели для планирования Сопост].[Показатели__Показатели для планирования Сопост].[Все показатели].[Данные по численности населения].[Численность постоянного населения МР(ГО)],
                " + MemberToStr      
                (
                    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].PrevMember.PrevMember      
                ) + ",
                " + MemberToStr      
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember      
                ) + "      
            )"      
        )'      
    member [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Бюджет МР и ГО]  
    as '[Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района]'  
    member [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Тип документа МР и ГО]  
    as '[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] + [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]'  
    member Measures.[Всего]      
    as '[Measures].[Факт]'      
    member Measures.[Ранг]     
    as 'IIF    
        (
            IsEmpty    
            (
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                    Measures.[Всего]   
                )   
            ) or [Measures].[IsNotMO],
            null,
            Rank    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                Order    
                (
                    Filter    
                    (
                        [Муниципальные образования],
                        not IsEmpty    
                        (
                            (
                                [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                                Measures.[Всего]   
                            )   
                        )    
                    ),
                    (
                        [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                        Measures.[Всего]   
                    ),
                    BDESC    
                ),
                (
                    [КД__Сопоставимый].[КД__Сопоставимый].CurrentMember,
                    Measures.[Всего]   
                )   
            )    
        )'    
    member Measures.[Худший ранг]  
    as 'Max 
        (
            [Муниципальные образования],
            Measures.[Ранг] 
        )' 
    member [КД__Сопоставимый].[КД__Сопоставимый].[Процент исполнения]
    as 'IIF  
        (
            IsEmpty 
            (
                (
                    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
                    [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]  
                ) 
            ) or  
            (
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
                [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]  
            ) = 0,
            null,
            (
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]  
            ) /   
            (
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
                [КД__Сопоставимый].[КД__Сопоставимый].[Налоговые и неналоговые доходы с учетом дотаций на выравнивание бюджетной обеспеченности]   
            )  
        )'
SELECT
    {
       [КД__Сопоставимый].[КД__Сопоставимый].[Процент исполнения]
    } on columns,
    { 
       [Города] + [Районы] 
    } on rows      
FROM [ФО_МесОтч_Доходы]      
where      
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        Measures.[Всего],
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Бюджет МР и ГО],
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Тип документа МР и ГО]      
    )            
  ]]>
  </query>

</root>