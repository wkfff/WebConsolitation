<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0047_0004_grid">
    <![CDATA[
-- FO_0047_0004_grid
with
    set [Районы]
    as 'Filter
        (
            Descendants
            (
                [Районы].[Сопоставимый].[Все районы].[Вологодская область],
                [Районы].[Сопоставимый].[Уровень 04],
                SELF
            ),
            not
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember
            ) and
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
            )
        )'
    member [Районы].[Сопоставимый].[Муниципальные образования ИТОГО]
    as 'Aggregate ( { [Районы] } )'
    set [Направления]
    as 'Generate
        (
            {
                [Задолженность].[Направления финансирования].[Все].[Мероприятия и программы, всего],
                [Задолженность].[Направления финансирования].[Все].[Долги бюджета, всего],
                [Задолженность].[Направления финансирования].[Все].[По смете, всего]
            },
            Filter
            (
                Descendants
                (
                    [Задолженность].[Направления финансирования].CurrentMember,
                    [Задолженность].[Направления финансирования].[Уровень 2],
                    SELF
                ),
                not
                (
                    [Задолженность].[Направления финансирования].CurrentMember is [Задолженность].[Направления финансирования].CurrentMember.Parent.DataMember
                )
            ) +
            {
                [Задолженность].[Направления финансирования].CurrentMember
            }
        )'
    member [Задолженность].[Направления финансирования].[Всего задолженность]
    as 'Aggregate
        (
            {
                {
                    [Задолженность].[Направления финансирования].[Все].[Мероприятия и программы, всего],
                    [Задолженность].[Направления финансирования].[Все].[Долги бюджета, всего],
                    [Задолженность].[Направления финансирования].[Все].[По смете, всего]
                }
            }
        )'
    member [Тип средств].[СКИФ].[Всего по бюджетным и внебюджетным средствам]
    as 'Aggregate
        (
            {
                [Тип средств].[СКИФ].[Все].[Бюджетные средства],
                [Тип средств].[СКИФ].[Все].[Внебюджетные средства]
            }
        )'
    member [Задолженность].[Показатели].[Задолженность ВСЕГО ]
    as '[Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:]'
    member [Measures].[Уровень]
    as 'IIF
        (
            [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Муниципальные образования ИТОГО],
            0,
            1
        )'
    member [Measures].[Факт ]
    as '[Measures].[Факт] / 1000'
select
    {
        { 
            {
               <%means_type%>
            } *
            {
                {
                    [Направления] +
                    {
                        [Задолженность].[Направления финансирования].[Всего задолженность]
                    }
                }
                * {[Measures].[Факт ]}
            }
        } +
        {
            {
               [Тип средств].[СКИФ].[Все]
            } *
            {
                {
                    [Задолженность].[Направления финансирования].[Все]
                }
                *{[Measures].[Уровень]}
            }
        }
    } on columns,
    {
        [Районы] +
        {
            [Районы].[Сопоставимый].[Муниципальные образования ИТОГО]
        }
    } on rows
from [ФО_Задолженность_КзДз]
where
    (
        [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет МО],
        [Задолженность].[Вид задолженности].[Все].[<%debt_kind%>],
        <%debt_indicator%>,
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>]
    ) 
  ]]>
  </query>

  <query id="FO_0047_0004_debtKind">
    <![CDATA[
-- FO_0047_0004_debtKind
with 
    set [Задолженности] 
    as '{
            [Задолженность].[Вид задолженности].[Все].[Дебиторская задолженность],
            [Задолженность].[Вид задолженности].[Все].[Кредиторская задолженность]
        }'  
 
    member [Measures].[Имя] 
    as '[Задолженность].[Вид задолженности].CurrentMember.Name'
    member [Measures].[Уникальное имя] 
    as '[Задолженность].[Вид задолженности].CurrentMember.UniqueName'
    member [Measures].[Уровень] 
    as '0' 

select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    [Задолженности]  on rows
from [ФО_Задолженность_КзДз] 
  ]]>
  </query>

  <query id="FO_0047_0004_meansType">
    <![CDATA[
-- FO_0047_0004_meansType
with
    set [Типы средств]
    as '
        {
            [Тип средств].[СКИФ].[Все].[Бюджетные средства],
            [Тип средств].[СКИФ].[Все].[Внебюджетные средства],
            [Тип средств].[СКИФ].[Всего по бюджетным и внебюджетным средствам]
        }'
    member [Тип средств].[СКИФ].[Всего по бюджетным и внебюджетным средствам]
    as 'Aggregate
        (
            {
                [Тип средств].[СКИФ].[Все].[Бюджетные средства],
                [Тип средств].[СКИФ].[Все].[Внебюджетные средства]
            }
        )'
    member [Measures].[Имя]
    as '[Тип средств].[СКИФ].CurrentMember.Name'
    member [Measures].[Уникальное имя]
    as '[Тип средств].[СКИФ].CurrentMember.UniqueName'
    member [Measures].[Уровень]
    as '0'

select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    [Типы средств] on rows
from [ФО_Задолженность_КзДз]
  ]]>
  </query>

  <query id="FO_0047_0004_directionDigest">
    <![CDATA[
-- FO_0047_0004_directionDigest
with      
    set [Направления]     
    as 'Generate     
        (
            {
                [Задолженность].[Направления финансирования].[Все].[Мероприятия и программы, всего],
                [Задолженность].[Направления финансирования].[Все].[Долги бюджета, всего],
                [Задолженность].[Направления финансирования].[Все].[По смете, всего]     
            },
            Filter     
            (
                Descendants     
                (
                    [Задолженность].[Направления финансирования].CurrentMember,
                    [Задолженность].[Направления финансирования].[Уровень 2],
                    SELF     
                ),
                not     
                (
                    [Задолженность].[Направления финансирования].CurrentMember is [Задолженность].[Направления финансирования].CurrentMember.Parent.DataMember     
                )     
            ) +     
            {
                [Задолженность].[Направления финансирования].CurrentMember     
            }     
        ) + {[Задолженность].[Направления финансирования].[Всего задолженность]}'      
    member [Measures].[Имя]      
    as '[Задолженность].[Направления финансирования].CurrentMember.Name'
    member [Measures].[Тип]   
    as 'IIF  
        (
            [Measures].[Уровень] = 0,
            [Задолженность].[Направления финансирования].CurrentMember.Name,
            [Задолженность].[Направления финансирования].CurrentMember.Parent.Name  
        )'   
    member [Measures].[Уровень]      
    as 'IIF   
        (
            [Задолженность].[Направления финансирования].CurrentMember.Level is [Задолженность].[Направления финансирования].[Уровень 1],
            0,
            1   
        )'    
    member [Measures].[Уникальное имя]
    as 'IIF
        (
            [Measures].[Уровень] = 0,
            "Итого",
            [Задолженность].[Направления финансирования].CurrentMember.Name
        )'
    member [Задолженность].[Направления финансирования].[Всего задолженность]
    as 'Aggregate
        (
            {
                {
                    [Задолженность].[Направления финансирования].[Все].[Мероприятия и программы, всего],
                    [Задолженность].[Направления финансирования].[Все].[Долги бюджета, всего],
                    [Задолженность].[Направления финансирования].[Все].[По смете, всего]
                }
            }
        )'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Тип]     
    } on columns,
    [Направления] on rows      
from [ФО_Задолженность_КзДз]           
  ]]>
  </query>

  <query id="FO_0047_0004_debtIndicator">
    <![CDATA[
-- FO_0047_0004_debtIndicator
with      
    set [Показатели задолженности]      
    as 'Filter      
        (
            {
                [Задолженность].[Показатели].[Задолженность Всего ]  
            } + Descendants   
            (
                [Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:],
                [Задолженность].[Показатели].[СубКОСГУ],
                SELF_AND_BEFORE     
            ) -   
            {
                [Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:]  
            },
            not     
            (
                [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].CurrentMember.Parent.DataMember    
            )     
        )'       
    member [Задолженность].[Показатели].[Задолженность Всего ]   
    as '[Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:]'   
    member [Measures].[Имя]      
    as ' [Задолженность].[Показатели].CurrentMember.Name '   
    member [Measures].[Уникальное имя]      
    as 'IIF 
        (
            [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].[Задолженность Всего ],
            [Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:].UniqueName,
            [Задолженность].[Показатели].CurrentMember.UniqueName 
        )'  
    member [Measures].[Уровень]      
    as 'IIF 
        (
            [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].[Задолженность Всего ],
            0,
            IIF
            (
                [Задолженность].[Показатели].CurrentMember.Level is [Задолженность].[Показатели].[КОСГУ],
                1,
                2
            ) 
        )' 
    member [Measures].[Тип]
    as 'IIF
        (
            [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].[Задолженность Всего ],
            "",
            [Задолженность].[Показатели].CurrentMember.Properties("Код")
        )'        
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень],
        [Measures].[Тип]
    } on columns,
    [Показатели задолженности]   on rows    
from [ФО_Задолженность_КзДз]      
  ]]>
  </query>

</root>