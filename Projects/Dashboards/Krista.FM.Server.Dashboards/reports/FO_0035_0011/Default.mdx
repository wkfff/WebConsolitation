<?xml version="1.0" encoding="windows-1251"?>
<root>

<query id="FO_0035_0011_data">
    <![CDATA[
    --FO_0035_0011_data--
with  
    member [Measures].[ДанныеНа]  
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'  
    set [NonEmptySet]  
    as 'Tail  
        (
            Filter  
            (
                [Период__Период].[Период__Период].Members,
                not IsEmpty([Measures].[Остаток]) and [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца"  
            ),
            1  
        )'  
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows  
from  [ФО_Поступление и расходование МБТ]  
    ]]>
  </query>
  <query id="FO_0035_0011_list_of_dates">
    <![CDATA[ 
select
    {[Measures].[Остаток]} on columns,
    {
        filter
        (
            [Период__Период].[Период__Период].[День].members,
            [Measures].[Остаток] > 0
        )
    } on rows
from [ФО_Поступление и расходование МБТ]

    ]]>
  </query>
  
<query id="FO_0035_0011_Grid">
    <![CDATA[

    WITH   
    SET [ГРБС]  
        as '[Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[ГРБС].Members -[Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Все].[Несопоставленные данные]' 
    SET [Районы] 
    as ' Filter(Descendants 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)].[Муниципальные районы],
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
            SELF 
        ) + Descendants 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)].[Городские округа],
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
            SELF 
        ),
        not     
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember     
                ) )'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по главным распорядителям]  
    as 'Sum  
        (
            { [Районы] },
            [Measures].[Остаток]  
        )'  
    member [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Итого по муниципальным образованиям] 
    as ' Sum
        (
            Filter 
            (
                [ГРБС],
                not isempty ( [Measures].CurrentMember ) 
            ),
            [Measures].CurrentMember
        )' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень]  
    as '[РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember.Properties("LEVEL_NUMBER")'  
Select
      
    {
        [Районы],
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого по главным распорядителям]  
    } on rows,
    non empty    
    {
        Filter  
        (
            [ГРБС],
            not isempty ( [Measures].CurrentMember )  
        ),
        [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Итого по муниципальным образованиям] 
    } on columns  
from  [ФО_Поступление и расходование МБТ]  
where  
    (
        [Measures].[Остаток],
        <%period_cur_date%>  
    )  
    ]]>
  </query>

 
</root>