<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0021_0001_HMAO_date">
    <![CDATA[
-- FO_0021_0001_HMAO_date
with 
    member [Measures].[ДанныеНа] 
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                Descendants 
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Год],
                    SELF 
                ),
                not IsEmpty 
                (
                    (
                        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели] 
                    ) 
                ) and not 
                (
                    [Период__Период].[Период__Период].CurrentMember is[Период__Период].[Период__Период].[Данные всех периодов].[Значение не указано] 
                ) 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from  [ФО_ФПКУ_Показатели] 
]]>
  </query>

  <query id="FO_0021_0001_HMAO_grid">
    <![CDATA[
-- FO_0021_0001_grid
with         
    set [Список районов]         
    as 'Filter         
        (
            Descendants         
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF         
            ),
            not         
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember         
            ) and not         
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Несопоставленные данные]         
            ) and not         
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Консолидированный бюджет - Ханты-Мансийский автономный округ]         
            ) and not         
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Неуказанный территориальный признак]         
            ) and not         
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Бюджет Субъекта - Ханты-Мансийский автономный округ]         
            )         
        )'         
    set [Показатели для значения]         
    as 'Filter         
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].Children,
            (
                StrToValue         
                (
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Код")         
                ) >= 100         
            ) and         
            (
                StrToValue         
                (
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Код")         
                ) < 1000         
            )         
        )'     
    set [Показатели]   
    as 'IIF   
        (
            [Measures].[<%selected_measure%>] = [Measures].[Значение],
            [Показатели для значения],
            {
                {
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[СОК]   
                } + [Показатели для значения] 
            }  
        )'   
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Формула расчета]       
    as '[Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Формула")'       
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Минимальный риск]
    as ' IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Формула") = "",
            null,
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Нижнее пороговое значение] 
        ) ' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Максимальный риск]
    as ' IIF
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Формула") = "",
            null,
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Верхнее пороговое значение]
        ) '
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Нижнее пороговое значение] 
    as ' IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Минимальный риск") = "-1",
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Минимальный по районам],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Минимальный риск") 
        )' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Минимальный по районам]
    as ' Min
       (
            [Список районов],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember
       )'
    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Верхнее пороговое значение] 
    as ' IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Максимальный риск") = "-1",
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Максимальный по районам],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Максимальный риск") 
        )'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Максимальный по районам]
    as ' Max
       (
            [Список районов],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember
       )'
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Вес]
    as '[Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Удельный вес") '
    set [Свойства]     
    as ' IIF     
        (
            [Measures].[<%selected_measure%>] = [Measures].[Значение],
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Формула расчета],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Минимальный риск],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Максимальный риск]     
            },
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Вес]
            }     
        )' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Индикатор]
    as '[Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование")'
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень] 
    as ' IIF 
        (
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование") = "I. Планирование бюджета" 
            ) or 
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование") = "II. Исполнение бюджета" 
            ) or
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование") = "III. Долговая политика"
            ) or
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование") = "IV. Оказание муниципальных услуг"
            ) or
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование") = "V. Открытость бюджетного процесса"
            ),
            1,
            0  
        ) '
select
    {
        {[Районы__Сопоставимый].[Районы__Сопоставимый].[Индикатор]}
        +
        [Свойства] + [Список районов] + {[Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень]}    
    } on columns,
    { [Показатели] } on rows
from  [ФО_ФПКУ_Показатели]         
where         
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_year%>],
        [Measures].[<%selected_measure%>]
    )                             
    ]]>
  </query>

  <query id="FO_0021_0001_HMAO_regionDescription">
    <![CDATA[
-- FO_0021_0001_HMAO_regionDescription  
  with
    set [Список районов]
    as 'Filter
        (
            Descendants
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF
            ),
            not
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember
            ) and not
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Несопоставленные данные]
            ) and not
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Консолидированный бюджет - Ханты-Мансийский автономный округ]
            ) and not
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Неуказанный территориальный признак]
            ) and not
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Бюджет Субъекта - Ханты-Мансийский автономный округ]
            )
        )'
    member [Measures].[Наименование]
    as ' [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name'
select
    { [Measures].[Наименование] } on columns,
    { [Список районов] } on rows
from  [ФО_ФПКУ_Показатели]
]]>
</query>
  
</root>