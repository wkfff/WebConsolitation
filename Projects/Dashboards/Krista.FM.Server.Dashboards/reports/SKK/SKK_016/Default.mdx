<?xml version="1.0" encoding="Windows-1251"?>
<root>

	<!-- ========================================================================================= -->
	<query id="skk_016_grid">
        <![CDATA[
-- skk_016_grid
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate({ <%selected_period_compare%> })'

    member [Measures].[Досмотрено#]                      
    as '                      
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]                      
        )'                      
    member  [Measures].[ДосмотреноСравн#]                     
    as '                      
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]                      
        )'                      
    member [Measures].[Приостановлено_]
    as '                      
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]                      
        )'                      
    member [Measures].[Выявлено#]                      
    as 'IIF 
		(
			not isEmpty( [Measures].[Приостановлено_] ),
			[Measures].[Приостановлено_],
			IIF
			(
				not isEmpty( [Measures].[Досмотрено#] ),
				0,
				null
			)
		)'
	member [Measures].[ПриостановленоСравн_]                     
    as '                      
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]                      
        )'
	member [Measures].[ВыявленоСравн#]                     
    as 'IIF
		(
			not isEmpty( [Measures].[ПриостановленоСравн_] ),
			[Measures].[ПриостановленоСравн_],
			IIF
			(
				not isEmpty( [Measures].[ДосмотреноСравн#] ),
				0,
				null
			)
		)'
		
	<#skk_pattern_percent#>	
	<#skk_pattern_percent_cmp#>
	<#skk_pattern_updown#>
	
select
    {
        [Measures].[Досмотрено#],
		[Measures].[ДосмотреноСравн#],
        [Measures].[Выявлено#],
        [Measures].[Выявлено%],		
		[Measures].[ВыявленоСравн#],
        [Measures].[ВыявленоСравн%],		
        [Measures].[рост/снижение],
		
		[Measures].[Выявлено%доп],
		[Measures].[ВыявленоСравн%доп],
        [Measures].[ДосмотреноСравн#],        
		
        [Measures].[*рост/снижение (си)],
        [Measures].[*рост/снижение (флаг)],
        [Measures].[*рост/снижение (формат)]
    } on columns                    
from [СКК]  
where
    (
        <%selected_point%>,
        <%selected_direction%>
    )                    
  ]]>
    </query>

	<!-- ========================================================================================= -->
	<query id="skk_016_chart">
        <![CDATA[
-- skk_016_chart
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate({ <%selected_period_compare%> })'
        
    member [Measures].[Досмотрено#]   
    as '   
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]   
        )'   
    member  [Measures].[ДосмотреноСравн#]   
    as '   
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]   
        )'   
    member [Measures].[Приостановлено#]   
    as '   
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]   
        )'   
    member [Measures].[ПриостановленоСравн#]   
    as '   
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]   
        )'    
select
    {
        [Measures].[Досмотрено#],
        [Measures].[Приостановлено#],
        [Measures].[ДосмотреноСравн#],
        [Measures].[ПриостановленоСравн#]   
    } on columns   
from [СКК] 
where    
    (
        <%selected_point%>,
        <%selected_direction%>     
    )    
]]>
    </query>
     
    
</root>