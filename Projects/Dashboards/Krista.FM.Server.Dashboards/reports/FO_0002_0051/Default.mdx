<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0051_grid">
    <![CDATA[
-- FO_0002_0051_grid
with  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта]  
    as ' 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов] 
        )'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Собственный бюджет субъекта]  
    as ' 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет по бюджету субъекта] 
        )'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]  
    as ' 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО] 
        )'   
    member [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО]  
    as 'Aggregate  
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района],
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа]  
            }  
        )'  
    
    member  [Measures].[Задолженность ]
    as ' [Measures].[Задолженность] / 1000'
    member  [Measures].[Просроченная задолженность ]
    as ' [Measures].[Просроченная задолженность] / 1000'  
    
    member  [Measures].[Уровень]
    as 'IIF
        (
            [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].CurrentMember.Properties("Код") = "888888888" or
            Mid([ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].CurrentMember.Properties("Код"), Len([ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].CurrentMember.Properties("Код")) - 4) = "00000",
            0, 
            1
        )' 
    
    set [Планы Счетов]
    as 'Descendants 
        (
            [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].[Все],
            [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].[План счетов],
            SELF 
        )'
    member [Тип средств__СКИФ].[Тип средств__СКИФ].[Все виды деятельности]
    as 'Aggregate
        (
           {
              [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства],
              [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Внебюджетные средства]
           }  
        )   '        
select
    {
       [Measures].[Задолженность ],
       [Measures].[Просроченная задолженность ],
       [Measures].[Уровень]
    } on columns,
    Order
    (
      Filter
      (
         [Планы Счетов],
         not IsEmpty([Measures].[Задолженность ]) and not IsEmpty([Measures].[Просроченная задолженность ])
      ),
      StrToValue([ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].CurrentMember.Properties("Код"))
    ) on rows
From [ФО_МесОтч_Задолженность]
where  
    (
        <%selected_budget%>,
        <%selected_facility%>,
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Фиксированный__Вид задолженности].[Фиксированный__Вид задолженности].[Все].[Кредиторская задолженность]
    )  
  ]]>
  </query>

  <query id="FO_0002_0051_budgetDigest">
    <![CDATA[
-- FO_0002_0051_budgetDigest
with  
    set [Список ГРБС]  
    as 'Filter 
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].Children - 
            {[Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные] },
            not IsEmpty 
            (
                (
                    [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все]
                )
            ) 
        )'  
    set [Список МО]  
    as 'Filter  
        (
            Descendants  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF  
            ),
            not  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember  
            )  
        )'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта]  
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)]'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Собственный бюджет субъекта]  
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)]'  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]  
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)]'  
    member [Measures].[Имя]  
    as 'IIF  
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember is [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name,
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name  
        )'  
    member [Measures].[Уникальное имя]      
    as 'IIF      
        (
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта]    
            ) or    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Собственный бюджет субъекта]    
            ),
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.UniqueName + ", " +
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.UniqueName,
            IIF    
            (
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]   
                ),
                [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.UniqueName + ", " +
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.UniqueName,
                IIF   
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember is [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
                    
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.UniqueName + ", " +
                    [Администратор__Сопоставим].[Администратор__Сопоставим].DefaultMember.UniqueName + ", " +
                    "[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО]",
                    [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.UniqueName + ", " +
                    [Районы__Сопоставимый].[Районы__Сопоставимый].DefaultMember.UniqueName + ", " +
                    [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета].UniqueName
                )   
            )     
        )'  
    member [Measures].[Уровень]  
    as 'IIF  
        (
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта] 
            ) or  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Собственный бюджет субъекта]
            ) or  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты] 
            ),
            0,
            1 
        )'  
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень] 
    } on columns,
    {
        {
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Собственный бюджет субъекта]  
            }  
            *  
            {
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы]  
            }  
        } + Generate  
        (
            [Список ГРБС],
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы]  
            }  
            *  
            {
                [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember  
            }  
        ) +  
        {
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]  
            }  
            *  
            {
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы]  
            }  
        } + Generate  
        (
            [Список МО],
            {
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember  
            }  
            *  
            {
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы]  
            }  
        )  
    } on rows  
From [ФО_МесОтч_Задолженность]
  ]]>
  </query>

  <query id="FO_0002_0051_facilityDigest">
    <![CDATA[
-- FO_0002_0051_facilityDigest
with 
    set [Список типов средств] 
    as '[Тип средств__СКИФ].[Тип средств__СКИФ].[Все].Children - {[Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Неуказанный тип средств]}'  
    member [Measures].[Имя] 
    as 'IIF
        (
            [Тип средств__СКИФ].[Тип средств__СКИФ].CurrentMember is [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства], 
            "Бюджетная деятельность",
            IIF
            (
               [Тип средств__СКИФ].[Тип средств__СКИФ].CurrentMember is [Тип средств__СКИФ].[Тип средств__СКИФ].[Все виды деятельности],
               "Все виды деятельности",
               "Приносящая доход деятельность"
            )
        )'
    member [Тип средств__СКИФ].[Тип средств__СКИФ].[Все виды деятельности]
    as '[Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства]'
    member [Measures].[Уникальное имя] 
    as '[Тип средств__СКИФ].[Тип средств__СКИФ].CurrentMember.UniqueName' 
    member [Measures].[Уровень] 
    as 'IIF
        (
           [Тип средств__СКИФ].[Тип средств__СКИФ].CurrentMember is [Тип средств__СКИФ].[Тип средств__СКИФ].[Все виды деятельности],
           0, 
           1
        )  ' 
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень] 
    } on columns,
    {
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Все виды деятельности],
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства],
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Внебюджетные средства]
    } on rows 
From [ФО_МесОтч_Задолженность] 
  ]]>
  </query>
  
</root>