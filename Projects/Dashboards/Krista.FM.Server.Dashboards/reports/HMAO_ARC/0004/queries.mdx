<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="years">
    <![CDATA[
--years
select
    non empty
    {
        [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год].members
    }  on rows,
    non empty { [Measures].[За период] }on columns
from   [СТАТ_Экология_Отходы производства]
where
    (
       [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДепЭкологии ХМАО-Югры],
        [Группировки__Экология_Отходы производства].[Группировки__Экология_Отходы производства].[Все группировки].[По городам и районам],
       <%baseRegion%>,
        [ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности].[Значение не указано],
        [Экология__Место размещения].[Экология__Место размещения].[Все места размещения].[Значение не указано],
        [Экология__Цели использования].[Экология__Цели использования].[Все цели использования].[Значение не указано],
        [Классы опасности].[Все классы опасности].[Значение не указано]
    )
]]>
  </query>

  <query id="grid">
    <![CDATA[
--grid 
with 
    member [Measures].[ED] 
    as ' [Экология__Отходы производства].[Экология__Отходы производства].CurrentMember.Properties("Единица измерения")' 
    member [Measures].[Темп прироста] 
    as ' IIF
        (
            (
                ParallelPeriod
                (
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                    1,
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember
                ),
                [Measures].[За период]
            )<>0,
            (
                (
                    Round([Measures].[За период],2)/
                   (
                       Round(( ParallelPeriod
                        (
                            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                            1,
                            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember
                        ),
                        [Measures].[За период]),2)
                    )-1
                )
            ) ,
            null
        ) '
    member [Measures].[Доля] 
    as ' IIF 
        (
            (
                [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Образовалось отходов производства и потребления],
                [Measures].[За период] 
            )<>0,
            (
                [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Использовано и обезврежено отходов производства и потребления],
                [Measures].[За период] 
            )/ 
            (
                [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Образовалось отходов производства и потребления],
                [Measures].[За период] 
            ) ,
            null 
        ) '  
    member [Measures].[Прирост] 
    as ' IIF 
        (
            Round((
                ParallelPeriod 
                (
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                    1,
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember 
                ),
                [Measures].[За период] 
            ),2)<>0,
            [Measures].[Прирост цепной] ,
            null 
        ) ' 
    member [Территории__РФ].[Территории__РФ].[РФ].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра ]
    as '([Территории__РФ].[Территории__РФ].[РФ].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра].datamember
    , [Группировки__Экология_Отходы производства].[Группировки__Экология_Отходы производства].[Группировка].[Без группировки])'
select
    {
        filter 
        (
            {
                [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Образовалось отходов производства и потребления] ,
                [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Использовано и обезврежено отходов производства и потребления]   
            },
            not isempty( [Measures].[За период]) or not isempty( [Measures].[Прирост]) or not isempty( [Measures].[Темп прироста]) 
        ) 
    }  on columns,
    {
        {
            [Территории__РФ].[Территории__РФ].[РФ].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]
        } 
        * { [Measures].[ED]},
        {
            filter 
            (
                {
                    [Территории__РФ].[Территории__РФ].[РФ].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра].children 
                },
                Right 
                (
                    [Территории__РФ].[Территории__РФ].Currentmember.UniqueName,
                    10 
                ) <> "DATAMEMBER" and not isempty( [Measures].[За период]) 
            ) 
        }
        * 
        {
            [Measures].[За период],
            [Measures].[Прирост],
            [Measures].[Темп прироста],
            [Measures].[Доля] 
        } 
    }on rows
from   [СТАТ_Экология_Отходы производства] 
where 
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДепЭкологии ХМАО-Югры],
        [Группировки__Экология_Отходы производства].[Группировки__Экология_Отходы производства].[Все группировки].[По городам и районам],
        [ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности].[Значение не указано],
        [Экология__Место размещения].[Экология__Место размещения].[Все места размещения].[Значение не указано],
        [Экология__Цели использования].[Экология__Цели использования].[Все цели использования].[Значение не указано],
        [Классы опасности].[Все классы опасности].[Значение не указано]   ,
       <%selectedYear%>
    ) 
]]>
  </query>
  <query id="map">
    <![CDATA[
--map
with
select
    non empty
    {

            [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Образовалось отходов производства и потребления],
            [Экология__Отходы производства].[Экология__Отходы производства].[Все показатели].[Использовано и обезврежено отходов производства и потребления]
    }  on columns,
    non empty
    {
        filter
        (
            {
                <%baseRegion%>.children
            },
            Right
            (
                [Территории__РФ].[Территории__РФ].Currentmember.UniqueName,
                10
            ) <> "DATAMEMBER"
        )
    }on rows
from   [СТАТ_Экология_Отходы производства]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДепЭкологии ХМАО-Югры],
        [Группировки__Экология_Отходы производства].[Группировки__Экология_Отходы производства].[Все группировки].[По городам и районам],
        [ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности].[Значение не указано],
        [Экология__Место размещения].[Экология__Место размещения].[Все места размещения].[Значение не указано],
        [Экология__Цели использования].[Экология__Цели использования].[Все цели использования].[Значение не указано],
        [Классы опасности].[Значение не указано]   ,
        <%selectedYear%>,
        [Measures].[За период]
    )
]]>
  </query>
  <query id="chart2">
    <![CDATA[
--Chart2
with member [Measures].[Zero]
as '0'
member [Measures].[За период1]
as '[Measures].[За период]'
select
    non empty
    {

       { filter( { <%baseRegion%>.children},
          Right
            (
                [Территории__РФ].[Территории__РФ].Currentmember.UniqueName,
                10
            ) <> "DATAMEMBER"
          )
}*
{
[Measures].[За период],
[Measures].[За период1],
[Measures].[Zero]
}
    }  on rows,
    non empty
    {
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Мощность очистных сооружений],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Объем сточных вод, требующих очистки]
      
    }on columns
from   [СТАТ_Экология_Водные ресурсы]
where
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        [Группировки__Экология_Водные ресурсы].[Группировки__Экология_Водные ресурсы].[Все группировки].[По городам и районам],
        <%selectedYear%>
    )
]]>
  </query>
</root>