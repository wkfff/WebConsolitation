<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="years">
    <![CDATA[
--years 
select
    non empty 
    {
        [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год].members 
    }  on rows,
    non empty { [Measures].[За период] }on columns
from   [СТАТ_Экология_Водные ресурсы]
where 
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        [Группировки__Экология_Водные ресурсы].[Группировки__Экология_Водные ресурсы].[Все группировки].[По городам и районам],
        <%baseRegion%>
    ) 
]]>
  </query>

  <query id="grid">
    <![CDATA[
--grid 
with member [Measures].[ED]
as '[Экология__Водные ресурсы].[Экология__Водные ресурсы].CurrentMember.Properties("Единица измерения")'
member [Measures].[Прирост цепной1]
as '
iif
(
(

                    ParallelPeriod
                    (
                        [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                        1,
                        [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember
                    ),
                    [Measures].[За период]

            )<>0,
            [Measures].[Прирост цепной],
            null

)'
    member [Measures].[Темп прироста цепной1] 
    as ' iif 
        (
            (
                ParallelPeriod 
                (
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                    1,
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember 
                ),
                [Measures].[За период]  
            )<>0,
            [Measures].[Темп прироста цепной],
            null  
        )' 
        
select

    {
    
{<%baseRegion%>}
*
{
[Measures].[ED]
}
    
    ,
        filter( {     filter( { [Территории__РФ].[Территории__РФ].[РФ].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра].children},
          Right
            (
                [Территории__РФ].[Территории__РФ].Currentmember.UniqueName,
                10
            ) <> "DATAMEMBER"
          )
        }
        *
        {
            [Measures].[За период],
            [Measures].[Прирост цепной1],
            [Measures].[Темп прироста цепной1]
        },
        not isempty
        ([Measures].[За период])
        )
    }  on rows,
    non empty  
    {
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Объем сточных вод, сброшенных в поверхностные водные объекты],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено воды без очистки],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено недостаточно очищенной воды],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено нормативно чистой воды],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено нормативно очищенной воды],
       [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Объем сточных вод, требующих очистки],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Мощность очистных сооружений]
    }on columns  
from   [СТАТ_Экология_Водные ресурсы]  
where  
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        [Группировки__Экология_Водные ресурсы].[Группировки__Экология_Водные ресурсы].[Все группировки].[По городам и районам],
        <%selectedYear%>
    )  
]]>
  </query>
  <query id="map">
    <![CDATA[
--map
with 
    member [Measures].[ED] 
    as '[Экология__Водные ресурсы].[Экология__Водные ресурсы].CurrentMember.Properties("Единица измерения")' 
    member [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено загрязненной воды] 
    as '[Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено воды без очистки]+ [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено недостаточно очищенной воды]' 
    member [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено чистой воды] 
    as '[Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено нормативно очищенной воды]+[Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено нормативно чистой воды]' 
select
    non empty 
    {
        filter 
        (
            {
                <%baseRegion%>.children 
            },
            Right 
            (
                [Территории__РФ].[Территории__РФ].Currentmember.UniqueName,
                10 
            ) <> "DATAMEMBER" 
        ) 
    }  on rows,
    non empty 
    {
        {
            [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Объем сточных вод, сброшенных в поверхностные водные объекты],
            [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Сброшено загрязненной воды]   
        }  
    }on columns 
from   [СТАТ_Экология_Водные ресурсы] 
where 
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        [Группировки__Экология_Водные ресурсы].[Группировки__Экология_Водные ресурсы].[Все группировки].[По городам и районам],
        <%selectedYear%>,
        [Measures].[За период] 
    ) 
]]>
  </query>
  <query id="chart2">
    <![CDATA[
--Chart2
with member [Measures].[Zero]
as '0'
member [Measures].[За период1]
as '[Measures].[За период]'
select
    non empty
    {

       { filter( { <%baseRegion%>.children},
          Right
            (
                [Территории__РФ].[Территории__РФ].Currentmember.UniqueName,
                10
            ) <> "DATAMEMBER"
          )
}*
{
[Measures].[За период],
[Measures].[За период1],
[Measures].[Zero]
}
    }  on rows,
    non empty
    {
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Мощность очистных сооружений],
        [Экология__Водные ресурсы].[Экология__Водные ресурсы].[Все показатели].[Объем сточных вод, требующих очистки]
      
    }on columns
from   [СТАТ_Экология_Водные ресурсы]
where
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        [Группировки__Экология_Водные ресурсы].[Группировки__Экология_Водные ресурсы].[Все группировки].[По городам и районам],
        <%selectedYear%>
    )
]]>
  </query>
</root>