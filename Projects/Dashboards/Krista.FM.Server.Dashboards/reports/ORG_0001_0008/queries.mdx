<?xml version="1.0" encoding="windows-1251"?>
<root>
  <query id = "TableSU">
      <![CDATA[with      
    member [Период__День].[Период__День].[PREV]  
    as ' 
        (
            
            <%ChosenPrevPeriodSU%>
        ) '  
    member [Период__День].[Период__День].[CUR]
    as '
        (
            
            <%ChosenCurPeriodSU%>
        ) '
        member [Период__День].[Период__День].[FY]
    as '
        (
            
            <%ChosenFirstPeriodSU%>
        ) '
select
    non empty
    {
          Except(
          [Организации__Предприятия торговли].[Организации__Предприятия торговли].members,
    [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации])
    }on rows ,
    {
      [Период__День].[Период__День].[PREV],
      [Период__День].[Период__День].[CUR],
      [Период__День].[Период__День].[FY]
    }on columns 
from  [Организации_Цены и тарифы] 
where 
    (
        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Авиационное топливо (керосин)],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ]
    ) 
]]>
  </query>
  <query id = "TableFORF">
    <![CDATA[With
    member [Источники данных].[Источники данных].[PREV]
    as '
        (
          
            [Источники данных].[Источники данных].[Источник].[<%ChosenPrevPeriod%>]

        )'
    member [Источники данных].[Источники данных].[CUR]
    as '
        (
            [Источники данных].[Источники данных].[Источник].[<%ChosenCurPeriod%>]
        )'


    member [Источники данных].[Источники данных].[FY]
    as '
        (
            [Источники данных].[Источники данных].[Источник].[<%ChosenFirstPeriod%>]
        )'


    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-80]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки А-76 (АИ-80)] '
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-92]
    as '
[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-92 (АИ-93 и т.п.)]'
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-95]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-95 и выше]'
    member [Территории__Сопоставимый].[Территории__Сопоставимый].[РФ_]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].datamember'
    member [Территории__Сопоставимый].[Территории__Сопоставимый].[УРФО]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].datamember'
    
    
select
    {
    [Источники данных].[Источники данных].[FY],
        [Источники данных].[Источники данных].[PREV],
        [Источники данных].[Источники данных].[CUR]
        
    } on columns,
    --non empty
    {
[Территории__Сопоставимый].[Территории__Сопоставимый].[РФ_],
[Территории__Сопоставимый].[Территории__Сопоставимый].[УРФО]
    } on rows
from   [ФСГС_Цены РФ]
where
    (
    [Продукция__Сопоставимый].[Продукция__Сопоставимый].[<%Fields%>],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Measures].[Цена]
    )
]]>
  </query>
  <query id = "ComboPeriodDay">
    <![CDATA[with
      member [Организации__Товары и услуги].[Организации__Товары и услуги].[Дизельное топливо]
      as '
          (
              [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Дизельное топливо]
          )'
      member [Организации__Товары и услуги].[Организации__Товары и услуги].[Бензин марки АИ-80]
      as '
          (
              [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-80]
          )'
      member [Организации__Товары и услуги].[Организации__Товары и услуги].[Бензин марки АИ-92]
      as '
          (
              [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-92]
          )'
      member [Организации__Товары и услуги].[Организации__Товары и услуги].[Бензин марки АИ-95]
      as '
          (
              [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-95]
          )'


     member [Организации__Товары и услуги].[Организации__Товары и услуги].[_]
     as '[Период__День].[Период__День].currentmember.level_number'

     member [Организации__Товары и услуги].[Организации__Товары и услуги].[UniqueName]
     as '[Период__День].[Период__День].currentmember.uniquename'

select
  {

[Организации__Товары и услуги].[Организации__Товары и услуги].[UniqueName],
[Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Авиационное топливо (керосин)]
    } on columns,
 non empty     {
filter(
  [Период__День].[Период__День].members,
  [Организации__Товары и услуги].[Организации__Товары и услуги].[_] > 4
  and
(         [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Авиационное топливо (керосин)]
,     [Measures].[Цена]) > 0)
    }on rows
from  [Организации_Цены и тарифы]
where
    (
    [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
        [Источники данных].[Источники данных].[Источник].[СТАТ Отчетность - Департамент экономики],
                [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
        [Measures].[Цена]
    )
]]>



  </query>
  <query id = "ChartDy">
    <![CDATA[With 
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-80]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки А-76 (АИ-80)] '
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-92]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-92 (АИ-93 и т.п.)]'
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-95]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-95 и выше]'
    
    member [Территории__Сопоставимый].[Территории__Сопоставимый].[FO]
    as ' 
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].datamember,
            [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[<%SelectField%>]        
        )'  
    member [Территории__Сопоставимый].[Территории__Сопоставимый].[RF]
    as ' 
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].datamember,
            [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[<%SelectField%>] 
        )'  

select
    {
        [Территории__Сопоставимый].[Территории__Сопоставимый].[FO],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[RF]
    } on rows ,
    non empty 
    {
        [Источники данных].[Источники данных].[Источник].members 
    } on columns
from   [ФСГС_Цены РФ] 
where 
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Measures].[Цена]    ) 
    
    ]]>
  </query>
  <query id = "ChartDySU"> 
    <![CDATA[with
    member [Организации__Товары и услуги].[Организации__Товары и услуги].[Дизельное топливо]
    as '
        (
            [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Дизельное топливо]
        )'
    member [Организации__Товары и услуги].[Организации__Товары и услуги].[Бензин марки АИ-80]
    as '
        (
            [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-80]

        )'
    member [Организации__Товары и услуги].[Организации__Товары и услуги].[Бензин марки АИ-92]
    as '
        (
            [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-92]

        )'
    member [Организации__Товары и услуги].[Организации__Товары и услуги].[Бензин марки АИ-95]
    as '
        (
            [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-95]

        )'
            member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_PREVb] 
    as 'filter
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members ,
            not isempty
            (
                (        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
                <%ChosenPrevPeriodSU%>)
            )
        ).count'
        
   member   [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]
    as '
    Aggregate(
filter(
 [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].children,
not isempty( [Организации__Товары и услуги].[Организации__Товары и услуги].[<%SelectField%>]))
,
    Aggregate(
Filter(
    [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
    
 not isempty([Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember)
    ))/
    Filter(
    [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,

 not isempty([Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember)
    ).count)/4
    '
        
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_PREV] 
    as '/*
    iif([Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_PREVb] <>0,
    Aggregate(
    (<%ChosenPrevPeriodSU%>,
    filter
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members ,
            not isempty
            (
                (        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
                <%ChosenPrevPeriodSU%>)
            )
        )))/[Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_PREVb] ,null)*/
        ([Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion],<%ChosenPrevPeriodSU%>)
            '
            member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_CURb]
    as '
            filter
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members ,
            not isempty
            (
                (        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
                <%ChosenCurPeriodSU%>)
            ) 
        ).count'
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_CUR]
    as '/*iif([Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_CURb]<>0,
    Aggregate(
    (<%ChosenCurPeriodSU%>,
    filter
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members ,
            not isempty
            (
                (        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
                <%ChosenCurPeriodSU%>)
            )
        )))/[Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_CURb],null)*/
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]
            '
            member  [Организации__Предприятия торговли].[Организации__Предприятия торговли].[dayu]
            as '[Период__День].[Период__День].currentmember.uniquename'
select

 non empty   {
 [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion],
        
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[dayu]

    }   on columns,

    non empty{
    filter(
[Период__День].[Период__День].[День].members,
not isempty( [Организации__Товары и услуги].[Организации__Товары и услуги].[<%SelectField%>]))

    }on rows
from  [Организации_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Источник].[СТАТ Отчетность - Департамент экономики],
                [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
        --[Организации__Предприятия торговли].[Организации__Предприятия торговли].[SU_CUR]
        [Организации__Товары и услуги].[Организации__Товары и услуги].[<%SelectField%>]
    ) 
    
    ]]>
  </query>


  <query id = "GSM_USER_PARAM">
    <![CDATA[
with 

    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]
    as 'Aggregate
        (
            Filter
            (
                [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Медицинские услуги и медикаменты].children,
                not isempty
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember
                )and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember >0
            )
        )'
select
    {   [Measures].[Цена]  } on columns,
    {
    Except(
[Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Медицинские услуги и медикаменты].[Медикаменты].children,
[Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Медицинские услуги и медикаменты].[Медикаменты].datamember)
    }on rows 
from  [Организации_Цены и тарифы] 
where 
    (
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
        [Источники данных].[Источники данных].[Источник].[СТАТ Отчетность - Департамент экономики],
                [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена]
    ) 
    
    ]]>
  </query>
  <query id = "LineChart">
    <![CDATA[with    
    member [Период__День].[Период__День].[PREV]   
    as '   
        (
            [Период__День].[Период__День].[Год].[2011].[Полугодие 2].[Квартал 3].[сентябрь].[5]   
        ) '   
    member [Период__День].[Период__День].[CUR]   
    as '   
        (
            [Период__День].[Период__День].[Год].[2011].[Полугодие 2].[Квартал 4].[октябрь].[3]   
        ) '   
    member [Период__День].[Период__День].[FY]   
    as '   
        (
            [Период__День].[Период__День].[Год].[2011].[Полугодие 1].[Квартал 2].[июнь].[27]   
        ) '     
    set [nonemptyorg]  
    as '         Except  
        (
            Filter 
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].members,
                [Measures].[Цена]>0 
            ),
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации]  
        )   '   
    member     [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Средняя цена]   
    as 'Aggregate ( [nonemptyorg] ) / [nonemptyorg].count'   
    member         [Организации__Предприятия торговли].[Организации__Предприятия торговли].[lvl] 
    as '[Период__День].[Период__День].currentmember.level_number' 
    
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[UName]
    as '[Период__День].[Период__День].currentmember.UniqueName'
select
    non empty   
    {[Организации__Предприятия торговли].[Организации__Предприятия торговли].[UName],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Средняя цена],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[<%SelectField%>]
    }on columns   ,
    non empty
    {
        filter
        (
            [Период__День].[Период__День].members,
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[lvl]>4
            and
            [Measures].[Цена]>0
        ) 
    }on rows
from  [Организации_Цены и тарифы]   
where   
    (
        [Measures].[Цена],
        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Оптовая цена],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[(All)].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Авиационное топливо (керосин)],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ]   
    )    
    
    ]]>
  </query>

</root>