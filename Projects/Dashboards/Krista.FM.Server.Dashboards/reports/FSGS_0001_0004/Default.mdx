<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FSGS_0001_0004_date">
    <![CDATA[ -- FSGS_0001_0004_date
with
    member [Measures].[Фильтр]
    as '
        (
            [Measures].[Цена],
            [Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - ИПЦ],
            [Период__Период].[Период__Период].CurrentMember
        )'
    set [Даты]
    as 'filter
        (
            descendants
            (
                [Период__Период].[Период__Период].[Данные всех периодов],
                [Период__Период].[Период__Период].[День],
                SELF_AND_BEFORE
            ),
            (
                not  [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].CurrentMember.Parent.DataMember
            ) and
            (
                not IsEmpty([Measures].[Фильтр])
            ) and
            (
                [Период__Период].[Период__Период].CurrentMember.Level is [Период__Период].[Период__Период].[Месяц] or [Период__Период].[Период__Период].CurrentMember.Level is [Период__Период].[Период__Период].[Год]
            )
        )'
    member [Measures].[Имя]
    as 'iif
        (
            [Период__Период].[Период__Период].CurrentMember.Level is [Период__Период].[Период__Период].[Месяц],
            [Период__Период].[Период__Период].CurrentMember.Name + " " + [Период__Период].[Период__Период].CurrentMember.Parent.Parent.Parent.Name + " года",
            [Период__Период].[Период__Период].CurrentMember.Name + " год"
        )'
    member [Measures].[Уникальное имя]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    member [Measures].[Уровень]
    as 'iif
        (
            [Период__Период].[Период__Период].CurrentMember.Level is [Период__Период].[Период__Период].[Месяц],
            1,
            0
        )'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    [Даты] on rows
from [ФСГС_Цены РФ]
    ]]>
  </query>

  <query id="FSGS_0001_0004_param">
    <![CDATA[ -- FSGS_0001_0004_param
with
    member [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к предыдущему периоду]
    as 'null'
    member [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к декабрю предыдущего года]
    as 'null'
    member [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к аналогичному периоду предыдущего года]
    as 'null'
    member [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[период с начала отчетного года в % к соответствующему периоду предыдущего года]
    as 'null'
    member [Measures].[Имя]
    as '[Организации__Тип цены].[Организации__Тип цены].CurrentMember.Name'
    member [Measures].[Уникальное имя]
    as '[Measures].[Полное имя] + ";" + [Measures].[Краткое имя]'
    member [Measures].[Полное имя]
    as 'iif
        (
            [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к предыдущему периоду],
            "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен, в % к предыдущему периоду]",
            iif
            (
                [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к декабрю предыдущего года],
                "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен]",
                iif
                (
                    [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к аналогичному периоду предыдущего года],
                    "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен в % к соответствующему периоду предыдущего года]",
                    iif
                    (
                        [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[период с начала отчетного года в % к соответствующему периоду предыдущего года],
                        "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен нарастающим итогом с начала года]",
                        null
                    )
                )
            )
        )'
    member [Measures].[Краткое имя]
    as 'iif
        (
            [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к предыдущему периоду],
            "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен на продовольственные товары в % к предыдущему периоду]",
            iif
            (
                [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к декабрю предыдущего года],
                "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен на продовольственные товары]",
                iif
                (
                    [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к аналогичному периоду предыдущего года],
                    "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен на продовольственные товары в % к соответствующему периоду предыдущего года]",
                    iif
                    (
                        [Организации__Тип цены].[Организации__Тип цены].CurrentMember is [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[период с начала отчетного года в % к соответствующему периоду предыдущего года],
                        "[СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Индекс потребительских цен на продовольственные товары нарастающим итогом с начала года]",
                        null
                    )
                )
            )
        )'
    member [Measures].[Уровень]
    as '0'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    {
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к предыдущему периоду],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к декабрю предыдущего года],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[к аналогичному периоду предыдущего года],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[период с начала отчетного года в % к соответствующему периоду предыдущего года]
    } on rows
from [ФСГС_Цены РФ]
    ]]>
  </query>

  <query id="FSGS_0001_0004_food">
    <![CDATA[ -- FSGS_0001_0004_food
with
    member [Measures].[Фильтр]
    as '
        (
            [Measures].[Цена],
            [Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - ИПЦ]
        )'
    set [Товары]
    as 'filter
        (
            [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].Children,
            not IsEmpty([Measures].[Фильтр])
        )'
    member [Measures].[Имя]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember.Name'
    member [Measures].[Уникальное имя]
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember.UniqueName'
    member [Measures].[Уровень]
    as '0'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    [Товары] on rows
from [ФСГС_Цены РФ]
    ]]>
  </query>

  <query id="FSGS_0001_0004_selected_food">
    <![CDATA[ -- FSGS_0001_0004_selected_food
with
    member [Measures].[Фильтр]
    as '
        (
            [Measures].[Цена],
            [Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - ИПЦ],
            [Период__Период].[Период__Период].CurrentMember
        )'
    member [Measures].[Товар]
    as 'head
        (
            filter
            (
                [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].Children,
                not IsEmpty([Measures].[Фильтр])
            )
        ).Item(0).Name'
select
    { [Measures].[Товар] } on columns,
    {
        <%selected_period%>
    } on rows
from [ФСГС_Цены РФ]
    ]]>
  </query>

  <query id="FSGS_0001_0004_fo">
    <![CDATA[ -- FSGS_0001_0004_fo
with
    set [Территории]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].Children -
    [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].DataMember'
    member [Measures].[Имя]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Name'
    member [Measures].[Уникальное имя]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.UniqueName'
    member [Measures].[Уровень]
    as '0'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    [Территории] on rows
from [ФСГС_Цены РФ]
    ]]>
  </query>

  <query id="FSGS_0001_0004_grid">
    <![CDATA[ -- FSGS_0001_0004_grid
with
    set [Территории]
    as '
        {
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация],
            <%fo%>,
            <%fo%>.Children - <%fo%>.DataMember
        }'
    member [Measures].[Данные]
    as 'iif
        (
            not [СЭП__Годовой сборник].[СЭП__Годовой сборник].CurrentMember is [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Продукт],
            (
                [Measures].[За период],
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.DataMember
            ),
            [Measures].[Другой куб]
        ) / 100'
    member [Measures].[Другой куб]
    as 'LookupCube
        (
            "ФСГС_Цены РФ",
            "
            (
                [Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - ИПЦ],
                <%selected_period%>,
                <%selected_food%>,
                [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[ИПЦ к предыдущему периоду],
                " + MemberToStr
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember
                ) + ".DataMember
            )"
        )'
    member [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Всего]
    as '<%total%>'
    member [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Продовольственные товары]
    as '<%food%>'
    member [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Продукт]
    as 'null'
select
    {
        [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Всего],
        [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Продовольственные товары],
        [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Цены и тарифы].[Продукт]
    } on columns,
    [Территории] on rows
from [СТАТ_СЭП_Годовой сборник]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - Без варианта],
        [Measures].[Данные],
        <%sep_period%>
    )
    ]]>
  </query>
  
</root>