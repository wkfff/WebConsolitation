<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0025_date">
    <![CDATA[
-- FO_0002_0025_date 
with
    member Measures.[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        Filter
        (
            OpeningPeriod
            (
                [Период].[Период].[Месяц],
                [Период].[Период].[Данные всех периодов].[2008]
            ) : ClosingPeriod
            (
                [Период].[Период].[Месяц],
                [Период].[Период].[Данные всех периодов].[2020]
            ),
            not IsEmpty([Measures].[Факт])
        )
    ) on rows
from [ФО_МесОтч_Расходы]
]]>
  </query>
  
  <query id="FO_0002_0025_grid">
    <![CDATA[
-- FO_0002_0025_grid
with                     
    set [Список РзПр]                     
    as '{[РзПр].[Сопоставимый].[Итого расходов ] } +
        Filter                    
        (
            Descendants                    
            (
                [РзПр].[Сопоставимый].[Все коды ФКР],
                [РзПр].[Сопоставимый].[Подраздел],
                SELF_AND_BEFORE                    
            ) -               
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[Несопоставленные данные],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Расходы бюджета Итого],
                [РзПр].[Сопоставимый].[Все коды ФКР]
            },
            not                    
            (
                [РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].CurrentMember.Parent.DataMember                   
            )                    
        )' 
    set [Список разделов РзПр]
    as '{[РзПр].[Сопоставимый].[Итого расходов ] } +
        Filter
        (
            Descendants
            (
                [РзПр].[Сопоставимый].[Все коды ФКР],
                [РзПр].[Сопоставимый].[Раздел],
                SELF_AND_BEFORE
            ) -
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[Несопоставленные данные],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Расходы бюджета Итого],
                [РзПр].[Сопоставимый].[Все коды ФКР]
            },
            not
            (
                [РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].CurrentMember.Parent.DataMember
            )
        )'
    set [Список КОСГУ]   
    as '{ [КОСГУ].[Сопоставимый].[Итого расходов  ] } +
        Filter   
        (
            Generate  
            (
                Descendants   
                (
                    [КОСГУ].[Сопоставимый].[Все коды ЭКР],
                    [КОСГУ].[Сопоставимый].[Статья],
                    SELF  
                ) - {[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Итого расходов]},
                {
                    [КОСГУ].[Сопоставимый].CurrentMember 
                } + Descendants  
                (
                    [КОСГУ].[Сопоставимый].CurrentMember,
                    [КОСГУ].[Сопоставимый].[Подстатья],
                    SELF  
                )  
            ),
            not   
            (
                [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].CurrentMember.Parent.DataMember 
            )   
        )'   
    set [Список РзПр-КОСГУ]
    as '{
          {
             [РзПр].[Сопоставимый].[Итого расходов ]
          } *
          {
             [КОСГУ].[Сопоставимый].[Итого расходов  ]
          }
        } +
        {
          {
             [Список разделов РзПр] - {[РзПр].[Сопоставимый].[Итого расходов ] }
          }
          *
          {
              {[КОСГУ].[Сопоставимый].[Итого расходов  ]} +
              Filter   
              (
                  Generate  
                  (
                      Descendants   
                      (
                          [КОСГУ].[Сопоставимый].[Все коды ЭКР],
                          [КОСГУ].[Сопоставимый].[Статья],
                          SELF  
                      ) - {[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Итого расходов]},
                      {
                          [КОСГУ].[Сопоставимый].CurrentMember 
                      } + Descendants  
                      (
                          [КОСГУ].[Сопоставимый].CurrentMember,
                          [КОСГУ].[Сопоставимый].[Подстатья],
                          SELF  
                      )  
                  ),
                  not   
                  (
                      [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].CurrentMember.Parent.DataMember 
                  )   
              )
          }
        }' 
    member [Measures].[Факт, тыс.руб.]   
    as '[Measures].[Факт] / <%rub_multiplier%>'    
    member [Measures].[Годовые назначения, тыс.руб.]   
    as '[Measures].[Годовые назначения] / <%rub_multiplier%>'    
    member [Measures].[Факт предыдущий год]          
    as '          
        (
            ParallelPeriod          
            (
                [Период].[Период].[Год],
                1,
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]   
            ),
            [Measures].[Факт, тыс.руб.]   
        )'         
    member [Measures].[Годовые назначения предыдущий год]         
    as '         
        (
            ParallelPeriod         
            (
                [Период].[Период].[Год],
                1,
                [Период].[Период].CurrentMember         
            ),
            [Measures].[Годовые назначения, тыс.руб.]   
        )'           
    member [Measures].[Отклонение (+,-) факт]            
    as '[Measures].[Факт, тыс.руб.] - [Measures].[Факт предыдущий год] '   
    member [Measures].[Темп роста, % факт]        
    as 'IIF       
        (
            IsEmpty   
            (
                [Measures].[Факт предыдущий год]       
            ) or        
            (
                [Measures].[Факт предыдущий год]       
            ) = 0,
            null,
            100 * [Measures].[Факт, тыс.руб.] / [Measures].[Факт предыдущий год]   
        ) '        
    member [Measures].[Рост (снижение),% факт]    
    as 'IIF       
        (
            IsEmpty   
            (
                [Measures].[Темп роста, % факт]     
            ) or       
            (
                [Measures].[Темп роста, % факт]     
            ) = 0,
            null,
            [Measures].[Темп роста, % факт] - 100     
        ) '         
    member [Measures].[Отклонение (+,-) Годовые назначения]     
    as '[Measures].[Годовые назначения, тыс.руб.] - [Measures].[Годовые назначения предыдущий год]'      
    member [Measures].[Темп роста, % Годовые назначения]     
    as 'IIF     
        (
            IsEmpty     
            (
                [Measures].[Годовые назначения предыдущий год]     
            ) or     
            (
                [Measures].[Годовые назначения предыдущий год]     
            ) = 0,
            null,
            100 * [Measures].[Годовые назначения, тыс.руб.] / [Measures].[Годовые назначения предыдущий год]   
        ) '     
    member [Measures].[Рост (снижение),% Годовые назначения]    
    as 'IIF     
        (
            IsEmpty   
            (
                [Measures].[Темп роста, % Годовые назначения]     
            ) or     
            (
                [Measures].[Темп роста, % Годовые назначения]     
            ) = 0,
            null,
            [Measures].[Темп роста, % Годовые назначения] - 100     
        ) ' 
    member [Measures].[% выполнения годовых назначений ]        
    as '100 * [Measures].[% выполнения годовых назначений]'
    
    member [Measures].[Наименование показателей]  
    as 'IIF  
        (
            ( 
              [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Фильтр по КОСГУ] or
              [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Все коды ЭКР] or
              [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Итого расходов  ] 
            ),
            IIF
            (
                [РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].[Фильтр по РзПр],
                [КОСГУ].[Сопоставимый].CurrentMember.Name,
                [РзПр].[Сопоставимый].CurrentMember.Name
            ),
            [КОСГУ].[Сопоставимый].CurrentMember.Name 
        )'  
    member [Measures].[Уровень]  
    as 'IIF  
        (
            [РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].[Итого расходов ] and 
            (
               [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Все коды ЭКР] or
               [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Фильтр по КОСГУ] or
               [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Итого расходов  ]
            ),
            "Раздел",
            IIF
            (
                [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Все коды ЭКР],
                [РзПр].[Сопоставимый].CurrentMember.Level.Name,
                IIF  
                (
                    [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Итого расходов  ],
                    "Раздел",
                    [КОСГУ].[Сопоставимый].CurrentMember.Level.Name
                )
            ) 
        )'     
        
    set [Районы ]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF    
            ),
            not    
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"    
            )    
        )'    
    set [Города ]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF    
            ),
            not    
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"   
            )    
        )'     
    member [Районы].[Сопоставимый].[Консолидированный бюджет субъекта]    
    as '[Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]'    
    member [Районы].[Сопоставимый].[Бюджет субъекта]    
    as '[Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]'    
    member [Районы].[Сопоставимый].[Местные бюджеты]    
    as '[Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]'     
    member [Районы].[Сопоставимый].[Городские округа ] 
    as 'Aggregate
        (
           [Города ]
        )' 
    member [Районы].[Сопоставимый].[Муниципальные районы ] 
    as 'Aggregate
        (
           [Районы ]
        )'    
        
    member [ТипДокумента].[СКИФ].[Тип документа ]             
    as 'IIF             
        (
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]           
            ) or            
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Консолидированный бюджет субъекта]           
            ) or            
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Бюджет субъекта]         
            ) or          
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Местные бюджеты]          
            ),
            [ТипДокумента].[СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов],
            IIF            
            (
                (
                    [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Городские округа ]      
                ) or       
                (
                    [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Муниципальные районы ]      
                ) or      
                (
                    [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"       
                ) or      
                (
                    [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"       
                ),
                [ТипДокумента].[СКИФ].[Все].[Собственная отчетность муниципальных образований],
                [ТипДокумента].[СКИФ].[Все].[Отчетность главных распорядителей средств бюджета]      
            )        
        ) '  
    member [Уровни бюджета].[СКИФ].[Уровень бюджета ]             
    as 'IIF             
        (
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]  
            ) or   
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Консолидированный бюджет субъекта]  
            ),
            [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
            IIF             
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Бюджет субъекта],
                [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта],
                IIF             
                (
                    [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Местные бюджеты],
                    [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет МО],
                    IIF  
                    (
                        (
                            [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Городские округа ]  
                        ) or  
                        (
                            [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Муниципальные районы ]  
                        ) or  
                        (
                            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"  
                        ) or  
                        (
                            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"  
                        ),
                        [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
                        [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта]
                    )  
                )             
            )             
        ) '    
    member [РзПр].[Сопоставимый].[Итого расходов ]  
    as '[РзПр].[Сопоставимый].[Фильтр по РзПр]'         
    member [РзПр].[Сопоставимый].[Фильтр по РзПр]  
    as 'Aggregate 
        (
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБЩЕГОСУДАРСТВЕННЫЕ ВОПРОСЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ОБОРОНА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ БЕЗОПАСНОСТЬ И ПРАВООХРАНИТЕЛЬНАЯ ДЕЯТЕЛЬНОСТЬ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ЭКОНОМИКА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЖИЛИЩНО-КОММУНАЛЬНОЕ ХОЗЯЙСТВО],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОХРАНА ОКРУЖАЮЩЕЙ СРЕДЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБРАЗОВАНИЕ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[КУЛЬТУРА, КИНЕМАТОГРАФИЯ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЗДРАВООХРАНЕНИЕ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[СОЦИАЛЬНАЯ ПОЛИТИКА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Физическая культура и спорт],
                [РзПр].[Сопоставимый].[Все коды ФКР].[СРЕДСТВА МАССОВОЙ ИНФОРМАЦИИ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Обслуживание государственного и муниципального долга],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ ОБЩЕГО ХАРАКТЕРА БЮДЖЕТАМ СУБЪЕКТОВ РОССИЙСКОЙ ФЕДЕРАЦИИ И МУНИЦИПАЛЬНЫХ ОБРАЗОВАНИЙ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ]
            } 
        )'  
    member [КОСГУ].[Сопоставимый].[Итого расходов  ]  
    as '[КОСГУ].[Сопоставимый].[Фильтр по КОСГУ]'         
    member [КОСГУ].[Сопоставимый].[Фильтр по КОСГУ]
    as 'Aggregate 
        (
            {
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление финансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Выбытие финансовых активов]
            } 
        )'         
select
    {
        {
            {
                [Период].[Период].[Данные всех периодов]
            }  
            *  
            {
                [Measures].[Наименование показателей]  
            }  
        } +          
        {
            {
                ParallelPeriod               
                (
                    [Период].[Период].[Год],
                    1,
                    [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]                
                ),
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]                  
            }                 
            *                 
            {
                [Measures].[Годовые назначения, тыс.руб.],
                [Measures].[Факт, тыс.руб.],
                [Measures].[% выполнения годовых назначений ]                
            }                 
        } +             
        {
            {
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]              
            }             
            *     
            {
                [Measures].[Отклонение (+,-) Годовые назначения],
                [Measures].[Темп роста, % Годовые назначения],
                [Measures].[Рост (снижение),% Годовые назначения],
                [Measures].[Отклонение (+,-) факт],
                [Measures].[Темп роста, % факт],
                [Measures].[Рост (снижение),% факт],                
                [Measures].[Уровень]
            }     
        }             
    } on columns,
    Filter
    ( 
        [<%outcomes_set%>],
        not
        (
            IsEmpty
            (
              ([Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>], [Measures].[Факт]) 
            ) and 
            IsEmpty
            (
              ([Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>], [Measures].[Годовые назначения]) 
            )
        )
    ) on rows
from [ФО_МесОтч_Расходы]                     
where              
    (
        <%dimension_slicer%>
        [ТипДокумента].[СКИФ].[Тип документа ],
        [Уровни бюджета].[СКИФ].[Уровень бюджета ],
        <%selected_budget%>
    )                                 
  ]]>
  </query>

  <query id="FO_0002_0025_chart">
    <![CDATA[
-- FO_0002_0025_chart
with        
    member [Measures].[IsGRBS]    
    as '      
        (
            [Районы].[Сопоставимый].CurrentMember.Name <> "Несопоставленные данные"    
        ) and    
        (
            [Районы].[Сопоставимый].CurrentMember.Name <> "Консолидированный бюджет области"    
        ) and    
        (
            [Районы].[Сопоставимый].CurrentMember.Name <> "Муниципальные образования - Омская область"    
        ) and    
        (
            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") <> "СБ"    
        )and    
        (
            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") <> "МР"    
        )and    
        (
            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") <> "ГО"    
        ) '     
    set [Список ГРБС]             
    as 'Filter               
        (
            Descendants               
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF          
            ),
            [Measures].[IsGRBS] = true  
        )' 
    
    set [Список РзПр]        
    as 'Filter        
        (
            Descendants        
            (
                [РзПр].[Сопоставимый].[Все коды ФКР],
                [РзПр].[Сопоставимый].[Раздел],
                SELF
            ) -        
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[Несопоставленные данные],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Расходы бюджета Итого]       
            },
            not        
            (
                [РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].CurrentMember.Parent.DataMember        
            )        
        )'         
    member [КОСГУ].[Сопоставимый].[Заработная плата ]       
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Заработная плата]'       
    member [КОСГУ].[Сопоставимый].[Начисления на оплату труда ]       
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Начисления на выплаты по оплате труда]'       
    member [КОСГУ].[Сопоставимый].[Коммунальные услуги ]       
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Коммунальные услуги]'       
    member [КОСГУ].[Сопоставимый].[Социальные выплаты ]       
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение]'       
    member [КОСГУ].[Сопоставимый].[Межбюджетные трансферты ]       
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления другим бюджетам бюджетной системы Российской Федерации]'       
    member [КОСГУ].[Сопоставимый].[Увеличение стоимости основных средств ]       
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости основных средств]'       
    member [КОСГУ].[Сопоставимый].[Прочие расходы ]       
    as '     
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР]     
        ) -      
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Заработная плата]     
        ) -     
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Начисления на выплаты по оплате труда]    
        ) -     
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Коммунальные услуги]   
        ) -    
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение]   
        ) -    
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления другим бюджетам бюджетной системы Российской Федерации]  
        ) -  
        (
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости основных средств] 
        )' 
    set [Список КОСГУ]        
    as '
        {
            [КОСГУ].[Сопоставимый].[Заработная плата ],
            [КОСГУ].[Сопоставимый].[Начисления на оплату труда ],
            [КОСГУ].[Сопоставимый].[Коммунальные услуги ],
            [КОСГУ].[Сопоставимый].[Социальные выплаты ],
            [КОСГУ].[Сопоставимый].[Межбюджетные трансферты ],
            [КОСГУ].[Сопоставимый].[Увеличение стоимости основных средств ],
            [КОСГУ].[Сопоставимый].[Прочие расходы ]
        }' 
    member [Measures].[Факт, тыс.руб.]        
    as 'IIF
        (
           IsEmpty([Measures].[Факт]),
           0,
           [Measures].[Факт] / <%rub_multiplier%>
        )'        
    member [Measures].[Годовые назначения, тыс.руб.]        
    as 'IIF
        (
           IsEmpty([Measures].[Годовые назначения]),
           0,
           [Measures].[Годовые назначения] / <%rub_multiplier%>
        )'    
        
    set [Районы ]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF    
            ),
            not    
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"    
            )    
        )'    
    set [Города ]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF    
            ),
            not    
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"   
            )    
        )'     
    member [Районы].[Сопоставимый].[Консолидированный бюджет субъекта]    
    as '[Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]'    
    member [Районы].[Сопоставимый].[Бюджет субъекта]    
    as '[Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]'    
    member [Районы].[Сопоставимый].[Местные бюджеты]    
    as '[Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]'     
    member [Районы].[Сопоставимый].[Городские округа ] 
    as 'Aggregate
        (
           [Города ]
        )' 
    member [Районы].[Сопоставимый].[Муниципальные районы ] 
    as 'Aggregate
        (
           [Районы ]
        )'          
    member [ТипДокумента].[СКИФ].[Тип документа ]             
    as 'IIF             
        (
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]           
            ) or            
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Консолидированный бюджет субъекта]           
            ) or            
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Бюджет субъекта]         
            ) or          
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Местные бюджеты]          
            ),
            [ТипДокумента].[СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов],
            IIF            
            (
                (
                    [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Городские округа ]      
                ) or       
                (
                    [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Муниципальные районы ]      
                ) or      
                (
                    [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"       
                ) or      
                (
                    [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"       
                ),
                [ТипДокумента].[СКИФ].[Все].[Собственная отчетность муниципальных образований],
                [ТипДокумента].[СКИФ].[Все].[Отчетность главных распорядителей средств бюджета]      
            )        
        ) '  
    member [Уровни бюджета].[СКИФ].[Уровень бюджета ]             
    as 'IIF             
        (
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Все районы].[Консолидированный бюджет области]  
            ) or   
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Консолидированный бюджет субъекта]  
            ),
            [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
            IIF             
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Бюджет субъекта],
                [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта],
                IIF             
                (
                    [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Местные бюджеты],
                    [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет МО],
                    IIF  
                    (
                        (
                            [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Городские округа ]  
                        ) or  
                        (
                            [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].[Муниципальные районы ]  
                        ) or  
                        (
                            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"  
                        ) or  
                        (
                            [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"  
                        ),
                        [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
                        [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта]
                    )  
                )             
            )             
        ) ' 
select
    non empty { [Список КОСГУ] } on columns,
    Filter 
    ( 
      [<%chart_row_set%>],
      not 
      (
        [КОСГУ].[Сопоставимый].[Заработная плата ] = 0 and
        [КОСГУ].[Сопоставимый].[Начисления на оплату труда ] = 0 and
        [КОСГУ].[Сопоставимый].[Коммунальные услуги ] = 0 and
        [КОСГУ].[Сопоставимый].[Социальные выплаты ] = 0 and
        [КОСГУ].[Сопоставимый].[Межбюджетные трансферты ] = 0 and
        [КОСГУ].[Сопоставимый].[Увеличение стоимости основных средств ] = 0 and
        [КОСГУ].[Сопоставимый].[Прочие расходы ] = 0
      )  
    ) on rows        
from [ФО_МесОтч_Расходы]        
where        
    (
        [Measures].[<%selected_chart_measure%>],
        [ТипДокумента].[СКИФ].[Тип документа ] ,
        [Уровни бюджета].[СКИФ].[Уровень бюджета ],
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        <%chart_budget%>
    )          
]]>
  </query>
</root>