<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="ORG_0001_0006_list_of_dates">
    <![CDATA[ -- Query name: ORG_0001_0006_list_of_dates
select
    {[Measures].[Цена]} on columns,
    {
        filter
        (
            [Период__День].[Период__День].[День].members,
            [Measures].[Цена] > 0
        )
    } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Продовольственные товары],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ]
    )
    ]]>
  </query>

  <query id = "ORG_0001_0006_grid_part1">
    <![CDATA[ -- Query name: ORG_0001_0006_grid_part1
with
    set [Территории]
    as '/*filter
        ( */       
            except
            (
                {
                    [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].Children
                },
                {
                    [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].DataMember
                }
            )
            /*,
            not IsEmpty
            (

                [Measures].[Цена]
            ) and ([Measures].[Цена] > 0)*/
            /*and <%selected_date%> > 0
        )*/'
        
           member [Территории__РФ].[Территории__РФ].[Ямало-Ненецкий автономный округ]
   as 'Aggregate(filter
        (        
            except
            (
                {
                    [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].Children
                },
                {
                    [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].DataMember
                }
            ),
            not IsEmpty
            (

                [Measures].[Цена]
            ) and ([Measures].[Цена] > 0)
            
        ))/filter
        (        
            except
            (
                {
                    [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].Children
                },
                {
                    [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].DataMember
                }
            ),
            not IsEmpty
            (

                [Measures].[Цена]
            ) and ([Measures].[Цена] > 0)
            
        ).count'
   member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Цена ]
   as ' Aggregate(filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0),  [Measures].[Цена])/ filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0).count'
    set [Организации]
    as 'filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ),
            not IsEmpty
            (
                [Measures].[Цена]
            ) and ([Measures].[Цена] > 0)
        )'
    set [Даты]
    as '
        {
            <%year_date%>   ,
            <%previous_date%>,            
                     <%selected_date%>
        }'
select
    [Даты] * 
    {[Организации__Предприятия торговли].[Организации__Предприятия торговли].[Цена ]}    
    on columns,
    {[Территории] ,
    
    {[Территории__РФ].[Территории__РФ].[Ямало-Ненецкий автономный округ]}
    }
    on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Measures].[Цена],
        --[Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - Департамент экономики],
        <%selected_food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id = "ORG_0001_0006_grid_part2">
    <![CDATA[ -- Query name: ORG_0001_0006_grid_part2
with
member
 [Территории__РФ].[Территории__РФ].[Ханты-Мансийский автономный округ - Югра ]
 as 
'[Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра].datamember'
   set [Территории]
    as '
     
     filter
        (
            {
                [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ямало-Ненецкий автономный округ].children
            },
            not IsEmpty ( [Measures].[Средняя цена] ) and ([Measures].[Средняя цена] > 0)
        )'
    set [Даты]
    as ' 
        {
            
            <%year_date%>,
            <%previous_date%>,            
            <%selected_date%>
            
        }'
select
    [Даты] on columns,
    [Территории] on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Measures].[Средняя цена],
        --[Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        <%selected_food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>
  
  <query id = "ORG_0001_0006_unit">
    <![CDATA[ -- Query name: ORG_0001_0006_unit
with
    member [Measures].[Имя]
    as '[Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember.UniqueName'
    member [Measures].[Единица измерения]
    as '[Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember.Properties("Единица измерения")'
select
    {
        [Measures].[Имя],
        [Measures].[Единица измерения]
    } on columns
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        <%selected_food%>
    )
    ]]>
  </query>

  <query id = "RFTable">
    <![CDATA[ -- Query name: RFTable
    with
member [Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - 21.03.2011]
as '[Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - 21.03,2011]'

member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Творог]
as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Творог жирный]'
member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Сыр твердых сортов]
as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Сыры сычужные твердые и мягкие]'


member [Источники данных].[Источники данных].[<%previous_dateRF%>]
as '[Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - <%previous_dateRF%>]'

member [Источники данных].[Источники данных].[<%year_dateRF%>]
as '[Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - <%year_dateRF%>]'

member [Источники данных].[Источники данных].[<%selected_dateRF%>]
as '[Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - <%selected_dateRF%>]'


SELECT
{
        [Источники данных].[Источники данных].[<%previous_dateRF%>],
        [Источники данных].[Источники данных].[<%year_dateRF%>],
        [Источники данных].[Источники данных].[<%selected_dateRF%>]
        
}
 ON ROWS ,
    NON EMPTY 
    {
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].datamember 
    } ON COLUMNS 
FROM [ФСГС_Цены РФ] 
WHERE 
    (
        [Период__Период].[Период__Период].[Данные всех периодов],
 --       [Источники данных].[Источники данных].[Все источники данных].[ФСГС Цены РФ - 11.07.2011],
        [Measures].[Цена],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[<%selected_foodRF%>],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена] 
    ) 
    ]]>
  </query>

</root>