<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0019_date">
    <![CDATA[
-- FO_0002_0019_date
with
    member Measures.[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        Filter
        (
            OpeningPeriod
            (
                [Период__Период].[Период__Период].[Месяц],
                [Период__Период].[Период__Период].[Данные всех периодов].[2008]
            ) : ClosingPeriod
            (
                [Период__Период].[Период__Период].[Месяц],
                [Период__Период].[Период__Период].[Данные всех периодов].[2011]
            ),
            not IsEmpty([Measures].[Факт])
        )
    ) on rows
from [ФО_МесОтч_Расходы]
  ]]>
  </query>

<query id="FO_0002_0019_grid">
<![CDATA[
-- FO_0002_0019_grid
with                    
    set [Муниципальные образования]                    
    as 'Filter                  
        (
            Descendants                   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Самарская область],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF                   
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"                 
            ) and not                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                 
            )                  
        )'                 
    set [Выбранные периоды прошлого года]                
    as '
    filter
    (
      
        {
            ParallelPeriod([Период__Период].[Период__Период].[Год], 1, [Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>].<%open_period_month%>) : 
            ParallelPeriod([Период__Период].[Период__Период].[Год], 1, [Период__Период].[Период__Период].[Данные всех периодов].[<%close_period_year%>].<%close_period_month%>)                     
        },
        (
                not   
                (
                    [Период__Период].[Период__Период].CurrentMember.Name = "Данные года" OR [Период__Период].[Период__Период].CurrentMember.Name = "Остатки на начало года"
                ) 
            )
        )
        '             
    set [Выбранные периоды текущего года]                
    as ' 
    filter
    (
        {
            [Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>].<%open_period_month%> : 
            [Период__Период].[Период__Период].[Данные всех периодов].[<%close_period_year%>].<%close_period_month%>             
        },
        (
                not   
                (
                    [Период__Период].[Период__Период].CurrentMember.Name = "Данные года" OR [Период__Период].[Период__Период].CurrentMember.Name = "Остатки на начало года"
                ) 
            )
        )'                
    member [Measures].[Всего за период]                
    as 'IIF              
        (
            [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].[Прошлый год],
            Sum              
            (
                [Выбранные периоды прошлого года],
                [Measures].[Факт_за период]              
            ) / 1000,
            Sum              
            (
                [Выбранные периоды текущего года],
                [Measures].[Факт_за период]              
            ) / 1000             
        )'               
  member [Measures].[В среднем за период]           
    as 'IIF            
        (
            [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].[Прошлый год],
            [Measures].[Всего за период] / Count        
            (
                [Выбранные периоды прошлого года]        
            ),
            [Measures].[Всего за период] / Count        
            (
                [Выбранные периоды текущего года]        
            )
        )'         
    member [Measures].[Отклонение]        
    as '      
        (
            [Период__Период].[Период__Период].[Текущий год],
            [Measures].[В среднем за период]
        ) -       
        (
            [Период__Период].[Период__Период].[Прошлый год],
            [Measures].[В среднем за период]
        )'       
    member [Measures].[Темп роста]     
    as 'IIF    
        (
            IsEmpty    
            (
                (
                    [Период__Период].[Период__Период].[Прошлый год],
                    [Measures].[В среднем за период]
                )    
            ) or     
            (
                [Период__Период].[Период__Период].[Прошлый год],
                [Measures].[В среднем за период]
            ) = 0,
            null,
            (
                [Период__Период].[Период__Период].[Текущий год],
                [Measures].[В среднем за период]
            ) /     
            (
                [Период__Период].[Период__Период].[Прошлый год],
                [Measures].[В среднем за период]
            )    
        ) - 1'   
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]   
    as 'Sum
        (
            [Муниципальные образования],
            [Measures].CurrentMember  
        )'   
    member [Период__Период].[Период__Период].[Текущий год]
    as '[Период__Период].[Период__Период].[Данные всех периодов].[<%close_period_year%>]'
    member [Период__Период].[Период__Период].[Прошлый год]
    as '[Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>]'        
SELECT
    {
        {
            {
                [Период__Период].[Период__Период].[Прошлый год],
                [Период__Период].[Период__Период].[Текущий год]              
            }               
            *          
            {
                [Measures].[Всего за период],
                [Measures].[В среднем за период]       
            }      
        }  +       
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов]      
            }      
            *   
            {
                [Measures].[Отклонение],
                [Measures].[Темп роста]   
            }    
        }       
    } on columns,
    {
        [Муниципальные образования] +  
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]  
        } 
    } on rows  
FROM  [ФО_МесОтч_Расходы]   
where   
    (
        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Коммунальные услуги]  
    )
  ]]>
</query>

<query id="FO_0002_0019_chart">
<![CDATA[
-- FO_0002_0019_chart
with                    
    set [Муниципальные образования]                    
    as 'Filter                  
        (
            Descendants                   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Самарская область],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF                   
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"                 
            ) and not                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                 
            )                  
        )'                 
    set [Выбранные периоды прошлого года]                
    as '
    filter
    (
        {
            ParallelPeriod([Период__Период].[Период__Период].[Год], 1, [Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>].<%open_period_month%>) : 
            ParallelPeriod([Период__Период].[Период__Период].[Год], 1, [Период__Период].[Период__Период].[Данные всех периодов].[<%close_period_year%>].<%close_period_month%>)                     
        },
        (
                not   
                (
                    [Период__Период].[Период__Период].CurrentMember.Name = "Данные года" OR [Период__Период].[Период__Период].CurrentMember.Name = "Остатки на начало года"
                ) 
            )
        )'             
    set [Выбранные периоды текущего года]                
    as '
    filter
    (
        {
            [Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>].<%open_period_month%> : 
            [Период__Период].[Период__Период].[Данные всех периодов].[<%close_period_year%>].<%close_period_month%>             
        },
        (
                not   
                (
                    [Период__Период].[Период__Период].CurrentMember.Name = "Данные года" OR [Период__Период].[Период__Период].CurrentMember.Name = "Остатки на начало года"
                ) 
            )
        )'                
    member [Measures].[Всего за период]
    as 'IIF
        (
            [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].[Прошлый год],
            Sum
            (
                [Выбранные периоды прошлого года],
                [Measures].[Факт_за период]
            ) / 1000,
            Sum
            (
                [Выбранные периоды текущего года],
                [Measures].[Факт_за период]
            ) / 1000
        )'
    member [Measures].[В среднем за период]           
    as 'IIF            
        (
            [Период__Период].[Период__Период].CurrentMember is [Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>],
            [Measures].[Всего за период] / Count        
            (
                [Выбранные периоды прошлого года]        
            ),
            [Measures].[Всего за период] / Count        
            (
                [Выбранные периоды текущего года]        
            )         
        )'    
    member [Период__Период].[Период__Период].[Текущий год]
    as '[Период__Период].[Период__Период].[Данные всех периодов].[<%close_period_year%>]'
    member [Период__Период].[Период__Период].[Прошлый год]
    as '[Период__Период].[Период__Период].[Данные всех периодов].[<%open_period_year%>]'          
SELECT
    {
        {
            {
                [Период__Период].[Период__Период].[Прошлый год],
                [Период__Период].[Период__Период].[Текущий год]               
            }               
            *          
            {
                [Measures].[В среднем за период]
            }      
        }      
    } on columns,
    {
        [Муниципальные образования]
    } on rows  
FROM [ФО_МесОтч_Расходы]   
where   
    (
        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Коммунальные услуги]  
    )   
  ]]>
</query>

</root>