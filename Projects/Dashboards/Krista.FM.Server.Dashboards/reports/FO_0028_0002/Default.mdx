<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0028_0002_date">
    <![CDATA[
-- FO_0028_0002_detail_date
with  
    member [Measures].[ДанныеНа]  
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'   
select
    { [Measures].[ДанныеНа] } on columns,
    {
        Tail 
        (
            Filter
            (
                [Период__Период].[Период__Период].[Год].Members,
                not IsEmpty([Measures].[Привлечено Факт])
            ) 
        ) 
    } on rows  
from [ФО_ИФ_Кредиты предоставленные]
  ]]>
  </query>

  <query id="FO_0028_0002_organiz">
    <![CDATA[
-- FO_0028_0002_organiz
with
    member [Measures].[Уровень]
    as 'IIF
        (
            [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].[Все организации],
            0,
            IIF
            (
                ([Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Муниципальные образования])
                or
                ([Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица])
                or
                ([Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица (исполненные гарантии)])
                ,
                1,
                2
            )
        ) '
    member [Measures].[Уникальное имя]
    as 'IIF
        (
            [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].[Все организации],
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Все],
            [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember.UniqueName
        )'
    member [Measures].[Имя]
    as ' [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember.Name '
    set [Организации]
    as 'Filter
        (
            {
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Муниципальные образования],
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Муниципальные образования].Children,
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица],
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица].Children,
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица (исполненные гарантии)],
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица (исполненные гарантии)].Children
            },
            not
            (
                [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember.Parent.DATAMEMBER
            ) and not
            (
                [Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember is [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Несопоставленные данные]
            )
        )'
    member [Организации__Сопоставимый].[Организации__Сопоставимый].[Все организации]
    as '  [Организации__Сопоставимый].[Организации__Сопоставимый].[Все]      '
SELECT
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    }ON COLUMNS,
    non empty
    {
        {
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Все организации]
        } +[Организации]
    }   ON ROWS
FROM   [ФО_ИФ_Кредиты предоставленные]
where
    (
        [ИФ__Тип кредита].[ИФ__Тип кредита].[Все].[Бюджетные кредиты, предоставленные внутри страны в валюте Российской Федерации]
    )
  ]]>
  </query>

  <query id="FO_0028_0002_dogovor">
    <![CDATA[
-- FO_0028_0002_dogovor
with 
    member [Measures].[Уровень] 
     as 'IIF ([Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].CurrentMember is [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все договора],
            0,
            1)'
    member [Measures].[Уникальное имя] 
    as ' [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].CurrentMember.UniqueName ' 
    member [Measures].[Имя] 
    as ' [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].CurrentMember.Name ' 
    member [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все договора]
    as '[Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все]' 
SELECT
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень] 
    }ON COLUMNS,
    {
        [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все договора]
    }+ 
    {
        [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все].Children 
    } ON ROWS 
FROM   [ФО_ИФ_Кредиты предоставленные] 
where 
    (
        [ИФ__Тип кредита].[ИФ__Тип кредита].[Все].[Бюджетные кредиты, предоставленные внутри страны в валюте Российской Федерации] 
    ) 
  ]]>
  </query>

  <query id="FO_0028_0002_grid">
    <![CDATA[ 
 with
    member [Measures].[Задолженность_На конец года_]
    as 'IIF
        (
            (
                [Measures].[Остаток_На конец года]
            ) < 0.00004,
            null,
            [Measures].[Остаток_На конец года] / 1000
        )  '
    member [Measures].[Задолженность_За период_]
    as 'IIF
        (
            (
                [Measures].[Остаток_На конец года] - [Measures].[Остаток_На начало года]
            ) = 0,
            null,
            (
                [Measures].[Остаток_На конец года] - [Measures].[Остаток_На начало года]
            ) / 1000
        ) '
    member [Measures].[Задолженность_На начало года_]
    as 'IIF
        (
            (
                [Measures].[Остаток_На начало года]
            ) < 0.00004,
            null,
            [Measures].[Measures].[Остаток_На начало года] / 1000
        )  '
    set [Все организации]
    as 'Descendants
        (
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Муниципальные образования],
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Уровень 2],
            SELF
        )
        +
        Descendants
        (
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица],
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Уровень 2],
            SELF
        )
        +
        Descendants
        (
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Все].[Юридические лица (исполненные гарантии)],
            [Организации__Сопоставимый].[Организации__Сопоставимый].[Уровень 2],
            SELF
        )'
    set [Реквизиты]
    as '[Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все].Children'
    set [Года]
    as '
        {
            <%year_grid%>
        }'
    member [Measures].[Организация ]
    as '[Организации__Сопоставимый].[Организации__Сопоставимый].CurrentMember.Name'
    member [Measures].[Реквизиты ]
    as 'IIF
        (
            [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].CurrentMember is [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все],
            " ",
            [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].CurrentMember.Name
        )'
    member [ИФ__Тип кредита].[ИФ__Тип кредита].[Фильтр]
    as 'Aggregate
        (
            {
                [ИФ__Тип кредита].[ИФ__Тип кредита].[Все].[Бюджетные кредиты, предоставленные внутри страны в валюте Российской Федерации],
                [ИФ__Тип кредита].[ИФ__Тип кредита].[Все].[Бюджетные кредиты, предоставленные юридическим лицам в валюте Российской Федерации]
            }
        )'
    member [Период__Период].[Период__Период].[Года ]
    as 'Sum([Года])'
    set [Непустые организации и реквизиты]
    as 'nonEmptyCrossJoin
        (
            { <%grid_org%> }
            * { <%grid_rekv%> }
        ) '
    member [Организации__Сопоставимый].[Организации__Сопоставимый].[Итого]
    as 'Aggregate
        (
            [Непустые организации и реквизиты]
        )'
select
    {
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов]
            }
            *
            {
                [Measures].[Организация ],
                [Measures].[Реквизиты ]
            }
        }+
        {
            <%grid_content%>
        }
    } on columns,
    {
        [Непустые организации и реквизиты] +
        {
            {
                [Организации__Сопоставимый].[Организации__Сопоставимый].[Итого]
            }
            *
            {
                [Договор__Кредиты предоставленные].[Договор__Кредиты предоставленные].[Все]
            }
        }
    } on rows
from [ФО_ИФ_Кредиты предоставленные]
where
    (
        [ИФ__Тип кредита].[ИФ__Тип кредита].[Фильтр]
    )
 ]]>
  </query>
</root>