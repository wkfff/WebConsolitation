<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="Food_0001_0003_incomes_date">
    <![CDATA[ -- Food_0001_0003_incomes_date
with
    member [Measures].[ДанныеНа]
    as 'iif([Период__День].[Период__День].CurrentMember is [Период__День].[Период__День].[Данные всех периодов].[Единица измерения],
    [Measures].[Единица измерения], [Период__День].[Период__День].CurrentMember.UniqueName)'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период__День].[Период__День].[День].Members,
                not IsEmpty([Measures].[Цена]) and [Measures].[Цена] > 0
            ),
            2
        )'
    member [Measures].[Текущий год]
    as 'Tail
        (
            Filter
            (
                [Период__День].[Период__День].[Год].Members,
                not IsEmpty([Measures].[Цена]) and [Measures].[Цена] > 0
            ),
            1
        ).Item(0).Name'
    set [Начало года]
    as 'head
        (
            filter
            (
                descendants
                (
                    StrToMember
                    (
                        "[Период__День].[Период__День].[Данные всех периодов].[" + [Measures].[Текущий год] + "]"
                    ),
                    [Период__День].[Период__День].[День],
                    self
                ),
                not IsEmpty([Measures].[Цена]) and [Measures].[Цена] > 0
            ),
            1
        )'
    member [Measures].[Единица измерения]
    as 'LCase([Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember.Properties("Единица измерения"))'
    member [Период__День].[Период__День].[Данные всех периодов].[Единица измерения]
    as 'null'
select
    { [Measures].[ДанныеНа] } on columns,
    {
        Union({[Начало года], [NonEmptySet]}, {[Период__День].[Период__День].[Данные всех периодов].[Единица измерения]}, All)
    } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - Департамент экономики],
        <%food%>,
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id="Food_0001_0003_text">
    <![CDATA[ -- Food_0001_0003_text
with
    member [Measures].[Цена на текущую дату]
    as '
        (
            <%period_cur_date%>,
            [Measures].[Средняя цена]
        )'
    member [Measures].[Цена на прошлую дату]
    as '
        (
            <%period_last_date%>,
            [Measures].[Средняя цена]
        )'
    member [Measures].[Цена на начало года]
    as '
        (
            <%period_first_year%>,
            [Measures].[Средняя цена]
        )'
    member [Measures].[Изменение цены]
    as 'iif
        (
            IsEmpty([Measures].[Цена на текущую дату]) or [Measures].[Цена на текущую дату] = 0 or
            IsEmpty([Measures].[Цена на прошлую дату]) or [Measures].[Цена на прошлую дату] = 0,
            null,
            [Measures].[Цена на текущую дату] - [Measures].[Цена на прошлую дату]
        )'
    member [Measures].[Темп прироста]
    as 'iif
        (
            IsEmpty([Measures].[Цена на текущую дату]) or [Measures].[Цена на текущую дату] = 0 or
            IsEmpty([Measures].[Цена на прошлую дату]) or [Measures].[Цена на прошлую дату] = 0,
            null,
            [Measures].[Цена на текущую дату] / [Measures].[Цена на прошлую дату] - 1
        )'
    member [Measures].[Изменение цены к началу года]
    as 'iif
        (
            IsEmpty([Measures].[Цена на текущую дату]) or [Measures].[Цена на текущую дату] = 0 or
            IsEmpty([Measures].[Цена на начало года]) or [Measures].[Цена на начало года] = 0,
            null,
            [Measures].[Цена на текущую дату] - [Measures].[Цена на начало года]
        )'
    member [Measures].[Темп прироста к началу года]
    as 'iif
        (
            IsEmpty([Measures].[Цена на текущую дату]) or [Measures].[Цена на текущую дату] = 0 or
            IsEmpty([Measures].[Цена на начало года]) or [Measures].[Цена на начало года] = 0,
            null,
            [Measures].[Цена на текущую дату] / [Measures].[Цена на начало года] - 1
        )'
select
    {
        [Measures].[Цена на текущую дату],
        [Measures].[Цена на прошлую дату],
        [Measures].[Цена на начало года],
        [Measures].[Изменение цены],
        [Measures].[Темп прироста],
        [Measures].[Изменение цены к началу года],
        [Measures].[Темп прироста к началу года]
    } on columns
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        <%food%>,
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].DataMember,
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )    
    ]]>
  </query>

  <query id="Food_0001_0003_chart1">
    <![CDATA[ -- Food_0001_0003_chart1
with
    member [Measures].[Дата]
    as '[Период__День].[Период__День].CurrentMember.UniqueName'
    set [NonEmptySet]
    as ' Tail
        (
            Filter
            (
                [Период__День].[Период__День].[День].Members,
                not IsEmpty([Measures].[Средняя цена]) and [Measures].[Средняя цена] > 0
            ),
            24
        )'
select
    { [Measures].[Дата], [Measures].[Средняя цена] } on columns,
    { [NonEmptySet] } on rows
from   [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        <%food%>,
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].DataMember,
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )    
    ]]>
  </query>

  <query id="Food_0001_0003_chart2">
    <![CDATA[ -- Food_0001_0003_chart2
with
    set [Территории]
    as '{
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Нижневартовск],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Сургут],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Ханты-Мансийск],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Белоярский муниципальный район].[гп Белоярский]
        }'
    member [Measures].[Текущая цена]
    as '
        (
            <%period_cur_date%>,
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
            [Measures].[Средняя цена]
        )'
select
    [Measures].[Текущая цена] on columns,
    non empty [Территории] on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ХМАО-Югра],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена],
        <%food%>
    )    
    ]]>
  </query>

  <query id="Food_0001_0003_chart2_data">
    <![CDATA[ -- Food_0001_0003_chart2_data
with
    set [Территории]
    as 'filter({
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Белоярский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Березовский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Кондинский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Нефтеюганский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Нижневартовский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Октябрьский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Советский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Сургутский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Ханты-Мансийский муниципальный район],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Лангепас],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Мегион],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Нефтеюганск],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Радужный],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Урай],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Нягань],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Когалым],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Покачи],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Пыть-Ях],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Югорск]
    }, [Measures].[Цена] > 0)'
    set [Организации]
    as 'filter(except
        (
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children
            },
            {
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано]
            }
        ), [Measures].[Цена] > 0)'
select
    non empty {[Организации]} on columns,
    non empty {[Территории]} on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Measures].[Цена],
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - Департамент экономики],
        <%period_cur_date%>,
        <%food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>
 
</root>