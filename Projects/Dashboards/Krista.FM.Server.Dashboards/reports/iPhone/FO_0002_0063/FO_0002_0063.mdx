<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0063_rests_date">
    <![CDATA[
with   
    member [Measures].[ДанныеНа]   
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'   
    set [NonEmptySet]   
    as 'Tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Год],
                    SELF   
                ),
                not IsEmpty     
                (
                    [Measures].[Наличие на конец года]   
                )   
            ),
            1   
        )'   
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows   
from   [ФО_ГодОтч_Сеть Штаты Контингент]   
where   
    (        
        [КСШК__Сопоставимый].[КСШК__Сопоставимый].[Все].[Штатные единицы],
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта]
    )    
  ]]>
  </query>

  <query id="FO_0002_0063_table">
    <![CDATA[
with                    
    member [Оплата труда] as'IIF             
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].currentmember is [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого],
            LookupCube                    
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                    
                (
                    aggregate          
                    (
                        {
                            [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов государственной власти субъекта Российской Федерации, всего].[на заработную плату],
                            [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов государственной власти субъекта Российской Федерации, всего].[на начисления на выплаты по оплате труда]          
                        },
                        AGGREGATE          
                        (
                            {
                                " + SetToStr([NonFilterRowSet]) + "                    
                            },
                            (
                                <%period_dimension%> ,
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
                                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
                                [Measures].[Факт]                    
                            )         
                        )          
                    )                    
                )"                    
            ),
            LookupCube                    
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                    
                (
                    aggregate            
                    (
                        {
                            [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов государственной власти субъекта Российской Федерации, всего].[на заработную плату],
                            [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов государственной власти субъекта Российской Федерации, всего].[на начисления на выплаты по оплате труда]          
                        },
                        (
                            <%period_dimension%> ,
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
                            [Measures].[Факт],
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
                            " +  MemberToStr                    
                            (
                                [Администратор__Сопоставим].[Администратор__Сопоставим].currentmember                    
                            )          + "     
                        )    
                    )     
                )"                    
            )                    
        )'                    
    member [Расходы по содержанию органов местного самоуправления] as'IIF                    
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].currentmember is [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого],
            LookupCube                    
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                    
                (
                    AGGREGATE                 
                    (
                        {
                            " + SetToStr([NonFilterRowSet]) + "                    
                        },
                        (
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
                            <%period_dimension%> ,
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
                            [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов государственной власти субъекта Российской Федерации, всего],
                            [Measures].[Факт]                    
                        )                         
                    )                    
                )"                    
            ),
            LookupCube                    
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                    
                (
                    (
                        <%period_dimension%> ,
                        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
                        [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов государственной власти субъекта Российской Федерации, всего],
                        [Measures].[Факт],
                        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
                        " +  MemberToStr                    
                        (
                            [Администратор__Сопоставим].[Администратор__Сопоставим].currentmember                    
                        ) + "                    
                    )                    
                )"                    
            )                    
        )'                     
    SET [NonFilterRowSet]                    
    AS ' filter                    
        (
            Descendants                    
            (
                Except                    
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].Children,
                    {
                        [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные]                    
                    }                    
                ) ,
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Администратор],
                SELF                    
            ),
            not [Администратор__Сопоставим].[Администратор__Сопоставим].currentmember.is_datamember and not IsEmpty ( [Measures].[Факт] )                    
        ) '                    
    member [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого]                    
    as 'Aggregate([NonFilterRowSet])'                    
    member [Measures].[Факт ]                    
    as 'IIF 
        (
            ([Measures].[Факт]=0) or (IsEmpty([Measures].[Факт])),
            null,
            [Measures].[Факт]/1000
        )'                  
    member [Оплата труда ]                    
    as 'IIF 
        (
            IsEmpty([Оплата труда]),
            0,
            [Оплата труда]/1000
        )' ,
        format_string = '0.00'                    
    member [Расходы по содержанию органов местного самоуправления ]                    
    as 'IIF  
        (
            IsEmpty 
            (
                [Расходы по содержанию органов местного самоуправления] 
            ),
            0,
            [Расходы по содержанию органов местного самоуправления]/1000 
        )',
        format_string = '0.00'                    
    member [Расчетная мера_1]                    
    as 'IIF                    
        (
            (
                IsEmpty                    
                (
                    [Расходы по содержанию органов местного самоуправления]                    
                )OR IsEmpty([Measures].[Факт])                    
            ) OR ( [Measures].[Факт] = 0 ),
            0,
            [Расходы по содержанию органов местного самоуправления ]/[Measures].[Факт ]                    
        )',
        format_string = '0.00'                    
    member [Расчетная мера_2]                    
    as 'IIF                    
        (
            (
                IsEmpty ( [Оплата труда] )OR IsEmpty([Measures].[Факт])                    
            ) OR ( [Measures].[Факт] = 0 ),
            0,
            [Оплата труда ]/[Measures].[Факт ]                    
        )',
        format_string = '0.00'                    
    member [Материальные затраты]                    
    as 'IIF                    
        (
            ISEmpty([Оплата труда]) OR IsEmpty                    
            (
                [Расходы по содержанию органов местного самоуправления]                    
            ),
            0,
            [Расходы по содержанию органов местного самоуправления ]-[Оплата труда ]                    
        )',
        format_string = '0.00'                    
    member [Расчетная мера_3]                    
    as 'IIF                    
        (
            (
                IsEmpty ( [Материальные затраты] )OR IsEmpty([Measures].[Факт])                    
            ) OR ( [Measures].[Факт] = 0 ),
            0,
            [Материальные затраты]/[Measures].[Факт ]                    
        )',
        format_string = '0.00'                    
    member [Measures].[Краткое наименование ГРБС]                   
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Properties("Краткое наименование")'                    
select
    {      
        [Measures].[Факт ] ,
        [Расходы по содержанию органов местного самоуправления ],
        [Оплата труда ],
        [Материальные затраты],
        [Расчетная мера_1],
        [Расчетная мера_2],
        [Расчетная мера_3],
        [Measures].[Краткое наименование ГРБС]
    } on columns,
    {
        [NonFilterRowSet],
        [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого]                    
    }on rows                    
from  [ФО_МесОтч_Расходы]                    
where                    
    (
        <%period_dimension%> ,
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта]  
    )                    
            
      ]]>
  </query>


</root>
