<?xml version="1.0" encoding="Windows-1251"?>
<root>

    <query id="fo_0003_0001_date">
        <![CDATA[
-- fo_0003_0001_date
with
    member Measures.[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    {
        Tail
        (
            NonEmptyCrossjoin
            (
                {
                    Filter
                    (
                        [Период].[Период].Members,
                        [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                        [Период].[Период].CurrentMember.Name <> "Данные месяца" and
                        [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                        [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                        [Период].[Период].CurrentMember.Name <> "Данные года"
                    )
                }
            )
        )
    } on rows
from  [ФК_Паспорт субъекта]
  ]]>
    </query>
    
    <query id="fo_0003_0001_241">
        <![CDATA[
-- fo_0003_0001_241 
    with                                
    member [Measures].[Исполнено]         
    as '         
        (
            [Показатели].[Паспорт субъекта].[Все нужные],
            [Measures].[Исполнение консолидированного бюджета],
            [Территории].[Сопоставимый].CurrentMember,
            <%period_cur_date%>
        )'         
    member [Measures].[Исполнено прошлый год]         
    as '         
        (
            [Показатели].[Паспорт субъекта].[Все нужные],
            [Measures].[Исполнение консолидированного бюджета],
            [Территории].[Сопоставимый].CurrentMember,
            [Период].[Период].[Данные всех периодов].<%period_last_date%>         
        )'          
    member [Measures].[Темп к прошлому году ]        
    as 'IIF         
        (
            not isEmpty        
            (
                [Measures].[Исполнено прошлый год]        
            ) and not         
            (
                [Measures].[Исполнено прошлый год] = 0         
            ),
            ([Measures].[Исполнено] )/        
            (
                [Measures].[Исполнено прошлый год]         
            ),
            null        
        )'    
    member [Measures].[Темп к прошлому году по безвозмездным]    
    as '    
        (
            [Период].[Период].[Данные всех периодов].[2011],
            [Measures].[Темп к прошлому году],
            [Показатели].[Паспорт субъекта].[Все].[безвозмездные перечисления государственным и муниципальным предприятиям (КОСГУ 241)]    
        )' 
    member [Measures].[Внимание ] 
    as 'IIF 
        (
            ([Measures].[Отклонение] > 0) and 
            (
                [Measures].[Отклонение безвозмездных]  > 0 
            ),
            1,
            IIF 
            (
                ([Measures].[Отклонение] < 0) and 
                (
                    [Measures].[Отклонение безвозмездных]  > 0 
                ) and 
                (
                    (
                        [Measures].[Отклонение безвозмездных] 
                    ) >= (-1 * [Measures].[Отклонение])
                ),
                2,
                IIF 
                (
                    ([Measures].[Отклонение] < 0) and 
                    (
                        [Measures].[Отклонение безвозмездных] < 0 
                    ),
                    3,
                    0 
                ) 
            ) 
        )' 
    member [Measures].[Отклонение]     
    as '[Measures].[Темп к прошлому году ] - 1'     
    member [Measures].[Отклонение безвозмездных]     
    as '[Measures].[Темп к прошлому году по безвозмездным] - 1'     
    member  [Показатели].[Паспорт субъекта].[Все нужные]           
    as 'aggregate                      
        (
            {
                [Показатели].[Паспорт субъекта].[Все].[Заработная плата и начисления на неё (КОСГУ 211, 213)] ,
                [Показатели].[Паспорт субъекта].[Все].[Оплата коммунальных услуг (КОСГУ 223)] ,
                [Показатели].[Паспорт субъекта].[Все].[услуги связи (КОСГУ 221)] ,
                [Показатели].[Паспорт субъекта].[Все].[арендная плата за пользование имуществом (КОСГУ 224)]            
            }                      
        )'                       
select
    {
        [Measures].[Темп к прошлому году ],
        [Measures].[Отклонение],
        [Measures].[Темп к прошлому году по безвозмездным],
        [Measures].[Отклонение безвозмездных],
        [Measures].[Внимание ]
    }on columns,
    { [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]  } on rows                 
from  [ФК_Паспорт субъекта] 
  ]]>
    </query>

   
</root>