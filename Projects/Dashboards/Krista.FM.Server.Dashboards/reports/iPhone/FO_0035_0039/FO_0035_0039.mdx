<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0039_grid">
    <![CDATA[
    --FO_0035_0039_grid
with           
    set [Администраторы ГРБС]   
    as 'Filter   
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].Children -   
                    {
                        [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные]   
                    },
                    not IsEmpty
                    (
                        (
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все],
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все] 
                        )
                    )
                )   
              
        ' 

    member  [Measures].[Задолженность ]          
    as ' [Measures].[Задолженность] / 1000'          
    member  [Measures].[Просроченная задолженность ]          
    as ' [Measures].[Просроченная задолженность] / 1000'    
    
    member [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого]
    as 'Aggregate({[Администраторы ГРБС]})'
    
    member [Measures].[Уровень]
    as 'IIF
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember is [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого],
            0, 
            1
        )'
        
    member [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого]
    as 'Aggregate({[Администраторы ГРБС]})'        
    
    member [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства]         
    as 'Aggregate         
        (
            {
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства],
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Внебюджетные средства]          
            }         
        )'  
select
    {
        [Measures].[Задолженность ],
        [Measures].[Просроченная задолженность ],
        [Measures].[Уровень]
    } on columns,
    non empty Filter 
    (
        {
            {
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Итого]
            }+

            Order
            (
                [Администраторы ГРБС],
                [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
                BASC
            )
        },
        not IsEmpty([Measures].[Задолженность ]) and not IsEmpty
        (
            [Measures].[Просроченная задолженность ]
        ) 
    ) on rows      
From [ФО_МесОтч_Задолженность]          
where          
    (
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства],
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Фиксированный__Вид задолженности].[Фиксированный__Вид задолженности].[Все].[Кредиторская задолженность],
        [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].[Все].[Итого]    
    )             
  ]]>
  </query>

  <query id="FO_0035_0039_chart">
    <![CDATA[
    --FO_0035_0039_chart
with           
    set [Администраторы ГРБС]   
    as 'Filter   
            (
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].Children -   
                {
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные]   
                },
                not IsEmpty
                (
                  (
                        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все],
                        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все] 
                    )
                )
            )   
               
        ' 
    
    member  [Measures].[Задолженность ]          
    as ' [Measures].[Задолженность] / 1000'          
    member  [Measures].[Просроченная задолженность ]          
    as ' [Measures].[Просроченная задолженность] / 1000'    

    set [Лучшие ГРБС]   
    as 'Head          
        (
            Order([Администраторы ГРБС], [Measures].[Задолженность ], BDESC),
            10
        )  ' 
    member [Администратор__Сопоставим].[Администратор__Сопоставим].[Прочие]   
    as 'Aggregate    
        (
           Tail
           (
                Order([Администраторы ГРБС], [Measures].[Задолженность ], BDESC),
                Count([Администраторы ГРБС]) - 10
           )
        )'    
    
    member [Measures].[Наименование]     
    as 'IIF
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember is [Администратор__Сопоставим].[Администратор__Сопоставим].[Прочие], 
            "Прочие",
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Properties("Краткое наименование")
        )'
    member [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства]         
    as 'Aggregate         
        (
            {
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства],
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Внебюджетные средства]          
            }         
        )'          
select
    {
        [Measures].[Наименование],
        [Measures].[Задолженность ]     
    } on columns,
    non empty
    { [Лучшие ГРБС] + {[Администратор__Сопоставим].[Администратор__Сопоставим].[Прочие]} } on rows      
From [ФО_МесОтч_Задолженность]          
where          
    (
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Отчетность главных распорядителей средств бюджета],
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства],
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Фиксированный__Вид задолженности].[Фиксированный__Вид задолженности].[Все].[Кредиторская задолженность],
        [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].[Все].[Итого]    
    )             
  ]]>
  </query>
  
</root>