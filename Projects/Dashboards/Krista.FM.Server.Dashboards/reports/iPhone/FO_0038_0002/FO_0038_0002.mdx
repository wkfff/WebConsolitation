<?xml version="1.0" encoding="Windows-1251"?>
<root>
    <query id="FO_0002_0002_date">
        <![CDATA[
-- FO_0002_0002_date 
with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Факт]) and
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                [Период].[Период].CurrentMember.Name <> "Данные года" and
                [Период].[Период].CurrentMember.Name <> "Данные месяца"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_МесОтч_Доходы]
  ]]>
    </query>

    <query id="FO_0002_0002_incomes">
        <![CDATA[
-- FO_0002_0002_incomes  
   with
    member [КД].[Сопоставимый].[Налог. доходы ]
    as 'Aggregate
        (
            {
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ЗАДОЛЖЕННОСТЬ И ПЕРЕРАСЧЕТЫ ПО ОТМЕНЕННЫМ НАЛОГАМ, СБОРАМ И ИНЫМ ОБЯЗАТЕЛЬНЫМ ПЛАТЕЖАМ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[СТРАХОВЫЕ ВЗНОСЫ НА ОБЯЗАТЕЛЬНОЕ СОЦИАЛЬНОЕ СТРАХОВАНИЕ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ТОВАРЫ (РАБОТЫ, УСЛУГИ), РЕАЛИЗУЕМЫЕ НА ТЕРРИТОРИИ РОССИЙСКОЙ ФЕДЕРАЦИИ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ТОВАРЫ, ВВОЗИМЫЕ НА ТЕРРИТОРИЮ РОССИЙСКОЙ ФЕДЕРАЦИИ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА СОВОКУПНЫЙ ДОХОД],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ИМУЩЕСТВО],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ГОСУДАРСТВЕННАЯ ПОШЛИНА]
            }
        )'
    member [КД].[Сопоставимый].[Неналог. доходы ]
    as 'Aggregate
        (
            {
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ВНЕШНЕЭКОНОМИЧЕСКОЙ ДЕЯТЕЛЬНОСТИ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ИСПОЛЬЗОВАНИЯ ИМУЩЕСТВА, НАХОДЯЩЕГОСЯ В ГОСУДАРСТВЕННОЙ И МУНИЦИПАЛЬНОЙ СОБСТВЕННОСТИ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ОКАЗАНИЯ ПЛАТНЫХ УСЛУГ И КОМПЕНСАЦИИ ЗАТРАТ ГОСУДАРСТВА],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ПРОДАЖИ МАТЕРИАЛЬНЫХ И НЕМАТЕРИАЛЬНЫХ АКТИВОВ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[АДМИНИСТРАТИВНЫЕ ПЛАТЕЖИ И СБОРЫ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПРОЧИЕ НЕНАЛОГОВЫЕ ДОХОДЫ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ ОТ ВОЗВРАТА ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ВОЗВРАТ ОСТАТКОВ СУБСИДИЙ, СУБВЕНЦИЙ И ИНЫХ МЕЖБЮДЖЕТНЫХ ТРАНСФЕРТОВ, ИМЕЮЩИХ ЦЕЛЕВОЕ НАЗНАЧЕНИЕ, ПРОШЛЫХ ЛЕТ]
            }
        )'
    member [КД].[Сопоставимый].[Собств. доходы ]
    as '[КД].[Сопоставимый].[Налог. доходы ] + [КД].[Сопоставимый].[Неналог. доходы ]'
    member [КД].[Сопоставимый].[Безвозм. перечисл. ]
    as '[КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ]'
    member [КД].[Сопоставимый].[субсидии ]
    as '[КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)]'
    member [КД].[Сопоставимый].[субвенции ]
    as '[КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Субвенции бюджетам субъектов Российской Федерации и муниципальных образований]'
    member [КД].[Сопоставимый].[дотации ]
    as '[КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований]'
    member [КД].[Сопоставимый].[иные ]
    as '[КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ ОТ ДРУГИХ БЮДЖЕТОВ БЮДЖЕТНОЙ СИСТЕМЫ РОССИЙСКОЙ ФЕДЕРАЦИИ].[Иные межбюджетные трансферты]'
    member [Measures].[План ]
    as '
        (
            [Measures].[Годовые назначения] / 1000000
        )'
         member [Measures].[Факт ]
    as '
        (
            [Measures].[Факт] / 1000000
        )'
       member  [Measures].[% выполнения годовых назначений ]
        as '
        (
            [Measures].[% выполнения годовых назначений] * 100
        )'
select
    {
        [Measures].[План ] ,
        [Measures].[Факт ],
        [Measures].[% выполнения годовых назначений ]
    }  on columns,
    {
        [КД].[Сопоставимый].[Собств. доходы ],
        [КД].[Сопоставимый].[Налог. доходы ],
        [КД].[Сопоставимый].[Неналог. доходы ],
        [КД].[Сопоставимый].[Безвозм. перечисл. ],
        [КД].[Сопоставимый].[субсидии ],
        [КД].[Сопоставимый].[субвенции ],
        [КД].[Сопоставимый].[дотации ],
        [КД].[Сопоставимый].[иные ]
    } on rows
from  [ФО_МесОтч_Доходы]
where
    (
        [Районы].[Сопоставимый].[Все районы].[Вологодская область],
        [ТипДокумента].[СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов],
        [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
        [Период].[Период].[Данные всех периодов]<%period_cur_date%>
    )
    ]]>
    </query>

    <query id="FO_0002_0011_01_date">
        <![CDATA[
-- FO_0002_0011_01_date
with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Факт]) and
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                [Период].[Период].CurrentMember.Name <> "Данные года" and
                [Период].[Период].CurrentMember.Name <> "Данные месяца"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_МесОтч_Доходы]
]]>
    </query>

    <query id="FO_0002_0011_01_chart1">
        <![CDATA[
-- FO_0002_0011_01_chart1
With
    member [Measures].[Факт ]       
    as '[Measures].[Факт] / 1000000'       
    set [Список КД]      
    as 'Filter 
        (
            Descendants 
            (
                [КД].[Сопоставимый].[Все коды доходов],
                [КД].[Сопоставимый].[Подстатья],
                SELF 
            ) ,
            not 
            (
                [КД].[Сопоставимый].CurrentMember is [КД].[Сопоставимый].CurrentMember.Parent.DataMember 
            ) 
            and [КД].[Сопоставимый].CurrentMember.Parent.Parent is [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ]
            and not (isEmpty ([Measures].[Факт ]))
        )' 
    set [Лучшие 5 КД]     
    as 'Tail     
        (
            Order     
            (
                [Список КД] ,
                [Measures].[Факт ],
                BASC     
            ),
            5     
        )'   
    member [КД].[Сопоставимый].[Прочие]   
    as 'Aggregate   
        (
            {[Список КД] - [Лучшие 5 КД]}   
        )'   
Select
    { [Measures].[Факт ] } on columns,
    {
        [Лучшие 5 КД],
        [КД].[Сопоставимый].[Прочие]
    }  on rows    
From [ФО_МесОтч_Доходы] 
Where          
    (
         [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
        <%document_type%>,
        <%selected_region%>,
        <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
    )          
  ]]>
    </query>

    <query id="FO_0038_0002_grid">
        <![CDATA[
    -- FO_0038_0002_grid
    with  
        set [Периоды]    
        as 'Filter    
            (
                {
                    Descendants    
                    (
                        [Период].[Период].[Данные всех периодов],
                        [Период].[Период].[Год],
                        SELF_AND_AFTER   
                    )   
                },
                not    
                (
                    [Период].[Период].CurrentMember is [Период].[Период].CurrentMember.Parent.DataMember    
                ) and    
                (
                    [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and 
                    [Период].[Период].CurrentMember.Name <> "Данные квартала" and 
                    [Период].[Период].CurrentMember.Name <> "Данные полугодия" and 
                    [Период].[Период].CurrentMember.Name <> "Данные года"   
                )  and 
                not isEmpty ([Measures].[Факт_за период] ) and 
                [Период].[Период].CurrentMember.Properties("PKID") >= [Период].[Период].[Данные всех периодов].[2010].Properties("PKID") and  
                (
                    [Период].[Период].CurrentMember.Level.Name = "Месяц" or [Период].[Период].CurrentMember.Level.Name = "Год" 
                )  
            ) '    
           member [Measures].[Годовые назначения ]
           as '[Measures].[Годовые назначения] / 1000000'
           member [Measures].[Факт ]
           as '[Measures].[Факт] / 1000000'
           member [Measures].[% выполнения годовых назначений ]
           as '[Measures].[% выполнения годовых назначений] * 100'
           member [Measures].[Темп роста к аналогичному периоду предыдущего года_Факт ]
           as '[Measures].[Темп роста к аналогичному периоду предыдущего года_Факт] * 100'
    SELECT
        {
            {
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ],
                [КД].[Сопоставимый].[Все коды доходов].[Всего доходов].[БЕЗВОЗМЕЗДНЫЕ ПОСТУПЛЕНИЯ]  
            } *
            {
                [Measures].[Годовые назначения ],
                [Measures].[Факт ],
                [Measures].[% выполнения годовых назначений ]
            }           
             
        } on columns,
        { [Периоды] } on rows    
    FROM [ФО_МесОтч_Доходы]    
    WHERE    
        (
            [Районы].[Сопоставимый].[Все районы].[Вологодская область],
            [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
            [ТипДокумента].[СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов]    
        ) 
      ]]>
    </query>
    
</root>