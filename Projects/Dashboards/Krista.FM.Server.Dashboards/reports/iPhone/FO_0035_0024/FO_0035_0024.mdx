<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0024_date">
    <![CDATA[
-- FO_0035_0024_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Measures].[Сумма]
                    )
                ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_Реестр платежных поручений]
  ]]>
</query>

<query id="FO_0035_0024_OutcomesGridGrbs">
    <![CDATA[
-- FO_0035_0024_OutcomesGridGrbs  
with    
    member [Состояние документа].[Состояние документа].[Глаз]    
    as '"Глаз"' 
   member [Состояние документа].[Состояние документа].[Доля в общей сумме]  
    as 'IIF  
        (
            not isEmpty  
            (
                (
                    [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Всего],
                    [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.] 
                )  
            ) and not  
            (
                [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Всего],
                [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.] 
            ) = 0,
            (
                [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].CurrentMember,
                [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.] 
            ) / 
            (
                [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Всего],
                [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.] 
            ) * 1000,
            null  
        )'  
    member [Measures].[Сумма ]    
    as '[Measures].[Сумма] / 1000'    
    member [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Всего]  
    as 'aggregate ([Грбсы])'  
    set [Грбсы] 
    as 'filter
        (
            [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[ГРБС].members,
            not ([Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].CurrentMember is [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Все].[Несопоставленные данные])
        )'
    member [Состояние документа].[Состояние документа].[Ранг процент]
    as 'IIF
        (
            IsEmpty
            (
                [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.]
            ),
            null,
            Rank
            (
                [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].CurrentMember,
                Order
                (
                    Filter
                    (
                        [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].CurrentMember.Siblings,
                        not IsEmpty
                        (
                            [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.]
                        )
                    ),
                    [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.],
                    DESC
                ),
                [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.]
            )
        ) * 1000'
         member [Состояние документа].[Состояние документа].[Проведенные платежные поручения. ]
         as '([Состояние документа].[Состояние документа].[Все].[Проведенные платежные поручения.],
         Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty 
                    (
                        (
                            [Measures].[Сумма],
				[Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Всего],
                            [Состояние документа].[Состояние документа].[Все].[Проведенные платежные поручения.] 
                        ) 
                    ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        ).Item(0)
        )'
SELECT
    {       
        [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.],
        [Состояние документа].[Состояние документа].[Доля в общей сумме],
        [Состояние документа].[Состояние документа].[Все].[Платежные поручения проверены ФО (еще не санкционированы).],
        [Состояние документа].[Состояние документа].[Проведенные платежные поручения. ],
        [Состояние документа].[Состояние документа].[Ранг процент]
    } on columns,
    {
        [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Всего],
        [Грбсы]  
    } ON rows    
FROM  [ФО_Реестр платежных поручений]    
WHERE    
    (
        [Measures].[Сумма ],
        <%selected_period%> 
    ) 
  ]]>
</query>

<query id="FO_0035_0024_OutcomesGridKosgu">
    <![CDATA[
-- FO_0035_0024_OutcomesGridKosgu  
with  
    member [Состояние документа].[Состояние документа].[Глаз]  
    as '"Глаз"'  
    member Measures.[Уровень]  
    as '[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Level.Name'  
    member Measures.[Платежные поручения на рассмотрении ФО.]  
    as ' 
        (
            [Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.],
            [Measures].[Сумма ] 
        )'  
    member Measures.[Доля в общей сумме]  
    as 'IIF  
        (
            not isEmpty  
            (
                (
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего],
                    Measures.[Платежные поручения на рассмотрении ФО.]  
                )  
            ) and not  
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего],
                Measures.[Платежные поручения на рассмотрении ФО.]  
            ) = 0,
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember,
                Measures.[Платежные поручения на рассмотрении ФО.]  
            ) /  
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего],
                Measures.[Платежные поручения на рассмотрении ФО.]  
            )  
            ,
            null  
        )'  
    member Measures.[Платежные поручения проверены ФО (еще не санкционированы).] 
    as ' 
        (
            [Состояние документа].[Состояние документа].[Все].[Платежные поручения проверены ФО (еще не санкционированы).],
            [Measures].[Сумма ] 
        )' 
    member Measures.[Проведенные платежные поручения.] 
    as '([Состояние документа].[Состояние документа].[Все].[Проведенные платежные поручения.],
    [Measures].[Сумма ],
         Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty 
                    (
                        (
                            [Measures].[Сумма],
                            [Состояние документа].[Состояние документа].[Все].[Проведенные платежные поручения.],
				
                        ) 
                    ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        ).Item(0)
        )' 
    member [Measures].[Сумма ]  
    as '[Measures].[Сумма] / 1000'  
    member [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Всего]  
    as 'aggregate
        (
            {
                filter
                (
                    Descendants
                    (
                        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Статья],
                        SELF
                    ),
                    not  [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.Datamember and not isEmpty ([Measures].[Сумма])
                )
            } +
            {
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Неуказанная экономическая статья]
            }
        )'  
    set [Косгу]  
    as 'filter  
        (
            Descendants  
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Статья],
                SELF_AND_AFTER  
            ),
            not  [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.Datamember and not isEmpty ([Measures].[Сумма])  
        )'  
    member Measures.[Ранг процент] 
    as 'IIF  
        (
            IsEmpty  
            (
                Measures.[Платежные поручения на рассмотрении ФО.] 
            ),
            null,
            Rank  
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember,
                Order  
                (
                    [Косгу],
                    Measures.[Платежные поручения на рассмотрении ФО.],
                    BDESC  
                ),
                Measures.[Платежные поручения на рассмотрении ФО.] 
            )  
        )  
        '        
SELECT
    {
        Measures.[Платежные поручения на рассмотрении ФО.],
        Measures.[Доля в общей сумме],
        Measures.[Платежные поручения проверены ФО (еще не санкционированы).],
        Measures.[Проведенные платежные поручения.],
         Measures.[Ранг процент],
        Measures.[Уровень]  
    } on columns,
    filter
    (
        {
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего],
            [КОСГУ],
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Неуказанная экономическая статья]
        }
    ,
    not isEmpty ([Measures].[Сумма]))   on rows
FROM  [ФО_Реестр платежных поручений]    
WHERE       
    (     
        <%selected_period%> 
    ) 
  ]]>
  </query>

<query id="FO_0035_0024_rests_Date">
<![CDATA[
-- FO_0035_0024_rests_Date  
with
    member  [Measures].[Остаток]
    as '[Measures].[Доходы бюджета] + [Measures].[Целевые поступления из ФБ]'
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Measures].[Остаток]
                    )
                ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_Остатки средств бюджета]
  ]]>
  </query>
  
  <query id="FO_0035_0024_rests">
    <![CDATA[
-- FO_0035_0024_rests  
WITH 
    member  [Measures].[Остаток] 
    as '[Measures].[Доходы бюджета] + [Measures].[Целевые поступления из ФБ]' 
SELECT
    { [Measures].[Остаток] } ON COLUMNS ,
    {
        [Показатели__ФО_Остатки средств бюджета].[Показатели__ФО_Остатки средств бюджета].[Все].[Остаток средств бюджета на счете 02512005470] 
    }ON ROWS 
FROM [ФО_Остатки средств бюджета] 
WHERE <%selected_period%>
  ]]>
</query>

  <query id="FO_0035_0024_orders_Date">
    <![CDATA[
-- FO_0035_0024_orders_Date  
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Measures].[Сумма]
                    )
                ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from   [ФО_Реестр платежных поручений]
  ]]>
  </query>

  <query id="FO_0035_0024_orders">
    <![CDATA[
-- FO_0035_0024_orders  
SELECT
    { [Measures].[Сумма] } ON COLUMNS ,
    {
[Состояние документа].[Состояние документа].[Все].[Платежные поручения на рассмотрении ФО.]
    }ON ROWS 
FROM  [ФО_Реестр платежных поручений]
WHERE <%selected_period%>
  ]]>
</query>

</root>