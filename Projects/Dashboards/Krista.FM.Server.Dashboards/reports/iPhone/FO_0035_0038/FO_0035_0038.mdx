<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0038_grid">
    <![CDATA[
    --FO_0035_0038_grid
with           
    member [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО]          
    as 'Aggregate          
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района],
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа]          
            }          
        )'           
    member  [Measures].[Задолженность ]          
    as ' [Measures].[Задолженность] / 1000'          
    member  [Measures].[Просроченная задолженность ]          
    as ' [Measures].[Просроченная задолженность] / 1000'    
    set [МО]   
    as 'Filter 
        (
            Descendants  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF  
            ),
            not  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember 
            ) 
        )' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]
    as 'Aggregate({[МО]})'
    
    member [Measures].[Уровень]
    as 'IIF
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого],
            0, 
            1
        )'
    member [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства]         
    as 'Aggregate         
        (
            {
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства],
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Внебюджетные средства]          
            }         
        )'         
select
    {
        [Measures].[Задолженность ],
        [Measures].[Просроченная задолженность ],
        [Measures].[Уровень]
    } on columns,
    non empty  
    {
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого] 
        } + Filter 
        (
            [МО],
            not IsEmpty([Measures].[Задолженность ]) and
            not IsEmpty
            (
                [Measures].[Просроченная задолженность ]
            ) 
        ) 
    } on rows   
From [ФО_МесОтч_Задолженность]          
where          
    (
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО],
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства],
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Фиксированный__Вид задолженности].[Фиксированный__Вид задолженности].[Все].[Кредиторская задолженность],
        [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].[Все].[Итого]    
    )             
  ]]>
  </query>

  <query id="FO_0035_0038_chart">
    <![CDATA[
    --FO_0035_0038_chart
with           
    member [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО]          
    as 'Aggregate          
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района],
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа]          
            }          
        )'           
    member  [Measures].[Задолженность ]          
    as ' [Measures].[Задолженность] / 1000'          
    member  [Measures].[Просроченная задолженность ]          
    as ' [Measures].[Просроченная задолженность] / 1000'    
    set [МО]   
    as 'Filter 
        (
            Descendants  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF  
            ),
            not  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember 
            ) 
        )'  
        
    set [Лучшие МО]   
    as 'Head          
        (
            Order([МО], [Measures].[Задолженность ], BDESC),
            10
        )  ' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Прочие]   
    as 'Aggregate    
        (
           Tail
           (
                Order([МО], [Measures].[Задолженность ], BDESC),
                Count([МО]) - 10
           )
        )'   
    member [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства]         
    as 'Aggregate         
        (
            {
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Бюджетные средства],
                [Тип средств__СКИФ].[Тип средств__СКИФ].[Все].[Внебюджетные средства]          
            }         
        )'         
select
    {
        [Measures].[Задолженность ]     
    } on columns,
    non empty
    { [Лучшие МО] + {[Районы__Сопоставимый].[Районы__Сопоставимый].[Прочие]} } on rows      
From [ФО_МесОтч_Задолженность]          
where          
    (
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Собственный отчет МР и ГО],
        [Тип средств__СКИФ].[Тип средств__СКИФ].[Бюджетные и внебюджетные средства],
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
        [Фиксированный__Вид задолженности].[Фиксированный__Вид задолженности].[Все].[Кредиторская задолженность],
        [ПланСчетов__Сопоставимый].[ПланСчетов__Сопоставимый].[Все].[Итого]    
    )             
  ]]>
  </query>
  
</root>
