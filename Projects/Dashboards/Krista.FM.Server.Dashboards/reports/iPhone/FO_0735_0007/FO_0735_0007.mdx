<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="date">
    <![CDATA[
-- fo_0035_0001_date
with 
    member Measures.[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
select
    {Measures.[ДанныеНа]} on columns,
    {
        Tail  
        (
            NonEmptyCrossjoin 
            (
                {
                    Filter
                    (
                        [Период].[Период].Members,
                        [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                        [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                        [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                        [Период].[Период].CurrentMember.Name <> "Данные года"
                    ) 
                } 
            )  
        )  
    } on rows 
from [ФО_Исполнение кассового плана] 
  ]]>
  </query>

  <query id="data">
    <![CDATA[
-- fo_0035_0001_data   
  with 
    member [Measures].[План ] 
    as '[Measures].[План_Нарастающий итог] / 1000' 
    member [Measures].[Факт ] 
    as '[Measures].[Факт_Нарастающий итог] / 1000' 
    member [Measures].[Имя ]     
    as '[Администратор].[ИспКасПланСопост].CurrentMember.Properties("Краткое наименование")'
    member [Администратор].[ИспКасПланСопост].[Средний процент исполнения]  
    as 'aggregate     
        (
            [Администратор].[ИспКасПланСопост].[ГРБС].Members 
        )'
select
    {
        {
            {
                [Расходы].[ИспКасПлан].[Все].[Заработная плата],
                [Расходы].[ИспКасПлан].[Все].[Начисления на оплату труда],
                [Расходы].[ИспКасПлан].[Все].[Коммунальные расходы],              
                [Расходы].[ИспКасПлан].[Все].[Увеличение стоимости основных средств],
                [Расходы].[ИспКасПлан].[Все].[Прочие расходы]
            }   
            *      
            {
                [Measures].[Процент исполнения]      
            }   
        } +   
        {
            {
                [Расходы].[ИспКасПлан].[Все].[Итого] 
            }  
            *   
            {
                [Measures].[План ],
                [Measures].[Факт ],
                [Measures].[Процент исполнения],
                [Measures].[Имя ]                
            }   
        }   
    }  on columns,
   {filter     
    (
        Except      
        (
            [Администратор].[ИспКасПланСопост].[ГРБС].Members,
            {
                [Администратор].[ИспКасПланСопост].[Все].[Несопоставленные данные]   
            }      
        ),
        not IsEmpty ([Measures].[План])
    --  and   not ([Администратор].[ИспКасПланСопост].CurrentMember.Properties("Краткое наименование") = "" )
    ),
        [Администратор].[ИспКасПланСопост].[Средний процент исполнения]} on rows    
    from [ФО_Исполнение кассового плана_Расходы]  
where   
    (
        <%period_cur_date%>
    ) 
  ]]>
  </query>
</root>