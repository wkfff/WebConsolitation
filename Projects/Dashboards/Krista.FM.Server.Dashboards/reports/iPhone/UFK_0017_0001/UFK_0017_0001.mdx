<?xml version="1.0" encoding="Windows-1251"?>
<root>	
  <query id="UFK_0017_0001_date">
    <![CDATA[
  with
member Measures.[ДанныеНа] as '[Период].[День].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    {Tail(NonEmptyCrossjoin({[Период].[День].Members}))} on rows
from [УФК_Ведомость по движению свободного остатка]
  ]]>
  </query>

  <query id="UFK_0017_0001_stats">
    <![CDATA[with   
    set [Все дни года]   
    as 'NonEmptyCrossjoin  
        (
            Descendants   
            (
                <%period_year%>,
                [Период].[День].[День]   
            )  
        )'   
    member Measures.[Нецелевые]  
    as ' 
        (
            [Measures].[Сумма за период],
            [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня] 
        )'  
    member Measures.[Целевые]  
    as ' 
        (
            [Measures].[Сумма за период],
            [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на конец дня] 
        )'  
    set [MaxДеньНецелевые]  
    as 'TopCount  
        (
            [Все дни года],
            1,
            Measures.[Нецелевые]  
        )'   
    set [MinДеньНецелевые]   
    as 'BottomCount  
        (
            [Все дни года],
            1,
            Measures.[Нецелевые]  
        )'   
    set [MaxДеньЦелевые]   
    as 'TopCount  
        (
            [Все дни года],
            1,
            Measures.[Целевые]  
        )'   
    set [MinДеньЦелевые]   
    as 'BottomCount  
        (
            [Все дни года],
            1,
            Measures.[Целевые]  
        )'   
    member Measures.[MaxНецелевыеДень]  
    as '[MaxДеньНецелевые].Item(0).UniqueName'  
    member Measures.[MaxНецелевыеСумма]  
    as ' 
        (
            [MaxДеньНецелевые].Item(0),
            Measures.[Нецелевые] 
        )'  
    member Measures.[MinНецелевыеДень]  
    as '[MinДеньНецелевые].Item(0).UniqueName'  
    member Measures.[MinНецелевыеСумма]  
    as ' 
        (
            [MinДеньНецелевые].Item(0),
            Measures.[Нецелевые] 
        )'  
    member Measures.[AvgНецелевыеСумма]  
    as 'Avg 
        (
            [Все дни года],
            (Measures.[Нецелевые]) 
        )'  
    member Measures.[MaxЦелевыеДень] 
    as '[MaxДеньЦелевые].Item(0).UniqueName' 
    member Measures.[MaxЦелевыеСумма] 
    as ' 
        (
            [MaxДеньЦелевые].Item(0),
            Measures.[Целевые] 
        )' 
    member Measures.[MinЦелевыеДень] 
    as '[MinДеньЦелевые].Item(0).UniqueName' 
    member Measures.[MinЦелевыеСумма] 
    as ' 
        (
            [MinДеньЦелевые].Item(0),
            Measures.[Целевые] 
        )' 
    member Measures.[AvgЦелевыеСумма] 
    as 'Avg 
        (
            [Все дни года],
            (Measures.[Целевые]) 
        )' 
SELECT
    {
        Measures.[MaxНецелевыеДень],
        Measures.[MaxНецелевыеСумма],
        Measures.[MinНецелевыеДень],
        Measures.[MinНецелевыеСумма],
        Measures.[AvgНецелевыеСумма],
        Measures.[MaxЦелевыеДень],
        Measures.[MaxЦелевыеСумма],
        Measures.[MinЦелевыеДень],
        Measures.[MinЦелевыеСумма],
        Measures.[AvgЦелевыеСумма] 
    } on columns 
FROM [УФК_Ведомость по движению свободного остатка]  
]]>
  </query>

  <query id="UFK_0017_0001_chart">
    <![CDATA[with
    member [Показатели].[УФК_Движение свободного остатка].[Нецелевые]
    as '[Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня]/1000000'
select
    {
        [Показатели].[УФК_Движение свободного остатка].[Нецелевые]
    } on columns,
    Tail(NonEmptyCrossjoin([Период].[День].[День].Members), 45) on rows
from [УФК_Ведомость по движению свободного остатка]
where ([Measures].[Сумма за период])]]>
  </query>  

  <query id="UFK_0017_0001">
    <![CDATA[with
    member [Показатели].[УФК_Движение свободного остатка].[Все].[Нецелевые_изменение]
    as '[Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня] - [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на начало дня]'
    member [Показатели].[УФК_Движение свободного остатка].[Все].[Нецелевые_изменение%]
    as 'IIF
        (
            IsEmpty
            (
                [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на начало дня]
            ),
            null,
            (
                [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня] - [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на начало дня]
            )/[Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на начало дня]
        )'
    member [Показатели].[УФК_Движение свободного остатка].[Все].[Целевые_изменение]
    as '[Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на конец дня] - [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на начало дня]'
    member [Показатели].[УФК_Движение свободного остатка].[Все].[Целевые_изменение%]
    as 'IIF
        (
            IsEmpty
            (
                [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на начало дня]
            ),
            null,
            (
                [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на конец дня] - [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на начало дня]
            )/[Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на начало дня]
        )'

    member [Показатели].[УФК_Движение свободного остатка].[Все].[Распределенные_изменение]
    as '[Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на конец дня] - [Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на начало дня]'
    member [Показатели].[УФК_Движение свободного остатка].[Все].[Распределенные_изменение%]
    as 'IIF
        (
            IsEmpty
            (
                [Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на начало дня]
            ),
            null,
            (
                [Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на конец дня] - [Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на начало дня]
            )/[Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на начало дня]
        )'
select
    {
        [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Нецелевые_изменение],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Нецелевые_изменение%],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток целевых средств на конец дня],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Целевые_изменение],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Целевые_изменение%],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Сумма распределенных средств на конец дня],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Распределенные_изменение],
        [Показатели].[УФК_Движение свободного остатка].[Все].[Распределенные_изменение%]
    } on columns
from [УФК_Ведомость по движению свободного остатка]
where
    (
        [Measures].[Сумма за период],
        <%period_day_fo%>
    )]]>
  </query>

  <query id="UFK_0017_0001_expected">
    <![CDATA[with  
    member Measures.[План месяц_расходы]  
    as '
        (
            [Measures].[План на период],
            <%period_month%>
        )'  
    member Measures.[Факт месяц_расходы]  
    as '
        (
            [Measures].[Факт за период],
            <%period_month%>
        )' 
    member Measures.[Остатки_расходы_тыс]  
    as ' 
        (
            Measures.[План месяц_расходы] - Measures.[Факт месяц_расходы] 
        )/1000'  
    member Measures.[План месяц_доходы]  
    as 'LookupCube  
        (
            "[ФО_АС Бюджет_План доходов]",
            "  
            (
                <%period_month%>,
                Measures.[План]  
            )"  
        )'  
    member Measures.[Факт месяц_доходы]  
    as 'LookupCube  
        (
            "[УФК_Реестр перечисленных поступлений]",
            "  
            (
                [Measures].[За период],
                <%period_month%>  
            )"  
        )'  
    member Measures.[Остатки_доходы_тыс]  
    as ' 
        (
            Measures.[План месяц_доходы] - Measures.[Факт месяц_доходы] 
        )/1000'  
select
    {
        Measures.[Остатки_расходы_тыс],
        Measures.[Остатки_доходы_тыс]  
    } on columns  
from [ФО_Платежный календарь] ]]>
  </query>

  <query id="UFK_0017_0001_V">
    <![CDATA[with
    member [Показатели].[УФК_Движение свободного остатка].[Нецелевые]
    as '[Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня]/1000'
    member [Показатели].[УФК_Движение свободного остатка].[Отклонение нецел]
    as '([Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на конец дня] -
    [Показатели].[УФК_Движение свободного остатка].[Все].[Остаток нецелевых средств на начало дня])/1000'
    member [Показатели].[УФК_Движение свободного остатка].[Отклонение нецел %]
    as 'IIF(IsEmpty([Показатели].[УФК_Движение свободного остатка].[Нецелевые]) or [Показатели].[УФК_Движение свободного остатка].[Нецелевые]=0, null,
    [Показатели].[УФК_Движение свободного остатка].[Отклонение нецел]/[Показатели].[УФК_Движение свободного остатка].[Нецелевые])'
    member [Показатели].[УФК_Движение свободного остатка].[Месяц] as '[Период].[День].CurrentMember.Parent.Name'
select
    {
        [Показатели].[УФК_Движение свободного остатка].[Нецелевые],
        [Показатели].[УФК_Движение свободного остатка].[Отклонение нецел],
        [Показатели].[УФК_Движение свободного остатка].[Отклонение нецел %],
        [Показатели].[УФК_Движение свободного остатка].[Месяц]
    } on columns,
    Tail(NonEmptyCrossjoin([Период].[День].[День].Members), 45) on rows
from [УФК_Ведомость по движению свободного остатка]
where ([Measures].[Сумма за период])]]>
  </query>
</root>