<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="Food_0006_0002_incomes_date">
    <![CDATA[ -- Food_0006_0002_incomes_date
with
    member [Measures].[ДанныеНа]
    as 'iif
        (
            [Период__День].[Период__День].CurrentMember is [Период__День].[Период__День].[Данные всех периодов].[Единица измерения],
            [Measures].[Единица измерения],
            [Период__День].[Период__День].CurrentMember.UniqueName
        )'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период__День].[Период__День].[День].Members,
                not IsEmpty([Measures].[Цена]) and [Measures].[Цена] > 0
            ),
            2
        )'
    member [Measures].[Текущий год]
    as 'Tail
        (
            Filter
            (
                [Период__День].[Период__День].[Год].Members,
                not IsEmpty([Measures].[Цена]) and [Measures].[Цена] > 0
            ),
            1
        ).Item(0).Name'
    set [Начало года]
    as 'head
        (
            filter
            (
                descendants
                (
                    StrToMember
                    (
                        "[Период__День].[Период__День].[Данные всех периодов].[" + [Measures].[Текущий год] + "]"
                    ),
                    [Период__День].[Период__День].[День],
                    self
                ),
                not IsEmpty([Measures].[Цена]) and [Measures].[Цена] > 0
            ),
            1
        )'
    member [Measures].[Единица измерения]
    as 'LCase
        (
            [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember.Properties("Единица измерения")
        )'
    member [Период__День].[Период__День].[Данные всех периодов].[Единица измерения]
    as 'null'
select
    { [Measures].[ДанныеНа] } on columns,
    {
        [Начало года] + [NonEmptySet] +
        {
            [Период__День].[Период__День].[Данные всех периодов].[Единица измерения]
        }
    } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[ОРГАНИЗАЦИИ Цены и тарифы],
        <%food%>,
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ],
        [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id="Food_0006_0002_text">
    <![CDATA[ -- Food_0006_0002_text
with
    set [Территории]
    as '
        {
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Губкинский],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Лабытнанги],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Муравленко],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Надымский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Новый Уренгой],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Ноябрьск],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Салехард],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Красноселькупский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Приуральский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Пуровский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Тазовский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Шурышкарский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Ямальский район]
        }'
    set [Организации]
    as 'filter(
      [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children -
      [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано],
      not IsEmpty([Measures].[Цена]) and not [Measures].[Цена] = 0)'
    member [Measures].[Цена ЯНАО]
    as 'Avg
        (
            [Территории] ,
            [Measures].[Цена МО]
        )'
    member [Measures].[Цена МО]
    as 'Avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Цена на текущую дату]
    as '
        (
            <%period_cur_date%>,
            [Measures].[Цена ЯНАО]
        )'
    member [Measures].[Цена на прошлую дату]
    as '
        (
            <%period_last_date%>,
            [Measures].[Цена ЯНАО]
        )'
    member [Measures].[Цена на начало года]
    as '
        (
            <%period_first_year%>,
            [Measures].[Цена ЯНАО]
        )'
    member [Measures].[Изменение цены]
    as 'iif
        (
            IsEmpty
            (
                [Measures].[Цена на текущую дату]
            ) or [Measures].[Цена на текущую дату] = 0 or IsEmpty
            (
                [Measures].[Цена на прошлую дату]
            ) or [Measures].[Цена на прошлую дату] = 0,
            null,
            [Measures].[Цена на текущую дату] - [Measures].[Цена на прошлую дату]
        )'
    member [Measures].[Темп прироста]
    as 'iif
        (
            IsEmpty
            (
                [Measures].[Цена на текущую дату]
            ) or [Measures].[Цена на текущую дату] = 0 or IsEmpty
            (
                [Measures].[Цена на прошлую дату]
            ) or [Measures].[Цена на прошлую дату] = 0,
            null,
            [Measures].[Цена на текущую дату] / [Measures].[Цена на прошлую дату] - 1
        )'
    member [Measures].[Изменение цены к началу года]
    as 'iif
        (
            IsEmpty
            (
                [Measures].[Цена на текущую дату]
            ) or [Measures].[Цена на текущую дату] = 0 or IsEmpty
            (
                [Measures].[Цена на начало года]
            ) or [Measures].[Цена на начало года] = 0,
            null,
            [Measures].[Цена на текущую дату] - [Measures].[Цена на начало года]
        )'
    member [Measures].[Темп прироста к началу года]
    as 'iif
        (
            IsEmpty
            (
                [Measures].[Цена на текущую дату]
            ) or [Measures].[Цена на текущую дату] = 0 or IsEmpty
            (
                [Measures].[Цена на начало года]
            ) or [Measures].[Цена на начало года] = 0,
            null,
            [Measures].[Цена на текущую дату] / [Measures].[Цена на начало года] - 1
        )'
select
    {
        [Measures].[Цена на текущую дату],
        [Measures].[Цена на прошлую дату],
        [Measures].[Цена на начало года],
        [Measures].[Изменение цены],
        [Measures].[Темп прироста],
        [Measures].[Изменение цены к началу года],
        [Measures].[Темп прироста к началу года]
    } on columns
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[ОРГАНИЗАЦИИ Цены и тарифы],
        <%food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id="Food_0006_0002_chart1">
    <![CDATA[ -- Food_0006_0002_chart1
with
    set [Территории]
    as '
        {
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Губкинский],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Лабытнанги],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Муравленко],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Надымский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Новый Уренгой],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Ноябрьск],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Салехард],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Красноселькупский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Приуральский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Пуровский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Тазовский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Шурышкарский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Ямальский район]
        }'
    set [Организации]
    as 'filter(
      [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children -
      [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано],
      not IsEmpty([Measures].[Цена]) and not [Measures].[Цена] = 0)'
    member [Measures].[Цена ЯНАО]
    as 'Avg
        (
            [Территории],
            [Measures].[Цена МО]
        )'
    member [Measures].[Цена МО]
    as 'Avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Дата]
    as '[Период__День].[Период__День].CurrentMember.UniqueName'
    member [Measures].[Цена для проверки]
    as '
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации],
            [Measures].[Цена]
        )'
    set [NonEmptySet]
    as ' Tail
        (
            Filter
            (
                [Период__День].[Период__День].[День].Members,
                not IsEmpty([Measures].[Цена для проверки]) and [Measures].[Цена для проверки] > 0
            ),
            24
        )'
select
    {
        [Measures].[Дата],
        [Measures].[Цена ЯНАО]
    } on columns,
    { [NonEmptySet] } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[ОРГАНИЗАЦИИ Цены и тарифы],
        <%food%>,
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id="Food_0006_0002_chart2">
    <![CDATA[ -- Food_0006_0002_chart2
with
    set [Территории]
    as '
        {
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Губкинский],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Лабытнанги],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Муравленко],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Надымский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Новый Уренгой],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Ноябрьск],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[г.Салехард],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Красноселькупский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Приуральский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Пуровский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Тазовский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Шурышкарский район],
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ямало-Ненецкий автономный округ].[Ямальский район]
        }'
    set [Организации]
    as 'filter(
      [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children -
      [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].[Значение не указано],
      not IsEmpty([Measures].[Цена]) and not [Measures].[Цена] = 0)'
    member [Measures].[Цена МО]
    as 'Avg
        (
            [Организации],
            [Measures].[Цена]
        )'
select
    [Measures].[Цена МО] on columns,
    non empty [Территории] on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[ОРГАНИЗАЦИИ Цены и тарифы],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена],
        <%period_cur_date%>,
        <%food%>
    )    
    ]]>
  </query>
 
</root>