<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FST_0002_0003_RegionsRF">
    <![CDATA[
    with
    set [Субъекты РФ]
    as '[Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Центральный федеральный округ].Children -
        {
            [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Центральный федеральный округ].DATAMEMBER
        }'
    member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[наименование субъекта]
    as '[Территории__РФ].[Территории__РФ].currentmember.Name'
        member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[уникальное наименование субъекта]
    as '[Территории__РФ].[Территории__РФ].currentmember.UniqueName'
       select {
            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[наименование субъекта],
            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[уникальное наименование субъекта]
        } on columns,
        {[Субъекты РФ]}  on rows
        from [ФСТ_ЖКХ по МО_Тарифы и нормативы]
        where  (  [Measures].[Тариф]  ) 
    ]]>
  </query>


  <query id="FST_0002_0003_Table">
    <![CDATA[
--FST_0002_0003_Table
  with

  member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]

  as 'IIF

  (

  IsEmpty

  (

  (

  <%period_cur_date%>,

  [Measures].[Тариф]

  )

  ) or IsEmpty

  (

  (

  <%period_last_date%>,

  [Measures].[Тариф]

  )

  ) or

  (

  <%period_cur_date%>,

  [Measures].[Тариф]

  )=0 or

  (

   <%period_last_date%>,

  [Measures].[Тариф]

  )=0,

  0,

  (

  <%period_cur_date%>,

  [Measures].[Тариф]

  ) -

  (

   <%period_last_date%>,

  [Measures].[Тариф]

  )

  )'

  member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Детали учета]

  as 'IIF

  (

  [ФСТ__Детали учета].[ФСТ__Детали учета].CurrentMember is [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[Не определено],

  " ",

  "

  (

  " +[ФСТ__Детали учета].[ФСТ__Детали учета].CurrentMember.Name + "

  )"

  )'

 /* set [Субъекты РФ]

  as '[Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Центральный федеральный округ].Children -

  {

  [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Центральный федеральный округ].DATAMEMBER

  }'*/
  set [Субъекты РФ]

  as '<%region_dimension%> -

  {

  [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Центральный федеральный округ].DATAMEMBER

  }'

  set [Услуги]

  as '

  {

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Водоснабжение],

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Водоотведение],

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Горячее водоснабжение],

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Электроснабжение],

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Отопление],

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Газоснабжение],

  [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Все услуги].[Поставки твёрдого топлива при наличии печного отопления]

  }'

  member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Есть рост]

  as 'Count

  (

  Order

  (

  filter

  (

  {

  CROSSJOIN

  (

  filter

  (

  CROSSJOIN

  (

  {

  filter

  (

  CROSSJOIN

  (

  {

  filter

  (

  Descendants

  (

  [Территории__РФ].[Территории__РФ].CurrentMember,

  [Территории__РФ].[Территории__РФ].[ГП СП ВТГФЗ],

  LEAVES

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0 and not

  (

  [Территории__РФ].[Территории__РФ].CurrentMember is [Территории__РФ].[Территории__РФ].CurrentMember.Parent.DataMember

  )

  )

  },

  {

  filter

  (

  Except

  (

  [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].Members,

  [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[Все организации]

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0  and not

  (

  [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].CurrentMember is [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].CurrentMember.Parent.DataMember

  )

  )

  }

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0

  )

  },

  {

  filter

  (

  Except

  (

  [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].Members,

  [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Все виды благоустройств]

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0  and not

  (

  [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].CurrentMember is [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].CurrentMember.Parent.DataMember

  )

  )

  }

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0

  ),

  {

  filter

  (

  Except

  (

  [ФСТ__Детали учета].[ФСТ__Детали учета].Members,

  [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета]

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0

  )

  }

  )

  },

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение] > 0

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение],

  BDESC

  )

  ) <> 0'

  member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Есть снижение]

  as 'Count

  (

  Order

  (

  filter

  (

  {

  CROSSJOIN

  (

  filter

  (

  CROSSJOIN

  (

  {

  filter

  (

  CROSSJOIN

  (

  {

  filter

  (

  Descendants

  (

  [Территории__РФ].[Территории__РФ].CurrentMember,

  [Территории__РФ].[Территории__РФ].[ГП СП ВТГФЗ],

  LEAVES

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0 and not

  (

  [Территории__РФ].[Территории__РФ].CurrentMember is [Территории__РФ].[Территории__РФ].CurrentMember.Parent.DataMember

  )

  )

  },

  {

  filter

  (

  Except

  (

  [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].Members,

  [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[Все организации]

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0  and not

  (

  [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].CurrentMember is [ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].CurrentMember.Parent.DataMember

  )

  )

  }

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0

  )

  },

  {

  filter

  (

  Except

  (

  [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].Members,

  [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Все виды благоустройств]

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0  and not

  (

  [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].CurrentMember is [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].CurrentMember.Parent.DataMember

  )

  )

  }

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0

  ),

  {

  filter

  (

  Except

  (

  [ФСТ__Детали учета].[ФСТ__Детали учета].Members,

  [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета]

  ),

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение]<>0

  )

  }

  )

  },

  [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение] < 0

                ),

                [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Отклонение],

                BDESC

            )

        ) <> 0'
          select

          {

          [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Есть рост],

          [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Есть снижение]

          } on columns,

          {[Субъекты РФ]

          * [Услуги]}  on rows

          from [ФСТ_ЖКХ по МО_Тарифы и нормативы]

          where

          (

          [Measures].[Тариф]

          )
          ]]>
  </query>
</root>