<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FK_0001_0004_date">
    <![CDATA[
-- FK_0001_0004_compare_date   
-- <#[ФК_МесОтч_Доходы]#>
with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Исполнено]) and
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                [Период].[Период].CurrentMember.Name <> "Данные года" and
                [Период].[Период].CurrentMember.Name <> "Данные месяца"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФК_МесОтч_Доходы]
  ]]>
  </query>

  <query id="FK_0001_0004_compare_Grid">
    <![CDATA[
-- FK_0001_0004_compare_Grid
-- <#[ФК_МесОтч_Доходы]#>
with 
    member Measures.[Исполнено млн] 
    as 'Measures.[Исполнено] / 1000000' 
    member Measures.[Исполнено прошлый год млн] 
    as 'Measures.[Исполнено прошлый год] / 1000000' 
    member Measures.[Доля прошлый год] 
    as 'IIF 
        (
            IsEmpty
            (
                (
                    [КД].[Сопоставимый].[Доходы ВСЕГО],
                    [Measures].[Исполнено прошлый год]
                )
            ),
            null,
            (
                [КД].[Сопоставимый].CurrentMember,
                [Measures].[Исполнено прошлый год] 
            )/ 
            (
                [КД].[Сопоставимый].[Доходы ВСЕГО],
                [Measures].[Исполнено прошлый год] 
            )
        )' 
    member [КД].[Сопоставимый].[Налоговые доходы ] 
    as 'Aggregate 
        (
            {
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ЗАДОЛЖЕННОСТЬ И ПЕРЕРАСЧЕТЫ ПО ОТМЕНЕННЫМ НАЛОГАМ, СБОРАМ И ИНЫМ ОБЯЗАТЕЛЬНЫМ ПЛАТЕЖАМ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ПРИБЫЛЬ, ДОХОДЫ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[СТРАХОВЫЕ ВЗНОСЫ НА ОБЯЗАТЕЛЬНОЕ СОЦИАЛЬНОЕ СТРАХОВАНИЕ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[Единый социальный налог],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ТОВАРЫ (РАБОТЫ, УСЛУГИ), РЕАЛИЗУЕМЫЕ НА ТЕРРИТОРИИ РОССИЙСКОЙ ФЕДЕРАЦИИ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ТОВАРЫ, ВВОЗИМЫЕ НА ТЕРРИТОРИЮ РОССИЙСКОЙ ФЕДЕРАЦИИ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА СОВОКУПНЫЙ ДОХОД],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ НА ИМУЩЕСТВО],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ГОСУДАРСТВЕННАЯ ПОШЛИНА] 
            } 
        )' 
    member [КД].[Сопоставимый].[Неналоговые доходы ] 
    as 'Aggregate 
        (
            {
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ВНЕШНЕЭКОНОМИЧЕСКОЙ ДЕЯТЕЛЬНОСТИ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ИСПОЛЬЗОВАНИЯ ИМУЩЕСТВА, НАХОДЯЩЕГОСЯ В ГОСУДАРСТВЕННОЙ И МУНИЦИПАЛЬНОЙ СОБСТВЕННОСТИ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ОКАЗАНИЯ ПЛАТНЫХ УСЛУГ И КОМПЕНСАЦИИ ЗАТРАТ ГОСУДАРСТВА],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ДОХОДЫ ОТ ПРОДАЖИ МАТЕРИАЛЬНЫХ И НЕМАТЕРИАЛЬНЫХ АКТИВОВ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[АДМИНИСТРАТИВНЫЕ ПЛАТЕЖИ И СБОРЫ],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА],
                [КД].[Сопоставимый].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПРОЧИЕ НЕНАЛОГОВЫЕ ДОХОДЫ]
             } 
        )' 
    member [КД].[Сопоставимый].[Налоговые и неналоговые доходы ] 
    as '[КД].[Сопоставимый].[Налоговые доходы ] + [КД].[Сопоставимый].[Неналоговые доходы ]' 
    member Measures.[Темп роста] 
    as '[Measures].[Темп роста к аналогичному периоду предыдущего года_Исполнено]' 
    member [КД].[Сопоставимый].[Доходы ВСЕГО] 
    as '[КД].[Сопоставимый].[Все коды доходов].[Доходы - всего в том числе:]' 
    member Measures.[Доля] 
    as 'IIF 
        (
            IsEmpty 
            (
                (
                    [КД].[Сопоставимый].[Доходы ВСЕГО],
                    [Measures].[Исполнено] 
                ) 
            ),
            null,
            (
                [КД].[Сопоставимый].CurrentMember,
                [Measures].[Исполнено] 
            )/ 
            (
                [КД].[Сопоставимый].[Доходы ВСЕГО],
                [Measures].[Исполнено] 
            ) 
        )' 
    member Measures.[ShortName] 
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")' 
    member Measures.[ParentShortName] 
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")' 
select
    {
        {
            [КД].[Сопоставимый].[Налоговые и неналоговые доходы ] 
        } 
        * 
        {
            Measures.[Темп роста],
            Measures.[Доля],
            Measures.[Исполнено млн],
            Measures.[Исполнено прошлый год млн],
            Measures.[Доля прошлый год] 
        } 
    } on columns,
    non empty 
    {
        filter 
        (
            Descendants 
            (
                [Территории].[Сопоставимый].CurrentMember,
                [Территории].[Сопоставимый].[Субъект РФ],
                SELF 
            ),
            (<%filter%>)
        ) 
    }on rows 
from [ФК_МесОтч_Доходы]     
where       
    (
        [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
        <%period_month%>
    )       
  ]]>
  </query>
</root>