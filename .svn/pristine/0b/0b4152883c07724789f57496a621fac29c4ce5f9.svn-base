<?xml version="1.0" encoding="Windows-1251"?>
<root>

    <query id="Sport_0001_0006_population">
        <![CDATA[
-- Sport_0001_0006_population
with  
    set [Строки]  
as '    filter  
        (
            descendants  
            (
                [Период__Период].[Период__Период].[Данные всех периодов],
                [Период__Период].[Период__Период].[Год],
                SELF  
            ),
            NOT isEmpty( [Measures].[Факт] )    
            AND [Период__Период].[Период__Период].currentMember.Name <= "<%param_year_last%>"
        )'  
select
    { [Measures].[Факт] } on columns,
    { [Строки] } on rows  
from   [ФСГС_Численность населения]  
where  
    (
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].<%param_territory%>,
        [ФСГС__Численность населения].[ФСГС__Численность населения].[Все].[Все население],
        [Вариант__ФСГС Население].[Вариант__ФСГС Население].[Все].[Численность населения на 1 января]  
    )  
    ]]>
    </query>
    
    <query id="Sport_0001_0006_minsport">
        <![CDATA[
-- Sport_0001_0006_minsport
with  
    member [Measures].[Данные]  
    as '  
        (
            filter  
            (
                [1ФК_Строки_сопоставимые].members,
                [1ФК_Строки_сопоставимые].[Строки_сопоставимые].currentMember.properties("Код") = "<%param_row%>"  
            ).item(0),
            filter  
            (
                [1ФК_Столбцы_сопоставимые].members,
                [1ФК_Столбцы_сопоставимые].[Столбцы_сопоставимые].currentMember.properties("Код") = "<%param_column%>"  
            ).item(0),
            [Measures].[Значение]  
        )'  
    set [Строки]  
as '    filter  
        (
            descendants  
            (
                [Год].[Год].[Все],
                [Год].[Год].[Год],
                SELF  
            ),
            NOT isEmpty( [Measures].[Данные] )
            AND [Год].[Год].currentMember.Name <= "<%param_year_last%>"
        )'  
select
    { [Measures].[Данные] } on columns,
    { [Строки] } on rows  
from [1-ФК]  
where 
    (
        [Территории_сопоставимый].[Территории_сопоставимый].[All].<%param_territory%> 
    ) 
    ]]>
    </query>

    <query id="Sport_0001_0006_income">
        <![CDATA[
-- Sport_0001_0006_income
with
    member [Measures].[Доходы]
    as 'sum
        (
            filter
            (
                descendants
                (
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].currentMember,
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Месяц],
                    SELF
                ),
                NOT [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].currentMember.properties("IS_DATAMEMBER")
            ),
            [Measures].[За период]
        )/12'
    set [Строки]
as '    filter
        (
            descendants
            (
                [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Данные всех периодов],
                [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                SELF
            ),
            NOT isEmpty( [Measures].[Доходы] )
            AND [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].currentMember.Name <= "<%param_year_last%>"
        )'
select
    {
        [Measures].[Доходы]
    } on columns,
    { [Строки] } on rows
from    [СТАТ_СЭП_Годовой сборник]
where
    (
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].<%param_territory%>,
        [СЭП__Годовой сборник].[СЭП__Годовой сборник].[Данные всех источников].[СТАТ\0001 Отчетность - вариант: Без варианта].[Уровень жизни населения].[Среднедушевые денежные доходы]
    )
    ]]>
    </query>
    
    
</root>
