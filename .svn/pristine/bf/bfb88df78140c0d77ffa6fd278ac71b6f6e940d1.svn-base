<?xml version="1.0" encoding="windows-1251"?>
<root>
  <query id="MFRF_0002_0004_date">
    <![CDATA[
-- MFRF_0002_0004_compare_date
-- <#[ФК_МесОтч_Доходы]#>
with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Исполнено])
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФК_МесОтч_Доходы]
  ]]>
  </query>

  <query id="MFRF_0002_0004_compare_GridYear">
    <![CDATA[
-- MFRF_0002_0004_compare_Grid 
-- Год для грида
with
    member Measures.[ShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'
    member Measures.[ParentShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'
    set [Субъекты ФО]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Дальневосточный федеральный округ].[Амурская область].Parent,
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    set [Субъекты РФ]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация],
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    member Measures.[Среднее по ФО]
    as 'AVG
        (
            [Субъекты ФО],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
    member Measures.[Среднее по РФ]
    as 'AVG
        (
            [Субъекты РФ],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
        member Measures.[Индикаторы]
        as 'null'
        
        member Measures.[Среднее значение]
        as 'null'
        
        member [Measures].[Год]  
    as 'IIF
        (
            [Период].[Период].CurrentMember.Name ="Квартал 1",
            [Период].[Период].CurrentMember.Parent.Parent.Name + " - Квартал 1",
            [Период].[Период].CurrentMember.Name
        )' 
SELECT
    {
        {
            {
                {
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами]
                } +
                {
                    except
                    (
                        Filter
                        (
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                            not IsEmpty([Measures].[Значение Факт]) and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)"
                        ),
                        {
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
                        }
                    )
                }
            }
        }
    } on rows,
    {
        
         Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Квартал],
                  [Период].[Период].[Данные всех периодов].[2005].[Полугодие 1].[Квартал 1]    
            ) : ClosingPeriod    
            (
                [Период].[Период].[Квартал],
                [Период].[Период].[Данные всех периодов].[2009].[Полугодие 2].[Квартал 4]  
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
        *
        {

             [Measures].[Год] 
        }
    }on columns
FROM [МФ РФ_Индикаторы БК и КУ]
 WHERE   
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )   ]]>
  </query>

  <query id="MFRF_0002_0004_compare_Grid">
    <![CDATA[
-- MFRF_0002_0004_compare_Grid
-- MFRF_0002 Таблица - месячная отчётность
with
    member Measures.[ShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'
    member Measures.[ParentShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'
    set [Субъекты ФО]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Дальневосточный федеральный округ].[Амурская область].Parent,
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    set [Субъекты РФ]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация],
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    member Measures.[Среднее по ФО]
    as 'AVG
        (
            [Субъекты ФО],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
    member Measures.[Среднее по РФ]
    as 'AVG
        (
            [Субъекты РФ],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
        member Measures.[Индикаторы]
        as 'null'
        
        member Measures.[Среднее значение]
        as 'null'
SELECT
    {
        {
            {
                {
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами]
                } +
                {
                    except
                    (
                        Filter
                        (
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                            not IsEmpty([Measures].[Значение Факт]) and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)"
                        ),
                        {
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
                        }
                    )
                }
            }
        }
    } on rows,
    {
         Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Квартал],
                  [Период].[Период].[Данные всех периодов].[2005].[Полугодие 1].[Квартал 1]    
            ) : ClosingPeriod    
            (
                [Период].[Период].[Квартал],
                [Период].[Период].[Данные всех периодов].[2009].[Полугодие 2].[Квартал 4]  
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
        *
        {
            [Measures].[Нормативное значение],
            [Measures].[Значение Факт]
        },
        --вынесем индикаторы вне основного блока
        {[Период].[Период].[Данные всех периодов].[2009].[Полугодие 2].[Квартал 4]}
        * {Measures.[Индикаторы]        }
    }on columns
FROM [МФ РФ_Индикаторы БК и КУ]
 WHERE   
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )   ]]>
</query>


  <query id="MFRF_0002_0004_compare_Grid_HiddenFields">
    <![CDATA[
-- MFRF_0002_0004_compare_Grid_HiddenFields
with
    member Measures.[ShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'
    member Measures.[ParentShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'
    set [Субъекты ФО]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Дальневосточный федеральный округ].[Амурская область].Parent,
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    set [Субъекты РФ]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация],
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    member Measures.[Среднее по ФО]
    as 'AVG
        (
            [Субъекты ФО],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
    member Measures.[Среднее по РФ]
    as 'AVG
        (
            [Субъекты РФ],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'        
        member Measures.[Среднее значение]
        as 'null'
SELECT
    {
        {
            {
                {
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами]
                } +
                {
                    except
                    (
                        Filter
                        (
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                            not IsEmpty([Measures].[Значение Факт]) and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)"
                        ),
                        {
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
                        }
                    )
                }
            }
        }
    } on rows,
    {
         Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Квартал],
                  [Период].[Период].[Данные всех периодов].[2005].[Полугодие 1].[Квартал 1]    
            ) : ClosingPeriod    
            (
                [Период].[Период].[Квартал],
                [Период].[Период].[Данные всех периодов].[2009].[Полугодие 2].[Квартал 4]  
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
        *
        {
            [Measures].[Среднее по ФО],
            [Measures].[Среднее по РФ],
            [Measures].[Наличие нарушения Факт],
            Measures.[Среднее значение]
        }
    }on columns
FROM [МФ РФ_Индикаторы БК и КУ]
 WHERE   
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )   ]]>
  </query>


  <query id="MFRF_0002_0004_compare_Grid_HiddenFields1">
    <![CDATA[
-- MFRF_0002_0004_compare_Grid_HiddenFields 

with
    member Measures.[ShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'
    member Measures.[ParentShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'
    set [Субъекты ФО]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Дальневосточный федеральный округ].[Амурская область].Parent,
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    set [Субъекты РФ]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация],
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    member Measures.[Среднее по ФО]
    as 'AVG
        (
            [Субъекты ФО],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
    member Measures.[Среднее по РФ]
    as 'AVG
        (
            [Субъекты РФ],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
        member Measures.[Индикаторы]
        as 'null'
        
        member Measures.[Среднее значение]
        as 'null'
SELECT
    {
        {
            {
                {
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами]
                } +
                {
                    except
                    (
                        Filter
                        (
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                            not IsEmpty([Measures].[Значение Факт]) and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)"
                        ),
                        {
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
                        }
                    )
                }
            }
        }
    } on rows,
    {   Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Год],
                  [Период].[Период].[Данные всех периодов].[2006]   
            ) : ClosingPeriod    
            (
                [Период].[Период].[Год],
                [Период].[Период].[Данные всех периодов].[2011] 
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
        *
        {
            [Measures].[Среднее по ФО],
            [Measures].[Среднее по РФ],
            [Measures].[Наличие нарушения Факт],
            Measures.[Среднее значение]
        }
    }on columns
FROM [МФ РФ_Индикаторы БК и КУ]
 WHERE   
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )   ]]>
  </query>


  <query id="MFRF_0002_0004_compare_Grid1">
<![CDATA[
-- MFRF_0002_0004_compare_Grid 
-- MFRF_0002 Таблица - годовая отчётность
with
    member Measures.[ShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'
    member Measures.[ParentShortName]
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'
    set [Субъекты ФО]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Дальневосточный федеральный округ].[Амурская область].Parent,
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    set [Субъекты РФ]
    as 'Descendants
        (
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация],
            [Территории].[Сопоставимый].[Субъект РФ],
            SELF
        )'
    member Measures.[Среднее по ФО]
    as 'AVG
        (
            [Субъекты ФО],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
    member Measures.[Среднее по РФ]
    as 'AVG
        (
            [Субъекты РФ],
            (
                [Measures].[Значение Факт],
                [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember
            )
        )'
        member Measures.[Индикаторы]
        as 'null'
        
        member Measures.[Среднее значение]
        as 'null'
SELECT
    {
        {
            {
                {
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами]
                } +
                {
                    except
                    (
                        Filter
                        (
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                            not IsEmpty([Measures].[Значение Факт]) and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)"
                        ),
                        {
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
                        }
                    )
                }
            }
        }
    } on rows,
    {   
         Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Год],
                  [Период].[Период].[Данные всех периодов].[2006]   
            ) : ClosingPeriod    
            (
                [Период].[Период].[Год],
                [Период].[Период].[Данные всех периодов].[2011] 
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
        *
        {
            
            [Measures].[Нормативное значение],
            [Measures].[Значение Факт]
        },
        {[Период].[Период].[Данные всех периодов].[2011]}*
        {Measures.[Индикаторы]}
    }on columns
FROM [МФ РФ_Индикаторы БК и КУ]
 WHERE   
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )   ]]>
  </query>

  
  <query id="MFRF_0002_0004_compare_comment">
    <![CDATA[
-- MFRF_0002_0004 Таблица - комментарий к индикатору
with       
    member Measures.[Код]       
    as '[МФ РФ].[Сопоставимый индикаторы БККУ].Properties("Код")'       
    member Measures.[Единицы измерения]       
    as '[МФ РФ].[Сопоставимый индикаторы БККУ].Properties("Единицы измерения")'       
    member Measures.[Условие]       
    as '[МФ РФ].[Сопоставимый индикаторы БККУ].Properties("Условие")'       
SELECT
    {
        [Measures].[Код],
        [Measures].[Условие],
        [Measures].[Единицы измерения] 
    } on rows,
    {
        except      
        (
            Filter       
            (
                [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                not IsEmpty([Measures].[Значение Факт]) and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)"       
            ),
            {
                [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
            }       
        )       
    }on columns       
FROM [МФ РФ_Индикаторы БК и КУ]       
WHERE       
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>]
    )   ]]>
  </query>

  <query id="MFRF_0002_0004_map">
    <![CDATA[   
    --MFRF_0002_0004_map
    --Карта (не используется)
SELECT
     Filter  
    (
        Descendants  
        (
            [Территории].[Сопоставимый].CurrentMember,
            [Территории].[Сопоставимый].[<%selectedItem%>],
            SELF  
        ),
        (
            not  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember  
            ) <%filter%> 
        )  
    ) on rows,
    {
        [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[<%selected_indicator%>]
    }      on columns  
FROM [МФ РФ_Индикаторы БК и КУ]   
WHERE    
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        <%period_year%>,
        [Measures].[Наличие нарушения Факт]
    ) 
     ]]>
  </query>

  <query id="MFRF_0002_0004_map_hint">
    <![CDATA[
    --Не используется
    --MFRF_0002_0004_map_hint
with   
    member Measures.[Код]   
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Name'   
    member [Measures].[Супер список нарушений]  
    as 'IIF  
        (
            [Территории].[Сопоставимый].CurrentMember.Parent is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация],
            [Measures].[Список субъектов],
            [Measures].[Список нарушений]  
        )' 
    member [Measures].[Список субъектов]
    as 'Generate 
        (
            Filter 
            (
                Descendants   
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF   
                ),
                (
                    not   
                    (
                        [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember   
                    ) and not 
                    (
                        [Measures].[Наличие нарушения Факт] = 0
                    ) 
                )   
            ),
            [Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование"),
            ", " 
        ) ' 
    member [Measures].[Список нарушений]   
    as 'Generate   
        (
            except   
            (
                Filter   
                (
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Индикатор БК и КУ].members,
                    not IsEmpty([Measures].[Значение Факт]) and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_1(Ч1П5_1)" and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_2(Ч1П5_2)" and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_3(Ч1П5_3)" and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ11_4(Ч1П5_4)" and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ17_1(КУ11_4)" and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ17_2(КУ11_2)" and
                    [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код") <> "КУ17_3(КУ11_1)" and
                    [Measures].[Наличие нарушения Факт] = 1   
                ),
                {
                    [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Несопоставленные данные],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений требований БК РФ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Количество нарушений условий качества управления бюджетами],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Группа, присвоенная субъекту РФ по доле МБТ],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля трансфертов из фонда финансовой поддержки субъектов Российской Федерации в собственных доходах бюджета субъекта Федерации с учетом финансовой помощи из фонда финансовой поддержки субъектов Российской Федерации.],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля бюджетных кредитов юридическим лицам в расходах бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Отношение величины государственных гарантий субъекта Федерации к расходам бюджета субъекта Федерации (только для субъектов Федерации, получающих трансферты ФФПР)],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Исполнение бюджета по налоговым доходам в процентах от первоначально утвержденного значения налоговых доходов],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате труда и начислениям по оплате труда],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Кредиторская задолженность по оплате коммунальных услуг],
                            [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[Доля оплаты коммунальных услуг населением, процентов от себестоимости]
                }   
            ),
            [МФ РФ].[Сопоставимый индикаторы БККУ].CurrentMember.Properties("Код"),
            ", "   
        )'   
SELECT
non empty Filter  
    (
        Descendants  
        (
            [Территории].[Сопоставимый].CurrentMember,
            [Территории].[Сопоставимый].[<%selectedItem%>],
            SELF  
        ),
        (
            not  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember  
            ) <%filter%> 
        )  
    ) 
    on rows,
    {
        {
            {
                [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[<%selected_indicator%>] 
            } 
            * 
            {
                [Measures].[Значение Факт]
          
            } 
        } 
    }on columns 
FROM [МФ РФ_Индикаторы БК и КУ]  
WHERE  
    (
        [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        <%period_year%>
    )  
     ]]>
  </query>

  <query id="Chart_query">
    <![CDATA[
-- MFRF_0002_0004_Chart
-- месячная отчётность
with    
    member Measures.[ShortName]    
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'    
    member Measures.[ParentShortName]    
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'    
    member [МФ РФ].[Сопоставимый индикаторы БККУ].[ФО]    
    as 'Measures.[ParentShortName]'    
    member [Measures].[Без нарушения]    
    as 'IIF    
        (
            [Measures].[Наличие нарушения Факт] = 0,
            [Measures].[Значение Факт],
            null    
        )'    
    member [Measures].[С нарушением]    
    as 'IIF    
        (
            [Measures].[Наличие нарушения Факт] = 1,
            [Measures].[Значение Факт],
            null    
        )'    
    member [Measures].[Год]  
    as 'IIF
        (
            [Период].[Период].CurrentMember.Name ="Квартал 1",
            [Период].[Период].CurrentMember.Parent.Parent.Name + " - Квартал 1",
            [Период].[Период].CurrentMember.Name
        )' 
SELECT
    {
        {
            [Measures].[Нормативное значение],
            [Measures].[Без нарушения],
            [Measures].[С нарушением]  -- [Measures].[Наличие нарушения Факт]  
        }  
    }on  rows ,
    {
        Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Квартал],
                  [Период].[Период].[Данные всех периодов].[2005].[Полугодие 1].[Квартал 1]     
            ) : ClosingPeriod    
            (
                [Период].[Период].[Квартал],
                [Период].[Период].[Данные всех периодов].[2009].[Полугодие 2].[Квартал 4]    
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
    }  on   columns
FROM [МФ РФ_Индикаторы БК и КУ]    
WHERE     
    (
       [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[<%selected_indicator%>],    
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )      
  
  ]]>
  </query>

  <query id="Chart_query1">
    <![CDATA[
-- MFRF_0002_0004_Chart 
-- годовая отчётность
with    
    member Measures.[ShortName]    
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'    
    member Measures.[ParentShortName]    
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'    
    member [МФ РФ].[Сопоставимый индикаторы БККУ].[ФО]    
    as 'Measures.[ParentShortName]'    
    member [Measures].[Без нарушения]    
    as 'IIF    
        (
            [Measures].[Наличие нарушения Факт] = 0,
            [Measures].[Значение Факт],
            null    
        )'    
    member [Measures].[С нарушением]    
    as 'IIF    
        (
            [Measures].[Наличие нарушения Факт] = 1,
            [Measures].[Значение Факт],
            null    
        )'    
    member [Measures].[Год]  
    as 'IIF
        (
            [Период].[Период].CurrentMember.Name ="Квартал 1",
            [Период].[Период].CurrentMember.Parent.Parent.Name + " - Квартал 1",
            [Период].[Период].CurrentMember.Name
        )' 
SELECT
    {
        {
           --[Measures].[Год],
            [Measures].[Нормативное значение],
            [Measures].[Без нарушения],
            [Measures].[С нарушением]  -- [Measures].[Наличие нарушения Факт]  
        }  
    }on  rows ,
    {
        Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Год],
                  [Период].[Период].[Данные всех периодов].[2006]   
            ) : ClosingPeriod    
            (
                [Период].[Период].[Год],
                [Период].[Период].[Данные всех периодов].[2011]  
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
    }  on   columns
FROM [МФ РФ_Индикаторы БК и КУ]    
WHERE     
    (
       [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[<%selected_indicator%>],    
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )      
  
  ]]>
  </query>
  
  <query id="Chart_yearquery">
    <![CDATA[
-- MFRF_0002_0004_ChartYear
-- Год для оси
with    
    member Measures.[ShortName]    
    as '[Территории].[Сопоставимый].CurrentMember.Properties("Сокращенное наименование")'    
    member Measures.[ParentShortName]    
    as '[Территории].[Сопоставимый].CurrentMember.Parent.Properties("Сокращенное наименование")'    
    member [МФ РФ].[Сопоставимый индикаторы БККУ].[ФО]    
    as 'Measures.[ParentShortName]'    
    member [Measures].[Без нарушения]    
    as 'IIF    
        (
            [Measures].[Наличие нарушения Факт] = 0,
            [Measures].[Значение Факт],
            null    
        )'    
    member [Measures].[С нарушением]    
    as 'IIF    
        (
            [Measures].[Наличие нарушения Факт] = 1,
            [Measures].[Значение Факт],
            null    
        )'    
    member [Measures].[Год]  
    as 'IIF
        (
            [Период].[Период].CurrentMember.Name ="Квартал 1",
            [Период].[Период].CurrentMember.Parent.Parent.Name + " - Квартал 1",
            [Период].[Период].CurrentMember.Name
        )' 
SELECT
    {
        {
           [Measures].[Год]  
        }  
    }on  rows ,
    {
        Filter  
        (
            OpeningPeriod   
            (
                [Период].[Период].[Квартал],
                  [Период].[Период].[Данные всех периодов].[2005]   
            ) : ClosingPeriod    
            (
                [Период].[Период].[Квартал],
               [Период].[Период].[Данные всех периодов].[2011]  
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"  
        )   
    }  on   columns
FROM [МФ РФ_Индикаторы БК и КУ]    
WHERE     
    (
       [Вариант].[БККУ].[Все].[<%bkku_Variant%>],
        [МФ РФ].[Сопоставимый индикаторы БККУ].[Все индикаторы].[<%selected_indicator%>],    
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>]
    )      
  
    
    ]]>
  </query>

</root>

