<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0053_lastDate">
    <![CDATA[
-- FO_0002_0053_lastDate
with   
    member Measures.[ДанныеНа]   
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'   
select
    {Measures.[ДанныеНа]} on columns,
    Tail   
    (
        Filter 
        (
            OpeningPeriod   
            (
                [Период__Период].[Период__Период].[Месяц],
                [Период__Период].[Период__Период].[Данные всех периодов].[2008]   
            ) : ClosingPeriod   
            (
                [Период__Период].[Период__Период].[Месяц],
                [Период__Период].[Период__Период].[Данные всех периодов].[2012]   
            ),
            not IsEmpty([Measures].[Факт]) 
        )   
    ) on rows   
from [ФО_МесОтч_СпрОстатки]          
  ]]>
  </query>  
  
  <query id="FO_0002_0053_grid">
    <![CDATA[
-- FO_0002_0053_grid
with                     
    set [Города]                    
    as 'Filter                    
        (
            Descendants                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF                    
            ),
            not                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember
            ) and                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Properties("Тип территории") = "ГО"                    
            )                    
        )'                    
    set [Районы]                    
    as 'Filter                    
        (
            Descendants                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF                    
            ),
            not                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember
            ) and                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Properties("Тип территории") = "МР"                    
            )                    
        )'                    
    set [Города и районы]                    
    as '[Города] + [Районы]'                     
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта]                   
    as '                   
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов]                   
        )'                     
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Бюджет субъекта]                   
    as '                   
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов]                   
        )'                     
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]               
    as '                    
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]  
        ) +   
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа]  
        )'   
    member [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Уровень бюджета ]                  
    as 'IIF                   
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет субъекта],
            IIF                   
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Бюджет субъекта],
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
                IIF                   
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты] ,
                    [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет субъекта],
                    Aggregate 			                 
                    (
                        			                 
                        {
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения],
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа] 			                 
                        } 			                 
                    )                  
                )                   
            )                   
        ) '              
    member [Период__Период].[Период__Период].[Начало года]     
    as ' [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[Полугодие 2].[Квартал 4].[Декабрь] '      
    member [Период__Период].[Период__Период].[Предыдущий период]     
    as ' [Период__Период].[Период__Период].[Данные всех периодов].<%last_period%>  '      
    member [Период__Период].[Период__Период].[Текущий период]     
    as ' [Период__Период].[Период__Период].[Данные всех периодов].<%current_period%>  '      
    member [Период__Период].[Период__Период].[Отклонение от предыдущего месяца]        
    as 'IIF       
        (
            IsEmpty       
            (
                [Период__Период].[Период__Период].[Текущий период]     
            ) or IsEmpty       
            (
                [Период__Период].[Период__Период].[Предыдущий период]     
            ),
            null,
            [Период__Период].[Период__Период].[Текущий период] - [Период__Период].[Период__Период].[Предыдущий период]     
        )'       
    member [Период__Период].[Период__Период].[Отклонение от начала года]      
    as 'IIF      
        (
            IsEmpty      
            (
                [Период__Период].[Период__Период].[Текущий период]     
            ) or IsEmpty      
            (
                [[Период__Период].[Период__Период].[Начало года]     
            ),
            null,
            [Период__Период].[Период__Период].[Текущий период] - [Период__Период].[Период__Период].[Начало года]     
        )'       
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа ]    
    as 'Aggregate({[Города]})'    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы ]    
    as 'Aggregate({[Районы]})'     
    member [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Уровень]
    as 'IIF  
        (
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта] 
            ) or  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Бюджет субъекта] 
            ) or  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты] 
            ) or  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа ] 
            ) or  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы ]  
            ),
            0,
            1
        )'  
    member [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Уникальное имя]
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.UniqueName'   
    
    member [Measures].[Факт ]    
    as '[Measures].[Факт] / <%rub_mutiplier%>'
select
    {
        {
            {
                [Период__Период].[Период__Период].[Начало года],
                [Период__Период].[Период__Период].[Предыдущий период],
                [Период__Период].[Период__Период].[Текущий период],
                [Период__Период].[Период__Период].[Отклонение от предыдущего месяца],
                [Период__Период].[Период__Период].[Отклонение от начала года]     
            }     
        }      
        *                 
        {
            [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Все показатели].[ОСТАТКИ СРЕДСТВ БЮДЖЕТОВ НА ОТЧЕТНУЮ ДАТУ:],
            [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Все показатели].[ОСТАТКИ СРЕДСТВ БЮДЖЕТОВ НА ОТЧЕТНУЮ ДАТУ:].[остатки целевых средств бюджетов],
            [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Все показатели].[ОСТАТКИ СРЕДСТВ БЮДЖЕТОВ НА ОТЧЕТНУЮ ДАТУ:].DataMember                
        } + 
        {
            [Период__Период].[Период__Период].[Данные всех периодов]
        }
        *
        {
            [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Уровень],
            [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Уникальное имя]
        } 
    } on columns,
    Non Empty                 
    {
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта],
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Бюджет субъекта],
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]               
        } +            
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа ]    
        } + [Города] +    
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы ]    
        } + [Районы]    
    } on rows  
From [ФО_МесОтч_СпрОстатки]                    
where                   
    (
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Уровень бюджета ],
        [Measures].[Факт ]          
    )                    
  ]]>
  </query>

  <query id="FO_0002_0053_chart">
    <![CDATA[
-- FO_0002_0053_chart
with    
    set [Города]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF    
            ),
            not    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Properties("Тип территории") = "ГО"    
            )    
        )'    
    set [Районы]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF    
            ),
            not    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].Properties("Тип территории") = "МР"    
            )    
        )'    
    set [Города и районы]    
    as '[Города] + [Районы]'    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта]    
    as '    
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов]    
        )'    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Бюджет субъекта]    
    as '    
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Консолидированная отчетность и отчетность внебюджетных территориальных фондов]    
        )'    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты]    
    as '    
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Районы Алтайского края],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]  
        ) +   
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Алтайский край].[Городские округа Алтайского края],
            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа]  
        )'    
    member [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Уровень бюджета ]    
    as 'IIF    
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Консолидированный бюджет субъекта],
            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет субъекта],
            IIF    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Бюджет субъекта],
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет субъекта],
                IIF    
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты],
                    [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет субъекта],
                    Aggregate 			    
                    (
                        			    
                        {
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения],
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа] 			    
                        } 			    
                    )    
                )    
            )    
        ) '    
    set [Периоды]    
    as '    
        {
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[Полугодие 2].[Квартал 4].[Декабрь]    
        } + Filter    
        (
            Descendants    
            (
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
                [Период__Период].[Период__Период].[Месяц],
                SELF    
            ),
            (
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия"    
            ) and    
            (
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года"    
            )   
        )'    
 
    member [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Остатки целевых средств]   
    as '([Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Все показатели].[ОСТАТКИ СРЕДСТВ БЮДЖЕТОВ НА ОТЧЕТНУЮ ДАТУ:].[остатки целевых средств бюджетов], [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Уровень бюджета ]) / <%rub_mutiplier%>'    
    member [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Остатки собственных средств]   
    as '([Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Все показатели].[ОСТАТКИ СРЕДСТВ БЮДЖЕТОВ НА ОТЧЕТНУЮ ДАТУ:].DataMember, [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Уровень бюджета ]) / <%rub_mutiplier%> '    
    member [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Период1]   
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName + ".[1]"'
    member [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Период2]   
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName + ".[1]"' 
    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа ]    
    as 'Aggregate({[Города]})'    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы ]    
    as 'Aggregate({[Районы]})'   
select
    {
        [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Период1],
        [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Период2],
        [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Остатки целевых средств],
        [Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Остатки собственных средств]
    } on columns,
    Filter
    (  
       { [Периоды] },
       not IsEmpty([Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Остатки целевых средств]) and
       not IsEmpty([Показатели__СопМесОтСпОст].[Показатели__СопМесОтСпОст].[Остатки собственных средств])
    ) on rows   
From [ФО_МесОтч_СпрОстатки]   
where    
    (
        [Measures].[Факт],
        [Районы__Сопоставимый].[Районы__Сопоставимый].[<%selected_grid_indicator%>]    
    )    
  ]]>
  </query>

</root>