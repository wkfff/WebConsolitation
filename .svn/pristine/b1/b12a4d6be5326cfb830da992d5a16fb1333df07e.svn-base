<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="Oil_0001_0002_incomes_date">
    <![CDATA[ -- Oil_0001_0002_incomes_date
with 
    member [Measures].[ДанныеНа] 
    as '[Период__День].[Период__День].CurrentMember.UniqueName'
    set [NonEmptySet] 
    as 'Union(Head 
        (
            Filter 
            (
                Descendants 
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER 
                ) ,
                not IsEmpty 
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    ) 
                ) and not 
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                ) = 0 and 
                (
                    [Период__День].[Период__День].CurrentMember.Parent.Parent.Parent.Parent.Name = tail
                    (
                        Filter 
                        (
                            Descendants 
                            (
                                [Период__День].[Период__День].[Данные всех периодов],
                                [Период__День].[Период__День].[День],
                                SELF_AND_AFTER 
                            ) ,
                            not IsEmpty 
                            (
                                (
                                    [Measures].[Цена],
                                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                                ) 
                            ) and not 
                            (
                                [Measures].[Цена],
                                [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                            ) = 0 
                        ),
                        1 
                    ).Item(0).Parent.Parent.Parent.Parent.Properties("Name") 
                ) 
            ),
            1 
        ),
        tail 
        (
            Filter 
            (
                Descendants 
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER 
                ) ,
                not IsEmpty 
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    ) 
                ) and not 
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                ) = 0 
            ),
            2 
        ), All)' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from [Организации_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Организации__Тип цены].[Организации__Тип цены].[Тип цены].[Розничная цена],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы]
    )
    ]]>
  </query>

  <query id="Oil_0001_0002_table1">
    <![CDATA[ -- Oil_0001_0002_table1
with
    set [МР]
    as 'filter
        (
            Descendants
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
                [Территории__Сопоставимый].[Территории__Сопоставимый].[ГП СП ВТГФЗ],
                SELF_AND_BEFORE
            ),
            not [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember is [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Parent.DataMember and not IsEmpty
            (
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[Средняя розничная цена на текущую дату]
                )
            ) and
            (
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[МР]
                ) or
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[ГП СП]
                )
            )
        )'
    set [ГО]
    as 'filter
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Ханты-Мансийск] + Descendants
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
                [Территории__Сопоставимый].[Территории__Сопоставимый].[ГП СП ВТГФЗ],
                SELF_AND_BEFORE
            ),
            not [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember is [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Parent.DataMember and not IsEmpty
            (
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[Средняя розничная цена на текущую дату]
                )
            ) and
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Город]
            )
        )'
    set [Территории]
    as 'filter
        (
            Descendants
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
                [Территории__Сопоставимый].[Территории__Сопоставимый].[МР ГО],
                SELF
            ),
            not IsEmpty
            (
                [Measures].[Средняя розничная цена на текущую дату]
            )
        )'
    set [Организации]
    as '[Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children'
    member [Measures].[Город]
    as 'iif
        (
            [Measures].[Уровень] = "МР ГО" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count = 0,
            true,
            false
        )'
    member [Measures].[МР]
    as 'iif
        (
            [Measures].[Уровень] = "МР ГО" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count > 0,
            true,
            false
        )'
    member [Measures].[ГП СП]
    as 'iif
        (
            [Measures].[Уровень] = "ГП СП ВТГФЗ" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count = 0,
            true,
            false
        )'
    member [Measures].[Средняя розничная цена_Город]
    as 'avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Средняя розничная цена_МР]
    as 'avg
        (
            [Организации],
            [Measures].[Средняя по организации]
        )'
    member [Measures].[Средняя по организации]
    as 'avg
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children,
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].CurrentMember,
                [Measures].[Цена]
            )
        )'
    member [Measures].[Средняя розничная цена_ГП СП]
    as 'avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Средняя розничная цена]
    as 'iif
        (
            [Measures].[Город],
            [Measures].[Средняя розничная цена_Город],
            iif
            (
                [Measures].[МР],
                [Measures].[Средняя розничная цена_МР],
                iif
                (
                    [Measures].[ГП СП],
                    [Measures].[Средняя розничная цена_ГП СП],
                    null
                )
            )
        )'
    member [Measures].[Средняя розничная цена на текущую дату]
    as '
        (
            <%period_cur_date%>,
            [Measures].[Средняя розничная цена]
        )'
    member [Measures].[Средняя розничная цена на предыдущую дату]
    as '
        (
            <%period_last_date%>,
            [Measures].[Средняя розничная цена]
        )'
    member [Measures].[Средняя розничная цена на начало года]
    as '
        (
            <%period_first_year%>,
            [Measures].[Средняя розничная цена]
        )'
    member [Measures].[Уровень]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Level.Name'
    member [Measures].[Минимум]
    as '
        (
            tail
            (
                order
                (
                    filter
                    (
                        [Территории],
                        not IsEmpty
                        (
                            [Measures].[Средняя розничная цена на текущую дату]
                        )
                    ),
                    [Measures].[Средняя розничная цена на текущую дату],
                    BDESC
                )
            ).Item(0),
            [Measures].[Средняя розничная цена на текущую дату]
        )'
    member [Measures].[Минимум город]
    as ' tail
        (
            order
            (
                filter
                (
                    [Территории],
                    not IsEmpty
                    (
                        [Measures].[Средняя розничная цена на текущую дату]
                    )
                ),
                [Measures].[Средняя розничная цена на текущую дату],
                BDESC
            )
        ).Item(0).Name'
    member [Measures].[Максимум]
    as '
        (
            head
            (
                order
                (
                    filter
                    (
                        [Территории],
                        not IsEmpty
                        (
                            [Measures].[Средняя розничная цена на текущую дату]
                        )
                    ),
                    [Measures].[Средняя розничная цена на текущую дату],
                    BDESC
                )
            ).Item(0),
            [Measures].[Средняя розничная цена на текущую дату]
        )'
    member [Measures].[Максимум город]
    as ' head
        (
            order
            (
                filter
                (
                    [Территории],
                    not IsEmpty
                    (
                        [Measures].[Средняя розничная цена на текущую дату]
                    )
                ),
                [Measures].[Средняя розничная цена на текущую дату],
                BDESC
            )
        ).Item(0).Name'
    member [Measures].[Средняя цена на текущую дату]
    as '
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
            [Measures].[Средняя розничная цена на текущую дату]
        )'
    member [Measures].[Средняя цена на предыдущую дату]
    as '
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
            [Measures].[Средняя розничная цена на предыдущую дату]
        )'
    member [Measures].[Средняя цена на начало года]
    as '
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
            [Measures].[Средняя розничная цена на начало года]
        )'
    member [Measures].[Абсолютное отклонение к предыдущей дате]
    as 'iif
        (
            not IsEmpty
            (
                [Measures].[Средняя цена на текущую дату]
            ) and not IsEmpty
            (
                [Measures].[Средняя цена на предыдущую дату]
            ) and [Measures].[Средняя цена на предыдущую дату] <> 0 and [Measures].[Средняя цена на текущую дату] <> 0,
            [Measures].[Средняя цена на текущую дату] - [Measures].[Средняя цена на предыдущую дату],
            null
        )'
    member [Measures].[Темп прироста к предыдущей дате]
    as 'iif
        (
            not IsEmpty
            (
                [Measures].[Средняя цена на текущую дату]
            ) and not IsEmpty
            (
                [Measures].[Средняя цена на предыдущую дату]
            ) and [Measures].[Средняя цена на предыдущую дату] <> 0 and [Measures].[Средняя цена на текущую дату] <> 0,
            [Measures].[Средняя цена на текущую дату] / [Measures].[Средняя цена на предыдущую дату] - 1,
            null
        )'
    member [Measures].[Абсолютное отклонение к началу года]
    as 'iif
        (
            not IsEmpty
            (
                [Measures].[Средняя цена на текущую дату]
            ) and not IsEmpty
            (
                [Measures].[Средняя цена на начало года]
            ) and [Measures].[Средняя цена на начало года] <> 0 and [Measures].[Средняя цена на текущую дату] <> 0,
            [Measures].[Средняя цена на текущую дату] - [Measures].[Средняя цена на начало года],
            null
        )'
    member [Measures].[Темп прироста к началу года]
    as 'iif
        (
            not IsEmpty
            (
                [Measures].[Средняя цена на текущую дату]
            ) and not IsEmpty
            (
                [Measures].[Средняя цена на начало года]
            ) and [Measures].[Средняя цена на начало года] <> 0 and [Measures].[Средняя цена на текущую дату] <> 0,
            [Measures].[Средняя цена на текущую дату] / [Measures].[Средняя цена на начало года] - 1,
            null
        )'
select
    {
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ]<%Mo%>
    }
    *
    {
        [Measures].[Средняя цена на текущую дату],
        [Measures].[Абсолютное отклонение к предыдущей дате],
        [Measures].[Темп прироста к предыдущей дате],
        [Measures].[Абсолютное отклонение к началу года],
        [Measures].[Темп прироста к началу года],
        [Measures].[Минимум],
        [Measures].[Минимум город],
        [Measures].[Максимум],
        [Measures].[Максимум город]
    } on columns,
    {
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-80],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-92],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-95],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-98],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Дизельное топливо]
    } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id="Oil_0001_0002_chart_old">
    <![CDATA[ -- Oil_0001_0002_chart
with
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
    as 'Aggregate  
        (
            Filter  
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty  
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember  
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0  
            )  
        )/ Filter  
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty  
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember  
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0  
        ).count '  
    member [Measures].[Цена ]  
    as '  
        (
            [Measures].[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member [Measures].[Текущая цена]  
    as ' IIF  
        (
            (
                <%period_cur_date%>,
                [Measures].[Цена ]  
            ) = 0,
            null,
            (
                <%period_cur_date%>,
                [Measures].[Цена ]  
            )  
        ) '  
    member [Организации__Товары и услуги].[Организации__Товары и услуги].[Имя]  
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Name'
select
    {
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Имя],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-80],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-92],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-95],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-98],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Дизельное топливо]  
    }  on columns,
    {
        Filter 
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].children ,
            not IsEmpty 
            (
                (
                    [Measures].[Текущая цена]  ,
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember,
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember 
                ) 
            )     and not 
            (
                [Measures].[Текущая цена]  ,
                [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember ,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember 
            ) = 0 
        ) 
    } on rows  
from [ОРГАНИЗАЦИИ_Цены и тарифы]  
where  
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Measures].[Текущая цена]  
    )   
    ]]>
  </query>

  <query id="Oil_0001_0002_chart">
    <![CDATA[ -- Oil_0001_0002_chart
with
    set [МР]
    as 'filter
        (
            Descendants
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
                [Территории__Сопоставимый].[Территории__Сопоставимый].[ГП СП ВТГФЗ],
                SELF_AND_BEFORE
            ),
            not [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember is [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Parent.DataMember and not IsEmpty
            (
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[Средняя розничная цена на текущую дату]
                )
            ) and
            (
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[МР]
                ) or
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[ГП СП]
                )
            )
        )'
    set [ГО]
    as 'filter
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ].[Город Ханты-Мансийск] + Descendants
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
                [Территории__Сопоставимый].[Территории__Сопоставимый].[ГП СП ВТГФЗ],
                SELF_AND_BEFORE
            ),
            not [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember is [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Parent.DataMember and not IsEmpty
            (
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                    [Measures].[Средняя розничная цена на текущую дату]
                )
            ) and
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Город]
            )
        )'
    set [Территории]
    as 'order
        (
            filter
            (
                Descendants
                (
                    [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
                    [Территории__Сопоставимый].[Территории__Сопоставимый].[МР ГО],
                    SELF
                ),
                not IsEmpty
                (
                    [Measures].[Средняя розничная цена на текущую дату]
                )
            ),
            [Measures].[Средняя розничная цена на текущую дату],
            BASC
        )'
    set [Организации]
    as '[Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children'
    member [Measures].[Город]
    as 'iif
        (
            [Measures].[Уровень] = "МР ГО" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count = 0,
            true,
            false
        )'
    member [Measures].[МР]
    as 'iif
        (
            [Measures].[Уровень] = "МР ГО" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count > 0,
            true,
            false
        )'
    member [Measures].[ГП СП]
    as 'iif
        (
            [Measures].[Уровень] = "ГП СП ВТГФЗ" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count = 0,
            true,
            false
        )'
    member [Measures].[Средняя розничная цена_Город]
    as 'avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Средняя розничная цена_МР]
    as 'avg
        (
            [Организации],
            [Measures].[Средняя по организации]
        )'
    member [Measures].[Средняя по организации]
    as 'avg
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children,
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].CurrentMember,
                [Measures].[Цена]
            )
        )'
    member [Measures].[Средняя розничная цена_ГП СП]
    as 'avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Средняя розничная цена]
    as 'iif
        (
            [Measures].[Город],
            [Measures].[Средняя розничная цена_Город],
            iif
            (
                [Measures].[МР],
                [Measures].[Средняя розничная цена_МР],
                iif
                (
                    [Measures].[ГП СП],
                    [Measures].[Средняя розничная цена_ГП СП],
                    null
                )
            )
        )'
    member [Measures].[Средняя розничная цена на текущую дату]
    as '
        (
            <%period_cur_date%>,
            [Measures].[Средняя розничная цена]
        )'
    member [Measures].[Уровень]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Level.Name'
select
    {
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-80],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-92],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-95],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-98],
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Дизельное топливо]
    }  on columns,
    { [Территории] } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Measures].[Средняя розничная цена на текущую дату],
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Розничная цена]
    )
    ]]>
  </query>

  <query id="Oil_0001_0002_chart_v">
    <![CDATA[
with
    set [Организации]
    as '[Организации__Предприятия торговли].[Организации__Предприятия торговли].[Все организации].Children'
    member [Measures].[Город]
    as 'iif
        (
            [Measures].[Уровень] = "МР ГО" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count = 0,
            true,
            false
        )'
    member [Measures].[МР]
    as 'iif
        (
            [Measures].[Уровень] = "МР ГО" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count > 0,
            true,
            false
        )'
    member [Measures].[ГП СП]
    as 'iif
        (
            [Measures].[Уровень] = "ГП СП ВТГФЗ" and [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children.Count = 0,
            true,
            false
        )'
    member [Measures].[Средняя розничная цена_Город]
    as 'avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Средняя розничная цена_МР]
    as 'avg
        (
            [Организации],
            [Measures].[Средняя по организации]
        )'
    member [Measures].[Средняя по организации]
    as 'avg
        (
            [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Children,
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].CurrentMember,
                [Measures].[Цена]
            )
        )'
    member [Measures].[Средняя розничная цена_ГП СП]
    as 'avg
        (
            [Организации],
            [Measures].[Цена]
        )'
    member [Measures].[Средняя розничная цена]
    as 'iif
        (
            [Measures].[Город],
            [Measures].[Средняя розничная цена_Город],
            iif
            (
                [Measures].[МР],
                [Measures].[Средняя розничная цена_МР],
                iif
                (
                    [Measures].[ГП СП],
                    [Measures].[Средняя розничная цена_ГП СП],
                    null
                )
            )
        )', FORMAT = '0.00'
    set [Даты]
    as 'tail
        (
            Filter
            (
                Descendants
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER
                ) ,
                not IsEmpty
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )
                ) and not
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                ) = 0
            ),
            26
        )'
    member [Measures].[Уровень]
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Level.Name'
    member [Measures].[Период]
    as '[Период__День].[Период__День].CurrentMember.UniqueName'
select
    {
        [Measures].[Период],
        [Measures].[Средняя розничная цена]
    } on columns,
    { [Даты] } on rows
from [ОРГАНИЗАЦИИ_Цены и тарифы]
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[<%oil%>]
    )
    ]]>
  </query>
  
  <query id="Oil_0001_0002_chart1_v">
    <![CDATA[ -- Oil_0001_0002_chart1_v
with
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]       
    as 'Aggregate       
        (
            Filter       
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty      
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
            )       
        )/ Filter       
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty      
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
        ).count '   
    member [Measures].[Цена ]   
    as ' 
        (
            [Measures].[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member [Measures].[Бензин АИ-80 ]       
    as ' IIF       
        (
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            ) = 0,
            null,
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            )       
        )'   
    set [FilterColumnSet]   
    as 'tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER   
                ) ,
                not IsEmpty   
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )   
                ) and not   
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember   
                ) = 0   
            ),
            26   
        )'   
    member [Measures].[Период ]       
    as '[Период__День].[Период__День].CurrentMember.UniqueName'      
select
    {
        [Measures].[Период ],
        [Measures].[Бензин АИ-80 ]       
    } on columns,
    { [FilterColumnSet] } on rows      
from [ОРГАНИЗАЦИИ_Цены и тарифы]       
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-80]      
    ) 
    ]]>
  </query>

  <query id="Oil_0001_0002_chart2_v">
    <![CDATA[ -- Oil_0001_0002_chart2_v
with
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]       
    as 'Aggregate       
        (
            Filter       
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty      
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
            )       
        )/ Filter       
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty      
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
        ).count '   
    member [Measures].[Цена ]   
    as ' 
        (
            [Measures].[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member [Measures].[Бензин АИ-92 ]       
    as ' IIF       
        (
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            ) = 0,
            null,
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            )       
        )'   
    set [FilterColumnSet]   
    as 'tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER   
                ) ,
                not IsEmpty   
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )   
                ) and not   
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember   
                ) = 0   
            ),
            26   
        )'   
    member [Measures].[Период ]       
    as '[Период__День].[Период__День].CurrentMember.UniqueName'      
select
    {
        [Measures].[Период ],
        [Measures].[Бензин АИ-92 ]       
    } on columns,
    { [FilterColumnSet] } on rows      
from [ОРГАНИЗАЦИИ_Цены и тарифы]       
where
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-92]      
    ) 
    ]]>
  </query>

  <query id="Oil_0001_0002_chart3_v">
    <![CDATA[ -- Oil_0001_0002_chart3_v
with
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]       
    as 'Aggregate       
        (
            Filter       
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty      
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
            )       
        )/ Filter       
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty      
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
        ).count '   
    member [Measures].[Цена ]   
    as ' 
        (
            [Measures].[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member [Measures].[Бензин АИ-95 ]       
    as ' IIF       
        (
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            ) = 0,
            null,
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            )       
        )'   
    set [FilterColumnSet]   
    as 'tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER   
                ) ,
                not IsEmpty   
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )   
                ) and not   
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember   
                ) = 0   
            ),
            26   
        )'   
    member [Measures].[Период ]       
    as '[Период__День].[Период__День].CurrentMember.UniqueName'      
SELECT
    {
        [Measures].[Период ],
        [Measures].[Бензин АИ-95 ]       
    } on columns,
    { [FilterColumnSet] } on rows      
FROM [ОРГАНИЗАЦИИ_Цены и тарифы]       
WHERE       
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-95]      
    ) 
    ]]>
  </query>

  <query id="Oil_0001_0002_chart4_v">
    <![CDATA[ -- Oil_0001_0002_chart4_v
    WITH       
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]       
    as 'Aggregate       
        (
            Filter       
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty      
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
            )       
        )/ Filter       
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty      
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
        ).count '   
    member [Measures].[Цена ]   
    as ' 
        (
            [Measures].[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member [Measures].[Бензин АИ-98 ]       
    as ' IIF       
        (
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            ) = 0,
            null,
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            )       
        )'   
    SET [FilterColumnSet]   
    AS 'tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER   
                ) ,
                not IsEmpty   
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )   
                ) and not   
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember   
                ) = 0   
            ),
            26   
        )'   
    member [Measures].[Период ]       
    as '[Период__День].[Период__День].CurrentMember.UniqueName'      
SELECT
    {
        [Measures].[Период ],
        [Measures].[Бензин АИ-98 ]       
    } on columns,
    { [FilterColumnSet] } on rows      
FROM [ОРГАНИЗАЦИИ_Цены и тарифы]       
WHERE       
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-98]      
    ) 
    ]]>
  </query>

  <query id="Oil_0001_0002_chart5_v">
    <![CDATA[ -- Oil_0001_0002_chart5_v
   WITH       
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]       
    as 'Aggregate       
        (
            Filter       
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty      
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
            )       
        )/ Filter       
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty      
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
        ).count '   
    member [Measures].[Цена ]   
    as ' 
        (
            [Measures].[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member [Measures].[Дизельное топливо ]       
    as ' IIF       
        (
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            ) = 0,
            null,
            (
                [Период__День].[Период__День].CurrentMember,
                [Measures].[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            )       
        )'   
    SET [FilterColumnSet]   
    AS 'tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER   
                ) ,
                not IsEmpty   
                (
                    (
                        [Measures].[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )   
                ) and not   
                (
                    [Measures].[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember   
                ) = 0   
            ),
            26   
        )'   
    member [Measures].[Период ]       
    as '[Период__День].[Период__День].CurrentMember.UniqueName'      
SELECT
    {
        [Measures].[Период ],
        [Measures].[Дизельное топливо ]       
    } on columns,
    { [FilterColumnSet] } on rows      
FROM [ОРГАНИЗАЦИИ_Цены и тарифы]       
WHERE       
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная (поселения)],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Дизельное топливо]      
    ) 
    ]]>
  </query>

</root>