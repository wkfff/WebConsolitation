<?xml version="1.0" encoding="windows-1251"?>
<root>
 
 
 
 <query id = "lastdate">
 <![CDATA[
select {   Filter
            (
                [Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Год].Members,
                [Measures].[Стоимость контракта]  > 0
            )  }   on rows,

{[Measures].[Стоимость контракта]} on columns
FROM [ЭО_Мониторинг_Контракты]
where (
      {[Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
      [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]}
      )

 
 ]]>
 
 </query>
  <query id="G">
    <![CDATA[

SELECT [Measures].[Стоимость контракта] on columns,

 

NON EMPTY

 

Crossjoin(

 

  [Мониторинг__ОКДП].[Мониторинг__ОКДП].[Уровень 03].Members,

 

  CrossJoin(

 

     [Мониторинг__Контракты].[Мониторинг__Контракты].[Контракт].Members,

 

     CrossJoin

 

        ([Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок].Children,

 

        [Мониторинг__Поставщики].[Мониторинг__Поставщики].[Все поставщики].Children)))

 

on rows

 

FROM [ЭО_Мониторинг_Контракты]

WHERE ([ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все].<%1%>,

[Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Данные всех периодов].[<%2%>],
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]
        })


]]>
  </query>
    <query id="RC">
    <![CDATA[with
member [Measures].[Стоимость контракта1] as '[Measures].[Стоимость контракта]/1000'
select { [Measures].[Стоимость контракта1]} on columns,
NON EMPTY[Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок].children on rows
from [ЭО_Мониторинг_Контракты]
where
([ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все].<%1%>,
[Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Данные всех периодов].[<%2%>],
{[Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
[Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]}
)

                       
]]>
  </query> 
     <query id="PLD">
    <![CDATA[
    /*Подбор не пустого ГРБСа*/
    select
    {
    Filter(
        [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[ГРБС].Members
        ,
        [Measures].[Стоимость контракта])
        
    }   on rows,
    {
        [Measures].[Стоимость контракта]
    } on columns 
FROM [ЭО_Мониторинг_Контракты] 
where  
    (
        [Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Год].[<%2%>] 
    ) ]]>
  </query> 
       <query id="GRBS">
    <![CDATA[WITH 
    MEMBER [Measures].[Prnt] 
    AS '[ГРБС__Сопоставимый].[ГРБС__Сопоставимый].CurrentMember.Parent.Name' 
SELECT
    {[Measures].[Prnt]} on columns,
    [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].Members on rows 
from [ЭО_Мониторинг_Контракты] ]]>
  </query>  
   <query id="Param">
    <![CDATA[
    /*Подбор не пустого ГРБСа*/
    select {

                [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[{0}].Members
              }   on rows,

{[Measures].[Стоимость контракта]} on columns
FROM [ЭО_Мониторинг_Контракты]
where

(
[Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Год].[<%2%>]
)]]>
  </query>
    <query id="LC">
    <![CDATA[select {[Measures].[Количество контрактов]} on columns,
NON EMPTY[Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок].children on rows
from [ЭО_Мониторинг_Контракты]
where
([ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все].<%1%>,
[Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Данные всех периодов].[<%2%>],
{[Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
[Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]}
)


]]>
  </query>

 <query id="T1">
    <![CDATA[
    /*Нахождение максимума для текстовки*/
WITH   
    MEMBER [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Slicer]  
    AS 'AGGREGATE 
        (
            {
                {
                    [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
                    [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен] 
                } 
            } 
        )'  
    SET [NonFilterColumnSet]  
    AS ' 
        {
            [Measures].[Стоимость контракта] 
        }'  
    SET [NonFilterRowSet]  
    AS 'VisualTotals  
        (
            Intersect 
            (
                {
                    {
                        Descendants
                        (
                            [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок],
                            [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок].Level,
                            SELF_AND_AFTER
                        )
                    } 
                },
                {
                    [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Способ закупки].AllMembers
                } 
            ) 
        )'  
SELECT
    [NonFilterColumnSet] on columns,
    NON EMPTY 
    {
        {
            [NonFilterRowSet]
        } 
    } on rows  
FROM [ЭО_Мониторинг_Контракты]  
WHERE  
    (
        [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Slicer],
        [Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Данные всех периодов].[<%2%>] 
    )  
]]>
  </query>
   <query id="T2">
    <![CDATA[
    /*Нахождение максимума для текстовки*/
    WITH  
    MEMBER [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Slicer] 
    AS 'AGGREGATE
        (
            {
                {
                    [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
                    [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]
                }
            }
        )' 
    SET [NonFilterColumnSet] 
    AS '
        {
            [Measures].[Количество контрактов]
        }' 
    SET [NonFilterRowSet] 
    AS 'VisualTotals 
        (
            Intersect
            (
                {
                    {
                        Descendants
                        (
                            [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок],
                            [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок].Level,
                            SELF_AND_AFTER
                        )
                    }
                },
                {
                    [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Способ закупки].AllMembers
                }
            )
        )' 
SELECT
    [NonFilterColumnSet] on columns,
    NON EMPTY
    {
        {
            [NonFilterRowSet]
        }
    } on rows 
FROM [ЭО_Мониторинг_Контракты] 
WHERE 
    (
        [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Slicer],
        [Мониторинг__Дата подписания].[Мониторинг__Дата подписания].[Данные всех периодов].[<%2%>]
    ) 
]]>
  </query>
  
  
  
 </root>