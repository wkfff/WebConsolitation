<?xml version="1.0" encoding="windows-1251"?>
<root>

<query id="FK_0002_0002_date">
    <![CDATA[
    -- FK_0002_0002_data
    -- <#[ФК_МесОтч_Расходы]#> 
    with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Исполнено]) and
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                [Период].[Период].CurrentMember.Name <> "Данные года" and
                [Период].[Период].CurrentMember.Name <> "Данные месяца"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФК_МесОтч_Расходы]
 ]]>
</query>

<query id="FK_0002_0002_grid">
   <![CDATA[
    -- FK_0002_0002_grid
    -- <#[ФК_МесОтч_Расходы]#> 
 with  
    set [Субъекты]  
    as 'Filter  
        (
            Generate  
            (
                Descendants  
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF  
                ),
                {
                    [Территории].[Сопоставимый].CurrentMember  
                } +  Descendants  
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF  
                )  
            ),
            not  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember  
            ) and not IsEmpty ( [Measures].[Исполнено] )  
        )'  
    member Measures.[Исполнено_Доля в общих расходах ФО]  
    as 'IIF  
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ),
            null,
            IIF  
            (
                IsEmpty  
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                    )  
                ) or  
                (
                    [Measures].[Исполнено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                )=0,
                null,
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].CurrentMember  
                    )/  
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                    )  
                )  
            )  
        )'  
    member Measures.[Исполнено_Доля в общих расходах РФ]  
    as 'IIF  
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ),
            null,
            IIF  
            (
                IsEmpty  
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
                    )  
                ) or  
                (
                    [Measures].[Исполнено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
                )=0,
                null,
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].CurrentMember  
                    )/  
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
                    )  
                )  
            )  
        )'  
    member Measures.[Назначено_Доля в общих расходах РФ]  
    as 'IIF  
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ),
            null,
            IIF  
            (
                IsEmpty  
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
                    )  
                ) or  
                (
                    [Measures].[Назначено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
                )=0,
                null,
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].CurrentMember  
                    )/  
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
                    )  
                )  
            )  
        )'  
    member Measures.[Назначено_Доля в общих расходах ФО]  
    as 'IIF  
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ),
            null,
            IIF  
            (
                IsEmpty  
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                    )  
                ) or  
                (
                    [Measures].[Назначено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                )=0,
                null,
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].CurrentMember  
                    )/  
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                    )  
                )  
            )  
        )'  
    member Measures.[Ранг ФО (к плану)]  
    as 'IIF  
        (
            IsEmpty  
            (
                Measures.[Назначено_Доля в общих расходах ФО]  
            ) or   
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ) ,
            null,
            Rank  
            (
                [Территории].[Сопоставимый].CurrentMember,
                Order  
                (
                    [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                    Measures.[Назначено_Доля в общих расходах ФО],
                    BDESC  
                ),
                Measures.[Назначено_Доля в общих расходах ФО]  
            )  
        )'   
     member Measures.[Ранг РФ (к плану)]
    as 'IIF
        (
            IsEmpty
            (
                Measures.[Назначено_Доля в общих расходах РФ]
            ) or
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]
            ) or
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]
            ) ,
            null,
            Rank
            (
                [Территории].[Сопоставимый].CurrentMember,
                Order
                (
                     Filter
                    (
                        [Территории].[Сопоставимый].[Субъект РФ].Members,
                        not IsEmpty
                        (
                            Measures.[Назначено_Доля в общих расходах РФ]
                        )
                    ),
                    Measures.[Назначено_Доля в общих расходах РФ],
                    BDESC
                ),
                Measures.[Назначено_Доля в общих расходах РФ]
            )
        )'   
    member Measures.[Ранг ФО (к исполнению)]  
    as 'IIF  
        (
            IsEmpty  
            (
                Measures.[Исполнено_Доля в общих расходах ФО]  
            ) or   
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ) ,
            null,
            Rank  
            (
                [Территории].[Сопоставимый].CurrentMember,
                Order  
                (
                    [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                    Measures.[Исполнено_Доля в общих расходах ФО],
                    BDESC  
                ),
                Measures.[Исполнено_Доля в общих расходах ФО]  
            )  
        )'   
      member Measures.[Ранг РФ (к исполнению)]
    as 'IIF
        (
            IsEmpty
            (
                Measures.[Исполнено_Доля в общих расходах РФ]
            ) or
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]
            ) or
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]
            ) ,
            null,
            Rank
            (
                [Территории].[Сопоставимый].CurrentMember,
                Order
                (
                     Filter
                    (
                        [Территории].[Сопоставимый].[Субъект РФ].Members,
                        not IsEmpty
                        (
                             Measures.[Исполнено_Доля в общих расходах РФ]
                        )
                    ),
                    Measures.[Исполнено_Доля в общих расходах РФ],
                    BDESC
                ),
                Measures.[Исполнено_Доля в общих расходах РФ]
            )
        )'
      member Measures.[Худший ранг ФО_Назначено]
    as 'IIF
        (
            [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
            null,
            max
            (
                [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                Measures.[Ранг ФО (к плану)]
            )
        )'
    member Measures.[Худший ранг ФО_Исполнено]
    as 'IIF
        (
            [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
            null,
            max
            (
                [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                Measures.[Ранг ФО (к исполнению)]
            )
        )'
          
    member Measures.[Худший ранг в РФ_Назначено]   
    as 'IIF 
        (
            [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
            null,
            max 
            (
                [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                Measures.[Ранг РФ (к плану)] 
            ) 
        )'  
    member Measures.[Худший ранг в РФ_Исполнено]   
    as  'IIF 
        (
            [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
            null,
            max  
            (
                [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                Measures.[Ранг РФ (к исполнению)]   
            )   
        )'  
    member Measures.[Лучший ранг в РФ_Назначено] 
    as 'IIF 
        (
            [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
            null,
            min 
            (
                [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                Measures.[Ранг РФ (к плану)] 
            ) 
        )' 
    member Measures.[Лучший ранг в РФ_Исполнено] 
    as  '
            
            min 
            (
                [Территории].[Сопоставимый].CurrentMember.Parent.Children,
                Measures.[Ранг РФ (к исполнению)] 
            ) 
        ' 
select
    {
        [Measures].[Назначено],
        Measures.[Назначено_Доля в общих расходах ФО],
        Measures.[Назначено_Доля в общих расходах РФ],
        Measures.[Ранг ФО (к плану)],
        Measures.[Ранг РФ (к плану)],
        [Measures].[Исполнено],
        Measures.[Исполнено_Доля в общих расходах ФО],
        Measures.[Исполнено_Доля в общих расходах РФ],
        Measures.[Ранг ФО (к исполнению)],
        Measures.[Ранг РФ (к исполнению)],
        Measures.[Худший ранг ФО_Назначено],
        Measures.[Худший ранг ФО_Исполнено],
        Measures.[Худший ранг в РФ_Назначено],
        Measures.[Лучший ранг в РФ_Назначено],
        Measures.[Худший ранг в РФ_Исполнено],
        Measures.[Лучший ранг в РФ_Исполнено] 
        
    } on columns,
    {
        {
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
        } + [Субъекты]  
    } on rows  
from [ФК_МесОтч_Расходы]  
where  
    (
        <%level_budget%>,
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        <%kd_group%> 
    )             
    
     ]]>
</query>
  
  
<query id="FK_0002_0002_chart1">
  <![CDATA[
   -- FK_0002_0002_chart1
   -- <#[ФК_МесОтч_Расходы]#> 
     with                     
    set [Субъекты]                     
    as 'Filter                     
        (
            Generate                     
            (
                Descendants                     
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF                     
                ),
                {
                    [Территории].[Сопоставимый].CurrentMember                     
                } +  Descendants                     
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF                     
                )
                - Descendants 
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF 
                )                      
            ),
            not                     
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember                     
            ) and not IsEmpty ( [Measures].[Исполнено] )                     
        )'
          
    member Measures.[Исполнено_Доля в общих расходах ФО]           
    as 'IIF          
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]          
            ) or           
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]          
            ),
            null,
            IIF           
            (
                IsEmpty    
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]    
                    )    
                ) or   
                (
                    [Measures].[Исполнено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]           
                )=0,
                null,
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].CurrentMember       
                    )/        
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]          
                    )         
                )          
            )            
        )'  
 
 
    member Measures.[Назначено_Доля в общих расходах ФО]  
    as 'IIF  
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]  
            ) or  
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
            ),
            null,
            IIF  
            (
                IsEmpty  
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                    )  
                ) or  
                (
                    [Measures].[Назначено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                )=0,
                null,
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].CurrentMember  
                    )/  
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]  
                    )  
                )  
            )  
        )'  
select
    {
       
      [Measures].[Исполнено],
      [Measures].[Назначено] 
    } on columns,
    {
       [Субъекты]                   
    } on rows                      
from [ФК_МесОтч_Расходы]                     
where                     
    (
          <%level_budget%>,
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        <%kd_group%>                     
    )                      
    ]]>
</query>
  
  
<query id="FK_0002_0002_chart2">
  <![CDATA[
    -- FK_0002_0002_chart2
    -- <#[ФК_МесОтч_Расходы]#>  
    with                      
    set [Субъекты]                      
    as 'Filter                      
        (
            Generate                      
            (
                Descendants                      
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF                      
                ),
                {
                    [Территории].[Сопоставимый].CurrentMember                      
                } +  Descendants                      
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF                      
                ) - Descendants 
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ],
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF 
                ) 
            ),
            not                      
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember                      
            ) and not IsEmpty ( [Measures].[Исполнено] )                      
        )'  
    member Measures.[Исполнено_Доля в общих расходах ФО]            
    as 'IIF           
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]           
            ) or            
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]           
            ),
            null,
            IIF            
            (
                IsEmpty     
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]     
                    )     
                ) or    
                (
                    [Measures].[Исполнено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]            
                )=0,
                null,
                (
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].CurrentMember        
                    )/         
                    (
                        [Measures].[Исполнено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]           
                    )          
                )           
            )             
        )'     
    member Measures.[Назначено_Доля в общих расходах ФО]   
    as 'IIF   
        (
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]   
            ) or   
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]   
            ),
            null,
            IIF   
            (
                IsEmpty   
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]   
                    )   
                ) or   
                (
                    [Measures].[Назначено],
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]   
                )=0,
                null,
                (
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].CurrentMember   
                    )/   
                    (
                        [Measures].[Назначено],
                        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Сибирский федеральный округ]   
                    )   
                )   
            )   
        )'
member Measures.[Назначено ]
as 'IIF(
         ([Measures].[Назначено] - [Measures].[Исполнено])< 0,
         null,
        ([Measures].[Назначено] - [Measures].[Исполнено])
       )'   
select
    {
        [Measures].[Исполнено],
        Measures.[Назначено ]
    } on columns,
    { [Субъекты] } on rows                      
from [ФК_МесОтч_Расходы]                      
where                      
    (
         <%level_budget%>,
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        <%kd_group%>                   
    )                      
    ]]>
</query>
   
</root>