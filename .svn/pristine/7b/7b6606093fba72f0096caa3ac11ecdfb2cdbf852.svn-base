<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0009_date">
    <![CDATA[
-- FO_0035_0009_date
with
    member Measures.[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        Filter
        (
            OpeningPeriod
            (
                [Период].[Период].[День],
                [Период].[Период].[Данные всех периодов].[2008]
            ) : ClosingPeriod
            (
                [Период].[Период].[День],
                [Период].[Период].[Данные всех периодов].[2012]
            ),
            not IsEmpty([Measures].[Остаток графика])
        )
    ) on rows
from [ФО_Ожидаемое исполнение бюджета]
  ]]>
  </query>

  <query id="FO_0035_0009_grid1">
    <![CDATA[
-- FO_0035_0009_grid1
with 
    set [Показатели] 
    as '
        {
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Остатки на начало текущего года],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Доходы - всего и ИФДБ],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налоговые и неналоговые доходы],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налог на прибыль организаций],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налог на доходы физических лиц],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Страховые взносы],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налоги на имущество],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налог на имущество физических лиц],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налог на имущество организаций],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Транспортный налог],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Земельный налог],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Акцизы],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Акцизы на нефтепродукты],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Акцизы на алкоголь],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налог на добычу полезных ископаемых],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Сборы за пользование объектами животного мира и за пользование объектами биологических ресурсов],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налоги на совокупный доход],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Налог, взимаемый в связи с применением упрощенной системы налогообложения],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Единый налог на вмененный доход для отдельных видов деятельности],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Единый сельскохозяйственный налог],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Государственная пошлина],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Задолженность по отмененным налогам],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Доходы от использования имущества, находящегося в государственной и муниципальной собственности],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Платежи при пользовании природными ресурсами],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Доходы от оказания платных услуг и компенсации затрат государства],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Доходы от продажи материальных и нематериальных активов],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Административные платежи и сборы],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Штрафы, санкции, возмещение ущерба],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Прочие неналоговые доходы],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Доходы бюджетов бюджетной системы российской федерации от возврата остатков субсидий, субвенций и иных межбюджетных трансфертов, имеющих целевое назначение, прошлых лет],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Возврат остатков субсидий, субвенций и иных межбюджетных трансфертов, имеющих целевое назначение, прошлых лет],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Дотация на выравнивание],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Дотация на сбалансированность],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Поступление целевых средств из ФБ],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[в том числе средства ПФР],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Прочие целевые средства],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Источники финансирования дефицита бюджета - всего],            
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Поступление источников дефицита бюджета],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Банковский кредит (поступление)],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Бюджетный кредит (поступление)],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Продажа акций],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Погашение источников дефицита бюджета],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Банковский кредит (погашение)],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Бюджетный кредит (погашение)],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Предоставление бюджетных кредитов],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Возврат бюджетных кредитов],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Возврат бюджетных кредитов от МО],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Возврат бюджетных кредитов от ЮЛ],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Заимствования со счетов 40603, 40302],
            [Показатели].[Ожидаемое исполнение бюджета].[Все].[Расходы - всего]
        }'
    set [В том числе по дням]        
    as '   
        {
            [Measures].[День 1],
            [Measures].[День 2],
            [Measures].[День 4],
            [Measures].[День 3],
            [Measures].[День 6],
            [Measures].[День 5],
            [Measures].[День 7],
            [Measures].[День 8],
            [Measures].[День 9],
            [Measures].[День 10],
            [Measures].[День 12],
            [Measures].[День 11],
            [Measures].[День 14],
            [Measures].[День 13],
            [Measures].[День 16],
            [Measures].[День 15],
            [Measures].[День 17],
            [Measures].[День 18],
            [Measures].[День 19],
            [Measures].[День 20],
            [Measures].[День 22],
            [Measures].[День 21],
            [Measures].[День 24],
            [Measures].[День 23],
            [Measures].[День 26],
            [Measures].[День 25],
            [Measures].[День 28],
            [Measures].[День 27],
            [Measures].[День 29],
            [Measures].[День 30],
            [Measures].[День 31]     
        }'         
    member [Measures].[Уровень]
    as 'IIF 
        (
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Остатки на начало текущего года]
            ) or
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Доходы - всего и ИФДБ]
            ) or  
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Источники финансирования дефицита бюджета - всего]
            ) or 
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Поступление источников дефицита бюджета]
            ) or 
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Погашение источников дефицита бюджета]
            ) or 
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Возврат бюджетных кредитов]
            ) or 
            (
                [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Расходы - всего]
            ) or
            (
               [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Все].[Заимствования со счетов 40603, 40302]
            ),
            "Итоговые группы",
            "Остальные"
        )'  
    member [Measures].[КВСР] 
    as 'IIF
        (
            [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Нулевая строка],
            0,
            null
        )' 
    member [Measures].[КОСГУ] 
    as 'IIF
        (
            [Показатели].[Ожидаемое исполнение бюджета].CurrentMember is [Показатели].[Ожидаемое исполнение бюджета].[Нулевая строка],
            0,
            null
        )'        
    
    member [Показатели].[Ожидаемое исполнение бюджета].[Значение из куба расходов] 
    as 'LookupCube   
        (
            "[ФО_Ожидаемое исполнение бюджета_Расходы]",
            "   
            (
                [Администратор].[ИспКасПланСопост].[Все],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР],
                " + MemberToStr ( [Measures].CurrentMember ) + ",
                " + MemberToStr 
                (
                    [Период].[Период].CurrentMember 
                ) + " 
            )"   
        ) '     

    member [Measures].[График текущего месяца_первоначальный] 
    as '([Measures].[График на месяц], [Период].[Период].[Данные всех периодов]<%month_beginning_period%>)'            
    
    member [Показатели].[Ожидаемое исполнение бюджета].[Нулевая строка]
    as '0'
select
    {
     {
            {
                [Период].[Период].[Данные всех периодов]
            } 
            * 
            {
                 [Measures].[КВСР],
                 [Measures].[КОСГУ]
            } 
        } +      
        {
            {
                [Период].[Период].[Данные всех периодов]<%period_cur_date%>
            } 
            * 
            {
                [Measures].[Первоначальный кассовый план],
                [Measures].[Уточненный кассовый план],
                [Measures].[Исполнено с начала года],
                [Measures].[Процент исполнения],
                [Measures].[График текущего месяца_первоначальный],
                [Measures].[График на месяц],
                [Measures].[Исполнено с начала месяца],
                [Measures].[Остаток графика] 
            } 
        }  + 
--        Filter 
--        (
--            {
--                {
--                    [Период].[Период].[Данные всех периодов]<%period_cur_date%>
--                }    
--                * { [В том числе по дням] }    
--            },
--            not
--            (
--
--                
--                  IsEmpty([Показатели].[Ожидаемое исполнение бюджета].[Значение из куба расходов]) or
--                  ([Показатели].[Ожидаемое исполнение бюджета].[Значение из куба расходов]) = 0
--                
--            ) 
--        ) +
        {
            {
                [Период].[Период].[Данные всех периодов]
            } 
            * 
            {
                [Measures].[Уровень]
            } 
        }
    } on columns,
    non empty { {[Показатели].[Ожидаемое исполнение бюджета].[Нулевая строка]} + [Показатели] } on rows 
from [ФО_Ожидаемое исполнение бюджета]                                                                                
 ]]>
  </query>

  <query id="FO_0035_0009_grid2">
    <![CDATA[
-- FO_0035_0009_grid2
with       
    set [Список ГРБС]       
    as 'Filter       
        (
            Order
            (
                Descendants       
                (
                    [Администратор].[ИспКасПланСопост].[Все],
                    [Администратор].[ИспКасПланСопост].[ГРБС],
                    SELF       
                ), 
                [Measures].[КВСР]
            ),
            not       
            (
                [Администратор].[ИспКасПланСопост].CurrentMember is [Администратор].[ИспКасПланСопост].CurrentMember.Parent.DataMember       
            )       
        ) +   
        {
            [Администратор].[ИспКасПланСопост].[Отклонение доходов от расходов]  
        }'   
    set [Список КОСГУ]
    as 'Filter       
        (
            Descendants       
            (
                [КОСГУ].[Сопоставимый].[Все коды ЭКР],
                [КОСГУ].[Сопоставимый].[Подстатья],
                SELF       
            ),
            not       
            (
                [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].CurrentMember.Parent.DataMember       
            )       
        ) +   
        {
            [КОСГУ].[Сопоставимый].[Отклонение доходов от расходов]   
        }'   
    set [Список ГРБС-КОСГУ]       
    as '  
        {
            Filter 
            (
                Order
                (
                    Descendants 
                    (
                        [Администратор].[ИспКасПланСопост].[Все],
                        [Администратор].[ИспКасПланСопост].[ГРБС],
                        SELF 
                    ),
                    [Measures].[КВСР]
                ),
                not 
                (
                    [Администратор].[ИспКасПланСопост].CurrentMember is [Администратор].[ИспКасПланСопост].CurrentMember.Parent.DataMember 
                ) 
            ) 
            *       
            {
                {
                    [КОСГУ].[Сопоставимый].[Все коды ЭКР]       
                } + Filter 
                (
                    Descendants 
                    (
                        [КОСГУ].[Сопоставимый].[Все коды ЭКР],
                        [КОСГУ].[Сопоставимый].[Подстатья],
                        SELF 
                    ),
                    not 
                    (
                        [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].CurrentMember.Parent.DataMember 
                    ) 
                ) 
            }  
        } +  
        {
            {
                [Администратор].[ИспКасПланСопост].[Отклонение доходов от расходов] 
            }  
            * 
            {
                [КОСГУ].[Сопоставимый].[Все коды ЭКР] 
            } 
        }'  
   
    member [Measures].[Наименование]       
    as 'IIF       
        (
            [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Все коды ЭКР],
            [Администратор].[ИспКасПланСопост].CurrentMember.Name,
            [КОСГУ].[Сопоставимый].CurrentMember.Name       
        )'       
    member [КОСГУ].[Сопоставимый].[Отклонение доходов от расходов]   
    as 'IIF
        (
            [Measures].CurrentMember is [Measures].[Сводная бюджетная роспись] or
            [Measures].CurrentMember is [Measures].[Лимиты бюджетных обязательств] or
            [Measures].CurrentMember is [Measures].[Процент исполнения], 
            null,
            LookupCube       
            (
                "[ФО_Ожидаемое исполнение бюджета]",
                "      
                (
                    [Показатели].[Ожидаемое исполнение бюджета].[Все].[Отклонение доходов от расходов],
                    " + MemberToStr    
                    (
                        [Период].[Период].CurrentMember       
                    ) + ",
                    " + MemberToStr ( [Measures].CurrentMember ) + "    
                )"     
            )
        )'    
    member [Администратор].[ИспКасПланСопост].[Отклонение доходов от расходов]   
    as 'IIF
        (
            [Measures].CurrentMember is [Measures].[Сводная бюджетная роспись] or
            [Measures].CurrentMember is [Measures].[Лимиты бюджетных обязательств] or
            [Measures].CurrentMember is [Measures].[Процент исполнения], 
            null,
            LookupCube   
            (
                "[ФО_Ожидаемое исполнение бюджета]",
                "   
                (
                    [Показатели].[Ожидаемое исполнение бюджета].[Все].[Отклонение доходов от расходов],
                    " + MemberToStr   
                    (
                        [Период].[Период].CurrentMember   
                    ) + ",
                    " + MemberToStr ( [Measures].CurrentMember ) + "   
                )"   
            )
        )'   
    member [Measures].[Уровень]
    as 'IIF
        (
            [Администратор].[ИспКасПланСопост].CurrentMember is [Администратор].[ИспКасПланСопост].[Отклонение доходов от расходов] or
            [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Отклонение доходов от расходов],
            "Итоговые группы",
            IIF 
            (
              [КОСГУ].[Сопоставимый].CurrentMember is [КОСГУ].[Сопоставимый].[Все коды ЭКР],
              "ГРБС",
              "Остальные"
            )
        )'
        
    member [Measures].[КВСР]     
    as 'IIF
        (
            [Администратор].[ИспКасПланСопост].CurrentMember is [Администратор].[ИспКасПланСопост].[Все] or
            [Администратор].[ИспКасПланСопост].CurrentMember is [Администратор].[ИспКасПланСопост].[Отклонение доходов от расходов],
            null,
            StrToValue
            (
                [Администратор].[ИспКасПланСопост].CurrentMember.Properties("Код")  
            ) 
        )' 
        
    member [Measures].[КОСГУ] 
    as '[КОСГУ].[Сопоставимый].CurrentMember.Properties("Код")'        
    
    set [В том числе по дням]        
    as '   
        {
            [Measures].[День 1],
            [Measures].[День 2],
            [Measures].[День 4],
            [Measures].[День 3],
            [Measures].[День 6],
            [Measures].[День 5],
            [Measures].[День 7],
            [Measures].[День 8],
            [Measures].[День 9],
            [Measures].[День 10],
            [Measures].[День 12],
            [Measures].[День 11],
            [Measures].[День 14],
            [Measures].[День 13],
            [Measures].[День 16],
            [Measures].[День 15],
            [Measures].[День 17],
            [Measures].[День 18],
            [Measures].[День 19],
            [Measures].[День 20],
            [Measures].[День 22],
            [Measures].[День 21],
            [Measures].[День 24],
            [Measures].[День 23],
            [Measures].[День 26],
            [Measures].[День 25],
            [Measures].[День 28],
            [Measures].[День 27],
            [Measures].[День 29],
            [Measures].[День 30],
            [Measures].[День 31]     
        }'     
        
    member [Measures].[График текущего месяца_первоначальный] 
    as '([Measures].[График на месяц], [Период].[Период].[Данные всех периодов]<%month_beginning_period%>)'          
select
    {
        {
            {
                [Период].[Период].[Данные всех периодов] 
            } 
            *
            {
                [Measures].[Наименование],
                [Measures].[КВСР],
                [Measures].[КОСГУ]
            } 
        } +      
        {
            {
                [Период].[Период].[Данные всех периодов]<%period_cur_date%>     
            }       
            *       
            {
                [Measures].[Первоначальный кассовый план],
                [Measures].[Уточненный кассовый план],
                [Measures].[Исполнено с начала года],
                [Measures].[Процент исполнения],
                [Measures].[График текущего месяца_первоначальный],
                [Measures].[График на месяц],
                [Measures].[Исполнено с начала месяца],
                [Measures].[Остаток графика]       
            }       
        }  + 
--        Filter 
--         (
--             {
--                 {
--                     [Период].[Период].[Данные всех периодов]<%period_cur_date%>
--                 }    
--                 * { [В том числе по дням] }    
--             },
--             not
--             (
--                 IsEmpty([Measures].CurrentMember) 
--             ) 
--         ) +
        {
            {
                [Период].[Период].[Данные всех периодов]       
            }       
            *{ [Measures].[Уровень] }       
        }
    } on columns,
    non empty { [<%indicator_set%>] } on rows 
from  [ФО_Ожидаемое исполнение бюджета_Расходы]                                                                              
 ]]>
  </query>  
  
</root>