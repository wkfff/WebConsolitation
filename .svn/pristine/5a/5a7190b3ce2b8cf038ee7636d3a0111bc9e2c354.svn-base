<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0029_date">
    <![CDATA[
-- FO_0035_0029_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Measures].[ЛБО]
                    )
                ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from   [ФО_Бюджетные обязательства]
  ]]>
</query>

<query id="FO_0035_0029_Grid">
    <![CDATA[
-- FO_0035_0029_Grid  
with   
    member [Measures].[ЛБО на год]   
    as '[Measures].[ЛБО] / 1000'   
   member [Measures].[Поставлено на учет БО]   
    as 'IIF 
        (
            [Measures].[Учтено БО] = 0,
            null,
            [Measures].[Учтено БО] / 1000  
        )'  
    member [Measures].[Поставлено на учет бюджетных обязательств текущим днем]   
    as 'IIF
        (
            [Measures].[Учтено БО] = 0 and [Measures].[Учтено БО за период] = 0,
            null,
            [Measures].[Учтено БО за период] / 1000 
        )' 
    member [Measures].[БО на рассмотрении ]   
    as 'IIF   
        (
            [Measures].[БО на рассмотрении] = 0,
            null,
            [Measures].[БО на рассмотрении] / 1000  
        )'   
    member [Measures].[Свободный остаток ЛБО]   
    as '[Measures].[Остаток ЛБО] / 1000'   
    member [Measures].[Процент от лимита бюджетных обязательств на год]  
    as 'IIF 
        (
            [Measures].[Остаток ЛБО] > 0,
            [Measures].[Процент от ЛБО],
            null
        )' 
    member [Measures].[Глаз]   
    as '"Глаз"'   
    member [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Всего] 
    as 'aggregate 
        (
            {
                filter 
                (
                    Descendants 
                    (
                        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Статья],
                        SELF 
                    ),
                    not  [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.Datamember and not isEmpty ([Measures].[Сумма]) 
                )
            } + 
            {
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Неуказанная экономическая статья] 
            } 
        )' 
    set [Косгу] 
    as 'filter 
        (
            Descendants 
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Статья],
                SELF_AND_AFTER 
            ),
            not  [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.Datamember and not isEmpty ([Measures].[ЛБО]) 
        )' 
    member Measures.[Уровень] 
    as '[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Level.Name' 
select
    {        
        [Measures].[ЛБО на год],
        [Measures].[Поставлено на учет БО],
        [Measures].[Свободный остаток ЛБО],
        [Measures].[БО на рассмотрении ],
        [Measures].[Поставлено на учет бюджетных обязательств текущим днем],
        [Measures].[Процент от лимита бюджетных обязательств на год],
        Measures.[Уровень] 
    } on columns,
     filter
            ({
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего],   
            [КОСГУ],
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Неуказанная экономическая статья]     
        },
        not isEmpty ([Measures].[ЛБО]))  on rows   
from   [ФО_Бюджетные обязательства]
where  
    (
        <%selected_period%> 
    )  
  ]]>
</query>
  
</root>