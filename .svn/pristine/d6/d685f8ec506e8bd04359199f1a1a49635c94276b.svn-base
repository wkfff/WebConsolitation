CALCULATE;

CREATE CELL CALCULATION CURRENTCUBE.[ТипДокументаСКИФ10] FOR 
'({[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Фиксированный].&[10]})' AS 
[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[8] + [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[6], 
CONDITION = 'CalculationPassValue([ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[10], 0) = 0'
, CALCULATION_PASS_NUMBER = '1', CALCULATION_PASS_DEPTH = '1';

CREATE CELL CALCULATION CURRENTCUBE.[ТипДокументаСКИФ20] FOR 
'({[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Фиксированный].&[20]})' AS 
[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[10] + [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[7] + 
[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[5]
, CALCULATION_PASS_NUMBER = '1', CALCULATION_PASS_DEPTH = '1';

CREATE CELL CALCULATION CURRENTCUBE.[ТипДокументаСКИФ21] FOR 
'({[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Фиксированный].&[21]})' AS 
[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[5] + [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[7] + 
[ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[6]+ [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].&[8],
  CALCULATION_PASS_NUMBER = '1', CALCULATION_PASS_DEPTH = '1';

//Уровни бюджета__СКИФ
SCOPE([Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[9]);
    this = [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[4] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[5] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[6] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[7];
END SCOPE;

SCOPE([Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[1]);
    this = IIF(CalculationPassValue([Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[1], 0) = 0,
    [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[2] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[8],
    CalculationPassValue([Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[1], 0));
END SCOPE;

SCOPE([Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[19]);
    this = IIF(not IsLeaf([Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember), 
[Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Уровень бюджета].&[9],
IIF(CalculationPassValue([Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[5], 0) = 0,
    [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[4] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[6],
[Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[4] + [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].&[5]));
END SCOPE;

//Период__Период
SCOPE([Период__Период].[Период__Период].[Квартал].members);
    this = Tail(Filter([Период__Период].[Период__Период].CurrentMember.Children, not (Measures.CurrentMember = 0)), 1).Item(0);
END SCOPE;

SCOPE([Период__Период].[Период__Период].[Полугодие].members);
    this = Tail(Filter([Период__Период].[Период__Период].CurrentMember.Children, not (Measures.CurrentMember = 0)), 1).Item(0);
END SCOPE;

SCOPE([Период__Период].[Период__Период].[Год].members);
    this = Tail(Filter([Период__Период].[Период__Период].CurrentMember.Children, not (Measures.CurrentMember = 0)), 1).Item(0);
END SCOPE;
