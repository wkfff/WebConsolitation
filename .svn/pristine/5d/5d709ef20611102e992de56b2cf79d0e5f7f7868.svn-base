<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FZ_0083_0001_date">
    <![CDATA[
-- FZ_0083_0001_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Measures].[ЛБО]
                    )
                ) and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца" and
                [Период__Период].[Период__Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from   [ФО_Бюджетные обязательства]
  ]]>
</query>

<query id="FZ_0083_0001_Grid">
    <![CDATA[
-- FZ_0083_0001_Grid  
with   
    member [Measures].[ЛБО на год]   
    as '[Measures].[ЛБО] / 1000'   
    member [Measures].[Поставлено на учет БО]   
    as 'IIF 
        (
            [Measures].[Учтено БО] = 0,
            null,
            [Measures].[Учтено БО] / 1000  
        )'  
    member [Measures].[Поставлено на учет бюджетных обязательств текущим днем]   
    as 'IIF
        (
            [Measures].[Учтено БО] = 0 and [Measures].[Учтено БО за период] = 0,
            null,
            [Measures].[Учтено БО за период] / 1000 
        )' 
    member [Measures].[БО на рассмотрении ]   
    as 'IIF   
        (
            [Measures].[БО на рассмотрении] = 0,
            null,
            [Measures].[БО на рассмотрении] / 1000  
        )'   
    member [Measures].[Свободный остаток ЛБО]   
    as '[Measures].[Остаток ЛБО] / 1000'   
    member [Measures].[Процент от лимита бюджетных обязательств на год]   
    as '[Measures].[Процент от ЛБО]'   
    member [Measures].[Глаз]   
    as '"Глаз"'   
    set [КОСГУ]   
    as '  filter 
        (
            {
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Заработная плата],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Прочие выплаты],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Начисления на выплаты по оплате труда],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Услуги связи],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Транспортные услуги],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Коммунальные услуги],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Арендная плата за пользование имуществом],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Работы, услуги по содержанию имущества],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Прочие работы, услуги],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Обслуживание государственного (муниципального) долга].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Обслуживание государственного (муниципального) долга].[Обслуживание внутреннего долга],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Обслуживание государственного (муниципального) долга].[Обслуживание внешнего долга],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления организациям].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления организациям].[Безвозмездные перечисления государственным и муниципальным организациям],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления организациям].[Безвозмездные перечисления организациям, за исключением государственных и муниципальных организаций],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления другим бюджетам бюджетной системы Российской Федерации],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления наднациональным организациям и правительствам иностранных государств],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления международным организациям],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].[Пенсии, пособия и выплаты по пенсионному, социальному и медицинскому страхованию населения],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].[Пособия по социальной помощи населению],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].[Пенсии, пособия, выплачиваемые организациями сектора государственного управления],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Расходы по операциям с активами].DATAMEMBER,
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Расходы по операциям с активами].[Амортизация основных средств и нематериальных активов],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Расходы по операциям с активами].[Расходование материальных запасов],
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР].[Расходы].[Расходы по операциям с активами].[Чрезвычайные расходы по операциями с активами]  
            },
            not [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.DataMember and not IsEmpty([Measures].[ЛБО на год]) 
        )'  
    member [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего]   
    as 'Aggregate ( [КОСГУ] )'   
select
    {        
        [Measures].[ЛБО на год],
        [Measures].[Поставлено на учет БО],
        [Measures].[Свободный остаток ЛБО],
        [Measures].[БО на рассмотрении ],
        [Measures].[Поставлено на учет бюджетных обязательств текущим днем],
        [Measures].[Процент от лимита бюджетных обязательств на год]    
    } on columns,
    {
        [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Всего],
        [КОСГУ]        
    }   on rows   
from   [ФО_Бюджетные обязательства]
  where  (
        <%selected_period%>,
        [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Все].[<%grbs%>]
    )  
  ]]>
</query>
  
</root>