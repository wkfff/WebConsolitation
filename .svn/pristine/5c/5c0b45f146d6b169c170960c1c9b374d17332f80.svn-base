<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0002_0017_02_date_nonEmptyCrossJoin">
    <![CDATA[
-- FO_0002_0017_02_date_nonEmptyCrossJoin 
with
    member Measures.[ДанныеНа]
    as '<%period_dimension%>.CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        NonEmptyCrossjoin
        (
            OpeningPeriod
            (
                <%period_dimension%>.[Месяц],
                <%period_dimension%>.[Данные всех периодов].[2008]
            ) : ClosingPeriod
            (
                <%period_dimension%>.[Месяц],
                <%period_dimension%>.[Данные всех периодов].[2012]
            )
        )
    ) on rows
from [ФО_МесОтч_Доходы]
]]>
  </query>

  <query id="FO_0002_0017_02_Grid">
    <![CDATA[
-- FO_0002_0017_02_grid    
 with       
    member measures.[Рз]       
    as '[Расходы__Базовый].CurrentMember.Properties("Раздел")'       
    member measures.[Пр]       
    as '[Расходы__Базовый].CurrentMember.Properties("Подраздел")'       
    member measures.[ЦСР]       
    as '[Расходы__Базовый].CurrentMember.Properties("КЦСР")'       
    member measures.[ВР]       
    as '[Расходы__Базовый].CurrentMember.Properties("КВР")'       
    member measures.[Уровень ]       
    as '[Расходы__Базовый].[Расходы__Базовый].CurrentMember.Properties("LEVEL_NUMBER")'       
    member measures.[Кассовый расход, руб. ]       
    as 'measures.[Факт расходов]'       
    member measures.[Ассигнования, руб. ]       
    as ' LookupCube       
        (
            "[ФО_АС Бюджет_План расходов]",
            "       
            (
                [Measures].[Ассигнования],
                [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[" + [Период__Период].[Период__Период].CurrentMember.Name + "],
                " + MemberToStr       
                (
                    [Расходы__Базовый].CurrentMember       
                ) + ",
                " + MemberToStr       
                (
                    [Период__Период].[Период__Период].CurrentMember       
                ) + ",
                [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[<%selected_bill%>]       
            )"       
        ) '       
    member measures.[% исполнения ]       
    as 'IIF       
        (
            not       
            (
                measures.[Ассигнования, руб. ] = 0       
            ),
            measures.[Кассовый расход, руб. ] / measures.[Ассигнования, руб. ] ,
            null       
        )'       
    
    member measures.[Уд. вес в ассигн. ]       
    as 'IIF       
        (
            not       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    measures.[Ассигнования, руб. ]       
                ) = 0       
            ),
            measures.[Ассигнования, руб. ] /       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    measures.[Ассигнования, руб. ]       
                )      
            ),
            null       
        )'       
    member measures.[Уд. вес в расходах ]       
    as 'IIF       
        (
            not       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    [Measures].[Кассовый расход, руб. ]       
                ) = 0       
            ),
            [Measures].[Кассовый расход, руб. ] /       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    [Measures].[Кассовый расход, руб. ]       
                )    
            ),
            null       
        )'       
    member measures.[Уд. вес в ассигн. прошлый год ]       
    as 'IIF       
        (
            not       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    measures.[Ассигнования, руб. ],
                    [Период__Период].[Период__Период].CurrentMember.PrevMember       
                ) = 0       
            ),
            (
                measures.[Ассигнования, руб. ],
                [Период__Период].[Период__Период].CurrentMember.PrevMember       
            ) /       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    measures.[Ассигнования, руб. ],
                    [Период__Период].[Период__Период].CurrentMember.PrevMember       
                )      
            ),
            null       
        )'       
    member measures.[Уд. вес в расходах прошлый год ]       
    as 'IIF       
        (
            not       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    [Measures].[Кассовый расход, руб. ],
                    [Период__Период].[Период__Период].CurrentMember.PrevMember       
                ) = 0       
            ),
            (
                [Measures].[Кассовый расход, руб. ],
                [Период__Период].[Период__Период].CurrentMember.PrevMember       
            ) /       
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    [Measures].[Кассовый расход, руб. ],
                    [Период__Период].[Период__Период].CurrentMember.PrevMember       
                )     
            ),
            null       
        )'       
    member [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Фильтр ]       
    as 'Aggregate       
        (
            {
                <%kd_group%>       
            }       
        ) '       
    member [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Счета ]       
    as 'Aggregate       
        (
            [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[<%selected_bill%>]       
        ) '       
    set [Виды расходов ]     
    as 'filter     
        (
            Descendants    
            (
                [Расходы__Базовый].[Расходы__Базовый].[Все],
                [Расходы__Базовый].[Расходы__Базовый].[Расходы уровень 6],
                SELF_AND_BEFORE   
            ) -   
            {
                [Расходы__Базовый].[Расходы__Базовый].[Все],
                [Расходы__Базовый].[Расходы__Базовый].[Все].[Несопоставленные данные]  
            },
            not     
            (
                [Расходы__Базовый].CurrentMember is [Расходы__Базовый].CurrentMember.Parent.DataMember     
            ) and not IsEmpty  (  [Measures].[Факт расходов]  )     
        )'     
    member [Расходы__Базовый].[Расходы__Базовый].[Итого ]       
    as 'sum       
        (
            descendants       
            (
                [Расходы__Базовый].[Расходы__Базовый].[Все],
                [Расходы__Базовый].[Расходы__Базовый].[Расходы уровень 1],
                self       
            ) -       
            {
                [Расходы__Базовый].[Расходы__Базовый].[Все].[Несопоставленные данные]       
            },
            [Measures].CurrentMember       
        )'       
SELECT
    {
        {
            {
                [Период__Период].[Период__Период].[Данные всех периодов].[2006]       
            }       
            *       
            {
                measures.[Рз],
                measures.[Пр],
                measures.[ЦСР],
                measures.[ВР],
                measures.[Уровень ]       
            }       
        }+       
        {
            {
                 <%year_set%>   
            }       
            *       
            {
                measures.[Ассигнования, руб. ],
                [Measures].[Кассовый расход, руб. ],
                measures.[% исполнения ],
                measures.[Уд. вес в ассигн. ],
                measures.[Уд. вес в расходах ],
                measures.[Уд. вес в ассигн. прошлый год ],
                measures.[Уд. вес в расходах прошлый год ]  
            }       
        }       
    }ON COLUMNS,
    {
        [Виды расходов ] + 
        {
            [Расходы__Базовый].[Расходы__Базовый].[Итого ] 
        } + 
        {
            [Расходы__Базовый].[Расходы__Базовый].[Все] 
        }    
    } ON ROWS 
FROM   [ФО_АС Бюджет_КазнИсп_Факт расхода]       
where       
    (
        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Фильтр ],
        [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Счета ]       
    ) 
    
]]>
</query>

  <query id="FO_0002_0017_02_Chart">
    <![CDATA[
-- FO_0002_0017_02_chart   
with  
    member measures.[Уровень ]  
    as '  
        (
            [Расходы__Базовый].[Расходы__Базовый].CurrentMember.Properties("LEVEL_NUMBER")  
        )'  
    member measures.[Кассовый расход, руб. ]  
    as '  
        (
            measures.[Факт расходов],
            [Период__Период].[Период__Период].CurrentMember  
        )'  
    member measures.[Ассигнования, руб. ]  
    as ' LookupCube  
        (
            "[ФО_АС Бюджет_План расходов]",
            "  
            (
                [Measures].[Ассигнования],
                [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[" + [Период__Период].[Период__Период].CurrentMember.Name + "],
                " + MemberToStr  
                (
                    [Расходы__Базовый].CurrentMember  
                ) + "," + MemberToStr
                (
                    [Период__Период].[Период__Период].CurrentMember
                ) + ",
                [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[<%selected_bill%>]  
            )"  
        ) '  
    member measures.[Ассигнования несопоставленные ]  
    as ' LookupCube  
        (
            "[ФО_АС Бюджет_План расходов]",
            "  
            (
                [Measures].[Ассигнования],
                [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[" + [Период__Период].[Период__Период].CurrentMember.Name + "],
                " + MemberToStr  
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все].[Несопоставленные данные]  
                ) + ",
                " + MemberToStr
                (
                    [Период__Период].[Период__Период].CurrentMember
                ) + ",
                [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[<%selected_bill%>]  
            )"  
        ) '  
    member measures.[Уд. вес в ассигн. ]  
    as 'IIF  
        (
            not  
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    measures.[Ассигнования, руб. ]  
                ) = 0  
            ),
            measures.[Ассигнования, руб. ] /  
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    measures.[Ассигнования, руб. ] 
                )
            ),
            null  
        )'  
    member measures.[Уд. вес в расходах ]  
    as 'IIF  
        (
            not  
            (
                (
                    [Расходы__Базовый].[Расходы__Базовый].[Все],
                    [Measures].[Кассовый расход, руб. ]  
                ) = 0  
            ),
            [Measures].[Кассовый расход, руб. ] /  
            (
                [Расходы__Базовый].[Расходы__Базовый].[Все],
                [Measures].[Кассовый расход, руб. ]  
            ),
            null  
        )'  
    member [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Фильтр ]  
    as 'Aggregate  
        (
            {
                <%kd_group%>  
            }  
        ) '  
    member [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Счета ]  
    as 'Aggregate  
        (
            [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[<%selected_bill%>]  
        ) '  
    set [Виды расходов ]  
    as 'filter  
        (
            [Расходы__Базовый].Members,
            not  
            (
                [Расходы__Базовый].CurrentMember is [Расходы__Базовый].CurrentMember.Parent.DataMember  
            ) and not  
            (
                [Расходы__Базовый].CurrentMember is [Расходы__Базовый].[Расходы__Базовый].[Все]  
            ) and not  
            (
                [Расходы__Базовый].CurrentMember is [Расходы__Базовый].[Расходы__Базовый].[Все].[Несопоставленные данные]  
            ) and not  
            (
                [Расходы__Базовый].CurrentMember.Name = "Неуказанное наименование"  
            ) and not IsEmpty ([Measures].[Факт расходов]) and 
            (
                [Расходы__Базовый].[Расходы__Базовый].CurrentMember.Properties("LEVEL_NUMBER") = "1"
            )  
        )'  
    member [Расходы__Базовый].[Расходы__Базовый].[Итого ]  
    as 'sum  
        (
            descendants  
            (
                [Расходы__Базовый].[Расходы__Базовый].[Все],
                [Расходы__Базовый].[Расходы__Базовый].[Расходы уровень 4],
                self  
            ) -  
            {
                [Расходы__Базовый].[Расходы__Базовый].[Все].[Несопоставленные данные]  
            },
            [Measures].CurrentMember  
        )'  
SELECT
    {
        {
            <%year_set%>      
        }  
        *  
        {
            measures.[Ассигнования, руб. ],
            [Measures].[Кассовый расход, руб. ],
            measures.[Уд. вес в ассигн. ],
            measures.[Уд. вес в расходах ]
        }   
    }ON COLUMNS,
    NON EMPTY  ( [Виды расходов ] ) ON ROWS  
FROM   [ФО_АС Бюджет_КазнИсп_Факт расхода]  
where  
    (
        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Фильтр ],
        [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Счета ]  
    )
]]>
</query>

<query id="FO_0002_0017_02_Bill">
<![CDATA[
    with
    
         member measures.[Код ]
    as '
        (
            [ЛицСчета__Сопоставимый].CurrentMember.Properties("Код")
        )'
    set [Виды счетов ]
    as 'filter
        (
            [ЛицСчета__Сопоставимый].Members,
            not
            (
                [ЛицСчета__Сопоставимый].CurrentMember is [ЛицСчета__Сопоставимый].CurrentMember.Parent.DataMember
            ) and [ЛицСчета__Сопоставимый].CurrentMember.Properties("LEVEL_NUMBER") = "1"
            and not ([ЛицСчета__Сопоставимый].CurrentMember is [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[Несопоставленные данные])
            and not ([ЛицСчета__Сопоставимый].CurrentMember is [ЛицСчета__Сопоставимый].[ЛицСчета__Сопоставимый].[Все лицевые счета].[Неуказанная организация])
        )'
SELECT
    {
         measures.[Код ]
    }ON COLUMNS,
    NON EMPTY ( [Виды счетов ]  ) ON ROWS
FROM   [ФО_АС Бюджет_КазнИсп_Факт расхода]
   ]]>
</query>
</root>