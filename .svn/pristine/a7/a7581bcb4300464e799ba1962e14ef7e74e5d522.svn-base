<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="tableTarget">
    <![CDATA[
with    
    member [Показатели].[УФК_Операции с субсидиями и субвенциями].[FK]    
    as 'MemberToStr 
        (
            [Межбюджетные трансферты].[УФК_Сопоставимый].CurrentMember 
        )'  
    member [Межбюджетные трансферты].[УФК_Сопоставимый].[Итого субсидий и субвенций из федерального бюджета] 
    as '[Межбюджетные трансферты].[УФК_Сопоставимый].[Все]' 
select
    {
        {
            {
                [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Нераспределенный остаток на конец дня],
                [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Получено],
                [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Распределено]     
            }    
            *    
            {
                [Measures].[Сумма за период],
                [Measures].[Сумма с начала года]   
            }   
        } +    
        {
            {
                [Показатели].[УФК_Операции с субсидиями и субвенциями].[FK]   
            }   
            * {[Measures].[Сумма за период]}   
        }   
    } on columns,
    filter 
    (
        {
            [Межбюджетные трансферты].[УФК_Сопоставимый].[Межбюджетные трансферты2].Members,
            [Межбюджетные трансферты].[УФК_Сопоставимый].[Итого субсидий и субвенций из федерального бюджета] 
        },
        (
            not IsEmpty([Measures].[Сумма за период]) 
        ) or  
        (
            not IsEmpty 
            (
                [Measures].[Сумма с начала года] 
            ) 
        ) 
    ) dimension properties [Межбюджетные трансферты].[УФК_Сопоставимый].[Межбюджетные трансферты2].[Код цели] on rows  
from [УФК_Справка по движению свободного остатка]      
where      
    (
        <%period_day_fo%>
    )      

]]>
  </query>

  <query id="chart1Target">
    <![CDATA[
with member [Measures].[Сумма за период2] as 'iif(IsEmpty([Measures].[Сумма за период]), 0, [Measures].[Сумма за период])'
select
    {
        [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Получено],
        [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Распределено]
    } on columns,
    Descendants
    (
        <%period_year%>,
        [Период].[День].[Месяц]
    ) on rows
from [УФК_Справка по движению свободного остатка]
where
    (
        
        <%kd_group%>,
        [Measures].[Сумма за период2]
    )
]]>
  </query>
  <query id="chart2Target">
    <![CDATA[
    with 
    member [Measures].[Сумма за период0] 
    as 'IIF
        (
            IsEmpty([Measures].[Сумма за период]),
            0,
            [Measures].[Сумма за период]
        )'  
select
    {
        [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Нераспределенный остаток на конец дня],
        [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Получено],
        [Показатели].[УФК_Операции с субсидиями и субвенциями].[Все].[Распределено]  
    } on columns,
    non empty Filter
    (
        Descendants  
        (
            <%period_month%>,
            [Период].[День].[День]  
        ),
        not IsEmpty([Measures].[Сумма за период])
    ) on rows  
from [УФК_Справка по движению свободного остатка]  
where  
    (
        [Measures].[Сумма за период0],
        <%kd_group%>  
    )
]]>
  </query>
</root>