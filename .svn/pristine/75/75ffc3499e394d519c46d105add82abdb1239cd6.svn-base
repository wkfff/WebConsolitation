<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="IT_0002_0004">
    <![CDATA[
      -- IT_0002_0004
    with   
    member [Measures].[Период ] 
    as '[Период].[Период].CurrentMember.Name + " " + [Период].[Период].CurrentMember.Parent.Parent.Parent.Name'
    member [Measures].[Доля]   
    as 'IIF   
        (
            IsEmpty   
            (
                (
                    [СвязьБезопасность].[Банки].[Все],
                    [Measures].[Остаток]   
                )   
            ) or   
            (
                [СвязьБезопасность].[Банки].[Все],
                [Measures].[Остаток]   
            ) = 0 or   
            (
                [СвязьБезопасность].[Банки].CurrentMember is    [СвязьБезопасность].[Банки].[Все]   
            ),
            null,
            (
                [СвязьБезопасность].[Банки].CurrentMember,
                [Measures].[Остаток]   
            )/   
            (
                [СвязьБезопасность].[Банки].[Все],
                [Measures].[Остаток]   
            )   
        )'   
    member [Measures].[Остаток, тыс.руб.]   
    as '[Measures].[Остаток] / 1000'   
select
    {
        {
            [СвязьБезопасность].[Банки].[Все]   
        }   
        *   
        {
            [Measures].[Период ],
            [Measures].[Остаток, тыс.руб.]
        } +   
        {
            [СвязьБезопасность].[Банки].[Все].[ОАО "АКБ "Связь банк"],
            [СвязьБезопасность].[Банки].[Все].[ОАО "Морской Акционерный банк"]   
        }   
        *   
        {
            [Measures].[Остаток, тыс.руб.],
            [Measures].[Доля]   
        }   
    } on columns,
    {
        filter  
        (
            Descendants  
            (
                [Период].[Период].[Данные всех периодов],
                [Период].[Период].[Месяц],
                self   
            ),
            not isEmpty 
            (
                [Measures].[Остаток, тыс.руб.] 
            )  
        )  
    } on rows   
from   [СВЯЗЬБЕЗОП_Среднедневные остатки]
    ]]>
    </query>
  
  <query id="IT_0002_0004_Chart">
    <![CDATA[
      -- IT_0002_0004_Chart
       with
    member [Measures].[Период ]
    as '[Период].[Период].CurrentMember.Name + " " + [Период].[Период].CurrentMember.Parent.Parent.Parent.Name'
    member [Measures].[Доля]
    as 'IIF
        (
            IsEmpty
            (
                (
                    [СвязьБезопасность].[Банки].[Все],
                    [Measures].[Остаток]
                )
            ) or
            (
                [СвязьБезопасность].[Банки].[Все],
                [Measures].[Остаток]
            ) = 0 or
            (
                [СвязьБезопасность].[Банки].CurrentMember is    [СвязьБезопасность].[Банки].[Все]
            ),
            null,
            (
                [СвязьБезопасность].[Банки].CurrentMember,
                [Measures].[Остаток]
            )/
            (
                [СвязьБезопасность].[Банки].[Все],
                [Measures].[Остаток]
            )
        )'
    member [Measures].[Остаток, тыс.руб.]
    as '[Measures].[Остаток] / 1000'
select
    {
        {
            [СвязьБезопасность].[Банки].[Все]
        }
        *
        {
            [Measures].[Период ]
        } +
        {
            [СвязьБезопасность].[Банки].[Все].[ОАО "АКБ "Связь банк"],
            [СвязьБезопасность].[Банки].[Все].[ОАО "Морской Акционерный банк"]
        }
        *
        {
            [Measures].[Остаток, тыс.руб.]
        }
    } on columns,
    {
        filter
        (
            Descendants
            (
                [Период].[Период].[Данные всех периодов],
                [Период].[Период].[Месяц],
                self
            ),
            not isEmpty
            (
                [Measures].[Остаток, тыс.руб.]
            )
        )
    } on rows
from   [СВЯЗЬБЕЗОП_Среднедневные остатки]
          ]]>
  </query>
  </root>