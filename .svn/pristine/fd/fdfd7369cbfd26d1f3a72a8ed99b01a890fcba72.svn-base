<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0037_date">
    <![CDATA[
-- FO_0002_0037_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период__Период].[Период__Период].[День].Members,
                not IsEmpty ([Measures].[Факт])
             ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from   [ФО_МесОтч_Расходы]
  ]]>
  </query>

  <query id="FO_0002_0037_grid1">
    <![CDATA[
-- FO_0002_0037_grid
with               
    set [Районы]              
    as 'Filter         
        (
            Descendants                 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                Self         
            ),
            not [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is   [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember 
			and
			(
			  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"
			)
        )'   
	set [Города]              
    as 'Filter         
        (
            Descendants                 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                Self         
            ),
            not [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is   [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember 
			and
			(
			  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
			)
        )'
    member [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Тип документа ]   
    as 'Aggregate     
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа],
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]    
            }     
        )'     
	member [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]  
    as 'Aggregate( { [Районы] , [Города]}  )'
	
	
	  member Measures.[Доля, %] 
    as 'IIF 
        (
            IsEmpty 
            (
                (
                    [Measures].[Факт],
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                ) 
            )or 
            (
                (
                    [Measures].[Факт],
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                ) 
            )=0,
            null,
            (
                [Measures].[Факт] / 
                (
                    (
                        [Measures].[Факт],
                       [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                    ) 
                ) 
            ) 
        )' 
    member Measures.[Доля прошлый год, %] 
    as 'IIF 
        (
            IsEmpty 
            (
                (
                    [Measures].[Факт_прошлый год],
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                ) 
            )or 
            (
                (
                    [Measures].[Факт_прошлый год],
                     [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                ) 
            )=0,
            null,
            (
                [Measures].[Факт_прошлый год] / 
                (
                    (
                        [Measures].[Факт_прошлый год],
                        [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                    ) 
                ) 
            ) 
        )' 
	  member Measures.[Уровень] 
    as '[Районы__Сопоставимый].[Районы__Сопоставимый].Properties("LEVEL_NUMBER")'
	
	 member [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы]
    as 'Aggregate([Районы] )'
    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа]
    as 'Aggregate([Города])'
Select
    {
             
        {
           [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        }       
        * 
        {
		    [Measures].[Факт_прошлый год],
            [Measures].[Факт],
            [Measures].[Темп роста к прошлому году],
            Measures.[Доля, %],
            Measures.[Доля прошлый год, %],
			Measures.[Уровень] 
        } 
    } on columns,
 NON EMPTY   {{[Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]}  + {[Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы]} +  [Районы]  +{  [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа]} + {[Города]} } on rows        
From [ФО_МесОтч_Расходы]               
Where      
    (
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Тип документа ],
		<%selected_rzpr_value%>
    )               
  ]]>
  </query>
	
<query id="FO_0002_0037_grid2">
		<![CDATA[
-- FO_0002_0037_grid
with                  
    set [Районы]                 
    as 'Filter           
        (
            Descendants                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                Self_and_after
            ),
			not IsEmpty
			(
			  (
			    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                [Measures].[Сумма выплат с начала года]
			  )
			)
			and
			(
			 		  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"  or 	  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "СП" 						
			)
           
        )'
   set [Города]                 
    as 'Filter           
        (
            Descendants                    
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                Self_and_after
            ) - [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Новосибирская область (Консолидированный)].[Городские округа].[г. Новосибирск].DATAMEMBER,
			not IsEmpty
			(
			  (
			    [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                [Measures].[Сумма выплат с начала года]
			  )
			)
			and
			(
			  [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
			)
           
        )'
   
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы]
    as 'Aggregate([Районы] )'
    
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа]
    as 'Aggregate([Города])'
	
	
    member measures.[Темп роста]   
    as 'IIF  
        (
            IsEmpty   
            (
                (
                    [Measures].[Сумма выплат с начала года],
                    ParallelPeriod   
                    (
                        [Период__Период].[Период__Период].[Год],
                        1,
                        [Период__Период].[Период__Период].CurrentMember    
                    )   
                )   
            ) or  
            (
                (
                    [Measures].[Сумма выплат с начала года],
                    ParallelPeriod  
                    (
                        [Период__Период].[Период__Период].[Год],
                        1,
                        [Период__Период].[Период__Период].CurrentMember   
                    )  
                )  
            ) =0,
            null,
             
            (
                [Measures].[Сумма выплат с начала года],
                [Период__Период].[Период__Период].CurrentMember   
            ) /   
            (
                [Measures].[Сумма выплат с начала года],
                ParallelPeriod   
                (
                    [Период__Период].[Период__Период].[Год],
                    1,
                    [Период__Период].[Период__Период].CurrentMember    
                )   
            )   
        )'   
	    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]  
    as 'Aggregate({ [Районы] , [Города]} )'
	
	member Measures.[Доля, %]     
    as 'IIF     
        (
            IsEmpty     
            (
                (
                    [Measures].[Сумма выплат с начала года],
                     [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]   
                )     
            )or     
            (
                (
                    [Measures].[Сумма выплат с начала года],
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                )     
            )=0,
            null,
            (
                [Measures].[Сумма выплат с начала года] /
                (
                    (
                       [Measures].[Сумма выплат с начала года],
                        [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                    )     
                )     
            )     
        )'     
    member Measures.[Доля прошлый год, %]     
    as 'IIF     
        (
            IsEmpty     
            (
                (
                    [Measures].[Сумма выплат с начала года],
                     [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                ) 
            )or     
            (
                (
                    [Measures].[Сумма выплат с начала года],
                     [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                ) 
            )=0,
            null,
            (
                (
                    (
                        [Measures].[Сумма выплат с начала года],
                         [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
                    )   
                ) /    
                (
                    (
                        [Measures].[Сумма выплат с начала года],
                        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                       [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]  
                    )     
                )     
            )     
        )' 
	member Measures.[Уровень] 
    as 'IIF 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО",
            1,
            IIF 
            (
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]
                )or
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is  [Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы]
                )or
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is  [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа]
                ),
                1,
                [Районы__Сопоставимый].[Районы__Сопоставимый].Properties("LEVEL_NUMBER") 
            ) 
        )' 
Select
    {
        {
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        }          
        *      
        {
            [Measures].[Сумма выплат с начала года]     
        } +          
        {
             [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        }          
        *    
        {
            [Measures].[Сумма выплат с начала года],
            [Measures].[Темп роста],
            Measures.[Доля, %],
            Measures.[Доля прошлый год, %],
			Measures.[Уровень] 
        }    
    } on columns,
   Non EMPTY {{[Районы__Сопоставимый].[Районы__Сопоставимый].[Местные бюджеты Новосибирской области]}  + {[Районы__Сопоставимый].[Районы__Сопоставимый].[Муниципальные районы]} +  [Районы]  +{  [Районы__Сопоставимый].[Районы__Сопоставимый].[Городские округа]} + {[Города]} } on rows
From [УФК_Сводная ведомость кассовых выплат из бюджета]
Where
(
  <%selected_rzpr_value%>
)
                         
  ]]>
</query>

<query id="RzPrList">
 <![CDATA[
--RzPrList
with  
    set [Список расходов]  
    as 'Filter  
        (
            Descendants  
            (
                [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР],
                [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Подраздел],
                SELF_and_before  
            ) - [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Расходы бюджета - ИТОГО] -[РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов] - [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР],
            not  
            (
                [РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember is [РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember.Parent.DataMember 
            ) 			and  
            (
                [РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember.Name <> "Несопоставленные данные" 
            )  
        )'  
    member [Measures].[Имя]  
    as ' [РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember.Name' 	 	  
    member [Measures].[Уникальное имя]  
    as '  [РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember.UniqueName' 			 
    member [Measures].[Уровень]  
    as '   [РзПр__Сопоставимый].[РзПр__Сопоставимый].CurrentMember.Properties("LEVEL_NUMBER")-1' 		
	
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]  
    } on columns,
    { {[Список расходов]} 	 } on rows  
from  [ФО_МесОтч_Расходы]  
 ]]>
	</query>

</root>