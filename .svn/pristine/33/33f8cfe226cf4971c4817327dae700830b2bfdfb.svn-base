<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0042_0004_HMAO_date">
    <![CDATA[
-- FO_0042_0004_HMAO_date
with 
    member [Measures].[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                Descendants   
                (
                    [Период].[Период].[Данные всех периодов],
                    [Период].[Период].[Квартал],
                    SELF   
                ),
                not IsEmpty 
                (
                    (
                        [Measures].[Значение],
                        [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели]
                    ) 
                ) and 
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and 
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and 
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and 
                [Период].[Период].CurrentMember.Name <> "Данные года" and 
                [Период].[Период].CurrentMember.Name <> "Данные месяца" and 
                [Период].[Период].CurrentMember.Name <> "Заключительные обороты" 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from [ФО_Оценка качества ФМ_Показатели] 
]]>
</query>

<query id="FO_0042_0004_HMAO_grid">
<![CDATA[
-- FO_0042_0004_HMAO_grid
with    
    set [Администраторы]   
    as 'Filter  
        (
            {
                Descendants  
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Администратор],
                    SELF   
                ) - 
                {
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные]
                } 
            },
            not IsEmpty   
            (
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка],
                    [Период].[Период].[Данные всех периодов].<%selected_period%>
                )   
            )
        )'   
		
	 member [Администратор__Сопоставим].[Администратор__Сопоставим].[Код]               
    as 'IIF         
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "1",
            10,
            IIF        
            (
                [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "2",
                20,
                IIF       
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "3",
                    30,
                    IIF     
                    (
                        [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "4",
                        40,
                        IIF    
                        (
                            [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "5",
                            50,
                            IIF   
                            (
                                [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "6",
                                60,
                                IIF  
                                (
                                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "7",
                                    70,
                                    IIF 
                                    (
                                        [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1] = "8",
                                        80,
                                        [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1]     
                                    ) 
                                )  
                            )   
                        )    
                    )     
                )       
            )        
        )*(-1)  '
    member [Администратор__Сопоставим].[Администратор__Сопоставим].[Код1]              
    as 'Mid              
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Properties("Обозначение"),
            0,
            1              
        )+ Mid          
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Properties("Обозначение"),
            3,
            1          
        ) '   
		
    set [Показатели для оценки]    
    as 'Order
	    (Filter    
        (
            Generate    
            (
                Descendants    
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 1],
                    SELF    
                ) -    
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Несопоставленные данные],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа]    
                },
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember    
                } + Descendants    
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember,
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 2],
                    SELF    
                )    
            ),
            not    
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Parent.DataMember    
            ) and not IsEmpty 
                (
                    (
                        [Measures].[Применим ли в оценке],
                        [Период__Период].[Период__Период].[Данные всех периодов].<%selected_period%> 
                    )
                )   
        ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].[Код],
             DESC 
	)'     
    set [Показатели для значения]    
    as 'Order(
	    Filter    
        (
            {
                Descendants    
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 2],
                    SELF    
                ) -    
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Несопоставленные данные]    
                }    
            },
            not    
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Parent.DataMember    
            ) and not IsEmpty 
                (
                    (
                        [Measures].[Применим ли в оценке],
                        [Период__Период].[Период__Период].[Данные всех периодов].<%selected_period%> 
                    )
                )  
        ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].[Код],
             DESC
		
	)'     
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Аггрегированные показатели]    
    as 'Aggregate({ [<%indicator_set%>] })'    
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Код ГРБС]    
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Properties("Код")'    
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Наименование ГРБС]    
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name'    
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка]    
    as '[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа]'    
    
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[№ п/п]  
    as '0'  
    
    member [Measures].[Оценка показателя ]    
    as 'IIF    
        (
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка]    
            ) or    
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Level is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 1]    
            ),
            [Measures].[Взвешенное значение],
            [Measures].[Оценка показателя]    
        )'     

    member [Период__Период].[Период__Период].[Прошлый квартал]
    as 'IIF
        (
            (
                ([Measures].[Применим ли в оценке], [Период].[Период].[Данные всех периодов].<%selected_prev_period%>) = 0
            ) and not
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка]
            ),
            -100500,
            ([Measures].[<%selected_maasure%>],[Период].[Период].[Данные всех периодов].<%selected_prev_period%>)
        )'

    member [Период__Период].[Период__Период].[Текущий квартал]
    as 'IIF
        (
            (
                ([Measures].[Применим ли в оценке], [Период].[Период].[Данные всех периодов].<%selected_period%> ) = 0
            ) and not
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка]
            ),
            -100500,
            ([Measures].[<%selected_maasure%>], [Период].[Период].[Данные всех периодов].<%selected_period%> )
        )'
        
    member [Период__Период].[Период__Период].[Отклонение]
    as 'IIF
        (
            IsEmpty
            (
                [Период__Период].[Период__Период].[Текущий квартал]
            ) or
            (
                [Период__Период].[Период__Период].[Текущий квартал]
            ) = -100500 or
            IsEmpty
            (
                [Период__Период].[Период__Период].[Прошлый квартал]
            ) or
            (
                [Период__Период].[Период__Период].[Прошлый квартал]
            ) = -100500,
            null,
            (
                [Период__Период].[Период__Период].[Текущий квартал]
            ) -
            (
                [Период__Период].[Период__Период].[Прошлый квартал]
            )
        )'


    set [Периоды]  
    as '  
        {
            [Период__Период].[Период__Период].[Прошлый квартал],
            [Период__Период].[Период__Период].[Текущий квартал]
        }' 

select
    (
        {
            {
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[№ п/п],
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Код ГРБС],
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Наименование ГРБС]    
            }
            *
            {
                [Период].[Период].[Данные всех периодов].<%selected_period%>  
            }
        } + 
        {
            {
                Filter   
                (
                    {
                        [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка]    
                    } + [<%indicator_set%>],
                    IIF    
                    (
                        [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка],
                        [Measures].[<%selected_maasure%>] is [Measures].[Оценка показателя ],
                        true    
                    )    
                )   
            }   
            *   
            {
                [Периоды] +   
                {
                    [Период].[Период].[Отклонение]   
                }    
            } 
        } 
    )  on columns,
    { [Администраторы] } on rows    
from [ФО_Оценка качества ФМ_Показатели]                    
  ]]>
</query>

  <query id="FO_0042_0004_HMAO_indicatorDescription">
    <![CDATA[
-- FO_0042_0004_HMAO_indicatorDescription
With
    set [Показатели]                 
    as 'Filter                 
        (
            Generate            
            (
                Descendants             
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 1],
                    SELF             
                ) -            
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Несопоставленные данные],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа]       
                },
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember           
                } + Descendants            
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember,
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 2],
                    SELF            
                )            
            ),
            not                 
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Parent.DataMember                 
            )                 
        ) '   
    member [Measures].[Единицы измерения]
    as '[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Properties("Единицы измерения")'
Select
    {
       [Measures].[Единицы измерения]
    } on columns,
    { [Показатели] } on rows
From [ФО_Оценка качества ФМ_Показатели]
  ]]>
  </query>  
  
</root>