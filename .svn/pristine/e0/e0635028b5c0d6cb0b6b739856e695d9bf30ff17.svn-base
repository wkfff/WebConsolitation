<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="Grid">
    <![CDATA[with 
    <%IsHmao%>member [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета] as 'null'
    set [region] 
    as '{<%ChosenRegionGrid%>}'
    
    set [Услуги] 
    as '[ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Услуга].members'
    
    set [Виды Благоустройства] 
    as '[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members'
    
    set [Организа]
    as '{[ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[(All)].[Все организации]}'
    
    member [Measures].[Тариф  ]
    as 'iif
        (
            [Территории__РФ].[Территории__РФ].currentmember.parent is <%RegionBaseDimension%>,
           [Measures].[Тариф],
            [Measures].[Тариф])'

    member [Measures].[Норматив  ]
    as 'iif
        (
            [Территории__РФ].[Территории__РФ].currentmember.parent is <%RegionBaseDimension%>,
            [Measures].[Тариф],
            [Measures].[Норматив]
        )'
    member [Measures].[Норматив ]
    as '[Measures].[Норматив по МО]'
    member [Measures].[Тариф ]
    as '[Measures].[Средний тариф по МО]'
    member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[empty]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год].[1998].[Полугодие 1].[Квартал 1].[Январь]'
    member [ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учёта ]
    as '[ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учёта]+[ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[Не определено]'
   
SELECT
    non empty     
    {
        Crossjoin 
        ( 
            [region],
            Crossjoin 
            (
                [Услуги], 
                Crossjoin 
                (
                    [Виды Благоустройства],
                    [Организа] 
                ) 
            ) 
        )  
    }on rows  ,
--    non empty
    {
        Crossjoin
        ( 
            {
                
                <%ChosenCurPeriod%>,
                <%ChosenPrevPeriod%>
            },
            {Crossjoin
            (
                {
                
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при наличии приборов учёта]
                }, 
                {[Measures].[Тариф ]}
            ),
            Crossjoin
            (
                {
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета],
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при отсутствии приборов учёта ]
                },
                {
                    [Measures].[Тариф ],
                    [Measures].[Норматив ]
                }
            )}
        )    
    }  on columns 
FROM   [ФСТ_ЖКХ по МО_Тарифы и нормативы] 
 
]]>
  </query>
  <query id="SmalGrid">
    <![CDATA[
    --SmalGrid
    with 
    <%IsHmao%>member [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета]as 'null'
    set [region] 
    as '{<%ChosenRegionGrid%>}'   
    
    member [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[_avg]
    as 'Aggregate
        (
            filter 
            (
                [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members,
                [Measures].[Тариф]+
                [Measures].[Норматив]>0
            ),
            [Measures].[Тариф]
        )/ filter
        (
            [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members,
            [Measures].[Тариф]+
            [Measures].[Норматив]>0
        ).count'
    
    set [Услуги] 
    as '[ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Услуга].members'  
    set [Виды Благоустройства] 
    as '[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members'  
    set [Организа]
    as '{[ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[(All)].[Все организации]}'
      member [Measures].[Тариф  ]
    as 'iif
        (
            [Территории__РФ].[Территории__РФ].currentmember.parent is <%RegionBaseDimension%>,
           [Measures].[Тариф],
            [Measures].[Тариф])'
    member [Measures].[Норматив  ]
    as 'iif
        (
            [Территории__РФ].[Территории__РФ].currentmember.parent is <%RegionBaseDimension%>,
            [Measures].[Тариф],
            [Measures].[Норматив]
        )'
    member [Measures].[Норматив ]
    as '[Measures].[Норматив по МО]'
    member [Measures].[Тариф ]
    as '[Measures].[Средний тариф по МО]'
     member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[empty]
   as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год].[1998].[Полугодие 1].[Квартал 1].[Январь]'
   
      member [ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учёта ]
    as '[ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учёта]+[ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[Не определено]'
SELECT
    non empty     
    {
        Crossjoin 
        (
            [region],
            Crossjoin([Услуги],{[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[(All)]})
            
        )  
    }on rows  ,
--    non empty
    {
        Crossjoin
        ( 
            {
                
                <%ChosenCurPeriod%>,
                <%ChosenPrevPeriod%>
            },
            {Crossjoin
            (
                {                
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при наличии приборов учёта]
                },
                {[Measures].[Тариф ]}
            ),
            Crossjoin
            (
                {
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета],
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при отсутствии приборов учёта ]
                },
                {
                    [Measures].[Тариф ],
                    [Measures].[Норматив ]
                }
            )}
        )    
    }  on columns 
FROM   [ФСТ_ЖКХ по МО_Тарифы и нормативы] 
 
]]>
  </query>

  <query id="SmalGrid_">
    <![CDATA[
    --SmalGrid_SmalGrid_ 
    with
    <%IsHmao%> member [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета]as 'null'
    set [region] 
    as '{<%ChosenRegionGrid%>}'   
    
    member [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[_avg]
    as 'Aggregate
        (
            filter
            (
                [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members,
                [Measures].[Тариф]+
                [Measures].[Норматив]>0
            ),
            [Measures].[Тариф]
        )/ filter
        (
            [ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members,
            [Measures].[Тариф]+
            [Measures].[Норматив]>0
        ).count'
    
    set [Услуги] 
    as '
    [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Услуга].members
    --[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].members
    '  
    set [Виды Благоустройства] 
    as '[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members'  
    set [Организа]
    as '{[ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[(All)].[Все организации]}'
      member [Measures].[Тариф  ]
    as 'iif
        (
            [Территории__РФ].[Территории__РФ].currentmember.parent is <%RegionBaseDimension%>,
           [Measures].[Тариф],
            [Measures].[Тариф])'
    member [Measures].[Норматив  ]    
    as 'iif
        (
            [Территории__РФ].[Территории__РФ].currentmember.parent is <%RegionBaseDimension%>,
            [Measures].[Тариф],
            [Measures].[Норматив]
        )'
    member [Measures].[Норматив ]
    as '[Measures].[Норматив по МО]'
    member [Measures].[Тариф ]
    as '[Measures].[Средний тариф по МО]'
     member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[empty]
   as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год].[1998].[Полугодие 1].[Квартал 1].[Январь]'
   member [ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учёта ]
    as '[ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учёта]+[ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[Не определено]'
SELECT
    non empty     
    {
        Crossjoin 
        (
            [region],
            [Услуги]
            
        )  
    }on rows  ,
--    non empty
    {
        Crossjoin
        ( 
            {
                
                <%ChosenCurPeriod%>,
                <%ChosenPrevPeriod%>
            },
            {Crossjoin
            (
                {                
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при наличии приборов учёта]
                },
                {[Measures].[Тариф ]}
            ),
            Crossjoin
            (
                {
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета],
                    [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при отсутствии приборов учёта ]
                },
                {
                    [Measures].[Тариф ],
                    [Measures].[Норматив ]
                }
            )}
        )    
    }  on columns 
FROM   [ФСТ_ЖКХ по МО_Тарифы и нормативы] 
 
]]>
  </query>



  <query id="ComboRegion">
    <![CDATA[with
    <%IsHmao%>member [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета] as 'null'
    set [region]     
    as '
    Filter([Территории__РФ].[Территории__РФ].members,
([Территории__РФ].[Территории__РФ].parent is <%RegionBaseDimension%>
or
[Территории__РФ].[Территории__РФ].parent.parent is <%RegionBaseDimension%> )
and
not [Территории__РФ].[Территории__РФ].currentmember.is_datamember)'
    set [Услуги] 
    as '[ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Услуга].members'  
    set [Виды Благоустройства] 
    as '[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members'  
    set [Организа] 
    as '[ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[Организация].members'  
    member [first-tar] 
    as '  
        (
            [Measures].[Тариф],
            [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при наличии приборов учёта]
        )' 
    member [next-tar] 
    as '
        (
            [Measures].[Тариф],
            [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при отсутствии приборов учёта]
        )'  
    member [next-norm] 
    as '
        (
            [Measures].[Норматив],
            [ФСТ__Детали учета].[ФСТ__Детали учета].[Деталь учета].[при отсутствии приборов учёта]
         )'
    member [UniqueName]
    as '[Территории__РФ].[Территории__РФ].currentmember.unique_name'
    member [LevelNumber]
    as '[Территории__РФ].[Территории__РФ].currentmember.LEVEL_NUMBER - 5'
    
SELECT
    non empty
    {
    filter(
[region],
[Measures].[Тариф]> 0)
    }on rows,
    {
    [LevelNumber],
[UniqueName]
    }  on columns 
FROM  [ФСТ_ЖКХ по МО_Тарифы и нормативы]
 
]]>
  </query>
  <query id="ComboYear">
    <![CDATA[with
    <%IsHmao%>member [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета] as 'null'
    set [Услуги]
    as '[ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Услуга].members'
    set [Виды Благоустройства]
    as '[ФСТ__Виды благоустройств].[ФСТ__Виды благоустройств].[Вид благоустройства].members'
    set [Организа]
    as '[ФСТ__Организации ЖКХ].[ФСТ__Организации ЖКХ].[Организация].members'
    member [first-tar]
    as '
        (
            [Measures].[Тариф],
            [ФСТ__Детали учета].[ФСТ__Детали учета].[при наличии приборов учёта]
        )'
    member [next-tar]
    as '
        (
            [Measures].[Тариф],
            [ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учета]
        )'
    member [next-norm]
    as '
        (
            [Measures].[Норматив],
            [ФСТ__Детали учета].[ФСТ__Детали учета].[при отсутствии приборов учета]
        )'

    member [LevelNumber]
    as '[Территории__РФ].[Территории__РФ].currentmember.LEVEL_NUMBER - 4'
    member [year]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].currentmember.parent.parent.parent.name'
    member [mounth]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].currentmember.name'
    member [uname]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].currentmember.uniquename'
SELECT
    non empty
    {
        filter
        (
            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Месяц].members,
            [Measures].[Тариф]> 0
        )
    }on rows,
    {

        [year],
        [mounth],
        [uname]
    }  on columns
FROM  [ФСТ_ЖКХ по МО_Тарифы и нормативы]
where
    (
         <%RegionBaseDimension%>
    )
]]>
  </query>

  <query id="EdIzm">
    <![CDATA[with
     <%IsHmao%>member [ФСТ__Детали учета].[ФСТ__Детали учета].[Все детали учета].[по приборам учета] as 'null'
    set [Услуги]
   
    as '
    Except([ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[Услуга].members,
    [ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].[(All)].[Все услуги].[Значение не указано])'

    member [edizm]
    as '[ФСТ__Услуги ЖКХ].[ФСТ__Услуги ЖКХ].currentmember.properties("Единица измерения")'

SELECT
    non empty
    {
      [Услуги]
    }on rows  ,

    {
[edizm] 
    }  on columns
FROM   [ФСТ_ЖКХ по МО_Тарифы и нормативы]
]]>
  </query>

</root>