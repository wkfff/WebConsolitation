<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="date">
    <![CDATA[
-- FO_0035_0003_2_HMAO_date
with 
    member Measures.[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
select
    {Measures.[ДанныеНа]} on columns,
    {
        Tail
        (
            NonEmptyCrossjoin({[Период].[Период].Members})
        )
    } on rows 
from [ФО_Исполнение кассового плана]
	]]>
  </query>
 
  <query id="ExecuteOutcome">
    <![CDATA[
-- FO_0035_0003_2_HMAO_ExecuteOutcome
with   
    member Measures.[КВСР]   
    as '[Администратор].[ИспКасПланСопост].CurrentMember.Properties("Код")'       
    member [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Заработная плата ]
    as '[Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Заработная плата]'
    member [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Капитальные вложения ]
    as '[Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Увеличение стоимости основных средств]'    
    member [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Коммунальные услуги ]
    as '[Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Коммунальные расходы]'      
    member [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Безвозмездные перечисления другим бюджетам бюджетной системы РФ ]
    as '[Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Межбюджетные трансферты]'         
    member [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Итого ]
    as '[Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Итого]'    
    
    set [Список расходов]   
    as '  
        {
            [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Заработная плата ],
            [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Капитальные вложения ],
            [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Коммунальные услуги ],
            [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Безвозмездные перечисления другим бюджетам бюджетной системы РФ ],
            [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Итого ]
        }'    
    set [Список администраторов]  
    as '{[Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Все].[Расходы- всего]} + 
        Except  
        (
            [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[ГРБС].Members,
            {
                [Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Все].[Несопоставленные данные]  
            }  
        ) '  
    member Measures.[Среднее]   
    as 'AVG  
        (
            Filter([Список администраторов], not IsEmpty([Measures].[Процент исполнения])) - {[Администратор__ИспКасПланСопост].[Администратор__ИспКасПланСопост].[Все].[Расходы- всего]},
            [Measures].[Процент исполнения]  
        )'     
        
    member [Measures].[План_Нарастающий итог ]
    as '[Measures].[План_Нарастающий итог] / 1000'
    
    member [Measures].[Факт_Нарастающий итог ]
    as '[Measures].[Факт_Нарастающий итог] / 1000'    
select
    {
        {
            {
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].['Значение не указано']   
            }   
            *{Measures.[КВСР]}   
        } +   
        {
            { [Список расходов] }   
            *   
            {
                [Measures].[План_Нарастающий итог ],
                [Measures].[Факт_Нарастающий итог ],
                [Measures].[Процент исполнения],
                [Measures].[Среднее]  
            }   
        }   
    } on columns,
    {[Список администраторов]} on rows 
from [ФО_Исполнение кассового плана_Расходы]
where   
    (
        [Период].[Период].[Данные всех периодов]<%period_cur_date%>  
    )

	]]>
</query>
 
  <query id="Execute">
    <![CDATA[
-- fo_0035_0002_Execute
with 
    member Measures.[Код] 
    as '[Показатели].[ИспКасПлан].CurrentMember.Properties("Код")' 
    member [Measures].[План_Нарастающий итог ]
    as '[Measures].[План_Нарастающий итог]'
    
    member [Measures].[Факт_Нарастающий итог ]
    as '[Measures].[Факт_Нарастающий итог]'   
    
    member [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Доходы бюджета автономного округа]
    as '[Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[Доходы областного бюджета]'    
select
    {
        Measures.[Код],
        [Measures].[План_Нарастающий итог ],
        [Measures].[Факт_Нарастающий итог ],
        [Measures].[Процент исполнения]
    } on columns,
    Filter 
    (
        {
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[Остаток средств на начало квартала],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Доходы бюджета автономного округа],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[в том числе:],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[собственные],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[Налог на прибыль организаций],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[Налог на доходы физических лиц],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[Налоги на имущество],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[безвозмездные поступления],
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО]
        },
        not 
        (
            IsEmpty
            (
                [Measures].[План_Нарастающий итог ]
            ) and IsEmpty
            (
                [Measures].[Факт_Нарастающий итог ]
            ) and IsEmpty
            (
                [Measures].[Процент исполнения]
            )
        ) 
    ) on rows
from [ФО_Исполнение кассового плана] 
where   
    (
        [Период].[Период].[Данные всех периодов]<%period_cur_date%>  
    )
	]]>
  </query>
</root>