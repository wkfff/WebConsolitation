<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="RG_0001_0002_date">
    <![CDATA[
-- RG_0001_0002_date
with 
    member Measures.[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
select
    {Measures.[ДанныеНа]} on columns,
    Tail 
    (
        filter 
        (
            (
                OpeningPeriod 
                (
                    [Период].[Период].[Месяц],
                    [Период].[Период].[Данные всех периодов].[2007] 
                ) : ClosingPeriod 
                (
                    [Период].[Период].[Месяц],
                    [Период].[Период].[Данные всех периодов].[2010] 
                ) 
            ),
            not isEmpty 
            (
                (
                    [Measures].[Значение],
                    [Показатели].[Оценка деятельности].[Все показатели].[<%filter%>] 
                )
            )
        ) 
    ) on rows 
from  [РЕГИОН_Оценка деятельности]
]]>
  </query>

  <query id="RG_0001_0002_Grid">
    <![CDATA[
-- RG_0001_0002_grid   
--<#[РЕГИОН_Оценка деятельности]#>
WITH
    Member [Территории].[Сопоставимый].[YearName]
    as ' IIF
        (
            (
                (
                    [Период].[Период].CurrentMember.Name = "Квартал 1"
                )
            ),
            [Период].[Период].CurrentMember.Parent.Parent.Name + " год",
            IIF
        (
            (
                (
                    [Период].[Период].CurrentMember.Name = "Январь"
                )
            ),
            [Период].[Период].CurrentMember.Parent.Parent.Parent.Name + " год",
            ""
        )
        )'
    member [Территории].[Сопоставимый].[Уральский федеральный округ ]
    as '[Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].DataMember'
    set [Список все субъектов УрФО]
    as '
        {
            Filter
            (
                [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].Children,
                not
                (
                    [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember
                )
            )
        }+
        {
            [Территории].[Сопоставимый].[Уральский федеральный округ ]
        } '
    SET [NonFilterColumnSet]
    AS 'filter
        (
            Descendants
            (
                [Период].[Период].[Данные всех периодов] ,
                [Период].[Период].[Данные всех периодов].Level ,
                SELF_AND_AFTER
            ),
            not
            (
                [Период].[Период].CurrentMember.Name = "Данные квартала"
            ) and not
            (
                [Период].[Период].CurrentMember.Name = "Данные года"
            ) and not
            (
                [Период].[Период].CurrentMember.Name = "Данные месяца"
            ) and not
            (
                [Период].[Период].CurrentMember.Name = "Данные всех периодов"
            ) and not IsEmpty ( ( [Measures].[Значение] ) )
        )  '
SELECT
    NON EMPTY
    {
        {
            [Территории].[Сопоставимый].[YearName]
        }+ { [Список все субъектов УрФО] }
    }  ON Columns ,
    NON EMPTY  { {[NonFilterColumnSet]} } ON rows
FROM [РЕГИОН_Оценка деятельности]   
WHERE     
    (
        [Measures].[Значение] ,
        [Источники данных].[Все источники данных].[РЕГИОН Оценка деятельности - Оценка деятельности губернаторов],
        [Показатели].[Оценка деятельности].[Все показатели].[<%filter%>] 
    )    
]]>
</query>

<query id="RG_0001_0002_Chart">
<![CDATA[
-- RG_0001_0002_Chart   
--<#[РЕГИОН_Оценка деятельности]#>
WITH     
    Member [Территории].[Сопоставимый].[YearName]     
    as ' IIF     
        (
            (
                (
                    [Период].[Период].CurrentMember.Name = "Квартал 1"     
                )     
            ),
            [Период].[Период].CurrentMember.Parent.Parent.Name + " - " + [Период].[Период].CurrentMember.Name,
            IIF     
            (
                (
                    (
                        [Период].[Период].CurrentMember.Name = "Январь"    
                    )     
                ),
                [Период].[Период].CurrentMember.Parent.Parent.Parent.Name + " - " + [Период].[Период].CurrentMember.Name,
                IIF   
                (
                    (
                        (
                            [Период].[Период].CurrentMember.Name = "Квартал 2"   
                        )or   
                        (
                            [Период].[Период].CurrentMember.Name = "Квартал 3"   
                        )or   
                        (
                            [Период].[Период].CurrentMember.Name = "Квартал 4"   
                        )or
                        (
                            [Период].[Период].CurrentMember.Name = "Февраль"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Март"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Апрель"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Май"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Июнь"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Июль"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Август"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Сентябрь"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Октябрь"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Ноябрь"
                        )
                        or
                        (
                            [Период].[Период].CurrentMember.Name = "Декабрь"
                        )
                    ),
                    [Период].[Период].CurrentMember.Name,
                    [Период].[Период].CurrentMember.Name + " год"   
                )   
            )
        )'  
    member [Территории].[Сопоставимый].[Уральский федеральный округ ]     
    as '[Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].DataMember'     
    set [Список все субъектов УрФО]     
    as '     
        {
            Filter     
            (
                [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].Children,
                not     
                (
                    [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember     
                )     
            )     
        }+     
        {
            [Территории].[Сопоставимый].[Уральский федеральный округ ]     
        } '     
    SET [NonFilterColumnSet]     
    AS ' filter     
        (
            Descendants     
            (
                [Период].[Период].[Данные всех периодов] ,
                [Период].[Период].[Данные всех периодов].Level ,
                SELF_AND_AFTER     
            ),
            not     
            (
                [Период].[Период].CurrentMember.Name = "Данные квартала"     
            ) and not     
            (
                [Период].[Период].CurrentMember.Name = "Данные года"     
            ) and not     
            (
                [Период].[Период].CurrentMember.Name = "Данные месяца"     
            ) and not     
            (
                [Период].[Период].CurrentMember.Name = "Данные всех периодов"     
            ) and not IsEmpty ( ( [Measures].[Значение] ) )     
        ) '     
SELECT
    NON EMPTY     
    {
        {
            [Территории].[Сопоставимый].[YearName]     
        }+ { [Список все субъектов УрФО] }     
    } ON columns,
    NON EMPTY  {[NonFilterColumnSet]} ON rows     
FROM [РЕГИОН_Оценка деятельности]
WHERE
    (
        [Measures].[Значение] ,
        [Источники данных].[Все источники данных].[РЕГИОН Оценка деятельности - Оценка деятельности губернаторов],
         [Показатели].[Оценка деятельности].[Все показатели].[<%filter%>]  
    )
]]>
</query>

  <query id="RG_0001_0002_regions">
    <![CDATA[
-- RG_0001_0002_map
With
    member [Показатели].[Оценка деятельности].[FK]
    as '[Территории].[РФ].CurrentMember.Parent.Name'
SELECT
    { [Показатели].[Оценка деятельности].[FK] }
     on columns,
    Filter
    (
        [Территории].[РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].Children,
        (
            not
            (
                [Территории].[РФ].CurrentMember is [Территории].[РФ].CurrentMember.Parent.DataMember
            )
        )
    )  on rows
FROM  [РЕГИОН_Оценка деятельности]
  ]]>
  </query>

  <query id="RG_0001_0002_Indicators">
    <![CDATA[
    with 
    member [Период].[Период].[Данные на] 
    as 'Tail 
        (
            Filter 
            (
                [Период].[Период].[День].Members,
                not IsEmpty([Measures].[Значение])
            ),
            1 
        ).Item(0)' 
    SELECT
    {[Measures].[Значение]} on columns,
    Filter 
    (
        [Показатели].[Оценка деятельности].members,
        not isEmpty ([Measures].[Значение]) and not 
        (
            [Показатели].[Оценка деятельности].CurrentMember is [Показатели].[Оценка деятельности].[Все показатели] 
        ) 
    )  ON rows 
    FROM  [РЕГИОН_Оценка деятельности] 
    where ([Период].[Период].[Данные на])      
    ]]>
  </query>

  <query id="RG_0001_0002_measures">
    <![CDATA[
    WITH 
     member [Территории].[Сопоставимый].[Код]  
    as '[Показатели].[Оценка деятельности].Properties("Код")' 
    member [Территории].[Сопоставимый].[Единицы измерения] 
    as '[Показатели].[Оценка деятельности].Properties("Единица измерения")' 
    member [Территории].[Сопоставимый].[Название периода ] 
    as '[Показатели].[Оценка деятельности].Properties("Период вывода данных")' 
    member [Территории].[Сопоставимый].[Обратный показатель ] 
    as '[Показатели].[Оценка деятельности].Properties("Обратный показатель")' 
SELECT
    NON EMPTY 
    {
        [Территории].[Сопоставимый].[Единицы измерения],
        [Территории].[Сопоставимый].[Название периода ],
        [Территории].[Сопоставимый].[Обратный показатель ],
        [Территории].[Сопоставимый].[Код]
    } ON COLUMNS 
FROM [РЕГИОН_Оценка деятельности]  
WHERE 
    (
        [Источники данных].[Все источники данных].[РЕГИОН Оценка деятельности - Оценка деятельности губернаторов],
        [Показатели].[Оценка деятельности].[Все показатели].[<%filter%>]
    ) 
    ]]>
  </query>
</root>

