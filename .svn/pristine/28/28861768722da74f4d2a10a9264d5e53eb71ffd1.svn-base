CALCULATE;

SCOPE [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[12];
   this = [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[1] - (LookupCube("[УФК_Справка по движению свободного остатка]", "([Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели].&[1], [Measures].[Сумма за период]," + MemberToStr([Период__Период].[Период__Период].CurrentMember) + ")"));
END SCOPE;

SCOPE [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[13];
   this = [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[7] - (LookupCube("[УФК_Справка по движению свободного остатка]", "([Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели].&[4], [Measures].[Сумма за период]," + MemberToStr([Период__Период].[Период__Период].CurrentMember) + ")"));
END SCOPE;

SCOPE [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[15];
   this = (LookupCube("[УФК_Справка по движению свободного остатка]", "([Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели].&[4.], [Measures].[Сумма за период]," + MemberToStr([Период__Период].[Период__Период].CurrentMember) + ")"));
END SCOPE;

SCOPE [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[14];
   this = (LookupCube("[УФК_Справка по движению свободного остатка]", "([Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели__УФК_Операции с субсидиями и субвенциями].[Показатели].&[1.], [Measures].[Сумма за период]," + MemberToStr([Период__Период].[Период__Период].CurrentMember) + ")"));
END SCOPE;

SCOPE [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[17];
   this = [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[9] - [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[7];
END SCOPE;

SCOPE [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[16];
   this = [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[8] - [Показатели__УФК_Движение свободного остатка].[Показатели__УФК_Движение свободного остатка].[Показатели].&[1];
END SCOPE;


//Вычислимые меры
CREATE MEMBER CURRENTCUBE.Measures.[Сумма с начала года] AS
/*IIF(not IsLeaf([Период].[День].CurrentMember), Tail(Filter([Период].[День].CurrentMember.Children, [Measures].CurrentMember <>0),1).Item(0),*/
CalculationPassValue(IIF([Период__Период].[Период__Период].CurrentMember.Level.Name = "(All)" or [Период__Период].[Период__Период].CurrentMember.Level.Name = "Год" or ([Период__Период].[Период__Период].CurrentMember Is OpeningPeriod([Период__Период].[Период__Период].CurrentMember.Level, Ancestor([Период__Период].[Период__Период].CurrentMember, [Период__Период].[Период__Период].[Год]))),
([Measures].[Сумма За период], [Период__Период].[Период__Период].CurrentMember),
Sum({OpeningPeriod([Период].[День].CurrentMember.Level, Ancestor([Период__Период].[Период__Период].CurrentMember, [Период__Период].[Период__Период].[Год])): [Период__Период].[Период__Период].CurrentMember}, [Measures].[Сумма За период])), 1),
FORMAT_STRING = "Currency";

SCOPE [Measures].[Сумма с начала года];
   this = IIF([Период__Период].[Период__Период].CurrentMember is 
[Период__Период].[Период__Период].[Данные всех периодов], 
Sum([Период__Период].[Период__Период].[Данные всех периодов].Children),
IIF(not IsLeaf([Период__Период].[Период__Период].CurrentMember), 
[Период__Период].[Период__Период].CurrentMember.LastChild, [Период__Период].[Период__Период].CurrentMember));
END SCOPE;