<?xml version="1.0" encoding="Windows-1251"?>
<root>
  
<query id="STAT_0001_0001_date">
<![CDATA[
-- STAT_0001_0001_date
-- <#[СТАТ_Мониторинг ситуации на рынке труда]#>
with
    member Measures.[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    {
        Tail
        (
            NonEmptyCrossjoin({[Период].[Период].Members})
        )
    } on rows
from [СТАТ_Мониторинг ситуации на рынке труда]
]]>
  </query>

<query id="STAT_0001_0001_grid">
<![CDATA[
-- STAT_0001_0001_grid
-- <#[СТАТ_Мониторинг ситуации на рынке труда]#>
with
   Member [Территории].[Сопоставимый].[Итого по УФО]
   as '[Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ]'
    set [Даты <%last_year%>]
    as 'nonemptycrossjoin
        (
            Filter
            (
                Descendants
                (
                    [Период].[Период].[Данные всех периодов].[<%last_year%>],
                    [Период].[Период].[День],
                    SELF
                ),
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года"
            )
        )'
    set [Даты <%current_year%>]
    as 'nonemptycrossjoin
        (
            Filter
            (
                Descendants
                (
                    [Период].[Период].[Данные всех периодов].[<%current_year%>],
                    [Период].[Период].[День],
                    SELF
                ),
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года"
            )
        )'
    Member [Показатели].[Рынок труда].[Общая численность зарегистрированных безработных граждан_АППГ]
    as '
        (
            [Показатели].[Рынок труда].[Все].[Общая численность зарегистрированных безработных граждан],
            [Территории].[Сопоставимый].CurrentMember,
            [Measures].CurrentMember,
            [Даты <%last_year%>].Item
            (
                Rank
                (
                    [Период].[Период].CurrentMember,
                    [Даты <%current_year%>]
                ) - 1
            )
        )'
    Member [Показатели].[Рынок труда].[Количество предприятий, на которых введены неполная рабочая неделя, неполный рабочий день_АППГ]
    as '
        (
            [Показатели].[Рынок труда].[Все].[Количество предприятий, на которых введены неполная рабочая неделя, неполный рабочий день],
            [Территории].[Сопоставимый].CurrentMember,
            [Measures].CurrentMember,
            [Даты <%last_year%>].Item
            (
                Rank
                (
                    [Период].[Период].CurrentMember,
                    [Даты <%current_year%>]
                ) - 1
            )
        )'
    set [Показатели рынка труда]
    as '
        {
            [Показатели].[Рынок труда].[Все].[Общая численность зарегистрированных безработных граждан],
            [Показатели].[Рынок труда].[Общая численность зарегистрированных безработных граждан_АППГ],
            [Показатели].[Рынок труда].[Все].[Численность экономически активного населения],
            [Показатели].[Рынок труда].[Все].[Численность уволенных работников в связи с ликвидацией организаций, сокращением численности или штата работников всего],
            [Показатели].[Рынок труда].[Все].[Численность уволенных работников в связи с ликвидацией организаций, сокращением численности или штата работников на градообразующих предприятиях],
            [Показатели].[Рынок труда].[Все].[из них обратившихся в службу занятости],
            [Показатели].[Рынок труда].[Все].[Количество работников, предупрежденных о предстоящем увольнении в связи с ликвидацией организаций, сокращением численности или штата работников],
            [Показатели].[Рынок труда].[Все].[Количество предприятий, на которых введены неполная рабочая неделя, неполный рабочий день],
            [Показатели].[Рынок труда].[Количество предприятий, на которых введены неполная рабочая неделя, неполный рабочий день_АППГ],
            [Показатели].[Рынок труда].[Все].[Кол-во работающих на этих предприятиях, всего, в т.ч.],
            [Показатели].[Рынок труда].[Все].[численность работников с неполной занятостью],
            [Показатели].[Рынок труда].[Все].[Сумма задолженности по выплате заработной платы (млн.руб.)],
            [Показатели].[Рынок труда].[Все].[Количество предприятий, имеющих задолженность по выплате заработной платы],
            [Показатели].[Рынок труда].[Все].[Количество граждан, имеющих задолженность по выплате заработной платы]
        } '   
select
    {
        {
            {
                Filter   
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].Children,
                    not 
                    (
                        [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember 
                    )  
                ) + 
                {
                   [Территории].[Сопоставимый].[Итого по УФО]
                } 
            }      
            *     
            {
                <%period_last_week_date%>,
                <%period_current_date%> 
            }   
        }   
    } on columns,
    Filter
    (
        { [Показатели рынка труда] }
        *
        {
            [Measures].[Значение],
            [Measures].[Темп прироста],
            [Measures].[Прирост]   
        },
        not (IsEmpty
        (
            (
                [Measures].[Значение],
                <%period_current_date%>
            )
        ) and 
        IsEmpty
        (
            (
                [Measures].[Значение],
                <%period_last_week_date%>
            )
        )) 
    )  on rows    
from [СТАТ_Мониторинг ситуации на рынке труда]   
  ]]>
</query>

</root>