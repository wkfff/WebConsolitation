<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0003_HMAO_date">
    <![CDATA[
-- FO_0002_0003_HMAO_date
with
    member [Measures].[ДанныеНа]
    as '<%period_dimension%>.CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                <%period_dimension%>.Members,
                not IsEmpty([Measures].[Факт]) and
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период].[Период].CurrentMember.Name <> "Данные месяца" and
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                [Период].[Период].CurrentMember.Name <> "Данные года"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_МесОтч_Доходы]
  ]]>
  </query>

  <query id="FO_0002_0003_HMAO_grid">
    <![CDATA[
-- FO_0002_0003_HMAO_detail_grid
with 
    member <%incomes_kd_dimension%>.[Доходы итого] 
    as '<%incomes_total%>' 
    member Measures.[Темп роста] 
    as '[Measures].[Темп роста к аналогичному периоду предыдущего года_Факт]' 
    member Measures.[Доля] 
    as ' 
        (
            <%incomes_kd_dimension%>.CurrentMember,
            [Measures].[Факт] 
        )/ 
        (
            <%incomes_kd_dimension%>.[Доходы итого],
            [Measures].[Факт] 
        )' 
    member Measures.[Доля прошлый год] 
    as ' 
        (
            <%incomes_kd_dimension%>.CurrentMember,
            [Measures].[Факт_прошлый год] 
        )/ 
        (
            <%incomes_kd_dimension%>.[Доходы итого],
            [Measures].[Факт_прошлый год] 
        )' 
    member Measures.[Исполнено млн] 
    as 'Measures.[Факт]  ' 
    
    member Measures.[Исполнено прошлый год млн] 
    as 'Measures.[Факт_прошлый год]  ' 
    
    member Measures.[Назначено млн] 
    as '(Measures.[Годовые назначения], <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>])  ' 
    
    member Measures.[Назначено прошлый год млн] 
    as '(Measures.[Годовые назначения], <%period_dimension%>.[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>])  ' 
    
    member Measures.[Процент выполнения прошлый год] 
    as 'IIF 
        (
            IsEmpty 
            (
                Measures.[Назначено прошлый год млн] 
            ) or Measures.[Назначено прошлый год млн] = 0,
            null,
            Measures.[Исполнено прошлый год млн] / Measures.[Назначено прошлый год млн]
        )' 

    member Measures.[% выполнения годовых назначений прошлый год]    
    as '(<%period_dimension%>.[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
         Measures.[% выполнения годовых назначений])
    '  
    
    member  <%region_dimension%>.[Консолидированный бюджет субъекта ]
    as '(<%regions_consolidate_level%>, <%consolidate_document_skif_type%>)' 
    
    member <%region_dimension%>.[<%own_subject_budget_name%>]
    as '(<%regions_consolidate_level%>, <%consolidate_document_skif_type%>)' 
    
    member <%region_dimension%>.[Местные бюджеты]
    as '(<%regions_consolidate_level%>, <%consolidate_document_skif_type%>)'    
        
    member [Уровни бюджета].[СКИФ].[Уровень бюджета ]
    as 'IIF
        (
            <%region_dimension%>.CurrentMember is  <%region_dimension%>.[Консолидированный бюджет субъекта ],
            [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет субъекта],
            IIF
            (
               <%region_dimension%>.CurrentMember is <%region_dimension%>.[<%own_subject_budget_name%>],
               [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта],
               IIF
               (
                  <%region_dimension%>.CurrentMember is <%region_dimension%>.[Местные бюджеты],
                  [Уровни бюджета].[СКИФ].[Все].[Конс.бюджет МО],
                  <%region_budget_skif_level%>
               )
            )
        ) '  
    member [Уровни бюджета].[СКИФ].[Бюджет гор.округа, мун.района и поселения] 
    as 'Aggregate
        (
          {
            [Уровни бюджета].[СКИФ].[Бюджет поселения],
            [Уровни бюджета].[СКИФ].[Бюджет гор.округа],
            [Уровни бюджета].[СКИФ].[Бюджет района]
          }
        )'   
        
    member [Районы].[Сопоставимый].[Городские округа ] 
    as 'Aggregate
        (
           [Города ]
        )' 
    member [Районы].[Сопоставимый].[Муниципальные районы ] 
    as 'Aggregate
        (
           [Районы ]
        )'    
    set [Районы ]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF    
            ),
            not    
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"    
            )    
        )'    
    set [Города ]    
    as 'Filter    
        (
            Descendants    
            (
                [Районы].[Сопоставимый].[Все районы],
                <%regions_level%>,
                SELF    
            ),
            not    
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember    
            ) and    
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"   
            )    
        )'       
	 member Measures.[Уровень] 
    as 'IIF(
	          (
			     [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember is [КД__Сопоставимый План].[КД__Сопоставимый План].[Налоги, сборы и регулярные платежи за пользование природными ресурсами ]
			  ) or 
			  (
			     [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember is [КД__Сопоставимый План].[КД__Сопоставимый План].[Платежи при пользовании природными ресурсами ]
			  ) or 
			  (
			     [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember is [КД__Сопоставимый План].[КД__Сопоставимый План].[Штрафы, санкции, возмещение ущерба ]
			  ),
			  "Подгруппа",
	          <%incomes_kd_dimension%>.CurrentMember.Level.Name
			)' 
	  member Measures.[Код]      
    as 'IIF     
        (
            	               
            (
                			     [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember is [КД__Сопоставимый План].[КД__Сопоставимый План].[Налоги, сборы и регулярные платежи за пользование природными ресурсами ] 			       
            ) ,
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ].Properties("Код"),
            IIF     
            (
                	 			     
                (
                    			     [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember is [КД__Сопоставимый План].[КД__Сопоставимый План].[Платежи при пользовании природными ресурсами ] 			     
                ),
                [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ].Properties("Код"),
                IIF   
                (
                    (
                        [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember is [КД__Сопоставимый План].[КД__Сопоставимый План].[Штрафы, санкции, возмещение ущерба ] 			  
                    ),
                    [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].Properties("Код"),
                    [КД__Сопоставимый План].[КД__Сопоставимый План].CurrentMember.Properties("Код")  
                )          
            )
        )' 
	member [КД__Сопоставимый План].[КД__Сопоставимый План].[Налоги, сборы и регулярные платежи за пользование природными ресурсами ]
	as '[КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ]'
	member [КД__Сопоставимый План].[КД__Сопоставимый План].[Платежи при пользовании природными ресурсами ]
	as '[КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ]'
    member [КД__Сопоставимый План].[КД__Сопоставимый План].[Штрафы, санкции, возмещение ущерба ]
	as '[КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА]'
select
    {
        Measures.[Код],
        Measures.[Назначено млн],
        Measures.[Исполнено млн],
        [Measures].[% выполнения годовых назначений],
        Measures.[Исполнено прошлый год млн],
        Measures.[Темп роста],
        Measures.[Уровень]
    } on columns,
   non empty filter 
    (
        {
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Налоги, сборы и регулярные платежи за пользование природными ресурсами ],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ].[Сборы за пользование объектами животного мира и за пользование объектами водных биологических ресурсов],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ].[Сборы за пользование объектами животного мира и за пользование объектами водных биологических ресурсов].[Сбор за пользование объектами животного мира],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ].[Сборы за пользование объектами животного мира и за пользование объектами водных биологических ресурсов].[Сбор за пользование объектами водных биологических ресурсов (исключая внутренние водные объекты)],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[НАЛОГИ, СБОРЫ И РЕГУЛЯРНЫЕ ПЛАТЕЖИ ЗА ПОЛЬЗОВАНИЕ ПРИРОДНЫМИ РЕСУРСАМИ].[Сборы за пользование объектами животного мира и за пользование объектами водных биологических ресурсов].[Сбор за пользование объектами водных биологических ресурсов (по внутренним водным объектам)],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Платежи при пользовании природными ресурсами ],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ПЛАТЕЖИ ПРИ ПОЛЬЗОВАНИИ ПРИРОДНЫМИ РЕСУРСАМИ].[Плата за негативное воздействие на окружающую среду],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Штрафы, санкции, возмещение ущерба ],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации об особо охраняемых природных территориях],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации об охране и использовании животного мира],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение законодательства об экологической экспертизе],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение законодательства в области охраны окружающей среды],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение земельного законодательства],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение лесного законодательства],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Денежные взыскания (штрафы) за нарушение законодательства Российской Федерации о недрах, об особо охраняемых природных территориях, об охране и использовании животного мира, об экологической экспертизе, в области охраны окружающей среды, земельного законодательства, лесного законодательства, водного законодательства].[Денежные взыскания (штрафы) за нарушение водного законодательства],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Суммы по искам о возмещении вреда, причиненного окружающей среде],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Суммы по искам о возмещении вреда, причиненного окружающей среде].[Суммы по искам о возмещении вреда, причиненного окружающей среде, подлежащие зачислению в бюджеты субъектов Российской Федерации],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Суммы по искам о возмещении вреда, причиненного окружающей среде].[Суммы по искам о возмещении вреда, причиненного окружающей среде, подлежащие зачислению в бюджеты городских округов],
            [КД__Сопоставимый План].[КД__Сопоставимый План].[Все коды доходов].[НАЛОГОВЫЕ И НЕНАЛОГОВЫЕ ДОХОДЫ].[ШТРАФЫ, САНКЦИИ, ВОЗМЕЩЕНИЕ УЩЕРБА].[Суммы по искам о возмещении вреда, причиненного окружающей среде].[Суммы по искам о возмещении вреда, причиненного окружающей среде, подлежащие зачислению в бюджеты муниципальных районов] 
        } ,
        not IsEmpty (Measures.[Назначено млн]) or not IsEmpty (Measures.[Исполнено млн]) 
    ) on rows
from [ФО_МесОтч_Доходы]
where 
    (
        <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        <%selected_region%>,
        [Уровни бюджета].[СКИФ].[Уровень бюджета ],
        <%region_document_skif_type%>
    ) 
  ]]>
  </query>

</root>