<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0061_rests_date">
    <![CDATA[
with   
    MEMBER [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer]   
    AS ' Aggregate   
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]   
            }   
        )'   
    member [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Slice]  
    as '           AGGREGATE  
        (
            {
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения]  
            } 
        )'  
    member [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Slicer]  
    as                   '    AGGREGATE  
        (
            {
                Except  
                (
                    [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].Children ,
                    {
                        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Несопоставленные данные],
                        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ],
                        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Расходы бюджета - ИТОГО],
                        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов]  
                    }  
                )  
            }  
        )'   
    member [Measures].[ДанныеНа]   
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'   
    set [NonEmptySet]   
    as 'Tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Год],
                    SELF   
                ),
                not IsEmpty     
                (
                    [Measures].[Наличие на конец года]   
                )   
            ),
            1   
        )'   
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows   
from   [ФО_ГодОтч_Сеть Штаты Контингент]   
where   
    (
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer],
        [КСШК__Сопоставимый].[КСШК__Сопоставимый].[Все].[Штатные единицы],
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Slice]  ,
        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Slicer]
    )   
  ]]>
  </query>

  <query id="FO_0002_0061_table">
    <![CDATA[
with                            
    member [Оплата труда] as'IIF                        
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого],
            LookupCube                        
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                        
                (
                    AGGREGATE                        
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа],
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]                        
                        },
                        aggregate                       
                        (
                            {
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения]               
                            },
                            aggregate                        
                            (
                                {
                                    [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на заработную плату] ,
                                    [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на начисления на выплаты по оплате труда]                        
                                },
                                AGGREGATE                        
                                (
                                    {
                                        " + SetToStr([NonFilterRowSet]) + "                        
                                    },
                                    (
                                        <%period_dimension%>,
                                        [Measures].[Факт]                        
                                    )                        
                                )                        
                            )                       
                        )                        
                    )                        
                )"                        
            ),
            LookupCube                        
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                        
                (
                    aggregate                        
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]                        
                        },
                        aggregate                      
                        (
                            {
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения]               
                            },
                            aggregate                        
                            (
                                {
                                    [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на заработную плату] ,
                                    [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на начисления на выплаты по оплате труда]                        
                                },
                                (
                                    <%period_dimension%>,
                                    [Measures].[Факт],
                                    " +  MemberToStr                        
                                    (
                                        [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember                        
                                    ) + "                        
                                )                        
                            )                        
                        )               
                    )                        
                )"                        
            )                        
        )'                    
    member [Расходы по содержанию органов местного самоуправления] as'IIF                    
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого],
            LookupCube                    
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                    
                (
                    AGGREGATE                    
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа],
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]                    
                        },
                        aggregate                 
                        (
                            {
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения]               
                            },
                            AGGREGATE                    
                            (
                                {
                                    " + SetToStr([NonFilterRowSet]) + "                    
                                },
                                (
                                    <%period_dimension%>,
                                    [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего],
                                    [Measures].[Факт]                    
                                )                     
                            )              
                        )                 
                    )                    
                )"                    
            ),
            LookupCube                    
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "                    
                (
                    aggregate                    
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]                    
                        },
                        aggregate                  
                        (
                            {
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения]             
                            },
                            (
                                <%period_dimension%>,
                                [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего],
                                [Measures].[Факт],
                                " +  MemberToStr                    
                                (
                                    [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember                    
                                ) + "                    
                            )                      
                        )             
                    )           
                )"                    
            )                    
        )'                     
    member  [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer]                               
    as '    aggregate                               
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа],
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]                               
            }                               
        ) '                               
    member [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Slicer]               
    as '      	 aggregate                               
        (
            {
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет гор.округа],
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет района],
                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Бюджет поселения]                               
            }                               
        )'               
    Set [NonFilterRowSet]                                  
    as 'Filter                                  
        (
            Descendants                                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF                                  
            ),
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and not isEmpty                                  
            (
                [Measures].[Среднегодовое количество_выполнено]                                  
            )                                  
        )'                                  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]                                  
    as 'Aggregate([NonFilterRowSet])'                                  
    member [Measures].[Факт ]                                 
    as 'IIF (
              IsEmpty([Measures].[Факт]),
              null,
              [Measures].[Факт]/1000
            )',format_string = '0.00' 
            
    member [Оплата труда ]                      
    as 'IIF ( 
              IsEmpty([Оплата труда]),
              null,
              [Оплата труда]/1000
            )',format_string = '0.00' 
    member [Расходы по содержанию органов местного самоуправления ] 
        as 'IIF ( 
              IsEmpty([Расходы по содержанию органов местного самоуправления]),
              null,
              [Расходы по содержанию органов местного самоуправления]/1000
            )',format_string = '0.00' 
    member [Расчетная мера_1]                  
    as 'IIF    
        (
            (
                IsEmpty        
                (
                    [Расходы по содержанию органов местного самоуправления]        
                )OR IsEmpty([Measures].[Факт])        
            ) OR ( [Measures].[Факт] = 0 ),
            0,
            [Расходы по содержанию органов местного самоуправления ]/[Measures].[Факт ]         
        )',
        format_string = '0.00'          
    member [Расчетная мера_2]   
    as 'IIF   
        (
            (
                IsEmpty ( [Оплата труда] )OR IsEmpty([Measures].[Факт])   
            ) OR ( [Measures].[Факт] = 0 ),
            0,
            [Оплата труда ]/[Measures].[Факт ]   
        )',
        format_string = '0.00' 
    member [Материальные затраты] 
    as 'IIF
        (
            ISEmpty([Оплата труда]) OR IsEmpty
            (
                [Расходы по содержанию органов местного самоуправления]
            ),
            0,
             [Расходы по содержанию органов местного самоуправления ]-[Оплата труда ]
        )',
        format_string = '0.00'
            member [Расчетная мера_3]
    as 'IIF
        (
            (
                IsEmpty ( [Материальные затраты] )OR IsEmpty([Measures].[Факт])
            ) OR ( [Measures].[Факт] = 0 ),
            0,
            [Материальные затраты]/[Measures].[Факт ]
        )',
        format_string = '0.00'
select
    {
        [Measures].[Факт ],
        [Расходы по содержанию органов местного самоуправления ],        
        [Оплата труда ],        
        [Материальные затраты],
        [Расчетная мера_1],
        [Расчетная мера_2],
        [Расчетная мера_3]
    } on columns,
    {
        [NonFilterRowSet],
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]                          
    }on rows                          
from  [ФО_МесОтч_Расходы]                                 
where                                  
    (
        <%period_dimension%>,
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer],
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Slicer] ,
        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Расходы бюджета - ИТОГО]          
    )         
      ]]>
  </query>


</root>
