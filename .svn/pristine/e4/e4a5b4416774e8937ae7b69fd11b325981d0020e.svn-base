<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="Oil_0004_0003_incomes_date">
    <![CDATA[
    --Oil_0004_0003_incomes_date
with 
    member [Measures].[ДанныеНа] 
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as '{ Head 
        (
            Filter 
            (
                Descendants 
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF_AND_AFTER 
                ) ,
                not IsEmpty 
                (
                    (
                        [Measures].[Цена],
                        [Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember 
                    ) 
                ) and not 
                (
                    [Measures].[Цена],
                    [Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember 
                ) = 0 and 
                (
                    [Период__Период].[Период__Период].CurrentMember.Parent.Parent.Parent.Parent.Name = tail 
                    (
                        Filter 
                        (
                            Descendants 
                            (
                                [Период__Период].[Период__Период].[Данные всех периодов],
                                [Период__Период].[Период__Период].[День],
                                SELF_AND_AFTER 
                            ) ,
                            not IsEmpty 
                            (
                                (
                                    [Measures].[Цена],
                                    [Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember 
                                ) 
                            ) and not 
                            (
                                [Measures].[Цена],
                                [Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember 
                            ) = 0 
                        ),
                        1 
                    ).Item(0).Parent.Parent.Parent.Parent.Properties("Name") 
                ) 
            ),
            1 
        ), tail 
        (
            Filter 
            (
                Descendants 
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF_AND_AFTER 
                ) ,
                not IsEmpty 
                (
                    (
                        [Measures].[Цена],
                        [Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember 
                    ) 
                ) and not 
                (
                    [Measures].[Цена],
                    [Продукция__Сопоставимый].[Продукция__Сопоставимый].CurrentMember 
                ) = 0 
            ),
            2 
        )}' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from   [ФСГС_Цены РФ] 
where 
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Уральский федеральный округ].[Ханты-Мансийский автономный округ],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-95 и выше] 
    ) 
  ]]>
  </query>

  <query id="Oil_0004_0003_table1">
    <![CDATA[
    --Oil_0004_0003_table1
   WITH    
    member [Measures].[Текущая средняя цена ]    
    as 'measures.[Текущая цена]'    
    member measures.[Текущая цена]    
    as ' IIF    
        (
            (
                <%period_cur_date%>,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Цена] 
            ) = 0,
            null,
            (
                <%period_cur_date%>,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Цена]    
            )    
        ) '    
    member measures.[Прошлая цена]    
    as ' IIF    
        (
            (
                <%period_last_date%>,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Цена]    
            ) = 0,
            null,
            (
                <%period_last_date%>,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Цена]    
            )    
        ) '    
    member measures.[конец года цена]    
    as ' IIF    
        (
            (
                <%period_first_year%>,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Цена]    
            ) = 0,
            null,
            (
                <%period_first_year%>,
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Measures].[Цена]    
            )    
        ) '    
    member measures.[Абсолютное отклонение к прошлой дате]    
    as 'measures.[Текущая цена]  - measures.[Прошлая цена]'    
    member measures.[Темп прироста (динамика к предыдущему периоду)]    
    as 'IIF    
        (
            not IsEmpty(measures.[Прошлая цена]) and not (measures.[Прошлая цена] = 0),
            (
                measures.[Текущая цена] / measures.[Прошлая цена] - 1    
            )    
            * 100,
            null    
        )'    
    member measures.[Темп прироста (динамика за период с начала года) ]  
    as 'IIF  
        (
            not IsEmpty(measures.[конец года цена]) and not  
            (
                measures.[конец года цена] = 0  
            ) and not IsEmpty(measures.[Текущая цена]) and not ( measures.[Текущая цена] = 0 ),
            (
                measures.[Текущая цена] / measures.[конец года цена] - 1  
            )  
            * 100,
            null  
        )'  
    member measures.[Абсолютное отклонение к началу года]  
    as 'IIF  
        (
            isEmpty(measures.[конец года цена]) or isEmpty(measures.[Текущая цена]),
            null,
            measures.[Текущая цена]  - measures.[конец года цена]  
        )'  
    set [Территории]    
    as 'filter    
        (
            Descendants    
            (
                [Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember,
                [Территории__Сопоставимый].[Территории__Сопоставимый].[Субъект РФ],
                LEAVES    
            ),
            not [Территории__Сопоставимый].[Территории__Сопоставимый].currentmember.is_datamember and not IsEmpty ([Measures].[Цена])    
        )'    
    member measures.[Территория ]    
    as '[Территории__Сопоставимый].[Территории__Сопоставимый].CurrentMember.Name'     
member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-80] 
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки А-76 (АИ-80)]' 
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-92] 
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-92 (АИ-93 и т.п.)]' 
    member [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-95] 
    as '[Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-95 и выше]' 
SELECT
    {
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>],
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].DATAMEMBER,
        [Территории__Сопоставимый].[Территории__Сопоставимый].[Все территории].[Российская  Федерация].[Приволжский федеральный округ].DATAMEMBER  
    }  
    *  
    {
        [Measures].[Текущая средняя цена ],
        measures.[Абсолютное отклонение к прошлой дате],
        measures.[Темп прироста (динамика к предыдущему периоду)],
        measures.[Абсолютное отклонение к началу года],
        measures.[Темп прироста (динамика за период с начала года) ]  
    } on columns,
    {        
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-92],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Бензин марки АИ-95],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Дизельное топливо]   
    } on rows  
from   [ФСГС_Цены РФ]    
where    
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена] 
    )
  ]]>
  </query>
 

 
  <query id="Oil_0004_0003_chart1_v">
    <![CDATA[
    --Oil_0004_0003_chart1_v
   WITH
    member measures.[Бензин АИ-80 ]
    as ' IIF
        (
            (
                [Период__Период].[Период__Период].CurrentMember,
                [Measures].[Цена]
            ) = 0,
            null,
            (
                [Период__Период].[Период__Период].CurrentMember,
                measures.[Цена]
            )
        )'
    SET [FilterColumnSet]
    AS 'tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF_AND_AFTER
                ) ,
                not IsEmpty
                (
                    (
                        measures.[Цена]
                    )
                ) and not
                (
                    measures.[Цена]
                ) = 0
            ),
            26
        )'
    member measures.[Период ]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
SELECT
    {
        measures.[Период ],
        measures.[Бензин АИ-80 ]
    } on columns,
    { [FilterColumnSet] } on rows
from   [ФСГС_Цены РФ]
where
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки А-76 (АИ-80)]
    )
      ]]>
  </query>

  <query id="Oil_0004_0003_chart2_v">
    <![CDATA[
    --Oil_0004_0003_chart2_v
   WITH
    member measures.[Бензин АИ-92 ]
    as ' IIF
        (
            (
                [Период__Период].[Период__Период].CurrentMember,
                [Measures].[Цена]
            ) = 0,
            null,
            (
                [Период__Период].[Период__Период].CurrentMember,
                measures.[Цена]
            )
        )'
    SET [FilterColumnSet]
    AS 'tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF_AND_AFTER
                ) ,
                not IsEmpty
                (
                    (
                        measures.[Цена]
                    )
                ) and not
                (
                    measures.[Цена]
                ) = 0
            ),
            26
        )'
    member measures.[Период ]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
SELECT
    {
        measures.[Период ],
        measures.[Бензин АИ-92 ]
    } on columns,
    { [FilterColumnSet] } on rows
from   [ФСГС_Цены РФ]
where
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-92 (АИ-93 и т.п.)]
    )
      ]]>
  </query>

  <query id="Oil_0004_0003_chart3_v">
    <![CDATA[
    --Oil_0004_0003_chart3_v
WITH
    member measures.[Бензин АИ-95 ]
    as ' IIF
        (
            (
                [Период__Период].[Период__Период].CurrentMember,
                [Measures].[Цена]
            ) = 0,
            null,
            (
                [Период__Период].[Период__Период].CurrentMember,
                measures.[Цена]
            )
        )'
    SET [FilterColumnSet]
    AS 'tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF_AND_AFTER
                ) ,
                not IsEmpty
                (
                    (
                        measures.[Цена]
                    )
                ) and not
                (
                    measures.[Цена]
                ) = 0
            ),
            26
        )'
    member measures.[Период ]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
SELECT
    {
        measures.[Период ],
        measures.[Бензин АИ-95 ]
    } on columns,
    { [FilterColumnSet] } on rows
from   [ФСГС_Цены РФ]
where
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Бензин автомобильный марки АИ-95 и выше]
    )
      ]]>
  </query>

  <query id="Oil_0004_0003_chart4_v">
    <![CDATA[
    --Oil_0004_0003_chart4_v
    WITH       
    member [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]       
    as 'Aggregate       
        (
            Filter       
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
                not isempty      
                (
                    [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
                ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
            )       
        )/ Filter       
        (
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[Организация].members,
            not isempty      
            (
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember       
            ) and [Организации__Предприятия торговли].[Организации__Предприятия торговли].currentmember > 0       
        ).count '   
    member measures.[Цена ]   
    as ' 
        (
            measures.[Цена],
            [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion]  
        )'  
    member measures.[Бензин АИ-98 ]       
    as ' IIF       
        (
            (
                [Период__День].[Период__День].CurrentMember,
                measures.[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            ) = 0,
            null,
            (
                [Период__День].[Период__День].CurrentMember,
                measures.[Цена],
                [Организации__Предприятия торговли].[Организации__Предприятия торговли].[sumregion] 
            )       
        )'   
    SET [FilterColumnSet]   
    AS 'tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__День].[Период__День].[Данные всех периодов],
                    [Период__День].[Период__День].[День],
                    SELF_AND_AFTER   
                ) ,
                not IsEmpty   
                (
                    (
                        measures.[Цена],
                        [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember
                    )   
                ) and not   
                (
                    measures.[Цена],
                    [Организации__Товары и услуги].[Организации__Товары и услуги].CurrentMember   
                ) = 0   
            ),
            26   
        )'   
    member measures.[Период ]       
    as '[Период__День].[Период__День].CurrentMember.UniqueName'      
SELECT
    {
        measures.[Период ],
        measures.[Бензин АИ-98 ]       
    } on columns,
    { [FilterColumnSet] } on rows      
FROM [ОРГАНИЗАЦИИ_Цены и тарифы]       
WHERE       
    (
        [Источники данных].[Источники данных].[Все источники данных].[СТАТ Отчетность - ДЭ Еженедельная],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]<%Mo%>,
        [Организации__Товары и услуги].[Организации__Товары и услуги].[Все товары и услуги].[Непродовольственные товары].[Горюче-смазочные материалы].[Бензин марки АИ-98]      
    ) 
      ]]>
  </query>

  <query id="Oil_0004_0003_chart5_v">
    <![CDATA[
    --Oil_0004_0003_chart5_v
  WITH
    member measures.[Дизельное топливо ]
    as ' IIF
        (
            (
                [Период__Период].[Период__Период].CurrentMember,
                [Measures].[Цена]
            ) = 0,
            null,
            (
                [Период__Период].[Период__Период].CurrentMember,
                measures.[Цена]
            )
        )'
    SET [FilterColumnSet]
    AS 'tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[День],
                    SELF_AND_AFTER
                ) ,
                not IsEmpty
                (
                    (
                        measures.[Цена]
                    )
                ) and not
                (
                    measures.[Цена]
                ) = 0
            ),
            26
        )'
    member measures.[Период ]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
SELECT
    {
        measures.[Период ],
        measures.[Дизельное топливо ]
    } on columns,
    { [FilterColumnSet] } on rows
from   [ФСГС_Цены РФ]
where
    (
        [Организации__Тип цены].[Организации__Тип цены].[Все типы цен].[Средняя розничная цена],
        [Территории].[Сопоставимый].[Все территории].[Российская  Федерация].[<%region%>].[<%state_area%>],
        [Продукция__Сопоставимый].[Продукция__Сопоставимый].[Все виды продукции].[Дизельное топливо]
    )
      ]]>
  </query>

</root>