<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0004_date">
    <![CDATA[
-- FO_0035_0004_date
-- <#[ФО_Исполнение кассового плана]#>
with
    member Measures.[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
select
    {Measures.[ДанныеНа]} on columns,
    Tail
    (
        NonEmptyCrossjoin
        (
            OpeningPeriod
            (
                [Период].[Период].[Месяц],
                [Период].[Период].[Данные всех периодов].[2008]
            ) : ClosingPeriod
            (
                [Период].[Период].[Месяц],
                [Период].[Период].[Данные всех периодов].[2012]
            )
            //{[Период].[Период].[Данные всех периодов].[2010].[Полугодие 1].[Квартал 1].[Февраль]}
        )
    ) on rows
from [ФО_Исполнение кассового плана]
  ]]>
  </query>

  <query id="FO_0035_0004_grid1">
    <![CDATA[
-- FO_0035_0004_grid1
-- <#[ФО_Исполнение кассового плана]#>
with     
    member [Measures].[Факт_Период, тыс.руб.]     
    as '[Measures].[Факт_Период] / 1000'     
    member [Показатели].[ИспКасПлан].[Кассовый план ]
    as '
        (
            [Measures].[План_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] 
        ) / 1000'
    member [Показатели].[ИспКасПлан].[План ]     
    as '         
        (
            [Measures].[План_Период],
            [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета]
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Факт ]         
    as '         
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО]         
        ) / 1000 '     
    member [Показатели].[ИспКасПлан].[Остаток средств на начало дня по факту ]         
    as 'IIF 
        (  [Период].[Период].CurrentMember is [Период].[Период].[Остаток лимита с начала года (на начало месяца)] or
           [Период].[Период].CurrentMember is [Период].[Период].[Остаток лимита с начала года (на конец месяца)] or
           [Период].[Период].CurrentMember is [Период].[Период].[Всего заявлено платежных документов],
           null,       
           (
               [Measures].[Факт_Период],
               [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня по факту]         
           ) / 1000
        )'     
    member [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ]         
    as 'IIF         
        (
            IsEmpty         
            (
                [Показатели].[ИспКасПлан].[Кассовый план ]         
            ) or [Показатели].[ИспКасПлан].[Кассовый план ] = 0,
            null,
            [Показатели].[ИспКасПлан].[Факт ] / [Показатели].[ИспКасПлан].[Кассовый план ]         
        )'     
    member [Показатели].[ИспКасПлан].[Прочие поступления ]        
    as '        
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего]        
        ) / 1000'     
    member [Период].[Период].[Последний непустой день для Федеральных средств]       
    as 'Tail      
        (
            Filter       
            (
                Descendants       
                (
                    [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                    [Период].[Период].[День],
                    SELF       
                ),
                not IsEmpty       
                (
                    [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]       
                ) and not       
                (
                    [Период].[Период].CurrentMember is [Период].[Период].CurrentMember.Parent.DataMember       
                ) and [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"       
            )       
        ).Item(0)'     
    member [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]         
    as 'IIF        
        (
            [Период].[Период].CurrentMember is [Период].[Период].[Итого ],
            (
                [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ],
                [Период].[Период].[Последний непустой день для Федеральных средств]     
            ),
            (
                [Measures].[Факт_Период],
                [Показатели].[ИспКасПлан].[Все].[Федеральные средства на счетах в ДФ]         
            ) / 1000     
        )'        
    set [Фактически произведенные расходы]         
    as '         
        {
            [Показатели].[ИспКасПлан].[Все].[Долг],
            [Показатели].[ИспКасПлан].[Все].[Заработная плата],
            [Показатели].[ИспКасПлан].[Все].[Социальные выплаты],
            [Показатели].[ИспКасПлан].[Все].[Первоочередные платежи],
            [Показатели].[ИспКасПлан].[Все].[Текущий ремонт],
            [Показатели].[ИспКасПлан].[Все].[Прочие расходы],
            [Показатели].[ИспКасПлан].[Все].[Субсидии юридическим лицам],
            [Показатели].[ИспКасПлан].[Все].[ФОМС],
            [Показатели].[ИспКасПлан].[Все].[Межбюджет],
            [Показатели].[ИспКасПлан].[Все].[Основные средства],
            [Показатели].[ИспКасПлан].[Все].[Капитальные вложения],
            [Показатели].[ИспКасПлан].[Все].[Дорожное хозяйство]         
        }'         
    member [Показатели].[ИспКасПлан].[Итого ]         
    as '[Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО]'         
    member [Показатели].[ИспКасПлан].[Остаток средств на конец дня по факту ]         
    as 'IIF 
         (
          [Период].[Период].CurrentMember is [Период].[Период].[Остаток лимита с начала года (на начало месяца)] or
          [Период].[Период].CurrentMember is [Период].[Период].[Остаток лимита с начала года (на конец месяца)] or
          [Период].[Период].CurrentMember is [Период].[Период].[Всего заявлено платежных документов],
          null,
          (
              [Measures].[Факт_Период],
              [Показатели].[ИспКасПлан].[Все].[Остаток средств на конец дня по факту]         
          ) / 1000
        )'     
    set [Даты месяца]     
    as 'Filter         
        (
            Descendants         
            (
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                [Период].[Период].[День],
                SELF         
            ),
            not IsEmpty         
            (
                [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО]         
            ) and not         
            (
                [Период].[Период].CurrentMember is [Период].[Период].CurrentMember.Parent.DataMember         
            ) and [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"         
        )  '         
    member [Период].[Период].[Итого ]         
    as 'IIF         
        (
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня по факту] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на конец дня по факту] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам],
            null,
            Sum         
            (
                [Даты месяца],
                [Показатели].[ИспКасПлан].CurrentMember         
            )          
        )'         
    member [Период].[Период].[% исполнения к лимиту месяца ]         
    as 'IIF         
        (
            (
                IsEmpty         
                (
                    (
                        [Период].[Период].[Итого ],
                        [Measures].[План_Период],
                        [Показатели].[ИспКасПлан].CurrentMember         
                    )         
                ) or         
                (
                    [Период].[Период].[Итого ],
                    [Measures].[План_Период],
                    [Показатели].[ИспКасПлан].CurrentMember         
                ) = 0 or [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] or 
                [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ] or
                [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ] or 
                [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего] or
                [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета]
            ),
            null,
            (
                [Период].[Период].[Итого ],
                [Measures].[Факт_Период],
                [Показатели].[ИспКасПлан].CurrentMember         
            ) /         
            (
                [Период].[Период].[Итого ],
                [Measures].[План_Период],
                [Показатели].[ИспКасПлан].CurrentMember         
            )         
        )'         
    member [Период].[Период].[Удельный вес в общей сумме расходов, % ]         
    as 'IIF         
        (
            IsEmpty         
            (
                (
                    [Показатели].[ИспКасПлан].[Итого ],
                    [Период].[Период].[Итого ]         
                )         
            ) or         
            (
                [Показатели].[ИспКасПлан].[Итого ],
                [Период].[Период].[Итого ]         
            ) = 0 or [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета],
            null,
            (
                [Период].[Период].[Итого ],
                [Показатели].[ИспКасПлан].CurrentMember         
            ) /         
            (
                [Показатели].[ИспКасПлан].[Итого ],
                [Период].[Период].[Итого ]         
            )         
        )'         
    member [Период].[Период].[Остаток лимита месяца]
    as 'IIF         
        (
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета],
            null,
            (
                [Период].[Период].[Итого ],
                [Measures].[План_Период],
                [Показатели].[ИспКасПлан].CurrentMember         
            ) -         
            (
                [Период].[Период].[Итого ],
                [Measures].[Факт_Период],
                [Показатели].[ИспКасПлан].CurrentMember         
            )         
        )'     
    member [Период].[Период].[Остаток лимита с начала года (на начало месяца)]   
    as 'IIF     
        (
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего]  or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам],
            null,
            Sum    
            (
                Filter 
                (
                    Descendants 
                    (
                        [Период].[Период].[Данные всех периодов].[<%period_year%>],
                        [Период].[Период].[Месяц],
                        SELF 
                    ),
                    [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                    [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                    [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                    [Период].[Период].CurrentMember.Name <> "Данные года" and
                    [Период].[Период].CurrentMember.Name <> "Данные месяца" and
                    [Период].[Период].CurrentMember.Properties("PKID") < [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].Properties("PKID") 
                ),
                (
                    [Период].[Период].CurrentMember,
                    [Measures].[План_Период],
                    [Показатели].[ИспКасПлан].CurrentMember     
                ) -     
                (
                    [Период].[Период].CurrentMember,
                    [Measures].[Факт_Период],
                    [Показатели].[ИспКасПлан].CurrentMember     
                )    
            )     
        )'
    member [Период].[Период].[Остаток лимита с начала года (на конец месяца)]  
    as 'IIF  
        (
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета],
            null,
            IIF  
            (
                [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам],
                -(
                    [Показатели].[ИспКасПлан].[Итого ],
                    [Период].[Период].[Остаток лимита с начала года (на конец месяца)]  
                )
                +
                (
                    [Показатели].[ИспКасПлан].[Факт ],
                    [Период].[Период].[Итого ]
                ) * 1000 +
                (
                    [Показатели].[ИспКасПлан].[Прочие поступления ],
                    [Период].[Период].[Итого ]
                ) * 1000 -
                (
                    [Показатели].[ИспКасПлан].[Итого ],
                    [Период].[Период].[Итого ]
                ),
                [Период].[Период].[Остаток лимита месяца] + [Период].[Период].[Остаток лимита с начала года (на начало месяца)] 
            )  
        )'
    member [Период].[Период].[Всего заявлено платежных документов]  
    as 'IIF  
        (
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета] or
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам],
            null,
            (
                [Measures].[План],
                [Показатели].[ИспКасПлан].CurrentMember,
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                <%selected_budget%>
            ) * 1000
        )'         
select
    {
        {
            [Показатели].[ИспКасПлан].[Остаток средств на начало дня по факту ],
            [Показатели].[ИспКасПлан].[Кассовый план ],
            [Показатели].[ИспКасПлан].[План ],
            [Показатели].[ИспКасПлан].[Факт ],
            [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ],
            [Показатели].[ИспКасПлан].[Прочие поступления ],
            [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]         
        } + [Фактически произведенные расходы] +         
        {
            [Показатели].[ИспКасПлан].[Итого ],
            [Показатели].[ИспКасПлан].[Остаток средств на конец дня по факту ],
            [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам]
        }         
    } on columns,
    {
        [Даты месяца] +         
        {
            [Период].[Период].[Итого ],
            [Период].[Период].[% исполнения к лимиту месяца ],
            [Период].[Период].[Удельный вес в общей сумме расходов, % ],
            [Период].[Период].[Всего заявлено платежных документов],
            [Период].[Период].[Остаток лимита с начала года (на начало месяца)],
            [Период].[Период].[Остаток лимита месяца],
            [Период].[Период].[Остаток лимита с начала года (на конец месяца)]
        }         
    } on rows         
from [ФО_Исполнение кассового плана]         
where         
    (
        [Measures].[Факт_Период],
        <%selected_budget%>
    )         
  ]]>
  </query>

  <query id="FO_0035_0004_grid2">
    <![CDATA[
-- FO_0035_0004_grid2
-- <#[ФО_Исполнение кассового плана]#>
with     
    member [Measures].[Факт, тыс.руб.]     
    as '[Measures].[Факт] / 1000'     
    member [Показатели].[ИспКасПлан].[Кассовый план ]
    as '
        (
            [Measures].[План],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО] 
        ) / 1000'
    member [Показатели].[ИспКасПлан].[План ]     
    as '         
        (
            [Measures].[План],
            [Показатели].[ИспКасПлан].[Все].[Доходы областного бюджета]
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Факт ]         
    as '         
        (
            [Measures].[Факт],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО]         
        ) / 1000 '     
    member [Показатели].[ИспКасПлан].[Остаток средств на начало дня по факту ]         
    as '         
        (
            [Measures].[Факт],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня по факту]         
        ) / 1000'     
    member [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ]         
    as 'IIF         
        (
            IsEmpty         
            (
                [Показатели].[ИспКасПлан].[Кассовый план ]         
            ) or [Показатели].[ИспКасПлан].[Кассовый план ] = 0,
            null,
            [Показатели].[ИспКасПлан].[Факт ] / [Показатели].[ИспКасПлан].[Кассовый план ]         
        )'     
    member [Показатели].[ИспКасПлан].[Прочие поступления ]        
    as '        
        (
            [Measures].[Факт],
            [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего]        
        ) / 1000'     
    member [Период].[Период].[Последний непустой день для Федеральных средств]       
    as 'Tail      
        (
            Filter       
            (
                Descendants       
                (
                    [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                    [Период].[Период].[День],
                    SELF       
                ),
                not IsEmpty       
                (
                    [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]       
                ) and not       
                (
                    [Период].[Период].CurrentMember is [Период].[Период].CurrentMember.Parent.DataMember       
                ) and [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"       
            )       
        ).Item(0)'     
    member [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]         
    as 'IIF        
        (
            [Период].[Период].CurrentMember is [Период].[Период].[Итого ],
            (
                [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ],
                [Период].[Период].[Последний непустой день для Федеральных средств]     
            ),
            (
                [Measures].[Факт],
                [Показатели].[ИспКасПлан].[Все].[Федеральные средства на счетах в ДФ]         
            ) / 1000     
        )'        
    set [Фактически произведенные расходы]         
    as '         
        {
            [Показатели].[ИспКасПлан].[Все].[Долг],
            [Показатели].[ИспКасПлан].[Все].[Заработная плата],
            [Показатели].[ИспКасПлан].[Все].[Социальные выплаты],
            [Показатели].[ИспКасПлан].[Все].[Первоочередные платежи],
            [Показатели].[ИспКасПлан].[Все].[Текущий ремонт],
            [Показатели].[ИспКасПлан].[Все].[Прочие расходы],
            [Показатели].[ИспКасПлан].[Все].[Субсидии юридическим лицам],
            [Показатели].[ИспКасПлан].[Все].[ФОМС],
            [Показатели].[ИспКасПлан].[Все].[Межбюджет],
            [Показатели].[ИспКасПлан].[Все].[Основные средства],
            [Показатели].[ИспКасПлан].[Все].[Капитальные вложения],
            [Показатели].[ИспКасПлан].[Все].[Дорожное хозяйство]         
        }'         
    member [Показатели].[ИспКасПлан].[Итого ]         
    as '[Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО]'         
    member [Показатели].[ИспКасПлан].[Остаток средств на конец дня по факту ]         
    as '         
        (
            [Measures].[Факт],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на конец дня по факту]         
        ) / 1000'     
    set [Даты месяца]     
    as 'Filter         
        (
            Descendants         
            (
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                [Период].[Период].[День],
                SELF         
            ),
            not IsEmpty         
            (
                [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО]         
            ) and not         
            (
                [Период].[Период].CurrentMember is [Период].[Период].CurrentMember.Parent.DataMember         
            ) and [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and [Период].[Период].CurrentMember.Name <> "Данные квартала" and [Период].[Период].CurrentMember.Name <> "Данные полугодия" and [Период].[Период].CurrentMember.Name <> "Данные года" and [Период].[Период].CurrentMember.Name <> "Данные месяца"         
        )  '         
    member [Период].[Период].[Итого ]         
    as 'IIF         
        (
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня по факту] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на конец дня по факту] or 
            [Показатели].[ИспКасПлан].CurrentMember is [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам],
            null,
            Sum         
            (
                [Даты месяца],
                [Показатели].[ИспКасПлан].CurrentMember         
            )          
        )'         
select
    {
        {
            [Показатели].[ИспКасПлан].[Остаток средств на начало дня по факту ],
            [Показатели].[ИспКасПлан].[Кассовый план ],
            [Показатели].[ИспКасПлан].[План ],
            [Показатели].[ИспКасПлан].[Факт ],
            [Показатели].[ИспКасПлан].[Процент поступлений от кассового плана ],
            [Показатели].[ИспКасПлан].[Прочие поступления ],
            [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]         
        } + [Фактически произведенные расходы] +         
        {
            [Показатели].[ИспКасПлан].[Итого ],
            [Показатели].[ИспКасПлан].[Остаток средств на конец дня по факту ],
            [Показатели].[ИспКасПлан].[Остаток средств на начало дня при начислении по лимитам]
        }         
    } on columns,
    Filter
    (
        [Даты месяца],
        not 
        (
            (
                IsEmpty
                (
                    [Показатели].[ИспКасПлан].[План ]
                ) or [Показатели].[ИспКасПлан].[План ] = 0
            ) and 
            (
                IsEmpty
                (
                    [Показатели].[ИспКасПлан].[Факт ]
                ) or [Показатели].[ИспКасПлан].[Факт ] = 0
            )
        ) 
    ) on rows         
from [ФО_Исполнение кассового плана]         
where         
    (
        [Measures].[Факт],
        <%selected_budget%>
    )                 
  ]]>
  </query>

  <query id="FO_0035_0004_commentText">
    <![CDATA[
-- FO_0035_0004_commentText
-- <#[ФО_Исполнение кассового плана]#>
with

    member [Показатели].[ИспКасПлан].[Общий остаток средств на счете ]
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств]
        ) / 1000'
    member [Показатели].[ИспКасПлан].[Остаток к распределению ]
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на конец квартала]
        ) / 1000'
    member [Показатели].[ИспКасПлан].[ФС (заявлено) ]
    as '
        (
            [Measures].[План_Период],
            [Показатели].[ИспКасПлан].[Все].[Федеральные средства на счетах в ДФ]
        ) / 1000'
select
    {
        [Показатели].[ИспКасПлан].[Общий остаток средств на счете ],
        [Показатели].[ИспКасПлан].[Остаток к распределению ],
        [Показатели].[ИспКасПлан].[ФС (заявлено) ]
    } on columns,
    {
         <%selected_budget%>
    } on rows
from [ФО_Исполнение кассового плана]
where
    (
        [Measures].[План_Период],
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
    )             
  ]]>
</query>

</root>