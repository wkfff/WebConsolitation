<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0047_0002_grid">
    <![CDATA[
-- FO_0047_0002_grid
with   
    set [Администраторы]   
    as 'Filter   
        (
            [Администратор].[Сопоставим].[Все администраторы].Children,
            (
                ( [Measures].[Код] >= 1 ) and   ( [Measures].[Код] <= 35 )   
            ) or ([Measures].[Код] = 41) or ([Measures].[Код] = 45) or ([Measures].[Код] = 46) or ([Measures].[Код] = 65) or ([Measures].[Код] = 176) or 
                 ([Measures].[Код] = 177) or ([Measures].[Код] = 188) or ([Measures].[Код] = 188) or ([Measures].[Код] = 191) or ([Measures].[Код] = 315)   
        )'   
    member [Администратор].[Сопоставим].[Итого]    
    as 'Aggregate({[Администраторы]})'
    set [Администраторы с итого] 
    as '[Администраторы] + {[Администратор].[Сопоставим].[Итого]}'
    
    set [РзПр]   
    as '  
        {
            [РзПр].[Сопоставимый].[Все коды ФКР].[ОБЩЕГОСУДАРСТВЕННЫЕ ВОПРОСЫ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ОБОРОНА],
            [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ БЕЗОПАСНОСТЬ И ПРАВООХРАНИТЕЛЬНАЯ ДЕЯТЕЛЬНОСТЬ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ЭКОНОМИКА],
            [РзПр].[Сопоставимый].[Все коды ФКР].[ЖИЛИЩНО-КОММУНАЛЬНОЕ ХОЗЯЙСТВО],
            [РзПр].[Сопоставимый].[Все коды ФКР].[ОХРАНА ОКРУЖАЮЩЕЙ СРЕДЫ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[ОБРАЗОВАНИЕ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[КУЛЬТУРА, КИНЕМАТОГРАФИЯ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[ЗДРАВООХРАНЕНИЕ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[СОЦИАЛЬНАЯ ПОЛИТИКА],
            [РзПр].[Сопоставимый].[Все коды ФКР].[Физическая культура и спорт],
            [РзПр].[Сопоставимый].[Все коды ФКР].[СРЕДСТВА МАССОВОЙ ИНФОРМАЦИИ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[Обслуживание государственного и муниципального долга],
            [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ ОБЩЕГО ХАРАКТЕРА БЮДЖЕТАМ СУБЪЕКТОВ РОССИЙСКОЙ ФЕДЕРАЦИИ И МУНИЦИПАЛЬНЫХ ОБРАЗОВАНИЙ],
            [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ]  
        }'
    member [РзПр].[Сопоставимый].[Итого]  
    as 'Aggregate({[РзПр]})'   
    set [РзПр с итого]  
    as '[РзПр] + {[РзПр].[Сопоставимый].[Итого]}'     
    set [Типы средств]   
    as '   
        {
            [Тип средств].[СКИФ].[Все].[Бюджетные средства],
            [Тип средств].[СКИФ].[Все].[Внебюджетные средства],
            [Тип средств].[СКИФ].[Всего по бюджетным и внебюджетным средствам]   
        }'   
    member [Тип средств].[СКИФ].[Всего по бюджетным и внебюджетным средствам]   
    as 'Aggregate   
        (
            {
                [Тип средств].[СКИФ].[Все].[Бюджетные средства],
                [Тип средств].[СКИФ].[Все].[Внебюджетные средства]   
            }   
        )'   
    set [Направления финансирования]
    as '
        {
            [Задолженность].[Направления финансирования].[Все].[аппарат управления],
            [Задолженность].[Направления финансирования].[Все].[подведомственные учреждения].[бюджетные учреждения],
            [Задолженность].[Направления финансирования].[Все].[подведомственные учреждения].[автономные учреждения],
            [Задолженность].[Направления финансирования].[Все].[подведомственные учреждения].[казенные учреждения],
            [Задолженность].[Направления финансирования].[Все].[подведомственные учреждения],
            [Задолженность].[Направления финансирования].[Все].[целевые программы],
            [Задолженность].[Направления финансирования].[Все].[мероприятия],
            [Задолженность].[Направления финансирования].[Все].[капитальное строительство],
            [Задолженность].[Направления финансирования].[Все].[прочие расходы]
        } '  
    set [Направления финансирования для итого]
    as '
        {
            [Задолженность].[Направления финансирования].[Все].[аппарат управления],
            [Задолженность].[Направления финансирования].[Все].[подведомственные учреждения],
            [Задолженность].[Направления финансирования].[Все].[целевые программы],
            [Задолженность].[Направления финансирования].[Все].[мероприятия],
            [Задолженность].[Направления финансирования].[Все].[капитальное строительство],
            [Задолженность].[Направления финансирования].[Все].[прочие расходы]
        } '
    member [Задолженность].[Направления финансирования].[Итого]
    as 'Aggregate({[Направления финансирования для итого]})'   
    set [Направления финансирования c итого]   
    as '[Направления финансирования] +   
        {
            [Задолженность].[Направления финансирования].[Итого]   
        } '   
    member [Measures].[Код]   
    as 'IIF 
        (
            [Администратор].[Сопоставим].CurrentMember is [Администратор].[Сопоставим].DefaultMember,
            StrToValue 
            (
                [РзПр].[Сопоставимый].CurrentMember.Properties("Код")
            ),
            StrToValue  
            (
                [Администратор].[Сопоставим].CurrentMember.Properties("Код")   
            ) 
        )'  
    member [Задолженность].[Показатели].[Задолженность всего, в т.ч.: ]   
    as '[Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:]'   
    
    member [Measures].[Уровень]
    as 'IIF 
        (
            (
              ([Администратор].[Сопоставим].CurrentMember is [Администратор].[Сопоставим].DefaultMember) and
              ([РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].[Итого])
            ) or
            (
              ([РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].DefaultMember) and
              ([Администратор].[Сопоставим].CurrentMember is [Администратор].[Сопоставим].[Итого])
            ),
            0,
            1
        )'
    member [Measures].[Факт ]
    as '[Measures].[Факт] / 1000'
select
    {
        {
            {[Тип средств].[СКИФ].[Все]}   
            *   
            {
                [Задолженность].[Направления финансирования].[Все]   
            }   
            *{[Measures].[Код]}   
        } +   
        {
            [Типы средств]   
            * [Направления финансирования c итого]   
            * {[Measures].[Факт ]}   
        } +
        {
            {[Тип средств].[СКИФ].[Все]}   
            *   
            {
                [Задолженность].[Направления финансирования].[Все]   
            }   
            *{[Measures].[Уровень]}   
        }        
    } on columns,
    { [<%grid_row_set%>] } on rows
from [ФО_Задолженность_КзДз]   
where   
    (
        [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта],
        [Задолженность].[Вид задолженности].[Все].[<%debt_kind%>],
        <%debt_indicator%>,
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>]
    )              
  ]]>
  </query>

  <query id="FO_0047_0002_debtKind">
    <![CDATA[
-- FO_0047_0002_debtKind
with 
    set [Задолженности] 
    as '{
            [Задолженность].[Вид задолженности].[Все].[Дебиторская задолженность],
            [Задолженность].[Вид задолженности].[Все].[Кредиторская задолженность]
        }'  
 
    member [Measures].[Имя] 
    as '[Задолженность].[Вид задолженности].CurrentMember.Name'
    member [Measures].[Уникальное имя] 
    as '[Задолженность].[Вид задолженности].CurrentMember.UniqueName'
    member [Measures].[Уровень] 
    as '0' 

select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    [Задолженности]  on rows
from [ФО_Задолженность_КзДз] 
  ]]>
  </query>

  <query id="FO_0047_0002_debtIndicator">
    <![CDATA[
-- FO_0047_0002_debtIndicator
with      
    set [Показатели задолженности]      
    as 'Filter      
        (
            {
                [Задолженность].[Показатели].[Задолженность Всего ]  
            } + Descendants   
            (
                [Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:],
                [Задолженность].[Показатели].[СубКОСГУ],
                SELF_AND_BEFORE     
            ) -   
            {
                [Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:]  
            },
            not     
            (
                [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].CurrentMember.Parent.DataMember    
            )     
        )'       
    member [Задолженность].[Показатели].[Задолженность Всего ]   
    as '[Задолженность].[Показатели].[Задолженность Всего].[Задолженность всего, в т.ч.:]'   
    member [Measures].[Имя]      
    as ' [Задолженность].[Показатели].CurrentMember.Name '   
    member [Measures].[Уникальное имя]      
    as 'IIF 
        (
            [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].[Задолженность Всего ],
            "[Задолженность].[Показатели].[Задолженность всего, в т.ч.: ]",
            [Задолженность].[Показатели].CurrentMember.UniqueName 
        )'  
    member [Measures].[Уровень]      
    as 'IIF 
        (
            [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].[Задолженность Всего ],
            0,
            IIF
            (
                [Задолженность].[Показатели].CurrentMember.Level is [Задолженность].[Показатели].[КОСГУ],
                1,
                2
            ) 
        )' 
    member [Measures].[Тип]
    as 'IIF
        (
            [Задолженность].[Показатели].CurrentMember is [Задолженность].[Показатели].[Задолженность Всего ],
            "",
            [Задолженность].[Показатели].CurrentMember.Properties("Код")
        )'        
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень],
        [Measures].[Тип]
    } on columns,
    [Показатели задолженности]   on rows    
from [ФО_Задолженность_КзДз]      
  ]]>
  </query>

</root>