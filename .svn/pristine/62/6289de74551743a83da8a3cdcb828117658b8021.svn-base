<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0042_0003_HMAO_date">
    <![CDATA[
-- FO_0042_0003_HMAO_date
with 
    member [Measures].[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                Descendants   
                (
                    [Период].[Период].[Данные всех периодов],
                    [Период].[Период].[Квартал],
                    SELF   
                ),
                not IsEmpty 
                (
                    (
                        [Measures].[Значение],
                        [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели]
                    ) 
                ) and 
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and 
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and 
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and 
                [Период].[Период].CurrentMember.Name <> "Данные года" and 
                [Период].[Период].CurrentMember.Name <> "Данные месяца" and 
                [Период].[Период].CurrentMember.Name <> "Заключительные обороты" 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from [ФО_Оценка качества ФМ_Показатели] 
]]>
  </query>

  <query id="FO_0042_0003_HMAO_grid">
    <![CDATA[
-- FO_0042_0003_HMAO_grid
with      
    set [Администраторы]    
    as 'Filter  
        (
            {
                Descendants  
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Администратор],
                    SELF    
                ) - [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные] 
            },
            not IsEmpty
            (
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа],
                    [Measures].[Оценка показателя]
                )
            ) 
        )'  
    set [Показатели]                 
    as 'Filter                 
        (
            {
                Descendants             
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 2],
                    SELF             
                ) -            
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Несопоставленные данные]
                }
            },
            not                 
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Parent.DataMember                 
            )                 
        ) '      
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[Наименование]     
    as '[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Name'    
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[UniqName]     
    as '[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.UniqueName'         
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[Кол-во ГРБС с применимой оценкой]     
    as 'Sum   
        (
            [Администраторы],
            [Measures].[Применим ли в оценке]   
        )'     
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[Сумма оценок по ГРБС]   
    as 'Sum   
        (
            [Администраторы],
            [Measures].[Оценка показателя]   
        )'   
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[Средняя оценка показателя исходя из его применимости к ГРБС]     
    as 'IIF  
        (
            IsEmpty  
            (
                 [Администратор__Сопоставим].[Администратор__Сопоставим].[Кол-во ГРБС с применимой оценкой]    
            ) or  [Администратор__Сопоставим].[Администратор__Сопоставим].[Кол-во ГРБС с применимой оценкой] = 0,
            null,
             [Администратор__Сопоставим].[Администратор__Сопоставим].[Сумма оценок по ГРБС]  /  [Администратор__Сопоставим].[Администратор__Сопоставим].[Кол-во ГРБС с применимой оценкой]  
        )'   
   member  [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, получивший минимальную оценку] 
    as 'Generate 
        (
            Filter 
            (
                [Администраторы],
                [Measures].[Оценка показателя] = 0 and
                [Measures].[Применим ли в оценке] = 1 
            ),
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";" 
        )' 

    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, получивший максимальную оценку] 
    as 'Generate 
        (
            Filter 
            (
                [Администраторы],
                [Measures].[Оценка показателя] = 1 and
                [Measures].[Применим ли в оценке] = 1
            ),
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";" 
        )' 
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, по которому показатель не применим] 
    as 'Generate 
        (
            Filter 
            (
                [Администраторы],
                [Measures].[Применим ли в оценке] = 0
            ),
            [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";" 
        )' 
    member  [Администратор__Сопоставим].[Администратор__Сопоставим].[№ п/п]
    as '0'        
select
    {
         [Администратор__Сопоставим].[Администратор__Сопоставим].[№ п/п],
         [Администратор__Сопоставим].[Администратор__Сопоставим].[Наименование],
         [Администратор__Сопоставим].[Администратор__Сопоставим].[Средняя оценка показателя исходя из его применимости к ГРБС],
         [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, получивший минимальную оценку],
         [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, получивший максимальную оценку],
         [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, по которому показатель не применим],
         [Администратор__Сопоставим].[Администратор__Сопоставим].[UniqName]  
    } on columns,
    { 
      Filter
      (
            [Показатели],
            not 
            (
                IsEmpty 
                (
                    (
                        [Администратор__Сопоставим].[Администратор__Сопоставим].[Средняя оценка показателя исходя из его применимости к ГРБС],
                        [Период].[Период].[Данные всех периодов].<%selected_period%>,
                        [Measures].[Оценка показателя]
                    ) 
                ) and
                (
                    (
                        [Администратор__Сопоставим].[Администратор__Сопоставим].[ГРБС, по которому показатель не применим],
                        [Период].[Период].[Данные всех периодов].<%selected_period%>,
                        [Measures].[Оценка показателя]
                    )
                ) = ""
            ) 
      )  
    } on rows      
from [ФО_Оценка качества ФМ_Показатели]      
where      
    (
        [Период].[Период].[Данные всех периодов].<%selected_period%>,
        [Measures].[Оценка показателя]      
    )     
  ]]>
  </query>

  <query id="FO_0042_0003_HMAO_chart_tenth">
    <![CDATA[
-- FO_0042_0003_HMAO_chart_tenth
with
    set [Администраторы]    
    as 'Filter  
        (
            {
                Descendants  
                (
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
                    [Администратор__Сопоставим].[Администратор__Сопоставим].[Администратор],
                    SELF    
                ) - [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные] 
            },
            not IsEmpty
            (
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа],
                    [Measures].[Оценка показателя]
                )
            ) 
        )'  
    member [Measures].[Оценка]
    as '[Measures].[Оценка показателя]'
    member [Measures].[Применимость к оценке]
    as '[Measures].[Применим ли в оценке] = 1'    
-----------Кол-во МО
    member [Measures].[Число [0,0:0,1)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                     [Measures].[Оценка] >= 0.0 and [Measures].[Оценка] < 0.1
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,1:0,2)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.1 and [Measures].[Оценка] < 0.2
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,2:0,3)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.2 and [Measures].[Оценка] < 0.3
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,3:0,4)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.3 and [Measures].[Оценка] < 0.4
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,4:0,5)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.4 and [Measures].[Оценка] < 0.5
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,5:0,6)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.5 and [Measures].[Оценка] < 0.6
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,6:0,7)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.6 and [Measures].[Оценка] < 0.7
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,7:0,8)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.7 and [Measures].[Оценка] < 0.8
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,8:0,9)]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.8 and [Measures].[Оценка] < 0.9
                ) and [Measures].[Применимость к оценке]
            )
        )'
    member [Measures].[Число [0,9:1,0_]
    as 'Count
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.9 and [Measures].[Оценка] <= 1.0
                ) and [Measures].[Применимость к оценке]
            )
        )'
----------- Хинты
    member [Measures].[Хинт [0,0:0,1)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.0 and [Measures].[Оценка] < 0.1
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,1:0,2)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.1 and [Measures].[Оценка] < 0.2
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,2:0,3)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.2 and [Measures].[Оценка] < 0.3
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,3:0,4)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.3 and [Measures].[Оценка] < 0.4
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,4:0,5)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.4 and [Measures].[Оценка] < 0.5
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,5:0,6)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.5 and [Measures].[Оценка] < 0.6
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,6:0,7)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.6 and [Measures].[Оценка] < 0.7
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,7:0,8)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.7 and [Measures].[Оценка] < 0.8
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,8:0,9)]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.8 and [Measures].[Оценка] < 0.9
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
    member [Measures].[Хинт [0,9:1,0_]
    as 'Generate
        (
            Filter
            (
                [Администраторы],
                (
                    [Measures].[Оценка] >= 0.9 and [Measures].[Оценка] <= 1.0
                ) and [Measures].[Применимость к оценке]
            ),
             [Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name,
            ";"
        )'
----------- Меры
    member [Measures].[[0,0:0,1)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,0:0,1)],
            [Measures].[Число [0,0:0,1)]
        )'
    member [Measures].[[0,1:0,2)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,1:0,2)],
            [Measures].[Число [0,1:0,2)]
        )'
    member [Measures].[[0,2:0,3)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,2:0,3)],
            [Measures].[Число [0,2:0,3)]
        )'
    member [Measures].[[0,3:0,4)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,3:0,4)],
            [Measures].[Число [0,3:0,4)]
        )'
    member [Measures].[[0,4:0,5)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,4:0,5)],
            [Measures].[Число [0,4:0,5)]
        )'
    member [Measures].[[0,5:0,6)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,5:0,6)],
            [Measures].[Число [0,5:0,6)]
        )'
    member [Measures].[[0,6:0,7)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,6:0,7)],
            [Measures].[Число [0,6:0,7)]
        )'
    member [Measures].[[0,7:0,8)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,7:0,8)],
            [Measures].[Число [0,7:0,8)]
        )'
    member [Measures].[[0,8:0,9)]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,8:0,9)],
            [Measures].[Число [0,8:0,9)]
        )'
    member [Measures].[[0,9:1,0_]
    as 'IIF
        (
            [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт],
            [Measures].[Хинт [0,9:1,0_],
            [Measures].[Число [0,9:1,0_]
        )'
---------------
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт]
    as '<%selected_indicator%>'


select
    {
        <%selected_indicator%>,
        [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Хинт]
    } on columns,

       {
        [Measures].[[0,0:0,1)],
        [Measures].[[0,1:0,2)],
        [Measures].[[0,2:0,3)],
        [Measures].[[0,3:0,4)],
        [Measures].[[0,4:0,5)],
        [Measures].[[0,5:0,6)],
        [Measures].[[0,6:0,7)],
        [Measures].[[0,7:0,8)],
        [Measures].[[0,8:0,9)],
        [Measures].[[0,9:1,0_]
       }
     on rows
from [ФО_Оценка качества ФМ_Показатели]
where
    (
        [Период].[Период].[Данные всех периодов].<%selected_period%>
    )
  ]]>
  </query>

  <query id="FO_0042_0003_HMAO_grbsList">
    <![CDATA[
-- FO_0042_0003_HMAO_grbsList
with 
    set [Администраторы] 
    as 'Descendants 
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
            [Администратор__Сопоставим].[Администратор__Сопоставим].[Администратор],
            SELF 
        ) - [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные]' 
    member [Measures].[Имя] 
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name' 
    member [Measures].[Тип] 
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Properties("Код")' 
select
    {
        [Measures].[Имя],
        [Measures].[Тип] 
    } on columns,
    { [Администраторы] } on rows 
from [ФО_Оценка качества ФМ_Показатели]   
  ]]>
  </query>
  
</root>