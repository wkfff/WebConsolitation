<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0016_01_date">
    <![CDATA[
-- FO_0002_0016_01_date
-- <#[ФО_АС Бюджет_КазнИсп_Факт расхода]#>
select
    {
         [Расходы].[Сопоставимый].[Все].[Департамент финансов  Костромской области].[Межбюджетные трансферты]
    } on columns,
    {
        Tail
        ( 
        Filter 
        (
            Descendants 
            (
                [Период].[Период].[Данные всех периодов],
                [Период].[Период].[День],
                SELF  
            ),
            [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
            [Период].[Период].CurrentMember.Name <> "Данные квартала" and
            [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
            [Период].[Период].CurrentMember.Name <> "Данные года" and
            [Период].[Период].CurrentMember.Name <> "Данные месяца" and
            not IsEmpty([Расходы].[Сопоставимый].[Все].[Департамент финансов  Костромской области].[Межбюджетные трансферты])
        )
        )
    } on rows   
from [ФО_АС Бюджет_КазнИсп_Факт расхода]   
where   
    (
        [Районы].[Сопоставимый].[Все районы],
        [Measures].[Факт расходов] 
    )  
  ]]>
  </query>  
  
  <query id="FO_0002_0016_01_grid_fact">
    <![CDATA[
-- FO_0002_0016_01_grid_fact
-- <#[ФО_АС Бюджет_КазнИсп_Факт расхода]#>
with            
    set [Муниципальные образования]            
    as 'Filter           
        (
            Descendants            
            (
                [Районы].[Сопоставимый].[Все районы],
                [Районы].[Сопоставимый].[Поселения],
                SELF            
            ),
            not            
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember           
            ) and           
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"          
            )           
        )'    
    set [Расходы]    
    as 'Filter    
        (
            Generate    
            (
                Filter 
                (
                    Descendants 
                    (
                        <%selected_mbt%>.[Межбюджетные трансферты],
                        [Расходы].[Сопоставимый].[Расходы уровень 3],
                        SELF    
                    ),
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Дотации бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субвенции бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Иные межбюджетные трансферты"
                ),
                {
                    [Расходы].[Сопоставимый].CurrentMember    
                } + Generate    
                (
                    Descendants  
                    (
                        [Расходы].[Сопоставимый].CurrentMember,
                       <%regions_level%>,
                        SELF    
                    ),
                    {
                        [Расходы].[Сопоставимый].CurrentMember    
                    } + Descendants    
                    (
                        [Расходы].[Сопоставимый].CurrentMember,
                        <%settlement_level%>,
                        SELF    
                    )    
                )    
            ),
            not    
            (
                [Расходы].[Сопоставимый].CurrentMember is [Расходы].[Сопоставимый].CurrentMember.Parent.DataMember
            )    
        )'  
    member [Расходы].[Сопоставимый].[ВСЕГО]    
    as 'Sum    
        (
             Filter 
                (
                    Descendants 
                    (
                        <%selected_mbt%>.[Межбюджетные трансферты],
                        [Расходы].[Сопоставимый].[Расходы уровень 3],
                        SELF    
                    ),
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Дотации бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субвенции бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Иные межбюджетные трансферты"
                ),
            [Measures].CurrentMember   
        )'    
    member [Measures].[Утверждено на год]      
    as '0'       
    member [Measures].[Профинансировано]      
    as '[Measures].[Факт расходов нараст итог] / 1000'       
    member [Measures].[Остаток финансирования от плана на год]      
    as '[Measures].[Утверждено на год] - [Measures].[Профинансировано]'       
    member [РзПр].[Сопоставимый].[Все коды ФКР].[FKRSlicer]      
    as 'Aggregate     
        (
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Субвенции бюджетам субъектов Российской Федерации и муниципальных образований],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Иные межбюджетные трансферты]     
            }     
        )' 
    member [Районы].[Сопоставимый].[Итого] 
    as 'Sum   
        (
            [Муниципальные образования],
            [Measures].CurrentMember  
        )'        
select
    {
        {
            {
                [Расходы].[Сопоставимый].[ВСЕГО]   
            } + [Расходы]  
        }   
        *   
        {
            [Measures].[Утверждено на год],
            [Measures].[Профинансировано],
            [Measures].[Остаток финансирования от плана на год]   
        }   
    } on columns,
    Filter ( {[Районы].[Сопоставимый].[Итого]} + [Муниципальные образования], not (IsEmpty([Measures].[Утверждено на год]) and IsEmpty([Measures].[Профинансировано])) ) on rows          
from [ФО_АС Бюджет_КазнИсп_Факт расхода]          
where     
    (
        [РзПр].[Сопоставимый].[Все коды ФКР].[FKRSlicer],
        <%period_current_date%>
    )  
  ]]>
  </query>

  <query id="FO_0002_0016_01_grid_plan">
    <![CDATA[
-- FO_0002_0016_01_grid_plan
-- <#[ФО_АС Бюджет_План расходов]#>
with            
    set [Муниципальные образования]            
    as 'Filter           
        (
            Descendants            
            (
                [Районы].[Сопоставимый].[Все районы],
                [Районы].[Сопоставимый].[Поселения],
                SELF            
            ),
            not            
            (
                [Районы].[Сопоставимый].CurrentMember is [Районы].[Сопоставимый].CurrentMember.Parent.DataMember           
            ) and           
            (
                [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"          
            )           
        )'    
    set [Расходы]    
    as 'Filter    
        (
            Generate    
            (
                Filter 
                (
                    Descendants 
                    (
                        <%selected_mbt%>.[Межбюджетные трансферты],
                        [Расходы].[Сопоставимый].[Расходы уровень 3],
                        SELF    
                    ),
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Дотации бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субвенции бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Иные межбюджетные трансферты"
                ),
                {
                    [Расходы].[Сопоставимый].CurrentMember    
                } + Generate    
                (
                    Descendants  
                    (
                        [Расходы].[Сопоставимый].CurrentMember,
                       <%regions_level%>,
                        SELF    
                    ),
                    {
                        [Расходы].[Сопоставимый].CurrentMember    
                    } + Descendants    
                    (
                        [Расходы].[Сопоставимый].CurrentMember,
                        <%settlement_level%>,
                        SELF    
                    )    
                )    
            ),
            not    
            (
                [Расходы].[Сопоставимый].CurrentMember is [Расходы].[Сопоставимый].CurrentMember.Parent.DataMember
            )    
        )'  
    member [Расходы].[Сопоставимый].[ВСЕГО]    
    as 'Sum    
        (
            Filter 
                (
                    Descendants 
                    (
                        <%selected_mbt%>.[Межбюджетные трансферты],
                        [Расходы].[Сопоставимый].[Расходы уровень 3],
                        SELF    
                    ),
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Дотации бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Субвенции бюджетам субъектов Российской Федерации и муниципальных образований" or
                    [Расходы].[Сопоставимый].CurrentMember.Name = "Иные межбюджетные трансферты"
                ),
            [Measures].CurrentMember   
        )'    
    member [Measures].[Утверждено на год]      
    as '[Measures].[Ассигнования] / 1000'
    member [Measures].[Профинансировано]      
    as '0'
    member [Measures].[Остаток финансирования от плана на год]      
    as '[Measures].[Утверждено на год] - [Measures].[Профинансировано]'       
    member [РзПр].[Сопоставимый].[Все коды ФКР].[FKRSlicer]      
    as 'Aggregate     
        (
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Дотации бюджетам субъектов Российской Федерации и муниципальных образований],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Субсидии бюджетам субъектов Российской Федерации и муниципальных образований (межбюджетные субсидии)],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Субвенции бюджетам субъектов Российской Федерации и муниципальных образований],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ].[Иные межбюджетные трансферты]     
            }     
        )'   
    member [Районы].[Сопоставимый].[Итого] 
    as 'Sum   
        (
            [Муниципальные образования],
            [Measures].CurrentMember  
        )'         
select
    {
        {
            {
                [Расходы].[Сопоставимый].[ВСЕГО]   
            } + [Расходы]  
        }   
        *   
        {
            [Measures].[Утверждено на год],
            [Measures].[Профинансировано],
            [Measures].[Остаток финансирования от плана на год]   
        }   
    } on columns,
    Filter ( {[Районы].[Сопоставимый].[Итого] } + [Муниципальные образования], not (IsEmpty([Measures].[Утверждено на год]) and IsEmpty([Measures].[Профинансировано])) ) on rows          
from  [ФО_АС Бюджет_План расходов]        
where     
    (
        [РзПр].[Сопоставимый].[Все коды ФКР].[FKRSlicer],
        [Период].[Дата принятия].[Данные всех периодов].[<%current_year%>],
        [Период].[Период].[Данные всех периодов].[<%current_year%>]
    )              
  ]]>
      </query>

</root>