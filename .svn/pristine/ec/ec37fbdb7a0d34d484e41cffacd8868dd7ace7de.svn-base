<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0021_0002_HMAO_date">
    <![CDATA[
-- FO_0021_0002_HMAO_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Год],
                    SELF
                ),
                not IsEmpty
                (
                    (
                        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели]
                    )
                ) and not
                (
                    [Период__Период].[Период__Период].CurrentMember is[Период__Период].[Период__Период].[Данные всех периодов].[Значение не указано]
                )
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_ФПКУ_Показатели]
]]>
  </query>

  <query id="FO_0021_0002_HMAO_grid">
    <![CDATA[
-- FO_0021_0002_HMAO_grid
with 
    set [ГО] 
    as ' Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО" 
        ) ' 
    set [МР] 
    as ' Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" 
        ) ' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Средняя сводная оценка качества по городским округам]
    as 'IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember is [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[СОК] or [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember is [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            Avg 
            (
                [ГО],
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember 
            ),
            null 
        )' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Средняя сводная оценка качества по муниципальным районам]
    as 'IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember is [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[СОК] or [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember is [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            Avg 
            (
                [МР],
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember 
            ),
            null 
        )' 
    member [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Нарушения бюджета]  
    as 'Sum  
        (
            Filter  
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].Children,
                (
                    StrToValue  
                    (
                        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Код")  
                    ) >= 1000  
                ) and  
                (
                    StrToValue  
                    (
                        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Код")  
                    ) < 2000  
                )  
            ),
            (
                [Measures].[Оценка индикатора],
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember
            )  
        )' 
    set [Показатели] 
    as ' 
        {
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ВысДотМО],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[СОК] 
        } + [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Нарушения бюджета] + 
        {
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Рейтинг] 
        } ' 
    member [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Название] 
    as ' [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name ' 
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Название]+[Показатели] 
    } on columns,
    non empty 
    {
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Средняя сводная оценка качества по городским округам]
        }+ [ГО] + 
        {
            [Районы__Сопоставимый].[Районы__Сопоставимый].[Средняя сводная оценка качества по муниципальным районам]
        }+ [МР] 
    } on rows 
from  [ФО_ФПКУ_Показатели] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора] 
    ) 
    ]]>
  </query>

  <query id="FO_0021_0002_HMAO_indicatorDescription">
    <![CDATA[
-- FO_0021_0002_HMAO_indicatorDescription
  With
  set [Список показателей]
  as '
    {
      Descendants
      (
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели],
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Показатели],
        SELF
        )
    }'
  set [Показатели с кодом]
  as ' Filter
  (
  [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].Children,
  (
  StrToValue
  (
  [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Код")
  ) >= 1000
  ) and
  (
  StrToValue
  (
  [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Код")
  ) < 2000
            )
        ) '
    set [Показатели]
    as '
        {
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ВысДотМО],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[СОК]
        } + [Показатели с кодом] +
        {
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Рейтинг]
        } '
    member [Measures].[Наименование]
    as ' [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember.Properties("Наименование")'
Select
    { [Measures].[Наименование] } on columns,
    { [Показатели] } on rows
From  [ФО_ФПКУ_Показатели]
    ]]>
  </query>

  <query id="FO_0021_0002_HMAO_chart">
    <![CDATA[
-- FO_0021_0002_HMAO_chart
with
    set [ГО]
    as ' Filter
        (
            Descendants
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
        ) '
    member [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Итоговая сводная оценка]
    as '[Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО]'
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Итоговая сводная оценка]
    } on columns,
    non empty
    {
        Order
        (
            [ГО],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            BDESC
        )
    } on rows
from  [ФО_ФПКУ_Показатели]
where
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]
    )
    ]]>
  </query>

  <query id="FO_0021_0002_HMAO_avg_chart">
    <![CDATA[
-- FO_0021_0002_HMAO_avg_chart
with 
set [ГО]
    as ' Filter
        (
            Descendants
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
        ) '
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Средняя сводная оценка качества по городским округам]
    as 'IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember is [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            Avg 
            (
                [ГО],
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember 
            ),
            null 
        )' 
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО]
    } on columns,
    {
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Средняя сводная оценка качества по городским округам]
    } on rows 
from  [ФО_ФПКУ_Показатели] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]
    )           
  ]]>
  </query>

  <query id="FO_0021_0002_HMAO_quality_limit">
    <![CDATA[
-- FO_0021_0002_HMAO_quality_limit
with
    set [ГО]
    as ' Filter
        (
            Descendants
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
        ) '
  member [Районы__Сопоставимый].[Районы__Сопоставимый].[Первая граница]
    as ' Tail
        (
            Head
            (
                Order
                (
                    [ГО],
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
                    BDESC
                ),
                3
            )
        ). Item(0)  '
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Вторая граница]
    as ' Head
        (
            Tail
            (
                Order
                (
                    [ГО],
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
                    BDESC
                ),
                3
            )
        ). Item(0)  '
select
    non empty
    {
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Первая граница],
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Вторая граница]
    } on columns,
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО]
    }on rows
from  [ФО_ФПКУ_Показатели]
where
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]
    )                 
  ]]>
  </query>

  <query id="FO_0021_0002_HMAO_chart2">
    <![CDATA[
-- FO_0021_0002_HMAO_chart2
with
    set [МР] 
    as ' Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" 
        ) ' 
    member [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Итоговая сводная оценка]
    as '[Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО]'
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Итоговая сводная оценка]
    } on columns,
    non empty
    {
        Order
        (
            [МР],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            BDESC
        )
    } on rows
from  [ФО_ФПКУ_Показатели]
where
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]
    )
    ]]>
  </query>

  <query id="FO_0021_0002_HMAO_avg_chart2">
    <![CDATA[
-- FO_0021_0002_HMAO_avg_chart2
with 
set [МР] 
    as ' Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" 
        ) ' 
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Средняя сводная оценка качества по муниципальным районам]
    as 'IIF 
        (
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember is [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
            Avg 
            (
                [МР],
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].CurrentMember 
            ),
            null 
        )' 
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО]
    } on columns,
    {
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы].[Средняя сводная оценка качества по муниципальным районам]
    } on rows 
from  [ФО_ФПКУ_Показатели] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]
    )           
  ]]>
  </query>

  <query id="FO_0021_0002_HMAO_quality_limit2">
    <![CDATA[
-- FO_0021_0002_HMAO_quality_limit2
with
    set [МР] 
    as ' Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" 
        ) ' 
  member [Районы__Сопоставимый].[Районы__Сопоставимый].[Первая граница]
    as ' Tail
        (
            Head
            (
                Order
                (
                    [МР],
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
                    BDESC
                ),
                3
            )
        ). Item(0)  '
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Вторая граница]
    as ' Head
        (
            Tail
            (
                Order
                (
                    [МР],
                    [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО],
                    BDESC
                ),
                3
            )
        ). Item(0)  '
select
    non empty
    {
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Первая граница],
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Вторая граница]
    } on columns,
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[ИСО]
    }on rows
from  [ФО_ФПКУ_Показатели]
where
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]
    )                 
  ]]>
  </query>

  <query id="FO_0021_0002_HMAO_chart3">
    <![CDATA[
    -- FO_0021_0002_HMAO_chart3
   with
    set [Районы]
    as 'Filter
        (
            Descendants
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF
            ),
            not
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант] = 0
            ) and
            (
                 [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
            )
        ) '
  select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант]
    } on columns,
    non empty{ [Районы] } on rows
  from  [ФО_ФПКУ_Показатели]
  where  
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]  
    )  
      ]]>
  </query>

  <query id="FO_0021_0002_HMAO_chart3_sum">
    <![CDATA[
    -- FO_0021_0002_HMAO_chart3_sum 
  with 
    set [Районы] 
    as 'Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            not 
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант] = 0 
            ) and
            (
                 [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО"
            )
        ) ' 
    member [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Сумма грантов] 
    as 'Aggregate
        (
            [Районы],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант]
        )' 
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Сумма грантов] 
    } on columns
    
from  [ФО_ФПКУ_Показатели] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора] 
    ) 
     ]]>
  </query>

  <query id="FO_0021_0002_HMAO_chart4">
    <![CDATA[
    -- FO_0021_0002_HMAO_chart4
   with
    set [Районы]
    as 'Filter
        (
            Descendants
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF
            ),
            not
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант] = 0
            ) and
            (
                 [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"
            )
        ) '
  select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант]
    } on columns,
    non empty{ [Районы] } on rows
  from  [ФО_ФПКУ_Показатели]
  where  
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора]  
    )  
      ]]>
  </query>

  <query id="FO_0021_0002_HMAO_chart4_sum">
    <![CDATA[
    -- FO_0021_0002_HMAO_chart4_sum 
  with 
    set [Районы] 
    as 'Filter 
        (
            Descendants 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 02],
                SELF 
            ),
            not 
            (
                [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант] = 0 
            ) and
            (
                 [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"
            )
        ) ' 
    member [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Сумма грантов] 
    as 'Aggregate
        (
            [Районы],
            [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Все показатели].[Грант]
        )' 
select
    {
        [Показатели__ФПКУ_Сопоставимый].[Показатели__ФПКУ_Сопоставимый].[Сумма грантов] 
    } on columns
    
from  [ФО_ФПКУ_Показатели] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_period%>],
        [Measures].[Оценка индикатора] 
    ) 
     ]]>
  </query>


</root>