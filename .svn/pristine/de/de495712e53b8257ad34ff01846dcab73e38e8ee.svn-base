<?xml version="1.0" encoding="Windows-1251"?>
<root>

	<!-- ========================================================================================= -->
	<query id="skk_014_grid_transport">
        <![CDATA[
-- skk_014_grid_transport
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate ({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate ({ <%selected_period_compare%> })'

    member [Measures].[Досмотрено#] 
    as ' 
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период] 
        )' 
    member [Measures].[Выявлено#]
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период] 
        )' 
	member  [Measures].[ДосмотреноСравн#]
    as ' 
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения] 
        )' 
    member  [Measures].[ВыявленоСравн#]
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения] 
        )'   
        
	<#skk_pattern_percent#>	
	<#skk_pattern_percent_cmp#>
	<#skk_pattern_rank#>
	<#skk_pattern_rank_cmp#>
	<#skk_pattern_updown#>		
	
    member [Measures].[*Уровень]
    as 'IIF 
        (
            [Пункты пропуска].[Вид сообщения].CurrentMember is [Пункты пропуска].[Вид сообщения].[ВСЕГО],
            0,
            1 
        )' 
	member [Measures].[УровеньИерархии]
    as '0'	
		
    member [Пункты пропуска].[Вид сообщения].[ВСЕГО]
    as [Пункты пропуска].[Вид сообщения].[Все]
	set [Строки]
	as 'order
        (
            [Пункты пропуска].[Вид сообщения].[Вид сообщения].Members, 
            [Measures].[Досмотрено#], 
            DESC
        )'    
select
    {
        [Measures].[Досмотрено#],
		[Measures].[ДосмотреноСравн#],
        [Measures].[Выявлено#],        
		[Measures].[Выявлено%],		
		[Measures].[ВыявленоСравн#],
        [Measures].[ВыявленоСравн%],		
        [Measures].[рост/снижение],
		
		[Measures].[Выявлено% (ранг)],
		[Measures].[Выявлено%доп],
		[Measures].[ВыявленоСравн% (ранг)],
		[Measures].[ВыявленоСравн%доп],
		
        [Measures].[*рост/снижение (си)],
        [Measures].[*рост/снижение (флаг)],
        [Measures].[*рост/снижение (формат)],
		
		[Measures].[УровеньИерархии],
        [Measures].[*Уровень] 
    } on columns,
    {
        [Пункты пропуска].[Вид сообщения].[ВСЕГО]
        + [Строки]
    } on rows 
from [СКК] 
where
    (
        <%selected_direction%>
    ) 
  ]]>
    </query>

	<!-- ========================================================================================= -->
	<query id="skk_014_grid_points">
		<![CDATA[
-- skk_014_grid_points
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate ({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate ({ <%selected_period_compare%> })'

    member [Measures].[Досмотрено#] 
    as ' 
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период] 
        )' 
    member [Measures].[Выявлено#]
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период] 
        )' 
	member  [Measures].[ДосмотреноСравн#]
    as ' 
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения] 
        )' 
    member  [Measures].[ВыявленоСравн#]
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения] 
        )'   
        
	<#skk_pattern_percent#>	
	<#skk_pattern_percent_cmp#>
	<#skk_pattern_rank#>
	<#skk_pattern_rank_cmp#>
	<#skk_pattern_updown#>		
	
    member [Measures].[*Уровень]
    as 'IIF 
        (
            [Пункты пропуска].[Пункт пропуска].CurrentMember is [Пункты пропуска].[Пункт пропуска].[ВСЕГО],
            0,
            1 
        )' 
	member [Measures].[УровеньИерархии]
    as '0'			
		
    member [Пункты пропуска].[Пункт пропуска].[ВСЕГО]
    as 'aggregate( [Строки] )'
	set [Строки]
	as '[Пункты пропуска].[Пункт пропуска].[Все].children'
select
    {
        [Measures].[Досмотрено#],
		[Measures].[ДосмотреноСравн#],
        [Measures].[Выявлено#],        
		[Measures].[Выявлено%],
		[Measures].[ВыявленоСравн#],
        [Measures].[ВыявленоСравн%],		
        [Measures].[рост/снижение],
		
		[Measures].[Выявлено% (ранг)],
		[Measures].[Выявлено%доп],
		[Measures].[ВыявленоСравн% (ранг)],
		[Measures].[ВыявленоСравн%доп],
		
        [Measures].[*рост/снижение (си)],
        [Measures].[*рост/снижение (флаг)],
        [Measures].[*рост/снижение (формат)],
		
		[Measures].[УровеньИерархии],
        [Measures].[*Уровень] 
    } on columns,
    {
        [Пункты пропуска].[Пункт пропуска].[ВСЕГО]
        + [Строки]
    } on rows 
from [СКК] 
where
    (
        <%selected_direction%>,
		<%selected_transport%>
    ) 
  ]]>
	</query>	
	
	<!-- ========================================================================================= -->
	<query id="skk_014_chart_districts">
        <![CDATA[
-- skk_014_chart_districts
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено#]
    as '
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )'
select
    {
        [Measures].[Досмотрено#]
    } on columns,
    { 
		filter 
        (
            [Пункты пропуска].[ФО].[ФО],
            not IsEmpty( [Measures].[Досмотрено#] ) 
        )
	} on rows
from [СКК]
where
    (
        <%selected_direction%>,
		<%selected_transport%>
    )
]]>
    </query>

	<!-- ========================================================================================= -->
	<query id="skk_014_chart_borders">
		<![CDATA[
-- skk_014_chart_borders
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate ({ <%selected_period%> })'
    member [Measures].[Досмотрено_] 
    as '  
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )'
    member [Measures].[Досмотрено#]  
    as 'IIF  
        (
            not isEmpty ([Measures].[Досмотрено_]),
            [Measures].[Досмотрено_],
            0  
        )'	 
    member [Measures].[Всего]   
    as 'sum
        (
            [Участки границы],
            [Measures].[Досмотрено_]   
        )'	 
    member [Measures].[Досмотрено%]   
    as 'IIF   
        (
            not isEmpty ( [Measures].[Досмотрено_] ) and not isEmpty( [Measures].[Всего] ) and ( [Measures].[Всего] > 0 ),
            [Measures].[Досмотрено_] / [Measures].[Всего],
            0			   
        )'   
    set [Участки границы]   
    as 'filter   
        (
            [Пункты пропуска].[Участок границы].[Все].children,
            not [Пункты пропуска].[Участок границы].currentMember is [Пункты пропуска].[Участок границы].[Все].[Не указан участок границы]   
        )'   
select
    {
        [Measures].[Досмотрено#],
        [Measures].[Досмотрено%]
    } on columns,
    {
        order   
        (
            [Участки границы],
            [Measures].[Досмотрено#],
            ASC   
        )   
    } on rows   
from [СКК]  
where
    (
        <%selected_direction%>,
		<%selected_transport%>
    )
]]>
	</query>

	<!-- ========================================================================================= -->
	<query id="skk_014_grid_borders">
		<![CDATA[
-- skk_014_grid_borders
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено_] 
    as '  
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )'
    member [Measures].[Досмотрено#]  
    as 'IIF  
        (
            not isEmpty ([Measures].[Досмотрено_]),
            [Measures].[Досмотрено_],
            0  
        )'	 
	member [Measures].[Параметр]
	as '<%selected_transport%>.name'
	member [Measures].[Участок]
	as '[Пункты пропуска].[Участок границы].currentMember.name'
	
	set [Участки границы]   
    as 'filter   
        (
            [Пункты пропуска].[Участок границы].[Все].children,
            not [Пункты пропуска].[Участок границы].currentMember is [Пункты пропуска].[Участок границы].[Все].[Не указан участок границы]   
        )'  
select
    {
		[Measures].[Параметр],
		[Measures].[Участок],
        [Measures].[Досмотрено#]		
    } on columns,
    {
       [Участки границы]
    } on rows              
from [СКК]   
where
    (
        <%selected_direction%>,
		<%selected_transport%>
    )
]]>
	</query>	
	
	<!-- ========================================================================================= -->
	<query id="skk_014_chart_compare">
		<![CDATA[
-- skk_014_chart_compare
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate({ <%selected_period_compare%> })'
        
    member [Measures].[Досмотрено#]   
    as '   
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]   
        )'   
    member  [Measures].[ДосмотреноСравн#]   
    as '   
        (
            [Показатели].[Показатель].[Количество досмотренных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]   
        )'   
    member [Measures].[Выявлено#]   
    as '   
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]   
        )'   
    member [Measures].[ВыявленоСравн#]   
    as '   
        (
            [Показатели].[Показатель].[Количество приостановленных транспортных средств],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]   
        )'    
select
    {
        [Measures].[Досмотрено#],
        [Measures].[Выявлено#],
        [Measures].[ДосмотреноСравн#],
        [Measures].[ВыявленоСравн#]   
    } on columns   
from [СКК] 
where    
    (
        <%selected_direction%>,
		<%selected_transport%>
    )  
]]>
	</query>
	
</root>