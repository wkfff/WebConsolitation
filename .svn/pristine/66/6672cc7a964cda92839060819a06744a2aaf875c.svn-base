<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="STAT_0023_0004_grid">
    <![CDATA[
-- STAT_0023_0004_grid
with         
    set [ОКВЭД]
    as 'Descendants
        (
            [ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности],
            [ОК__ОКВЭД].[ОК__ОКВЭД].[Раздел],
            SELF
        ) - {[ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности].[Значение не указано]} +
        {[ОК__ОКВЭД].[ОК__ОКВЭД].[Всего]}'
        
    member [ОК__ОКВЭД].[ОК__ОКВЭД].[Всего]
    as 'Aggregate({[ОКВЭД]})'
        
    set [ОКОПФ]   
    as 'Filter 
        (
            Descendants 
            (
                [ОК__ОКОПФ].[ОК__ОКОПФ].[Все организационно правовые формы],
                [ОК__ОКОПФ].[ОК__ОКОПФ].[Уровень 1],
                SELF_AND_AFTER   
            ) -   
            {
                [ОК__ОКОПФ].[ОК__ОКОПФ].[Все организационно правовые формы].[Значение не указано]  
            } +   
            {
                [ОК__ОКОПФ].[ОК__ОКОПФ].[Всего]  
            },
            not 
            (
                [ОК__ОКОПФ].[ОК__ОКОПФ].CurrentMember is [ОК__ОКОПФ].[ОК__ОКОПФ].CurrentMember.Parent.DataMember
            ) 
        )' 
        
    set [ОКОПФ для ВСЕГО]  
    as ' Descendants  
        (
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Все организационно правовые формы],
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Уровень 1],
            SELF
        ) - 
        {
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Все организационно правовые формы].[Значение не указано] 
        } + 
        {
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Всего] 
        } ' 
    member [ОК__ОКОПФ].[ОК__ОКОПФ].[Всего]  
    as 'Aggregate({[ОКОПФ для ВСЕГО]})' 
        
    set [ОКФС]
    as 'Descendants
        (
            [ОК__ОКФС].[ОК__ОКФС].[Все формы собственности],
            [ОК__ОКФС].[ОК__ОКФС].[Уровень 1],
            SELF
        ) - {[ОК__ОКФС].[ОК__ОКФС].[Все формы собственности].[Значение не указано]} +
        {[ОК__ОКФС].[ОК__ОКФС].[Всего]}'
        
    member [ОК__ОКФС].[ОК__ОКФС].[Всего]
    as 'Aggregate({[ОКФС]})'
    
    set [Периоды] 
    as '{<%period_set%>}'     
    member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Показатель]  
    as '
            IIF    
            (
                not     
                (
                    [ОК__ОКВЭД].[ОК__ОКВЭД].CurrentMember is [ОК__ОКВЭД].[ОК__ОКВЭД].DefaultMember    
                ),
                [ОК__ОКВЭД].[ОК__ОКВЭД].CurrentMember.Name,
                IIF   
                (
                    not    
                    (
                        [ОК__ОКОПФ].[ОК__ОКОПФ].CurrentMember is [ОК__ОКОПФ].[ОК__ОКОПФ].DefaultMember    
                    ),
                    [ОК__ОКОПФ].[ОК__ОКОПФ].CurrentMember.Name,
                    [ОК__ОКФС].[ОК__ОКФС].CurrentMember.Name   
                )
            )
        ' 
   member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Тип строки]    
    as 'IIF    
        (
            [Measures].CurrentMember is [Measures].[За период],
            "0",
            IIF    
            (
                [Measures].CurrentMember is [Measures].[Прирост цепной],
                "1",
                "2"    
            )    
        )'     
    member [Measures].[За период прошлый год]   
    as '  
        (
            [Measures].[За период],
            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember.PrevMember  
        )'    
    member [Measures].[Прирост ]  
    as 'IIF  
        (
            [Measures].[Расчетные показатели],
            [Measures].[Прирост цепной],
            IIF 
            (
                IsEmpty 
                (
                    [Measures].[За период прошлый год] 
                ),
                null,
                [Measures].[За период] - [Measures].[За период прошлый год] 
            )  
        )'   
    member [Measures].[Темп прироста ]  
    as 'IIF 
        (
            [Measures].[Расчетные показатели],
            [Measures].[Темп прироста цепной],
            IIF 
            (
                IsEmpty 
                (
                    [Measures].[За период прошлый год] 
                ) or  
                (
                    [Measures].[За период прошлый год]  
                ) = 0,
                null,
                [Measures].[За период] / [Measures].[За период прошлый год] - 1
            )
        )' 
        
    member [Measures].[Расчетные показатели]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember is [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Показатель] or
        [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember is [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Тип строки]'
    member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Уровень]
    as '<%slice_member%>.CurrentMember.Parent_Level'
select
    non empty
    {
        {
            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Показатель] 
        } + [Периоды] + {[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Тип строки]} + {[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Уровень]}
    } on columns,
    Filter     
    (
        <%slice_set%>
        *       
        {
            [Measures].[За период],
            [Measures].[Прирост ],
            [Measures].[Темп прироста ]      
        },
        not      
        (
            IsEmpty([Measures].[За период]) and IsEmpty([Measures].[Прирост цепной])     
        )      
    ) on rows      
From [СТАТ_Организации_Хозяйствующие субъекты]         
where         
    (
        [Организации__Сведения о хозяйствующих субъектах].[Организации__Сведения о хозяйствующих субъектах].[Все показатели].[Число учтенных предприятий и организаций на начало года],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра] 
    )          
  ]]>
  </query>

  <query id="STAT_0023_0004_chart">
    <![CDATA[
-- STAT_0023_0004_chart
with
    set [ОКВЭД]         
    as 'Descendants        
        (
            [ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности],
            [ОК__ОКВЭД].[ОК__ОКВЭД].[Раздел],
            SELF        
        ) - {[ОК__ОКВЭД].[ОК__ОКВЭД].[Все виды экономической деятельности].[Значение не указано]}'         
    set [ОКОПФ]   
    as 'Descendants 
        (
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Все организационно правовые формы],
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Уровень 1],
            SELF   
        ) -   
        {
            [ОК__ОКОПФ].[ОК__ОКОПФ].[Все организационно правовые формы].[Значение не указано]  
        }' 
    set [ОКФС]      
    as 'Descendants        
        (
            [ОК__ОКФС].[ОК__ОКФС].[Все формы собственности],
            [ОК__ОКФС].[ОК__ОКФС].[Уровень 1],
            SELF        
        ) - {[ОК__ОКФС].[ОК__ОКФС].[Все формы собственности].[Значение не указано]}' 
    set [Периоды] 
    as '{<%period_set%>}'  
    member [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Показатель]
    as 'IIF
        (
            not
            (
                [ОК__ОКВЭД].[ОК__ОКВЭД].CurrentMember is [ОК__ОКВЭД].[ОК__ОКВЭД].DefaultMember
            ),
            [ОК__ОКВЭД].[ОК__ОКВЭД].CurrentMember.Name,
            IIF
            (
                not
                (
                    [ОК__ОКОПФ].[ОК__ОКОПФ].CurrentMember is [ОК__ОКОПФ].[ОК__ОКОПФ].DefaultMember
                ),
                [ОК__ОКОПФ].[ОК__ОКОПФ].CurrentMember.Name,
                [ОК__ОКФС].[ОК__ОКФС].CurrentMember.Name
            )
        )'
select
    {
        {
            [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Показатель]
        } + [Периоды]
    } on columns,
    Filter
    (
        <%slice_set%>,
        not IsEmpty([Measures].[За период])
    ) on rows
From [СТАТ_Организации_Хозяйствующие субъекты]
where
    (
        [Measures].[За период],
        [Организации__Сведения о хозяйствующих субъектах].[Организации__Сведения о хозяйствующих субъектах].[Все показатели].[Число учтенных предприятий и организаций на начало года],
        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра]
    )       
  ]]>
  </query>

  <query id="STAT_0023_0004_periodDigest">
    <![CDATA[
-- STAT_0023_0004_periodDigest
with
    set [Непустые периоды]
    as 'Filter
            (
                Descendants
                (
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Данные всех периодов],
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                    SELF
                ),
                not IsEmpty
                (
                   (
                         [Организации__Сведения о хозяйствующих субъектах].[Организации__Сведения о хозяйствующих субъектах].[Все показатели].[Число учтенных предприятий и организаций на начало года],
                         [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра],
                         [Measures].[За период]
                   )
                )
            ) '
    member [Measures].[Имя]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember.Name'
    member [Measures].[Уникальное имя]
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember.UniqueName'
    member [Measures].[Уровень]
    as '0'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень]
    } on columns,
    { [Непустые периоды] } on rows
from [СТАТ_Организации_Хозяйствующие субъекты]
  ]]>
  </query>

  <query id="STAT_0023_0004_lastDate">
    <![CDATA[
-- STAT_0023_0004_lastDate
with  
    set [Непустые периоды]  
    as 'Tail
        (
            Filter 
            (
                Descendants  
                (
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Данные всех периодов],
                    [Период__Год Квартал Месяц].[Период__Год Квартал Месяц].[Год],
                    SELF  
                ),
                not IsEmpty  
                (
                    (
                        [Организации__Сведения о хозяйствующих субъектах].[Организации__Сведения о хозяйствующих субъектах].[Все показатели].[Число учтенных предприятий и организаций на начало года],
                        [Территории__РФ].[Территории__РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ].[Тюменская область с Ханты-Мансийским автономным округом, Ямало-Ненецким автономным округом].[Ханты-Мансийский автономный округ - Югра],
                        [Measures].[За период]  
                    )  
                )  
            )
        ) ' 

    member [Measures].[Уникальное имя] 
    as '[Период__Год Квартал Месяц].[Период__Год Квартал Месяц].CurrentMember.UniqueName'
select
    {
        [Measures].[Уникальное имя]
    } on columns,
    { [Непустые периоды] } on rows  
from [СТАТ_Организации_Хозяйствующие субъекты]  
  ]]>
  </query>

</root>