<?xml version="1.0" encoding="Windows-1251"?>
<root>

	<!-- ========================================================================================= -->
	<query id="skk_008_grid">
        <![CDATA[
-- skk_008_grid
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate({ <%selected_period_compare%> })'

    member [Measures].[Досмотрено, ед.#]
    as ' 
        (
            [Показатели].[Показатель].[Количество партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
	member [Measures].[ДосмотреноСравн, ед.#]
    as ' 
        (
            [Показатели].[Показатель].[Количество партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )'
    member [Measures].[Приостановлено, ед.#] 
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
    member  [Measures].[*сравн. Приостановлено, ед.#] 
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )' 
		
    member  [Measures].[Досмотрено, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
	member  [Measures].[ДосмотреноСравн, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )' 
    member  [Measures].[Приостановлено, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
    member  [Measures].[*сравн. Приостановлено, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )' 		

	<#skk_pattern_count_percent#>
	<#skk_pattern_count_percent_cmp#>
	<#skk_pattern_count_rank#>
	<#skk_pattern_count_rank_cmp#>
	<#skk_pattern_count_updown#>	
	<#skk_pattern_volume_percent#>
	<#skk_pattern_volume_percent_cmp#>
	<#skk_pattern_volume_rank#>
	<#skk_pattern_volume_rank_cmp#>
	<#skk_pattern_volume_updown#>

    member [Measures].[*Уровень]  
    as 'IIF  
        (
            (
                [Группы товаров].[Группа].CurrentMember is [Группы товаров].[Группа].[ВСЕГО]              
            ),
            0,
            1
        )'
    member [Measures].[ГруппыОписание]
    as '[Группы товаров].CurrentMember.Properties("Описание")'        
    
    set [Группы ]         
    as 'filter    
        (
            [Группы товаров].[Группа].[Все группы].Children,
            not [Группы товаров].[Группа].CurrentMember is [Группы товаров].[Группа].[Все группы].[Не указана группа товаров]         
        )'
    member [Группы товаров].[Группа].[ВСЕГО]      
    as ' aggregate( [Группы ] ) '
    
select
    {
        [Measures].[Досмотрено, ед.#],
		[Measures].[ДосмотреноСравн, ед.#],
        [Measures].[Приостановлено, ед.#],
        [Measures].[ед., %],
		[Measures].[*сравн. Приостановлено, ед.#],
		[Measures].[ПриостановленоСравн, ед%],
        [Measures].[рост/снижение, ед.],
		
        [Measures].[Досмотрено, т.],
		[Measures].[ДосмотреноСравн, т.],
        [Measures].[Приостановлено, т.],
        [Measures].[т., %],
        [Measures].[*сравн. Приостановлено, т.],
		[Measures].[ПриостановленоСравн, т%],
		[Measures].[рост/снижение, т.],
		
		[Measures].[*ед., %доп],
		[Measures].[*т., %доп],		
		[Measures].[ПриостановленоСравн, ед%доп],
		[Measures].[ПриостановленоСравн, т%доп],
		[Measures].[*ед., (ранг)],
		[Measures].[*ед.Сравн, (ранг)],
        [Measures].[*рост/снижение, ед. (СИ)],
        [Measures].[*рост/снижение, ед. (флаг)],
        [Measures].[*рост/снижение, ед. (формат)],
		[Measures].[*т., (ранг)],
		[Measures].[*т.Сравн, (ранг)],
        [Measures].[*рост/снижение, т. (СИ)],
        [Measures].[*рост/снижение, т. (флаг)],
        [Measures].[*рост/снижение, т. (формат)],
        [Measures].[ГруппыОписание],
        [Measures].[*Уровень]
    } on columns,
    {
        [Группы товаров].[Группа].[ВСЕГО],
        [Группы ]
    } on rows
from [СКК]
where
    (
        <%selected_point%>,
        <%selected_direction%>
    )                 
  ]]>
    </query>

	<!-- ========================================================================================= -->
	<query id="skk_008_chart">
        <![CDATA[
-- skk_008_chart
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
        
    member [Measures].[Досмотрено единиц_] 
    as ' 
        (
            [Показатели].[Показатель].[Количество партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период] 
        )' 
    member [Measures].[Досмотрено единиц]         
    as 'IIF  
        (
            not isEmpty 
            (
                [Measures].[Досмотрено единиц_]
            ),
            [Measures].[Досмотрено единиц_],
            0  
        )'   
    member [Measures].[Досмотрено тонн_]
    as '             
        (
            [Показатели].[Показатель].[Объем партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]             
        )'
    member [Measures].[Досмотрено тонн]
    as 'IIF
        (
            not isEmpty
            (
                [Measures].[Досмотрено тонн_]
            ),
            [Measures].[Досмотрено тонн_],
            0
        )'
    member [Measures].[Максимум] 
    as 'max
        (
            [Группы ],
            [Measures].[Досмотрено тонн]
        )'     
    set [Группы ]         
    as 'filter    
        (
            [Группы товаров].[Группа].[Все группы].Children,
            not [Группы товаров].[Группа].CurrentMember is [Группы товаров].[Группа].[Все группы].[Не указана группа товаров]          
        )' 
select
    {
        [Measures].[Досмотрено единиц],    
        [Measures].[Досмотрено тонн],
		[Measures].[Максимум] 
    } on columns,
    {
        order    
        (
            [Группы ],
            [Measures].[Досмотрено единиц],
            ASC    
        )
    } on rows
from [СКК]    
where    
    (
        <%selected_point%>,
        <%selected_direction%>     
    )    
]]>
    </query>
     
    
</root>