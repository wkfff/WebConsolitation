<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0039_0009_date">
    <![CDATA[
-- FO_0039_0009_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            NonEmptyCrossjoin
            (
                Filter
                (
                    [Период__Период].[Период__Период].[Квартал].Members,
                    (
                        [Период__Период].[Период__Период].CurrentMember.Name = "Данные года"
                    )
                )
            )
        ) '
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_ФПКУ_Исходные данные]  
]]>
</query>

<query id="FO_0039_0009_grid">
    <![CDATA[
-- FO_0039_0009_grid
with                  
    member [Measures].[IsSettle]             
    as '[Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "СП" or [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГП"'             
    member [Measures].[WithSettlemens]             
    as '"<%region_set%>" = "Список районов и поселений"'                  
    member [Measures].[IsTotal]                  
    as '[Measures].[WithSettlemens] and [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember'                  
    member [Measures].[IsSettlementTotal]                  
    as '[Measures].[WithSettlemens] and [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"'                  
    member [Measures].[isGroup] 
    as '[Measures].[WithSettlemens] and not 
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember
        ) and [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"' 
	set [Список МО]    
    as 'Filter  
        (
            Descendants  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF  
            ),
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember 
            ) and 
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР" or [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО" 
            ) 
        )' 
  	
    set [Список районов и поселений]                  
    as 'Generate                  
        (
            Filter                  
            (
                Descendants                  
                (
                   [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                   [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 03],
                    SELF                  
                ),
                not                  
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                ) and                  
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Properties("Тип территории") = "МР"                  
                )                  
            ),
            {
                {
                  Descendants             
                  (
                     [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                     [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                      SELF             
                  ) -
                  {
                    [Районы].[Сопоставимый].CurrentMember.DataMember 
                  }
                } +
                Filter
                (
                    {
                      {
                         [Районы].[Сопоставимый].CurrentMember 
                      } +
                      {
                         [Районы].[Сопоставимый].CurrentMember.DataMember
                      }
                    },
                    <%mo_group_filter%>
                )
            }                  
        )'                  
    member  [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Субвенции от других бюджетов бюджетной системы ]         
    as 'IIF                  
        (
            [Measures].[IsTotal],
            Sum                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Siblings -                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember                  
                } +                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent                 
                },
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Субвенции от других бюджетов бюджетной системы (код по КБК 00020203000000000000)],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Субвенции от других бюджетов бюджетной системы (код по КБК 00020203000000000000)]          
                )                  
            ),
            IIF                  
            (
                [Measures].[IsSettlementTotal],
                Sum                  
                (
                    Filter                  
                    (
                        Descendants                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                            SELF                  
                        ),
                        not                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                        )                  
                    ),
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Субвенции от других бюджетов бюджетной системы ]         
                ),
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Субвенции от других бюджетов бюджетной системы (код по КБК 00020203000000000000)_поселения],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Субвенции от других бюджетов бюджетной системы (код по КБК 00020203000000000000)]          
                )                  
            )                  
        )'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Безвозмездные поступления от других бюджетов бюджетной системы, всего ]         
    as 'IIF                  
        (
            [Measures].[IsTotal],
            Sum                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Siblings -                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember                  
                } +                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent                 
                },
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Безвозмездные поступления от других бюджетов бюджетной системы, всего (код по КБК 00020200000000000000)],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Безвозмездные поступления от других бюджетов бюджетной системы, всего (код по КБК 00020200000000000000)]         
                )                  
            ),
            IIF                  
            (
                [Measures].[IsSettlementTotal],
                Sum                  
                (
                    Filter                  
                    (
                        Descendants                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                            SELF                  
                        ),
                        not                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                        )                  
                    ),
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Безвозмездные поступления от других бюджетов бюджетной системы, всего ]         
                ),
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Безвозмездные поступления от других бюджетов бюджетной системы, всего (код по КБК 00020200000000000000)_поселения],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Безвозмездные поступления от других бюджетов бюджетной системы, всего (код по КБК 00020200000000000000)]         
                )                  
            )                  
        )'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями ]        
    as 'IIF                  
        (
            [Measures].[IsTotal],
            Sum                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Siblings -                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember                  
                } +                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent                 
                },
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями (код по КБК 00020204014000000151)],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями (код по КБК 00020204014000000151)]         
                )                  
            ),
            IIF                  
            (
                [Measures].[IsSettlementTotal],
                Sum                  
                (
                    Filter                  
                    (
                        Descendants                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                            SELF                  
                        ),
                        not                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                        )                  
                    ),
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями ]        
                ),
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями (код по КБК 00020204014000000151)_поселения],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями (код по КБК 00020204014000000151)]         
                )                  
            )                  
        )'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности ]       
    as 'IIF                  
        (
            [Measures].[IsTotal],
            Sum                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Siblings -                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember                  
                } +                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent                 
                },
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности, %],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности, %]                
                )                  
            ),
            IIF                  
            (
                [Measures].[IsSettlementTotal],
                Sum                  
                (
                    Filter                  
                    (
                        Descendants                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                            SELF                  
                        ),
                        not                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                        )                  
                    ),
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности ]       
                ),
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности_поселения],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности, %]        
                )                  
            )                  
        )'                  
    member  [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Налог на доходы физических лиц ]     
    as 'IIF                  
        (
            [Measures].[IsTotal],
            Sum                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Siblings -                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember                  
                } +                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent                 
                },
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Налог на доходы физических лиц (код по КБК 00010102000010000110)],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Налог на доходы физических лиц (код по КБК 00010102000010000110)]                  
                )                  
            ),
            IIF                  
            (
                [Measures].[IsSettlementTotal],
                Sum                  
                (
                    Filter                  
                    (
                        Descendants                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                            SELF                  
                        ),
                        not                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                        )                  
                    ),
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Налог на доходы физических лиц ]     
                ),
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Налог на доходы физических лиц (код по КБК 00010102000010000110)_поселения],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Налог на доходы физических лиц (код по КБК 00010102000010000110)]     
                )                  
            )                  
        )'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доходы всего ]          
    as 'IIF                  
        (
            [Measures].[IsTotal],
            Sum                  
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Siblings -                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember                  
                } +                  
                {
                    [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent                 
                },
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Доходы всего (код по КБК 00085000000000000)],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Доходы всего (код по КБК 00085000000000000)]            
                )                  
            ),
            IIF                  
            (
                [Measures].[IsSettlementTotal],
                Sum                  
                (
                    Filter                  
                    (
                        Descendants                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember,
                            [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                            SELF                  
                        ),
                        not                  
                        (
                            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember                  
                        )                  
                    ),
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доходы всего ]          
                ),
                IIF                  
                (
                    [Measures].[IsSettle],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Доходы всего (код по КБК 00085000000000000)_поселения],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Доходы всего (код по КБК 00085000000000000)]           
                )                  
            )                  
        )'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Безвозмездные поступления от других бюджетов бюджетной системы (за исключением субвенций и иных межбюджетных трансфертов), тыс.руб.]         
    as '                  
        (
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Безвозмездные поступления от других бюджетов бюджетной системы, всего ]         
            ) -                  
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Субвенции от других бюджетов бюджетной системы ]         
            ) -                  
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Межбюджетные трансферты на осуществление части полномочий по решению вопросов местного значения в соответствии с заключенными соглашениями ]        
            )                  
        ) '                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Коэффициент для объема налога на доходы физических лиц, полученный по дополнительному нормативу отчислений]       
    as 'IIF                  
        (
            [Measures].[IsSettle],
            10,
			IIF (
			       [Районы].[Сопоставимый].CurrentMember.Properties("Тип территории") = "ГО",
				   30,
				   20
				) 
                 
        )'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Объем налога на доходы физических лиц, полученный по дополнительному нормативу отчислений, тыс.руб.]       
    as ' IIF                  
        (
            IsEmpty                  
            (
                (
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Коэффициент для объема налога на доходы физических лиц, полученный по дополнительному нормативу отчислений] + [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности ]       
                )                  
            ) or                  
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Коэффициент для объема налога на доходы физических лиц, полученный по дополнительному нормативу отчислений] + [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности ]       
            ) = 0,
            null,
            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Налог на доходы физических лиц ]       
            * [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности ] /       
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Коэффициент для объема налога на доходы физических лиц, полученный по дополнительному нормативу отчислений] + [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Размер дополнительного норматива отчислений от НДФЛ взамен дотации на выравнивание бюджетной обеспеченности ]       
            )                  
        )    '                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Собственные доходы местного бюджета, тыс.руб.]            
    as '                  
        (
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доходы всего ]          
            ) -                  
            (
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Субвенции от других бюджетов бюджетной системы ]         
            )                  
        )   '                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доля межбюджетных трансфертов в собственных доходах бюджета]                
    as '                
        (
            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Все показатели].[Доля межбюджетных трансфертов в собственных доходах_ст. 136]                 
        )/100'                  
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1]            
    as '            
        (
            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доля межбюджетных трансфертов в собственных доходах бюджета] ,
            [Период__Период].[Период__Период].[Текущий год ]            
        ) '            
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2]            
    as '            
        (
            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доля межбюджетных трансфертов в собственных доходах бюджета] ,
            [Период__Период].[Период__Период].[Прошлый год ]            
        ) '            
    member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3]            
    as '            
        (
            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доля межбюджетных трансфертов в собственных доходах бюджета] ,
            [Период__Период].[Период__Период].[Позапрошлый год ]            
        ) '            
     member [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа МР(ГО)]         
    as 'IIF         
        (
           [Measures].[isGroup],
           null,
            IIF         
            (
                (
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0.7 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0.7         
                ) or         
                (
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0.7 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0.7         
                ) or         
                (
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0.7 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0.7         
                ),
                3,
                IIF         
                (
                    (
                        [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0.3 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0.3         
                    ) or         
                    (
                        [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0.3 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0.3         
                    ) or         
                    (
                        [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0.3 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0.3         
                    ),
                    2,
                    IIF         
                    (
                        (
                            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0.1 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0.1         
                        ) or         
                        (
                            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0.1 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0.1         
                        ) or         
                        (
                            [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0.1 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0.1         
                        ),
                        1,
                        IIF    
                        (
                            (
                                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0
                            ) or    
                            (
                                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 2] > 0 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0
                            ) or    
                            (
                                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 3] > 0 and [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа 1] > 0
                            ),
                            0,
                            4 
                        )  
                    )         
                )         
            )    
        )  ' 
    member [Период__Период].[Период__Период].[Текущий год ]                  
    as ' [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_year%>].[Данные года].[Данные года] ' 
    member [Период__Период].[Период__Период].[Прошлый год ]                  
    as ' ParallelPeriod                  
        (
            [Период__Период].[Период__Период].[Год],
            1,
            [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_year%>].[Данные года].[Данные года] 
        ) '                  
    member [Период__Период].[Период__Период].[Позапрошлый год ]                  
    as ' ParallelPeriod                  
        (
            [Период__Период].[Период__Период].[Год],
            2,
            [Период__Период].[Период__Период].[Данные всех периодов].[<%selected_year%>].[Данные года].[Данные года] 
        ) '                  
   member  [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Наименование муниципального образования]
    as 'IIF
        (
            [Measures].[WithSettlemens] and [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember is [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Parent.DataMember,
            [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name
            + " (по собственному бюджету района)",
            IIF
            (
                [Measures].[IsSettle] or not([Measures].[WithSettlemens]),
                [Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name,
                "Итого по поселениям ("+[Районы__Сопоставимый].[Районы__Сопоставимый].CurrentMember.Name +")"
            )
        ) '                  
   set [Фильтрованный список МО] 
    as 'Filter([<%region_set%>], <%mo_group_filter%>)'                  
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Аггрегированные МО]                  
    as 'Aggregate({[Фильтрованный список МО]})'                  
select
    {
        {
            {
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Наименование муниципального образования],
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Группа МР(ГО)]  
            }  
            *  
            {
                [Период__Период].[Период__Период].[Данные всех периодов]  
            }  
        }+  
        {
            {
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Доля межбюджетных трансфертов в собственных доходах бюджета],
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Безвозмездные поступления от других бюджетов бюджетной системы (за исключением субвенций и иных межбюджетных трансфертов), тыс.руб.] ,
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Объем налога на доходы физических лиц, полученный по дополнительному нормативу отчислений, тыс.руб.],
                [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Собственные доходы местного бюджета, тыс.руб.]  
            }  
            *  
            {
                [Период__Период].[Период__Период].[Текущий год ],
                [Период__Период].[Период__Период].[Прошлый год ],
                [Период__Период].[Период__Период].[Позапрошлый год ]  
            }  
        }  
    } on columns,
     {
        Filter
        (
            [Фильтрованный список МО],
            not IsEmpty
            (
                (
                    [Районы__Сопоставимый].[Районы__Сопоставимый].[Аггрегированные МО],
                    [Период__Период].[Период__Период].[Текущий год ],
                    [Показатели__ФО_ФПКУ_Исходные данные].[Показатели__ФО_ФПКУ_Исходные данные].[Собственные доходы местного бюджета, тыс.руб.]
                )
            )
        )
    } on rows
from  [ФО_ФПКУ_Исходные данные]  
where  ( [Measures].[Значение] )          
  ]]>
</query>

</root>