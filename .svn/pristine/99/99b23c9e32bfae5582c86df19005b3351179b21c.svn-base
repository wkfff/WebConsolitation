<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0002_0033_03_date">
    <![CDATA[
-- FO_0002_0033_03_detail_date
with
    member [Measures].[ДанныеНа]
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период__Период].[Период__Период].[День].Members,
                not IsEmpty ([Measures].[Расход с возвратом])
                and [Период__Период].[Период__Период].CurrentMember.Name <> "Остатки на начало года"
                and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные квартала"
                and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные полугодия"
                and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные года"
                and [Период__Период].[Период__Период].CurrentMember.Name <> "Данные месяца"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФО_АС Бюджет_КазнИсп_Факт расхода]
  ]]>
  </query>

  <query id="FO_0002_0033_03_grid">
    <![CDATA[
-- FO_0002_0033_03_grid
with 
 	set [Список косгу]
    as ' Filter 
        (
            Descendants 
            (
               <%selected_kosgu_value%>,
               [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Подстатья],
                SELF_AND_BEFORE 
            )
			    -  [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР]
			,
              not 
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.DataMember 
            ) 			 and 
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Name <> "Несопоставленные данные" 
            ) and 
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Name <> "Неуказанная экономическая статья" 
            ) 
        )'	

    set [типы средств] 
    as ' Filter 
        (
            Descendants  
            (
                <%selected_means_value%> ,
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].[Тип средств уровень 3],
                SELF_AND_BEFORE  
            ) -  [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].[Все типы средств],
            not  
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember is [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Parent.DataMember  
            )  and  
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Name <> "Несопоставленные данные"  
            ) and  
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Name <> "Неуказанная экономическая статья"  
            )  
        )'	
		
     member [Measures].[КОСГУ]   
    as '[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("Код")'   
    member [Measures].[Тип средств]   
    as '[Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Properties("Код")'  
	
    member [Measures].[План, утвержденный законодательно ] 
    as ' 
        (
            [Measures].[Ассигнования],
            [Роспись Уведомления].[Уточненный план].[Утвержденный план],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Роспись],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
            [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_year%>] ,
			[Фиксированный__БА_ЛБО].[Фиксированный__БА_ЛБО].[Все].[Бюджетные ассигнования, лимиты бюджетных обязательств]
        )/1000' 
    member [Measures].[Уведомления по текущий квартал ] 
    as ' 
        (
            [Measures].[Ассигнования нараст итог],
            [Роспись Уведомления].[Уточненный план].[Уведомления],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Роспись],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>],
            [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>],
			[Фиксированный__БА_ЛБО].[Фиксированный__БА_ЛБО].[Все].[Бюджетные ассигнования, лимиты бюджетных обязательств]
        )/1000' 
    member [Measures].[Уточненный план на год ] 
    as '[Measures].[План, утвержденный законодательно ] + [Measures].[Уведомления по текущий квартал ]' 
    member [Measures].[Уточненный план на квартал ] 
    as ' 
        (
            [Measures].[Ассигнования нараст итог по текущий период],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Кассовый план],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>] ,
            [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_year%>]
        )/1000' 
		
    member [Measures].[Кассовое исполнение на дату ] 
    as ' LookupCube 
        (
            "[ФО_АС Бюджет_КазнИсп_Факт расхода]",
            " 
            (
               [Measures].[Расход с возвратом нараст итог],
                " + MemberToStr   
                (
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember   
                ) + ",
                " + MemberToStr  
                (
                    [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember  
                ) + ",
                " + MemberToStr   
                (
                    [Период__Период].[Период__Период].CurrentMember   
                ) + "   
            )" 
        )/1000' 
    member [Measures].[Остаток ассигнований ] 
    as '<%measures%> -  [Measures].[Кассовое исполнение на дату ]' 
	
    member [Measures].[% исполнения ] 
    as 'IIF 
        (
            IsEmpty 
            (
               <%measures%> 
            ) or <%measures%> = 0,
            null,
            [Measures].[Кассовое исполнение на дату ] / <%measures%>
        )' 
    member [Measures].[План, утвержденный законодательно на аналогичный период предыдущего года ] 
    as ' 
        (
            [Measures].[Ассигнования],
            [Роспись Уведомления].[Уточненный план].[Утвержденный план],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Роспись],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>],
            [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_last_year%>],
			[Фиксированный__БА_ЛБО].[Фиксированный__БА_ЛБО].[Все].[Бюджетные ассигнования, лимиты бюджетных обязательств]
        )/1000' 
    member [Measures].[Уточненный план на предыдущий год ] 
    as '[Measures].[План, утвержденный законодательно на аналогичный период предыдущего года ] + 
        ((
            [Measures].[Ассигнования нараст итог],
            [Роспись Уведомления].[Уточненный план].[Уведомления],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Роспись],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>],
            [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>],
			[Фиксированный__БА_ЛБО].[Фиксированный__БА_ЛБО].[Все].[Бюджетные ассигнования, лимиты бюджетных обязательств]
        )/1000)' 
    member [Measures].[Уточненный план на аналогичный квартал предыдущего года ] 
    as '(
             [Measures].[Ассигнования нараст итог по текущий период],
            [Роспись Кассовый план].[Роспись Кассовый план].[Все].[Кассовый план],
            [Период__Период].[Период__Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>]  ,
            [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_last_year%>]
        )/1000' 
      member [Measures].[Кассовое исполнение на аналогичную дату предыдущего года ] 
    as ' 
        (
            [Measures].[Кассовое исполнение на дату ],
            ParallelPeriod 
            (
                [Период__Период].[Период__Период].[Год],
                1 ,
                [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>] 
            ) 
        )' 
    member [Measures].[Темп роста кассового исполнения ] 
    as 'IIF 
        (
            IsEmpty 
            (
                 <%temp_zn%>
            ) or <%temp_zn%> = 0,
            null,
            <%temp_ch%>  / <%temp_zn%>
        )'  
     member [Measures].[Уровень] 
    as 'IIF
        (
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("Level_Number") = "2",
            1,
            0
        )' 			
select
    {
        [Measures].[КОСГУ],
        [Measures].[Тип средств],
        [Measures].[План, утвержденный законодательно ],
        [Measures].[Уточненный план на год ],
        [Measures].[Уточненный план на квартал ],
        [Measures].[Кассовое исполнение на дату ],
        [Measures].[Остаток ассигнований ],
        [Measures].[% исполнения ],
        [Measures].[План, утвержденный законодательно на аналогичный период предыдущего года ],
        [Measures].[Уточненный план на предыдущий год ],
        [Measures].[Уточненный план на аналогичный квартал предыдущего года ],
        [Measures].[Кассовое исполнение на аналогичную дату предыдущего года ],
        [Measures].[Темп роста кассового исполнения ] ,
		[Measures].[Уровень] 
    } on columns,
    Filter 
    (
        [Список косгу] 
        *
		<%selected_means_value%>,
        not IsEmpty
        (
           [Measures].[План, утвержденный законодательно ]
        )
        
    ) on rows 
from [ФО_АС Бюджет_План расходов]  
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>],
        [Период__Дата принятия].[Период__Дата принятия].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>]
	) 
  ]]>
  </query>

<query id="FO_0002_0033_03_means_Digest">
<![CDATA[
-- FO_0002_0033_03_Means_Digest
with 
    set [Список расходов] 
    as ' Filter 
        (
            Descendants 
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].[Все типы средств],
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].[Тип средств уровень 1],
                SELF_and_after
            ),
            not 
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember is [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Parent.DataMember 
            ) and 
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Name <> "Несопоставленные данные" 
            ) and 
            (
                [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Name <> "Неуказаный тип средств" 
            ) 
        )' 
    member [Measures].[Имя] 
    as ' "(" + [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Properties("Код") + ") " + [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Name' 
    member [Measures].[Уникальное имя] 
    as '[Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.UniqueName' 
    member [Measures].[Уровень] 
    as 'IIF
        (
            [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Level is [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].[Тип средств уровень 1],
            0,
            IIF
            (
             [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].CurrentMember.Level is [Тип средств__Сопоставимый].[Тип средств__Сопоставимый].[Тип средств уровень 2],
             1,
             2
            )
        )'
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень] 
    } on columns,
    {[Список расходов]} on rows 
from [ФО_АС Бюджет_План расходов] 
  ]]>
</query>

<query id="FO_0002_0033_03_KOSGU_Digest">
<![CDATA[
-- FO_0002_0033_03_KOSGU_Digest
with 
    set [Список расходов] 
    as '
        Filter 
        (
            Generate 
            (
                Descendants 
                (
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Подстатья],
                    SELF_AND_BEFORE
                ),
                {
                    [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember
                } 
            ),
            not 
            (
                [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Parent.DataMember
            ) 
			 and
            (
                 [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Name <> "Несопоставленные данные"
            )
            and
            (
                 [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Name <> "Неуказанная экономическая статья"
            )
        )' 
    member [Measures].[Имя]   
    as 'IIF
        (
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Name,
             "(" + [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("Код") + ") " +  [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Name
        )'
    member [Measures].[Уникальное имя] 
    as '[КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.UniqueName'
  
     member [Measures].[Уровень]  
    as 'IIF 
        (
            [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember is [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].[Все коды ЭКР],
            0,
              [КОСГУ__Сопоставимый].[КОСГУ__Сопоставимый].CurrentMember.Properties("LEVEL_NUMBER") -1
        )'  
select
    {
        [Measures].[Имя],
        [Measures].[Уникальное имя],
        [Measures].[Уровень] 
    } on columns,
    {[Список расходов]} on rows 
from [ФО_АС Бюджет_План расходов] 
  ]]>
	</query>
</root>