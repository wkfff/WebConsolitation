<?xml version="1.0" encoding="Windows-1251"?>
<root>

  <query id="FO_0002_0060_05_grid">
    <![CDATA[
WITH     
    MEMBER [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer]     
    AS ' Aggregate     
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]     
            }     
        )'     
    member [Расходы по содержанию органов местного самоуправления] as'IIF     
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого],
            LookupCube     
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "     
                (
                    AGGREGATE     
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа],
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]     
                        },
                        AGGREGATE     
                        (
                            {
                                " + SetToStr([NonFilterRowSet]) + "     
                            },
                            (
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
                                <%period_dimension%>,
                                [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего],
                                [Measures].[Факт]     
                            )     
                        )     
                    )     
                )"     
            ),
            LookupCube     
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "     
                (
                    aggregate     
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]     
                        },
                        (
                            [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
                            <%period_dimension%>,
                            [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего],
                            [Measures].[Факт],
                            " +  MemberToStr     
                            (
                                [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember     
                            ) + "     
                        )     
                    )     
                )"     
            )     
        )'     
    member [Оплата труда] as'IIF     
        (
            [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember is [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого],
            LookupCube     
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "     
                (
                    AGGREGATE     
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа],
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]     
                        },
                        aggregate     
                        (
                            {
                                [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на заработную плату] ,
                                [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на начисления на выплаты по оплате труда]     
                            },
                            AGGREGATE     
                            (
                                {
                                    " + SetToStr([NonFilterRowSet]) + "     
                                },
                                (
                                    [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
                                    <%period_dimension%>,
                                    [Measures].[Факт]     
                                )     
                            )     
                        )     
                    )     
                )"     
            ),
            LookupCube     
            (
                "ФО_МесОтч_СпрРасходыДоп" ,
                "     
                (
                    aggregate     
                    (
                        {
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                            [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]     
                        },
                        aggregate     
                        (
                            {
                                [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на заработную плату] ,
                                [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего].[на начисления на выплаты по оплате труда]     
                            },
                            (
                                [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО],
                                <%period_dimension%>,
                                [Measures].[Факт],
                                " +  MemberToStr     
                                (
                                    [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember     
                                ) + "     
                            )     
                        )     
                    )     
                )"     
            )     
        )'     
    member  [Расходы по содержанию органов местного самоуправления ]     
    as 'IIF     
        (
            IsEmpty     
            (
                [Расходы по содержанию органов местного самоуправления]     
            ),
            0,
            [Расходы по содержанию органов местного самоуправления]/1000     
        )' ,
        format_string = '0.00'     
    member [Оплата труда ]     
    as ' IIF     
        (
            IsEmpty ( [Оплата труда]),
            0,
            [Оплата труда]/1000     
        )'    ,
        format_string = '0.00'     
    member [Measures].[Факт ]     
    as 'IIF     
        (
            IsEmpty([Measures].[Факт]),
            0,
            [Measures].[Факт]/1000     
        )' ,
        format_string = '0.00'     
    member [Материальные затраты]     
    as '[Расходы по содержанию органов местного самоуправления ]-[Оплата труда ]' ,
        format_string = '0.00'     
    member [Удельный вес расходов на содержание ОМС Всего]     
    as 'IIF     
        (
            IsEmpty 
            (
                [Расходы по содержанию органов местного самоуправления ] 
            ) OR IsEmpty([Measures].[Факт]),
            0,
            (
                [Расходы по содержанию органов местного самоуправления ]/[Measures].[Факт ]     
            )     
                
        )' ,
        format_string = '0.00'     
    member [Удельный вес расходов на содержание ОМС Оплата труда]     
    as 'IIF    
        (
            IsEmpty([Оплата труда ]) OR IsEmpty([Measures].[Факт] ),
            0,
            (
                [Оплата труда ]/[Measures].[Факт ]     
            )     
              
        )'  ,
        format_string = '0.00'     
    member [Удельный вес расходов на содержание ОМС Мат затраты]     
    as 'IIF   
        (
            IsEmpty([Материальные затраты]) OR IsEmpty([Measures].[Факт]),
            0,
            (
                [Материальные затраты]/[Measures].[Факт ] 
            )     
              
        )'   ,
        format_string = '0.00'     
    SET [NonFilterColumnSet]     
    AS '     
        {
            [Measures].[Факт ],
            [Расходы по содержанию органов местного самоуправления ],
            [Оплата труда ] ,
            [Материальные затраты],
            [Удельный вес расходов на содержание ОМС Всего] ,
            [Удельный вес расходов на содержание ОМС Оплата труда],
            [Удельный вес расходов на содержание ОМС Мат затраты],
            [Пустая]
        }'     
    SET [NonFilterRowSet]     
    AS ' Filter     
        (
            Descendants     
            (
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Все районы],
                [Районы__Сопоставимый].[Районы__Сопоставимый].[Уровень 04],
                SELF     
            ),
            not [Районы__Сопоставимый].[Районы__Сопоставимый].currentmember.is_datamember and not isEmpty     
            (
               [Measures].[Факт]    
            )     
        )'  
    member [Пустая]
    as '0'
    member [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]     
    as 'aggregate([NonFilterRowSet])'     
SELECT
    [NonFilterColumnSet] ON COLUMNS ,
    {
        [NonFilterRowSet],
        [Районы__Сопоставимый].[Районы__Сопоставимый].[Итого]     
    } ON ROWS     
FROM [ФО_МесОтч_Расходы]     
WHERE     
    (
        <%period_dimension%> ,
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО] ,
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer] ,
        [РзПр__Сопоставимый].[РзПр__Сопоставимый].[Все коды ФКР].[Расходы бюджета - ИТОГО]     
    )                                                                             
                                                 
]]>
  </query>

  <query id="FO_0002_0060_05_date">
    <![CDATA[
with      
    MEMBER [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer]   
    AS ' Aggregate   
        (
            {
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет городского округа] ,
                [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Все].[Собственный отчет района]   
            }   
        )'  
    member [Measures].[ДанныеНа]   
    as '[Период__Период].[Период__Период].CurrentMember.UniqueName'   
    set [NonEmptySet]   
    as 'Tail   
        (
            Filter   
            (
                Descendants   
                (
                    [Период__Период].[Период__Период].[Данные всех периодов],
                    [Период__Период].[Период__Период].[Месяц],
                    SELF   
                ),
                not IsEmpty   ( [Measures].[Факт] )   
            ),
            1   
        )'   
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows   
from   [ФО_МесОтч_СпрРасходыДоп]
where   
    (
        [Показатели__СопМесОСпРасх].[Показатели__СопМесОСпРасх].[Все показатели].[Расходы по содержанию органов местного самоуправления, всего] ,
        [ТипДокумента__СКИФ].[ТипДокумента__СКИФ].[Slicer] ,
        [Уровни бюджета__СКИФ].[Уровни бюджета__СКИФ].[Все].[Конс.бюджет МО] 
    )      
    ]]>
  </query>
</root>