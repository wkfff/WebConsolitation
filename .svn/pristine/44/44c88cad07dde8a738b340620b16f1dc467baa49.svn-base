<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0004_date">
    <![CDATA[
-- FO_0035_0004_iphone_date
-- <#[ФО_Исполнение кассового плана]#>    
with
    member [Measures].[ДанныеНа]
    as '<%period_dimension%>.CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                Descendants
                (
                    <%period_dimension%>.[Данные всех периодов],
                    <%period_dimension%>.[День],
                    SELF
                ),
                 not IsEmpty 
                (
                     ([Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО], [Measures].[Факт_Период])
                ) and not 
                (
                    ([Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО], [Measures].[Факт_Период]) = 0
                ) and not 
                (
                    <%period_dimension%>.CurrentMember is <%period_dimension%>.CurrentMember.Parent.DataMember
                ) and
                <%period_dimension%>.CurrentMember.Name <> "Остатки на начало года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные квартала" and
                <%period_dimension%>.CurrentMember.Name <> "Данные полугодия" and
                <%period_dimension%>.CurrentMember.Name <> "Данные года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные месяца"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from [ФО_Исполнение кассового плана]
  ]]>
  </query>

  <query id="FO_0035_0004">
    <![CDATA[
-- FO_0035_0004_iphone
-- <#[ФО_Исполнение кассового плана]#>
with 
    member [Показатели].[ИспКасПлан].[Общий остаток средств на счете ] 
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000' 
    member [Показатели].[ИспКасПлан].[Остаток средств к распределению ]
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на конец квартала],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'
    member [Показатели].[ИспКасПлан].[Федеральные средства (заявлено) ]
    as '
        (
            [Measures].[План_Период],
            [Показатели].[ИспКасПлан].[Все].[Федеральные средства на счетах в ДФ],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'
    member [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ]
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Федеральные средства на счетах в ДФ],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].[<%period_day_fo%>]
        ) / 1000'
    member [Показатели].[ИспКасПлан].[Кассовые поступления ]
    as '(
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) +
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        )) / 1000'

    member [Показатели].[ИспКасПлан].[Кассовые поступления пред.месяц]
    as '(
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%prev_month_year%>].[<%prev_month_half_year%>].[<%prev_month_quarter%>].[<%prev_month%>]
        ) +
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего],
            <%period_dimension%>.[Данные всех периодов].[<%prev_month_year%>].[<%prev_month_half_year%>].[<%prev_month_quarter%>].[<%prev_month%>]
        )) / 1000'

    member [Показатели].[ИспКасПлан].[Темп роста поступлений к предыдущему месяцу, % ]
    as 'IIF (
        IsEmpty
        (
          [Показатели].[ИспКасПлан].[Кассовые поступления пред.месяц]
        ) or 
        (
            [Показатели].[ИспКасПлан].[Кассовые поступления пред.месяц]
        ) = 0, null,
        (
            [Показатели].[ИспКасПлан].[Кассовые поступления ]
        ) /
            [Показатели].[ИспКасПлан].[Кассовые поступления пред.месяц]
        )'
        
    member [Показатели].[ИспКасПлан].[Кассовые выплаты ]
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'

    member [Показатели].[ИспКасПлан].[Кассовые выплаты пред.месяц]
    as '
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%prev_month_year%>].[<%prev_month_half_year%>].[<%prev_month_quarter%>].[<%prev_month%>]
        ) / 1000'
     
    member [Показатели].[ИспКасПлан].[Темп роста выплат к предыдущему месяцу, % ]
    as 'IIF (
        IsEmpty
        (
          [Показатели].[ИспКасПлан].[Кассовые выплаты пред.месяц]
        ) or 
        (
            [Показатели].[ИспКасПлан].[Кассовые выплаты пред.месяц]
        ) = 0, null,
        (
            [Показатели].[ИспКасПлан].[Кассовые выплаты ]
        ) /
            [Показатели].[ИспКасПлан].[Кассовые выплаты пред.месяц]
        )'        
select
    {
        [Показатели].[ИспКасПлан].[Общий остаток средств на счете ],
        [Показатели].[ИспКасПлан].[Остаток средств к распределению ],
        [Показатели].[ИспКасПлан].[Федеральные средства (заявлено) ],
        [Показатели].[ИспКасПлан].[Федеральные средства на счетах в ДФ ],
        [Показатели].[ИспКасПлан].[Кассовые поступления ],
        [Показатели].[ИспКасПлан].[Кассовые выплаты ],
        [Показатели].[ИспКасПлан].[Темп роста поступлений к предыдущему месяцу, % ],
        [Показатели].[ИспКасПлан].[Темп роста выплат к предыдущему месяцу, % ]
    } on columns,
    {
        [Районы].[Сопоставимый].[Все районы].[Областной бюджет] 
    } on rows 
from [ФО_Исполнение кассового плана] 
where 
    (
        <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
    ) 
  ]]>
</query>

<query id="FO_0035_0004_v">
<![CDATA[
-- FO_0035_0004_v_iphone
-- <#[ФО_Исполнение кассового плана]#>
with  
    member [Показатели].[ИспКасПлан].[Остаток средств на начало месяца ]  
    as '  
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня по факту],
            <%period_dimension%>.[Первая непустая дата месяца] 
        ) / 1000'   
    member <%period_dimension%>.[Первая непустая дата месяца]  
    as 'Head 
        (
            Filter  
            (
                Descendants  
                (
                    <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                    <%period_dimension%>.[День],
                    SELF  
                ),
                not IsEmpty  
                (
                    (
                        [Measures].[Факт_Период],
                        [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня по факту] 
                    )  
                ) and not  
                (
                    <%period_dimension%>.CurrentMember is <%period_dimension%>.CurrentMember.Parent.DataMember  
                ) and <%period_dimension%>.CurrentMember.Name <> "Остатки на начало года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные квартала" and
                <%period_dimension%>.CurrentMember.Name <> "Данные полугодия" and
                <%period_dimension%>.CurrentMember.Name <> "Данные года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные месяца"  
            )  
        ).Item(0)'   
    member [Показатели].[ИспКасПлан].[Доходы месяца ]  
    as '  
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ПОСТУПЛЕНИЯ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Прочие поступления за месяц ]  
    as '  
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Поступления и выплаты из источников финансирования дефицита областного бюджета - всего],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Фактически произведенные расходы за месяц за счет средств областного бюджета ]  
    as '  
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>] 
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Остаток средств на конец месяца ]  
    as '  
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня по факту],
            <%period_dimension%>.[Последняя непустая дата месяца] 
        ) / 1000'   
    member <%period_dimension%>.[Последняя непустая дата месяца] 
    as 'Tail 
        (
            Filter 
            (
                Descendants 
                (
                    <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                    <%period_dimension%>.[День],
                    SELF 
                ),
                not IsEmpty 
                (
                    (
                        [Measures].[Факт_Период],
                        [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня по факту] 
                    ) 
                ) and not 
                (
                    <%period_dimension%>.CurrentMember is <%period_dimension%>.CurrentMember.Parent.DataMember 
                ) and <%period_dimension%>.CurrentMember.Name <> "Остатки на начало года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные квартала" and
                <%period_dimension%>.CurrentMember.Name <> "Данные полугодия" and
                <%period_dimension%>.CurrentMember.Name <> "Данные года" and <%period_dimension%>.CurrentMember.Name <> "Данные месяца" 
            ) 
        ).Item(0)' 
    member [Показатели].[ИспКасПлан].[Лимит расходов месяца ]  
    as '  
        (
            [Measures].[План_Период],
            [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Остаток средств при перечислении по лимитам ]  
    as '  
        (
            [Measures].[Факт_Период],
            [Показатели].[ИспКасПлан].[Все].[Остаток средств на начало дня при начислении по лимитам],
            <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].[<%period_day_fo%>]  
        ) / 1000'   
    member [Показатели].[ИспКасПлан].[Остаток лимита с начала года на конец месяца ]  
    as 'Sum
        (
            Filter 
            (
                Descendants 
                (
                    <%period_dimension%>.[Данные всех периодов].[<%period_year%>],
                    <%period_dimension%>.[Месяц],
                    SELF 
                ),
                <%period_dimension%>.CurrentMember.Name <> "Остатки на начало года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные квартала" and
                <%period_dimension%>.CurrentMember.Name <> "Данные полугодия" and
                <%period_dimension%>.CurrentMember.Name <> "Данные года" and
                <%period_dimension%>.CurrentMember.Name <> "Данные месяца" and
                <%period_dimension%>.CurrentMember.Properties("PKID") <= <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].Properties("PKID")
            ),
            (
                (
                    [Measures].[План_Период],
                    [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО],
                    <%period_dimension%>.CurrentMember
                )-  
                (
                    [Measures].[Факт_Период],
                    [Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО],
                    <%period_dimension%>.CurrentMember
                )  
            ) / 1000
        )' 
    member [Показатели].[ИспКасПлан].[Дефицит средств для проведения расходов по доведенным лимитам ]  
    as '[Показатели].[ИспКасПлан].[Доходы месяца ] + [Показатели].[ИспКасПлан].[Прочие поступления за месяц ] -
    [Показатели].[ИспКасПлан].[Остаток лимита с начала года на конец месяца ] - [Показатели].[ИспКасПлан].[Фактически произведенные расходы за месяц за счет средств областного бюджета ]'  
select
    {
        [Районы].[Сопоставимый].[Все районы].[Областной бюджет]  
    } on columns,
    {
        [Показатели].[ИспКасПлан].[Остаток средств на начало месяца ],
        [Показатели].[ИспКасПлан].[Доходы месяца ],
        [Показатели].[ИспКасПлан].[Прочие поступления за месяц ],
        [Показатели].[ИспКасПлан].[Фактически произведенные расходы за месяц за счет средств областного бюджета ],
        [Показатели].[ИспКасПлан].[Остаток средств на конец месяца ],
        [Показатели].[ИспКасПлан].[Лимит расходов месяца ],
        [Показатели].[ИспКасПлан].[Остаток средств при перечислении по лимитам ],
        [Показатели].[ИспКасПлан].[Остаток лимита с начала года на конец месяца ],
        [Показатели].[ИспКасПлан].[Дефицит средств для проведения расходов по доведенным лимитам ]  
    } on rows  
from [ФО_Исполнение кассового плана]  
where  
    (
        <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>] 
    )  
  ]]>
</query>

<query id="FO_0035_0004_h">
<![CDATA[
-- FO_0035_0004_H_iphone
-- <#[ФО_Исполнение кассового плана]#>
with     
    member [Показатели].[ИспКасПлан].[Итого]
    as '[Показатели].[ИспКасПлан].[Все].[КАССОВЫЕ ВЫПЛАТЫ - ВСЕГО]'
    member [Measures].[Факт, млн.руб.] 
    as '[Measures].[Факт_Период] / 1000000'  
    member [Measures].[План, млн.руб.] 
    as '[Measures].[План_Период] / 1000000'  
    member [Measures].[% исп.]
    as 'IIF 
        (
            IsEmpty
            (
                [Measures].[План, млн.руб.]
            ) or [Measures].[План, млн.руб.] = 0,
            null,
            [Measures].[Факт, млн.руб.] / [Measures].[План, млн.руб.]
        )' 
    member [Measures].[Удел.вес]
    as 'IIF
        (
            IsEmpty
            (
                ([Показатели].[ИспКасПлан].[Итого], [Measures].[Факт, млн.руб.])
            ) or ([Показатели].[ИспКасПлан].[Итого], [Measures].[Факт, млн.руб.])= 0,
            null,
           ([Показатели].[ИспКасПлан].CurrentMember, [Measures].[Факт, млн.руб.]) / ([Показатели].[ИспКасПлан].[Итого], [Measures].[Факт, млн.руб.])
        )'
    member [Measures].[Остаток лимита, млн. руб.]
    as '[Measures].[План, млн.руб.] - [Measures].[Факт, млн.руб.] '
select
    {
        [Measures].[План, млн.руб.],
        [Measures].[Факт, млн.руб.],
        [Measures].[% исп.],
        [Measures].[Удел.вес],
        [Measures].[Остаток лимита, млн. руб.]
    } on columns,
    {
        [Показатели].[ИспКасПлан].[Итого],
        [Показатели].[ИспКасПлан].[Все].[Долг],
        [Показатели].[ИспКасПлан].[Все].[Заработная плата],
        [Показатели].[ИспКасПлан].[Все].[Социальные выплаты],
        [Показатели].[ИспКасПлан].[Все].[Первоочередные платежи],
        [Показатели].[ИспКасПлан].[Все].[Текущий ремонт],
        [Показатели].[ИспКасПлан].[Все].[Прочие расходы],
        [Показатели].[ИспКасПлан].[Все].[Субсидии юридическим лицам],
        [Показатели].[ИспКасПлан].[Все].[ФОМС],
        [Показатели].[ИспКасПлан].[Все].[Межбюджет],
        [Показатели].[ИспКасПлан].[Все].[Основные средства],
        [Показатели].[ИспКасПлан].[Все].[Капитальные вложения],
        [Показатели].[ИспКасПлан].[Все].[Дорожное хозяйство]  
    } on rows     
from [ФО_Исполнение кассового плана]     
where     
    (
        <%period_dimension%>.[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        [Районы].[Сопоставимый].[Все районы].[Областной бюджет]
    )     
  ]]>
</query>
</root>