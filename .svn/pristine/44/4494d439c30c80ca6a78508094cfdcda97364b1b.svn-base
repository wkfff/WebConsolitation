<?xml version="1.0" encoding="windows-1251"?>
<root>

	<!-- ========================================================================================= -->
	<query id="skk_005_chart_districts">
		<![CDATA[
-- skk_005_chart_districts
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено#]  
    as '  
        (
            [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]  
        )'  
select
    { 
		[Measures].[Досмотрено#] 
	} on columns,
    {
        filter 
        (
            [Пункты пропуска].[ФО].[ФО],
            not IsEmpty( [Measures].[Досмотрено#] ) 
        )  
    } on rows  
from [СКК]
where
    (
        <%selected_direction%>,
		<%selected_terra%>
    )
]]>
	</query>

	<!-- ========================================================================================= -->
	<query id="skk_005_chart_subjects">
		<![CDATA[
-- skk_005_chart_subjects
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено#]  
    as '  
        (
            [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]  
        )'  
select
    { 
		[Measures].[Досмотрено#] 
	} on columns,
    {
        filter 
        (
            [Пункты пропуска].[Субъект].[Субъект],
            not IsEmpty( [Measures].[Досмотрено#] ) 
        )  
    } on rows  
from [СКК]
where
    (
        <%selected_direction%>,
		<%selected_terra%>
    )
]]>
	</query>
	
	<!-- ========================================================================================= -->
	<query id="skk_005_chart_points">
		<![CDATA[
-- skk_005_chart_points
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено#]  
    as '  
        (
            [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]  
        )'  
select
    { 
		[Measures].[Досмотрено#] 
	} on columns,
    {
        filter 
        (
            [Пункты пропуска].[Пункт пропуска].[Пункт пропуска],
            not IsEmpty( [Measures].[Досмотрено#] ) 
        )  
    } on rows  
from [СКК]
where
    (
        <%selected_direction%>,
		<%selected_terra%>
    )
]]>
	</query>	
	
	<!-- ========================================================================================= -->
	<query id="skk_005_grid_groups">
        <![CDATA[
-- skk_005_grid_groups
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Периоды].[Год_Месяц].[период для сравнения]
    as 'aggregate({ <%selected_period_compare%> })'

    member [Measures].[Досмотрено, ед.#]
    as ' 
        (
            [Показатели].[Показатель].[Количество партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
	member [Measures].[ДосмотреноСравн, ед.#]
    as ' 
        (
            [Показатели].[Показатель].[Количество партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )'		
    member [Measures].[Приостановлено, ед.#] 
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
    member  [Measures].[*сравн. Приостановлено, ед.#] 
    as ' 
        (
            [Показатели].[Показатель].[Количество приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )'        
		
    member  [Measures].[Досмотрено, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
	member  [Measures].[ДосмотреноСравн, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )' 		
    member  [Measures].[Приостановлено, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )' 
    member  [Measures].[*сравн. Приостановлено, т.] 
    as ' 
        (
            [Показатели].[Показатель].[Объем приостановленных партий грузов],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[период для сравнения]
        )' 
		
	<#skk_pattern_count_percent#>
	<#skk_pattern_count_percent_cmp#>
	<#skk_pattern_count_rank#>
	<#skk_pattern_count_rank_cmp#>
	<#skk_pattern_count_updown#>	
	<#skk_pattern_volume_percent#>
	<#skk_pattern_volume_percent_cmp#>
	<#skk_pattern_volume_rank#>
	<#skk_pattern_volume_rank_cmp#>
	<#skk_pattern_volume_updown#>
	
    member [Measures].[*Уровень]  
    as 'IIF  
        (
            [Группы товаров].[Группа].CurrentMember is [Группы товаров].[Группа].[ВСЕГО],
            0,
            1
        )'
    member [Measures].[ГруппыОписание]
    as '[Группы товаров].CurrentMember.Properties("Описание")'        

    set [Группы ]         
    as 'filter    
        (
            [Группы товаров].[Группа].[Все группы].Children,
            not [Группы товаров].[Группа].CurrentMember is [Группы товаров].[Группа].[Все группы].[Не указана группа товаров]         
        )' 
    member [Группы товаров].[Группа].[ВСЕГО]      
    as ' aggregate( [Группы ] ) '
    
select
    {
        [Measures].[Досмотрено, ед.#],
		[Measures].[ДосмотреноСравн, ед.#],
        [Measures].[Приостановлено, ед.#],
        [Measures].[ед., %],
		[Measures].[*сравн. Приостановлено, ед.#],
		[Measures].[ПриостановленоСравн, ед%],
        [Measures].[рост/снижение, ед.],
		
        [Measures].[Досмотрено, т.],
		[Measures].[ДосмотреноСравн, т.],		
        [Measures].[Приостановлено, т.],
        [Measures].[т., %],
		[Measures].[*сравн. Приостановлено, т.],
		[Measures].[ПриостановленоСравн, т%],
        [Measures].[рост/снижение, т.],
		
		[Measures].[*ед., %доп],		
		[Measures].[*т., %доп],
		[Measures].[ПриостановленоСравн, ед%доп],
		[Measures].[ПриостановленоСравн, т%доп],
		[Measures].[*ед., (ранг)],
		[Measures].[*ед.Сравн, (ранг)],
        [Measures].[*рост/снижение, ед. (СИ)],
        [Measures].[*рост/снижение, ед. (флаг)],
        [Measures].[*рост/снижение, ед. (формат)],        
		[Measures].[*т., (ранг)],
		[Measures].[*т.Сравн, (ранг)],
        [Measures].[*рост/снижение, т. (СИ)],
        [Measures].[*рост/снижение, т. (флаг)],
        [Measures].[*рост/снижение, т. (формат)],
        [Measures].[ГруппыОписание],
        [Measures].[*Уровень]
    } on columns,
    {
        [Группы товаров].[Группа].[ВСЕГО],
        [Группы ]
    } on rows
from [СКК]
where
    (
        <%selected_direction%>,
        <%selected_terra%>
    ) 
  ]]>
    </query>

	<!-- ========================================================================================= -->
	<query id="skk_005_chart_groups">
		<![CDATA[
-- skk_005_chart_groups
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено единиц_]     
    as '     
        (
            [Показатели].[Показатель].[Количество партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]     
        )'     
    member [Measures].[Досмотрено единиц]     
    as 'IIF     
        (
            not isEmpty( [Measures].[Досмотрено единиц_] ),
            [Measures].[Досмотрено единиц_],
            0     
        )'     
    member [Measures].[Досмотрено тонн_]     
    as '     
        (
            [Показатели].[Показатель].[Объем партий грузов, подлежащих СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]     
        )'     
    member [Measures].[Досмотрено тонн]     
    as 'IIF     
        (
            not isEmpty( [Measures].[Досмотрено тонн_] ),
            [Measures].[Досмотрено тонн_],
            0     
        )'     
    member [Measures].[Максимум] 
    as 'max
        (
            [Группы ],
            [Measures].[Досмотрено тонн]
        )'     
    set [Группы ]     
    as ' filter     
        (
            [Группы товаров].[Группа].[Все группы].Children,
            not [Группы товаров].[Группа].CurrentMember is [Группы товаров].[Группа].[Все группы].[Не указана группа товаров]     
        )'     
select
    {
        [Measures].[Досмотрено единиц],
        [Measures].[Досмотрено тонн],
		[Measures].[Максимум]      
    } on columns,
    {
        order     
        (
            [Группы ],
            [Measures].[Досмотрено единиц],
            ASC     
        )     
    } on rows     
from [СКК] 
where
    (
        <%selected_direction%>,
		<%selected_terra%>
    )
]]>
	</query>
	
	<!-- ========================================================================================= -->
	<query id="skk_005_chart_borders">
		<![CDATA[
-- skk_005_chart_borders
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено_] 
    as '  
        (
            [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )'
    member [Measures].[Досмотрено#]  
    as 'IIF  
        (
            not isEmpty ([Measures].[Досмотрено_]),
            [Measures].[Досмотрено_],
            0  
        )'	 
    member [Measures].[Всего] 
    as 'sum
        (
			[Участки границы],
            [Measures].[Досмотрено_]            
        )'	
    member [Measures].[Досмотрено%]
    as 'IIF
        (
            not isEmpty ([Measures].[Досмотрено_]) and not isEmpty([Measures].[Всего]) and [Measures].[Всего] > 0,
            [Measures].[Досмотрено_] / [Measures].[Всего],
            0			
        )'
	set [Участки границы]   
    as 'filter   
        (
            [Пункты пропуска].[Участок границы].[Все].children,
            not [Пункты пропуска].[Участок границы].currentMember is [Пункты пропуска].[Участок границы].[Все].[Не указан участок границы]   
        )'  
select
    {
        [Measures].[Досмотрено#],
        [Measures].[Досмотрено%]
    } on columns,
    {
        order  
        (
            [Участки границы],
            [Measures].[Досмотрено#],
            ASC  
        )  
    } on rows              
from [СКК]   
where
    (
        <%selected_direction%>,
		<%selected_terra%>
    )
]]>
	</query>

	<!-- ========================================================================================= -->
	<query id="skk_005_grid_borders">
		<![CDATA[
-- skk_005_grid_borders
with
    member [Периоды].[Год_Месяц].[отчетный период]
    as 'aggregate({ <%selected_period%> })'
    member [Measures].[Досмотрено_] 
    as '  
        (
            [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК],
            [Measures].[Значение],
            [Периоды].[Год_Месяц].[отчетный период]
        )'
    member [Measures].[Досмотрено#]  
    as 'IIF  
        (
            not isEmpty ([Measures].[Досмотрено_]),
            [Measures].[Досмотрено_],
            0  
        )'	 
	member [Measures].[Параметр]
	as '<%selected_terra%>.name'
	member [Measures].[Участок]
	as '[Пункты пропуска].[Участок границы].currentMember.name'
	
	set [Участки границы]   
    as 'filter   
        (
            [Пункты пропуска].[Участок границы].[Все].children,
            not [Пункты пропуска].[Участок границы].currentMember is [Пункты пропуска].[Участок границы].[Все].[Не указан участок границы]   
        )'  
select
    {
		[Measures].[Параметр],
		[Measures].[Участок],
        [Measures].[Досмотрено#]		
    } on columns,
    {
       [Участки границы]
    } on rows              
from [СКК]   
where
    (
        <%selected_direction%>,
		<%selected_terra%>
    )
]]>
	</query>
	
	<!-- ========================================================================================= -->
	<query id="skk_005_grid_transport">
		<![CDATA[
-- skk_005_grid_transport
with
    member [Measures].[Количество]
    as 'count
        (
            filter
            (
                (
                    [Пункты пропуска].[Пункт пропуска].[Пункт пропуска],
                    [Пункты пропуска].[Субъект_Пункт пропуска].CurrentMember,
                    [Пункты пропуска].[Вид сообщения].CurrentMember
                ),
                ( [Measures].[Значение] ) > 0
            )
        ) '
    member [Measures].[Уровень]
    as 'IIF
        (
            ( [Пункты пропуска].[Вид сообщения].CurrentMember is [Пункты пропуска].[Вид сообщения].[Все] ),
            0,
            1
        )'	
select
    {
        {
            [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК],
            [Показатели].[Показатель].[Количество приостановленных партий грузов]
        } 	
        * { [Measures].[Количество] } +
        {
            [Показатели].[Показатель].DefaultMember
        }
        * { [Measures].[Уровень] }
    } on columns,
    {
        order
        (
            [Пункты пропуска].[Вид сообщения].members, 
            (
                [Measures].[Количество],
                [Показатели].[Показатель].[Количество партий грузов, на которые предъявлены документы должностным лицам органа Роспотребнадзора, осуществляющего СКК]
            ), 
            DESC
        )
    } on rows
from [СКК]
where
    (
		{ <%selected_period%> },
        <%selected_direction%>,
		<%selected_terra%>
    ) 
]]>
	</query>

</root>