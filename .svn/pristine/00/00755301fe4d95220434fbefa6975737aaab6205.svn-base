<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0042_0002_date">
    <![CDATA[
-- FO_0042_0002_date
with 
    member [Measures].[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
    set [NonEmptySet] 
    as 'Tail 
        (
            Filter 
            (
                Descendants   
                (
                    [Период].[Период].[Данные всех периодов],
                    [Период].[Период].[Квартал],
                    SELF   
                ),
                not IsEmpty 
                (
                    (
                        [Measures].[Значение],
                        [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели]
                    ) 
                ) and 
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and 
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and 
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and 
                [Период].[Период].CurrentMember.Name <> "Данные года" and 
                [Период].[Период].CurrentMember.Name <> "Данные месяца" and 
                [Период].[Период].CurrentMember.Name <> "Заключительные обороты" 
            ),
            1 
        )' 
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows 
from [ФО_Оценка качества ФМ_Показатели] 
  ]]>
  </query>

 

  <query id="FO_0042_0002_GRBSGrid">
    <![CDATA[
-- FO_0042_0002_GRBSGrid  
with 
    set [Администраторы] 
    as 'Descendants 
        (
            [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы],
            [Администратор__Сопоставим].[Администратор__Сопоставим].[Администратор],
            SELF 
        ) - [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[Несопоставленные данные]' 
    set [Показатели для оценки] 
    as 'Filter 
        (
            Generate 
            (
                Descendants 
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 1],
                    SELF 
                ) - 
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Несопоставленные данные],
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа] 
                },
                {
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember 
                } + Descendants 
                (
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember,
                    [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 2],
                    SELF 
                ) 
            ),
            not 
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Parent.DataMember 
            ) 
        ) '    
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Аггрегированные показатели] 
    as 'Aggregate({ [Показатели для оценки] })' 
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Код ГРБС] 
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Properties("Код")' 
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Наименование ГРБС] 
    as '[Администратор__Сопоставим].[Администратор__Сопоставим].CurrentMember.Name' 
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка] 
    as '[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Все показатели].[Итоговая оценка по главному распорядителю средств бюджета автономного округа]' 
    member [Measures].[Оценка показателя ] 
    as 'IIF 
        (
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка] 
            ) or 
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember.Level is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Показатели 1] 
            ),
            [Measures].[Взвешенное значение],
            [Measures].[Оценка показателя] 
        )'  
    member [Measures].[Мера для показателя ] 
    as 'IIF 
        (
            (
                [Measures].[Применим ли в оценке] = 0
            ) and not 
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка]
            ),
            -100500,
            [Measures].[Оценка показателя ] 
        )' 
    member [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[№ п/п] 
    as '0' 
select
    {
        [Администратор__Сопоставим].[Администратор__Сопоставим].[Все администраторы].[<%grbs%>]
    } on columns,
    non empty 
    (
       Filter 
        (
            {
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка] 
            } + [Показатели для оценки],
            IIF 
            (
                [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].CurrentMember is [Показатели__Оценка качества ФМ_Сопоставимый].[Показатели__Оценка качества ФМ_Сопоставимый].[Итоговая оценка],
                [Measures].[Оценка показателя ] is [Measures].[Оценка показателя ],
                true 
            ) 
        ) 
    ) on rows 
from [ФО_Оценка качества ФМ_Показатели] 
where 
    (
        [Период__Период].[Период__Период].[Данные всех периодов].<%selected_period%>,
        [Measures].[Мера для показателя ] 
    ) 
  ]]>
  </query>

 
  
</root>