<?xml version="1.0" encoding="windows-1251"?>
<root>
 
 
 
 <query id = "lastdate">
 <![CDATA[
select {   Filter
            (
                [Мониторинг__Дата заключения контракта].[Мониторинг__Дата заключения контракта].[Год].Members,
                [Measures].[Стоимость контракта]  > 0
            )  }   on rows,

{[Measures].[Стоимость контракта]} on columns
FROM [ЭО_Мониторинг_Контракты по продукции]
where (
      {[Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
      [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]}
      )

 
 ]]>
 
 </query>
  <query id = "years">
    <![CDATA[
select
    {
        [Measures].[Стоимость]
    } on columns,
    {

            Filter
            (
                [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].Members,
                [Measures].[Стоимость] > 0
            )

    }  on rows
FROM  [ЭО_Мониторинг_Контракты по продукции]
WHERE
    (
    <%baseRegion%>,
        [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок],
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]
        }
    )
 ]]>
  </query>
  <query id = "GRBS">
    <![CDATA[

select
    {
        [Measures].[Стоимость]
    } on columns,
non empty
    {
        filter
        (
            {
                [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].members
            },
             Right
            (
                [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].Currentmember.UniqueName,
                10
            ) <> "DATAMEMBER"
        )
    }  on rows
FROM  [ЭО_Мониторинг_Контракты по продукции]
WHERE
    (
    <%baseRegion%>,
        [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Все способы закупок],
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]
        },
       [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%curYear%>]
    )
 ]]>
  </query>
  <query id = "Grid">
    <![CDATA[
with
    MEMBER [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Код ОКДП]
    AS  '2'
    MEMBER [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Код ОКДП]
    AS  '[Мониторинг__ОКДП].[Мониторинг__ОКДП].CurrentMember.Properties("Код")' 
SELECT

    union
    (
        {
            {
            [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Код ОКДП]
                
            }
            *
            {
              [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Код ОКДП]
            }
        },
        {
            {
             [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].members
                
            }
            *
            {
               [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%curYear%>]:[Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%curYear%>].lag(1)
            }
        }
    )
      on columns,
    non empty 
    (
        filter  
        (
            {
                [Мониторинг__ОКДП].[Мониторинг__ОКДП].[<%curOKDPLevel%>].Members 
            },
             Right  
            (
                [Мониторинг__ОКДП].[Мониторинг__ОКДП].Currentmember.UniqueName,
                10   
            ) <> "DATAMEMBER"   
        ) 
    ) on rows
FROM  [ЭО_Мониторинг_Контракты по продукции]  
WHERE  
    (
         <%baseRegion%>,
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]  
        },
        [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все]<%curGRBS%><%curPBS%>,
        [Measures].[Стоимость]  
    )   
    
 ]]>
  </query>
  <query id = "Grid1">
    <![CDATA[
with
    MEMBER [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Код ОКДП]
    AS  '2'
    MEMBER [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Код ОКДП]
    AS  '[Мониторинг__ОКДП].[Мониторинг__ОКДП].CurrentMember.Properties("Код")' 
SELECT

    union 
    (
        {
            {
                [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Код ОКДП]
            }
            *
            {
                [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Код ОКДП]
            }
        },
        {
            {
                [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%prevYear%>]
            } 
            * 
            {
                [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].members
            } 
        } 
    )
      on columns,
    non empty 
    (
        filter  
        (
            {
                [Мониторинг__ОКДП].[Мониторинг__ОКДП].[<%curOKDPLevel%>].Members 
            },
             Right  
            (
                [Мониторинг__ОКДП].[Мониторинг__ОКДП].Currentmember.UniqueName,
                10   
            ) <> "DATAMEMBER"   
        ) 
    ) on rows
FROM  [ЭО_Мониторинг_Контракты по продукции]  
WHERE  
    (
         <%baseRegion%>,
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен]  
        },
        [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все]<%curGRBS%><%curPBS%>,
        [Measures].[Стоимость]  
    )   
    
 ]]>
  </query>
  <query id = "Chart1">
    <![CDATA[
with 
    MEMBER [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Kod] 
    AS  '[Мониторинг__ОКДП].[Мониторинг__ОКДП].CurrentMember.Properties("Код")' 
SELECT
    non empty 
    {
        [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%curYear%>]
        
    } on columns,
    non empty 
    {
        [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].children 
    } on rows 
FROM  [ЭО_Мониторинг_Контракты по продукции] 
WHERE 
    (
        <%baseRegion%>,
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен] 
        },
        [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все]<%curGRBS%><%curPBS%>,
        [Measures].[Стоимость],
        [Мониторинг__ОКДП].[Мониторинг__ОКДП].[<%curOKDPLevel%>]<%curOKDP%>
    )   
    
 ]]>
      </query>
      <query id = "Chart2">
        <![CDATA[
with 
    MEMBER [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].[Kod] 
    AS  '[Мониторинг__ОКДП].[Мониторинг__ОКДП].CurrentMember.Properties("Код")' 
SELECT
    non empty 
    {
        [Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%lastYear%>]:[Мониторинг__Дата принятия сведений].[Мониторинг__Дата принятия сведений].[Год].[<%lastYear%>].Lag(2)  
        
    } on columns,
    non empty 
    {
        [Мониторинг__Способы закупок].[Мониторинг__Способы закупок].children 
    } on rows 
FROM  [ЭО_Мониторинг_Контракты по продукции] 
WHERE 
    (
        <%baseRegion%>,
        {
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Подписан],
            [Мониторинг__Состояния контрактов].[Мониторинг__Состояния контрактов].[Все состояния].[Исполнен] 
        },
        [ГРБС__Сопоставимый].[ГРБС__Сопоставимый].[Все]<%curGRBS%><%curPBS%>,
        [Measures].[Стоимость],
        [Мониторинг__ОКДП].[Мониторинг__ОКДП].[<%curOKDPLevel%>]<%curOKDP%>  
    ) 
    
 ]]>
  </query>
  
  
  
  
 </root>