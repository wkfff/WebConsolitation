<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FO_0035_0035">
    <![CDATA[
-- FO_0035_0035_iphone
with
    member Measures.[Исполнено за <месяц> ]
    as '[Measures].[% исполнения за месяц]'
    member Measures.[План на <месяц> ]
    as '  ( [Measures].[План на месяц] ) / 1000000'          
    member Measures.[Факт за <месяц> на <текущая дата> ]
    as '           
        (
            [Measures].[Факт с начала  месяца]          
        ) / 1000000'          
    member Measures.[В том числе на <текущая дата> ]
    as '  ( [Measures].[Факт за день] ) / 1000000'          
    member Measures.[Осталось до конца месяца ]          
    as 'Measures.[План на <месяц> ] - Measures.[Факт за <месяц> на <текущая дата> ]'
    member Measures.[Факт за год на <текущая дата> ]
    as '          
        (
            [Measures].[Факт с начала года]          
        ) / 1000000'          
    member Measures.[Исполнено за год на <текущая дата> ]
    as '          
        (
            [Measures].[% исполнения за год]          
        )'           
    member Measures.[Факт за год на <текущая дата прошлого года> ]
    as 'LookupCube          
        (
            "[ФО_АС Бюджет_КазнИсп_Факт расхода]",
            "Sum          
            (
                {
                    [Блоки казначейства].[Все блоки казначейства].[Приход средств (от прочих и восстановление расходов)],
                    [Блоки казначейства].[Все блоки казначейства].[Уход средств (через платежку)],
                    [Блоки казначейства].[Все блоки казначейства].[Внутренняя переброска средств (1->N)],
                    [Блоки казначейства].[Все блоки казначейства].[Перечисление на р\с районов],
                    [Блоки казначейства].[Все блоки казначейства].[Подтверждение возврата с р\с районов],
                    [Блоки казначейства].[Все блоки казначейства].[Прочие данные]         
                },
                Sum        
                (
                    {
                        [Тип средств].[Сопоставимый].[Все типы средств].[Бюджетные средства],
                        [Тип средств].[Сопоставимый].[Все типы средств].[Безвозмездные перечисления от вышестояшего бюджета],
                        [Тип средств].[Сопоставимый].[Все типы средств].[Безвозмездные перечисления от нижестоящего бюджета]      
                    },
                    (
                        [Measures].[Расход с возвратом нараст итог],
                        [Блоки казначейства].CurrentMember,
                        [Тип средств].[Сопоставимый].CurrentMember,
                        " + MemberToStr     
                        (
                            [РзПр].[Сопоставимый].CurrentMember    
                        ) + ",
                        " + MemberToStr    
                        (
                            ParallelPeriod        
                            (
                                [Период].[Период].[Год],
                                1,
                                [Период].[Период].CurrentMember        
                            )         
                        ) + "        
                    )       
                )        
            ) "          
        ) / 1000000'    
    member Measures.[Исполнено за <прошлый год> ]
    as 'LookupCube    
        (
            "[ФО_ГодОтч_Расходы]",
            "    
            (
                [Measures].[Исполнено],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Расходы бюджета - ИТОГО],
                [Тип средств].[СКИФ].[Все].[Бюджетные средства],
                [ТипДокумента].[СКИФ].[Все].[Собственный отчет по бюджету субъекта],
                [Уровни бюджета].[СКИФ].[Все].[Бюджет субъекта],
                " + MemberToStr 
                (
                    [Период].[Период].[Данные всех периодов].[2011].PrevMember 
                ) + "  
            )"
        ) / 1000000'    
        
    member [РзПр].[Сопоставимый].[Формат]
    as 'IIF
        (
            Measures.CurrentMember is Measures.[Исполнено за год на <текущая дата> ],
            "P2",
            "N2"
        )'
select
    {[РзПр].[Сопоставимый].[Все коды ФКР] } on columns,
    {
        Measures.[Исполнено за <месяц> ],
        Measures.[План на <месяц> ],
        Measures.[Факт за <месяц> на <текущая дата> ],
        Measures.[В том числе на <текущая дата> ],
        Measures.[Осталось до конца месяца ],
        Measures.[Факт за год на <текущая дата> ],
        Measures.[Исполнено за год на <текущая дата> ],
        Measures.[Факт за год на <текущая дата прошлого года> ],
        Measures.[Исполнено за <прошлый год> ]
    } on rows
from [ФО_Расходы бюджета]           
where             
    (
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].[<%period_day_fo%>]
    )             
  ]]>
  </query>

  <query id="FO_0035_0035_v">
    <![CDATA[
-- FO_0035_0035_V_iphone
with   
    set [Список КОСГУ]  
    as ' 
        {
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Заработная плата],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Прочие выплаты],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата труда и начисления на выплаты по оплате труда].[Начисления на выплаты по оплате труда],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Услуги связи],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Транспортные услуги],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Коммунальные услуги],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Арендная плата за пользование имуществом],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Работы, услуги по содержанию имущества],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Оплата работ, услуг].[Прочие работы, услуги],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Обслуживание государственного (муниципального) долга],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Обслуживание государственного (муниципального) долга].[Обслуживание внутреннего долга],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления организациям],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления организациям].[Безвозмездные перечисления государственным и муниципальным организациям],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления организациям].[Безвозмездные перечисления организациям, за исключением государственных и муниципальных организаций],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления другим бюджетам бюджетной системы Российской Федерации],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Безвозмездные перечисления бюджетам].[Перечисления международным организациям],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].[Пособия по социальному страхованию населения],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].[Пособия по социальной помощи населению],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Социальное обеспечение].[Социальные пособия, выплачиваемые организациями сектора государственного управления],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы].[Прочие расходы],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости основных средств],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости нематериальных активов],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости непроизведенных активов],
            [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости материальных запасов]
        }'  
    
    member [Measures].[План на месяц ]
    as '[Measures].[План на месяц] / 1000000'

    member [Measures].[Факт с начала  месяца ]
    as 'Str([Measures].[Факт с начала  месяца] / 1000000) + ";" + Str([Measures].[% исполнения за месяц])'
    
    member [Measures].[Уровень]
    as 'IIF
        (
           [КОСГУ].[Сопоставимый].CurrentMember.Level is [КОСГУ].[Сопоставимый].[Статья],
           0, 
           1
        )'
select
    {
        [Measures].[План на месяц ],
        [Measures].[Факт с начала  месяца ],
        [Measures].[Уровень]
    } on columns,
    {
       [Список КОСГУ]
    } on rows   
from [ФО_Расходы бюджета]   
where   
    (
        [РзПр].[Сопоставимый].[Все коды ФКР],
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].[<%period_day_fo%>] 
    )   
  ]]>
  </query>

  <query id="FO_0035_0035_h">
    <![CDATA[
-- FO_0035_0035_H_iphone
with   
    set [Список РзПр]  
    as ' 
        Filter    
        (
            Descendants    
            (
                [РзПр].[Сопоставимый].[Все коды ФКР],
                [РзПр].[Сопоставимый].[Подраздел],
                SELF_AND_BEFORE    
            ) -   
            {
                [РзПр].[Сопоставимый].[Все коды ФКР],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов].[Перечисления другим бюджетам бюджетной системы],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов].[Выдача бюджетных кредитов (ссуд) другим бюджетам бюджетной системы РФ(КОСГУ 540)],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Итого внутренних оборотов].[Погашение бюджетных кредитов(ссуд), выданных другим бюджетам бюджетной системы РФ (КОСГУ 640)],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Несопоставленные данные],
                [РзПр].[Сопоставимый].[Все коды ФКР].[Неуказанное значение]
            },
            not    
            (
                [РзПр].[Сопоставимый].CurrentMember is [РзПр].[Сопоставимый].CurrentMember.Parent.DataMember   
            )    
        )'  
    
    member [Measures].[План на месяц ]
    as '[Measures].[План на месяц] / 1000000'
    
    member [Measures].[Факт за день ]
    as '[Measures].[Факт за день] / 1000000'
    
    member [Measures].[Факт с начала  месяца ]
    as '[Measures].[Факт с начала  месяца] / 1000000'
    
    member [Measures].[Уровень]
    as 'IIF
        (
           [РзПр].[Сопоставимый].CurrentMember.Level is [РзПр].[Сопоставимый].[Раздел],
           0, 
           1
        )'
select
    {
        [Measures].[План на месяц ],
        [Measures].[Факт с начала  месяца ],
        [Measures].[% исполнения за месяц],
        [Measures].[Уровень]
    } on columns,
    {
       [Список РзПр]
    } on rows   
from [ФО_Расходы бюджета]   
where   
    (
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>].[<%period_day_fo%>]
    )   
  ]]>
  </query>
</root>