<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="FK_0001_0017_01_date">
    <![CDATA[
-- FK_0001_0017_01_date 
-- <#[ФК_МесОтч_Расходы]#>
with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Исполнено]) and
                [Период].[Период].CurrentMember.Name <> "Остатки на начало года" and
                [Период].[Период].CurrentMember.Name <> "Данные квартала" and
                [Период].[Период].CurrentMember.Name <> "Данные полугодия" and
                [Период].[Период].CurrentMember.Name <> "Данные года" and
                [Период].[Период].CurrentMember.Name <> "Данные месяца" and
                [Период].[Период].CurrentMember.Name <> "Заключительные обороты"
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from [ФК_МесОтч_Расходы]
]]>
  </query>

  <query id="FK_0001_0017_01_grid">
    <![CDATA[
-- FK_0001_0017_01_grid
-- <#[ФК_МесОтч_Расходы]#>
with     
-- Уровни бюджета
    member [Уровни бюджета].[СКИФ].[Консолидированный бюджет субъекта]
    as '[Уровни бюджета].[СКИФ].[Конс.бюджет субъекта]'
    
    member [Уровни бюджета].[СКИФ].[Собственный бюджет субъекта]
    as '[Уровни бюджета].[СКИФ].[Бюджет субъекта]'
    
    member [Уровни бюджета].[СКИФ].[Местные бюджеты]
    as '[Уровни бюджета].[СКИФ].[Конс.бюджет МО]'
    
    member [Уровни бюджета].[СКИФ].[Городские округа]
    as '[Уровни бюджета].[СКИФ].[Бюджет гор.округа]'

    member [Уровни бюджета].[СКИФ].[Муниципальные районы]
    as 'Aggregate
        (
            {
                [Уровни бюджета].[СКИФ].[Бюджет района],
                [Уровни бюджета].[СКИФ].[Бюджет поселения]
            }
        )'

    member [Уровни бюджета].[СКИФ].[Собственные бюджеты районов]
    as '[Уровни бюджета].[СКИФ].[Бюджет района]'
    
    member [Уровни бюджета].[СКИФ].[Городские и сельские поселения]
    as '[Уровни бюджета].[СКИФ].[Бюджет поселения]'
--    

    set [Субъекты РФ]        
    as 'Filter        
        (
            Generate        
            (
                Descendants        
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]<%selected_fo%>,
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF        
                ),
                {
                    [Территории].[Сопоставимый].CurrentMember        
                } +  Descendants        
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF        
                )        
            ),
            not        
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember        
            ) and not IsEmpty        
            (
                [КОСГУ].[Сопоставимый].[Численность постоянного населения]        
            ) and not IsEmpty
            (
                [КОСГУ].[Сопоставимый].[Расходы всего]
            )
        )' 
        
    member [РзПр].[Сопоставимый].[Расходы бюджета - Итого ]
    as 'Aggregate
        (
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБЩЕГОСУДАРСТВЕННЫЕ ВОПРОСЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ОБОРОНА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ БЕЗОПАСНОСТЬ И ПРАВООХРАНИТЕЛЬНАЯ ДЕЯТЕЛЬНОСТЬ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ЭКОНОМИКА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЖИЛИЩНО-КОММУНАЛЬНОЕ ХОЗЯЙСТВО],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОХРАНА ОКРУЖАЮЩЕЙ СРЕДЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБРАЗОВАНИЕ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[КУЛЬТУРА, КИНЕМАТОГРАФИЯ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЗДРАВООХРАНЕНИЕ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[СОЦИАЛЬНАЯ ПОЛИТИКА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ФИЗИЧЕСКАЯ КУЛЬТУРА И СПОРТ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[СРЕДСТВА МАССОВОЙ ИНФОРМАЦИИ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБСЛУЖИВАНИЕ ГОСУДАРСТВЕННОГО И МУНИЦИПАЛЬНОГО ДОЛГА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ ОБЩЕГО ХАРАКТЕРА БЮДЖЕТАМ СУБЪЕКТОВ РОССИЙСКОЙ ФЕДЕРАЦИИ И МУНИЦИПАЛЬНЫХ ОБРАЗОВАНИЙ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЦЕЛЕВЫЕ БЮДЖЕТНЫЕ ФОНДЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ]
            } 
        )'  
    member [КОСГУ].[Сопоставимый].[Численность постоянного населения]        
    as 'IIF        
        (
            not        
            (
                [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]        
            ),
            Sum        
            (
                Descendants        
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF        
                ),
                [КОСГУ].[Сопоставимый].[Численность постоянного населения]        
            ),
            IIF        
            (
                [Период].[Период].[Данные всех периодов].[<%period_year%>] is [Период].[Период].[Данные всех периодов].[2010],
                LookupCube        
                (
                    "[ФСГС_Численность населения]",
                    "        
                    (
                        [Measures].[Факт],
                        [Период].[Период].[Данные всех периодов].[2010].PrevMember,
                        [Вариант].[ФСГС Население].[Все].[Численность населения на 1 января],
                        [ФСГС].[Численность населения].[Все].[Все население],
                        " + MemberToStr        
                        (
                            [Территории].[Сопоставимый].CurrentMember        
                        ) + "        
                    )"        
                ) ,
                LookupCube        
                (
                    "[ФСГС_Численность населения]",
                    "        
                    (
                        [Measures].[Факт],
                        [Период].[Период].[Данные всех периодов].[<%period_year%>],
                        [Вариант].[ФСГС Население].[Все].[Численность населения на 1 января],
                        [ФСГС].[Численность населения].[Все].[Все население],
                        " + MemberToStr        
                        (
                            [Территории].[Сопоставимый].CurrentMember        
                        ) + "        
                    )"        
                )        
            )        
        )'        
    member [КОСГУ].[Сопоставимый].[Расходы, направляемые на увеличение основных средств]         
    as '([КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости основных средств]) / 1000'         
    member [КОСГУ].[Сопоставимый].[Расходы всего]
    as 'Aggregate    
        (
            {
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление финансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Выбытие финансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы]    
            }
        ) / 1000'      
    member [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]         
    as 'IIF         
        (
            IsEmpty         
            (
                [КОСГУ].[Сопоставимый].[Расходы всего]         
            ) or         
            (
                [КОСГУ].[Сопоставимый].[Расходы всего]         
            )=0,
            null,
            [КОСГУ].[Сопоставимый].[Расходы, направляемые на увеличение основных средств] / [КОСГУ].[Сопоставимый].[Расходы всего]         
        )'         
    member [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Max]       
    as 'Max       
        (
            Filter        
            (
                [Субъекты РФ],
                not IsEmpty        
                (
                    [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]        
                ) and        
                (
                    [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]       
                )        
            ),
            [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]        
        )'        
    member [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Min]       
    as 'Min       
        (
            Filter       
            (
                [Субъекты РФ],
                not IsEmpty       
                (
                    [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]       
                ) and       
                (
                    [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]       
                )       
            ),
            [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]       
        )'       
    member [КОСГУ].[Сопоставимый].[Ранг по доле расходов]         
    as 'IIF         
        (
            IsEmpty         
            (
                (
                   [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                   [Measures].[<%selected_measure%>],
                   [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                   [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
                   <%selected_fkr%>
                ) 
            ) or         
           (
                   [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                   [Measures].[<%selected_measure%>],
                   [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                   [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
                   <%selected_fkr%>
                )  = 0 or not        
            (
                [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]        
            ),
            null,
            Rank         
            (
                [Территории].[Сопоставимый].CurrentMember,
                Order         
                (
                    Filter         
                    (
                        [Субъекты РФ],
                        not IsEmpty         
                        (
                            (
                               [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                               [Measures].[<%selected_measure%>],
                               [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                               [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
                               <%selected_fkr%>
                            ) 
                        ) and        
                        (
                            [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]       
                        )        
                    ),
                    (
                       [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                       [Measures].[<%selected_measure%>],
                       [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                       [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
                       <%selected_fkr%>
                    ) ,
                    BDESC         
                ),
                (
                   [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                   [Measures].[<%selected_measure%>],
                   [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
                   [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
                   <%selected_fkr%>
                ) 
            )         
        )'         
    member [КОСГУ].[Сопоставимый].[Худший ранг по доле расходов]         
    as 'Max         
        (
            [Субъекты РФ],
            (
              [КОСГУ].[Сопоставимый].[Ранг по доле расходов],
              [Measures].[<%selected_measure%>],
              [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
              [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
              <%selected_fkr%>
            )  
        )'         
    member [КОСГУ].[Сопоставимый].[Оценка доли расходов, направляемых на увеличение основных средств, в расходах бюджета]        
    as 'IIF     
        (
            IsEmpty    
            (
                (
                    [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Max] - [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Min]     
                )    
            ) or     
            (
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Max] - [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Min]     
            ) = 0 or not   
            (
                [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]       
            ),
            null,
            (
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета] - [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Min]      
            ) /      
            (
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Max] - [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета Min]     
            )    
        )'     
    member [КОСГУ].[Сопоставимый].[Темп роста доли расходов на увеличение основных средств] 
    as 'IIF   
        (
            IsEmpty 
            (
                (
                    [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                    [Период].[Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
                ) 
            ) or 
            (
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                [Период].[Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
            ) = 0,
            null,
            (
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>]
            ) /  
            (
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
                [Период].[Период].[Данные всех периодов].[<%period_last_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>] 
            )    
        )'   
select
    {
        [КОСГУ].[Сопоставимый].[Расходы, направляемые на увеличение основных средств],
        [КОСГУ].[Сопоставимый].[Расходы всего],
        [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
        [КОСГУ].[Сопоставимый].[Ранг по доле расходов],        
        [КОСГУ].[Сопоставимый].[Оценка доли расходов, направляемых на увеличение основных средств, в расходах бюджета],
        [КОСГУ].[Сопоставимый].[Темп роста доли расходов на увеличение основных средств] ,
        [КОСГУ].[Сопоставимый].[Худший ранг по доле расходов]
    } on columns,
    {
        {
            [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]         
        } + [Субъекты РФ]        
    } on rows         
from [ФК_МесОтч_Расходы]        
where        
    (
        [Measures].[<%selected_measure%>],
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
        <%selected_fkr%>
    )         
  ]]>
          </query>

          <query id="FK_0001_0017_01_chart">
            <![CDATA[
-- FK_0001_0017_01_chart
-- <#[ФК_МесОтч_Расходы]#>
with         
-- Уровни бюджета
    member [Уровни бюджета].[СКИФ].[Консолидированный бюджет субъекта]
    as '[Уровни бюджета].[СКИФ].[Конс.бюджет субъекта]'
    
    member [Уровни бюджета].[СКИФ].[Собственный бюджет субъекта]
    as '[Уровни бюджета].[СКИФ].[Бюджет субъекта]'
    
    member [Уровни бюджета].[СКИФ].[Местные бюджеты]
    as '[Уровни бюджета].[СКИФ].[Конс.бюджет МО]'
    
    member [Уровни бюджета].[СКИФ].[Городские округа]
    as '[Уровни бюджета].[СКИФ].[Бюджет гор.округа]'

    member [Уровни бюджета].[СКИФ].[Муниципальные районы]
    as 'Aggregate
        (
            {
                [Уровни бюджета].[СКИФ].[Бюджет района],
                [Уровни бюджета].[СКИФ].[Бюджет поселения]
            }
        )'

    member [Уровни бюджета].[СКИФ].[Собственные бюджеты районов]
    as '[Уровни бюджета].[СКИФ].[Бюджет района]'
    
    member [Уровни бюджета].[СКИФ].[Городские и сельские поселения]
    as '[Уровни бюджета].[СКИФ].[Бюджет поселения]'
--    
        
    set [Субъекты РФ]        
    as 'Filter        
        (
            Generate        
            (
                Descendants        
                (
                    [Территории].[Сопоставимый].[Все территории].[Российская  Федерация]<%selected_fo%>,
                    [Территории].[Сопоставимый].[Федеральный округ],
                    SELF        
                ),
                Descendants        
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF        
                )        
            ),
            not        
            (
                [Территории].[Сопоставимый].CurrentMember is [Территории].[Сопоставимый].CurrentMember.Parent.DataMember        
            ) and not IsEmpty        
            (
                [КОСГУ].[Сопоставимый].[Численность постоянного населения]        
            ) and not IsEmpty
            (
                [КОСГУ].[Сопоставимый].[Расходы всего]
            )
        )' 
        
    member [РзПр].[Сопоставимый].[Расходы бюджета - Итого ]
    as 'Aggregate
        (
            {
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБЩЕГОСУДАРСТВЕННЫЕ ВОПРОСЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ОБОРОНА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ БЕЗОПАСНОСТЬ И ПРАВООХРАНИТЕЛЬНАЯ ДЕЯТЕЛЬНОСТЬ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[НАЦИОНАЛЬНАЯ ЭКОНОМИКА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЖИЛИЩНО-КОММУНАЛЬНОЕ ХОЗЯЙСТВО],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОХРАНА ОКРУЖАЮЩЕЙ СРЕДЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБРАЗОВАНИЕ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[КУЛЬТУРА, КИНЕМАТОГРАФИЯ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЗДРАВООХРАНЕНИЕ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[СОЦИАЛЬНАЯ ПОЛИТИКА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ФИЗИЧЕСКАЯ КУЛЬТУРА И СПОРТ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[СРЕДСТВА МАССОВОЙ ИНФОРМАЦИИ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ОБСЛУЖИВАНИЕ ГОСУДАРСТВЕННОГО И МУНИЦИПАЛЬНОГО ДОЛГА],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ ОБЩЕГО ХАРАКТЕРА БЮДЖЕТАМ СУБЪЕКТОВ РОССИЙСКОЙ ФЕДЕРАЦИИ И МУНИЦИПАЛЬНЫХ ОБРАЗОВАНИЙ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[ЦЕЛЕВЫЕ БЮДЖЕТНЫЕ ФОНДЫ],
                [РзПр].[Сопоставимый].[Все коды ФКР].[МЕЖБЮДЖЕТНЫЕ ТРАНСФЕРТЫ]
            } 
        )'          
    member [КОСГУ].[Сопоставимый].[Численность постоянного населения]          
    as 'IIF          
        (
            not          
            (
                [Территории].[Сопоставимый].CurrentMember.Level is [Территории].[Сопоставимый].[Субъект РФ]          
            ),
            Sum          
            (
                Descendants          
                (
                    [Территории].[Сопоставимый].CurrentMember,
                    [Территории].[Сопоставимый].[Субъект РФ],
                    SELF          
                ),
                [КОСГУ].[Сопоставимый].[Численность постоянного населения]          
            ),
            IIF          
            (
                [Период].[Период].[Данные всех периодов].[<%period_year%>] is [Период].[Период].[Данные всех периодов].[2010],
                LookupCube          
                (
                    "[ФСГС_Численность населения]",
                    "          
                    (
                        [Measures].[Факт],
                        [Период].[Период].[Данные всех периодов].[2010].PrevMember,
                        [Вариант].[ФСГС Население].[Все].[Численность населения на 1 января],
                        [ФСГС].[Численность населения].[Все].[Все население],
                        " + MemberToStr          
                        (
                            [Территории].[Сопоставимый].CurrentMember          
                        ) + "          
                    )"          
                ) ,
                LookupCube          
                (
                    "[ФСГС_Численность населения]",
                    "          
                    (
                        [Measures].[Факт],
                        [Период].[Период].[Данные всех периодов].[<%period_year%>],
                        [Вариант].[ФСГС Население].[Все].[Численность населения на 1 января],
                        [ФСГС].[Численность населения].[Все].[Все население],
                        " + MemberToStr          
                        (
                            [Территории].[Сопоставимый].CurrentMember          
                        ) + "          
                    )"          
                )          
            )          
        )'          
    member [КОСГУ].[Сопоставимый].[Расходы, направляемые на увеличение основных средств]           
    as '[КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов].[Увеличение стоимости основных средств]'           
    member [КОСГУ].[Сопоставимый].[Расходы всего]
    as 'Aggregate    
        (
            {
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление нефинансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Поступление финансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Выбытие финансовых активов],
                [КОСГУ].[Сопоставимый].[Все коды ЭКР].[Расходы]    
            }
        )'        
    member [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]           
    as 'IIF           
        (
            IsEmpty           
            (
                [КОСГУ].[Сопоставимый].[Расходы всего]           
            ) or           
            (
                [КОСГУ].[Сопоставимый].[Расходы всего]           
            )=0,
            null,
            [КОСГУ].[Сопоставимый].[Расходы, направляемые на увеличение основных средств] / [КОСГУ].[Сопоставимый].[Расходы всего]           
        )'    
    member [Территории].[Сопоставимый].[Среднее] 
    as 'AVG
        (
            [Субъекты РФ],
            [КОСГУ].[Сопоставимый].CurrentMember
        )'  
    member [КОСГУ].[Сопоставимый].[Доведение до среднего]   
    as 'IIF 
        (
            (
                [Территории].[Сопоставимый].CurrentMember,
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета] 
            ) <
            (
                [Территории].[Сопоставимый].[Среднее],
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета] 
            ),
            (
                [Территории].[Сопоставимый].[Среднее],
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]  
            ) -  
            (
                [Территории].[Сопоставимый].CurrentMember,
                [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета] 
            ),
            0
        )'        
select
    {
        [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
        [КОСГУ].[Сопоставимый].[Доведение до среднего]
    } on columns,
    Filter 
    (
        Order
        (
            [Субъекты РФ],
            [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета],
            BDESC
        ) + {[Территории].[Сопоставимый].[Среднее] },
        not IsEmpty 
        (
            [КОСГУ].[Сопоставимый].[Доля расходов, направляемых на увеличение основных средств, в расходах бюджета]
        ) 
    ) on rows           
from [ФК_МесОтч_Расходы]          
where          
    (
        [Measures].[<%selected_measure%>],
        [Период].[Период].[Данные всех периодов].[<%period_year%>].[<%period_half_year%>].[<%period_quater%>].[<%period_month%>],
        [Уровни бюджета].[СКИФ].[<%selected_budget_level%>],
        <%selected_fkr%>
    )           
  ]]>
  </query>
</root>