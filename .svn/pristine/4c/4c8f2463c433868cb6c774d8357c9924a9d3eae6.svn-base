<?xml version="1.0" encoding="Windows-1251"?>
<root>
  <query id="date">
    <![CDATA[
-- FO_0035_0003_Yamal_date
with 
    member Measures.[ДанныеНа] 
    as '[Период].[Период].CurrentMember.UniqueName' 
select
    {Measures.[ДанныеНа]} on columns,
    {
        Tail
        (
            NonEmptyCrossjoin({[Период].[Период].Members})
        )
    } on rows 
from [ФО_Исполнение кассового плана]
	]]>
  </query>
 
  <query id="ExecuteOutcome">
    <![CDATA[
-- FO_0035_0003_Yamal_ExecuteOutcome
with   
    member Measures.[КВСР]   
    as '[Администратор].[ИспКасПланСопост].CurrentMember.Properties("Код")'       
select
    {
        {
            {
                [Расходы].[ИспКасПлан].[Все].['Значение не указано']
            }   
            *{Measures.[КВСР]}   
        } +   
        {
            {
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Заработная плата],
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Увеличение стоимости основных средств],
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Коммунальные расходы],
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Межбюджетные трансферты],
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Прочие расходы],
                [Расходы__ИспКасПлан].[Расходы__ИспКасПлан].[Все].[Итого]
            }   
            *   
            {
                [Measures].[План_Нарастающий итог],
                [Measures].[Факт_Нарастающий итог],
                [Measures].[Процент исполнения]
            }   
        }   
    } on columns,
    Except   
    (
        [Администратор].[ИспКасПланСопост].[ГРБС].Members,
        {
            [Администратор].[ИспКасПланСопост].[Все].[Несопоставленные данные],
            [Администратор].[ИспКасПланСопост].[Все].[Расходы- всего]
        } 
    ) on rows 
from [ФО_Исполнение кассового плана_Расходы]
where   
    (
        [Период].[Период].[Данные всех периодов]<%period_cur_date%>  
    )

	]]>
</query>
 
  <query id="Execute">
    <![CDATA[
-- fo_0035_0002_Execute
with 
    member Measures.[Код] 
    as '[Показатели].[ИспКасПлан].CurrentMember.Properties("Код")' 
    set [Показатели]
    as 'Filter
        (
            [Показатели].[ИспКасПлан].[Показатель].Members,
            [Показатели].[ИспКасПлан].CurrentMember.Properties("Код") <> "17" and
            [Показатели].[ИспКасПлан].CurrentMember.Properties("Код") <> "67"
        )'
select
    {
        Measures.[Код],
        [Measures].[План_Нарастающий итог],
        [Measures].[Факт_Нарастающий итог],
        [Measures].[Процент исполнения]
    } on columns,
    Filter 
    (
        [Показатели],
        IIF
        (
            [Показатели__ИспКасПлан].[Показатели__ИспКасПлан].CurrentMember.Properties("Код") = "50",
            true,
            not 
            (
                IsEmpty 
                (
                    [Measures].[План_Нарастающий итог] 
                ) and IsEmpty 
                (
                    [Measures].[Факт_Нарастающий итог] 
                ) 
            )
        ) 
    ) on rows  
from [ФО_Исполнение кассового плана] 
where   
    (
        [Период].[Период].[Данные всех периодов]<%period_cur_date%>  
    )
	]]>
  </query>
</root>