<?xml version="1.0" encoding="windows-1251"?>
<root>
  <query id="STAT_0002_0003_date">
    <![CDATA[
-- STAT_0002_0003_compare_date
-- <#[ФК_МесОтч_Доходы]#>
with
    member [Measures].[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    set [NonEmptySet]
    as 'Tail
        (
            Filter
            (
                [Период].[Период].Members,
                not IsEmpty([Measures].[Исполнено])
            ),
            1
        )'
select
    { [Measures].[ДанныеНа] } on columns,
    { [NonEmptySet] } on rows
from  [ФК_МесОтч_Доходы]
  ]]>
  </query>

  
  <query id="STAT_0002_0003_compare_Grid">
    <![CDATA[
-- STAT_0002_0003_compare_Grid  
SELECT
      
    {
        crossjoin 
        (
            {
                Descendants   
                (
                    [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[объемы] ,
                    [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[объемы].Level ,
                    SELF_AND_AFTER   
                ) ,
                Except   
                (
                    Descendants   
                    (
                        [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[процентная ставка по выданным кредитам (средневзвешенная)] ,
                        [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[процентная ставка по выданным кредитам (средневзвешенная)].Level ,
                        SELF_AND_AFTER   
                    ) ,
                    {
                        {
                            Descendants   
                            (
                                [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[процентная ставка по выданным кредитам (средневзвешенная)].DataMember ,
                                [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[процентная ставка по выданным кредитам (средневзвешенная)].DataMember.Level ,
                                SELF_AND_AFTER   
                            )   
                        }   
                    }   
                ),
                Descendants  
                (
                    [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты] ,
                    [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты].Level ,
                    SELF_AND_AFTER  
                ) 
            },
            {
                [Measures].[Значение] ,
                [Measures].[Минимальное значение] ,
                [Measures].[Максимальное значение]  
            }    
        ) 
    } ON COLUMNS ,
    NON EMPTY     
    {
        Descendants 
        (
            [Период].[Период].[Данные всех периодов],
            [Период].[Период].[День],
            SELF  
        )
    }   ON ROWS 
FROM [СТАТ_Мониторинг СЭР]     
WHERE     
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - Субъект РФ], 
      [Территории].[РФ].[Все территории].[Российская Федерация].<%region%>
    )       
    ]]>
</query>


<query id="Chart_query">
<![CDATA[
---CHART
-- Whith hint
WITH
    MEMBER [Период].[Период].[Slicer]
    AS ' Aggregate
        (
            {
                {
                   <%LastDate%>
                } 
            }
        )'
    member [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты ]
    as '[Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты].[объемы]'
    member [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты ]
    as '[Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[объемы]'
    member [Показатели].[Мониторинг СЭР].[Все показатели].[Итого ]
    as '[Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты ] + [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты ] '
SELECT
    NON EMPTY
    {
        [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты ],
        [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты ]
        --[Показатели].[Мониторинг СЭР].[Все показатели].[Итого ]
    } ON rows ,
    NON EMPTY Descendants
    (
        [Период].[Период].[Данные всех периодов].[<%periodYear%>],
        [Период].[Период].[День],
        SELF
    ) ON columns
FROM [СТАТ_Мониторинг СЭР]
WHERE
    (
        [Территории].[РФ].[Все территории].[Российская Федерация].<%region%> ,
        [Measures].[Значение]
    )  
    
  
  ]]>
  </query>

  <query id="Chart1_query">
    <![CDATA[
-- STAT_0002_0003_Chart1
WITH     
 member [Measures].[Значение ] 
    as 'IIF
        (
            isEmpty([Measures].[Значение]),
            0,
            [Measures].[Значение]
        )'
    SET [Территории]  
    AS 'Filter
        (
            Descendants 
            (
                [Территории].[РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ],
                [Территории].[РФ].[Субъект РФ],
                SELF     
            ),
            not
            (
                [Территории].[РФ].CurrentMember is [Территории].[РФ].CurrentMember.Parent.DataMember
            )
        )' 
    SET [Периоды]  
    AS 'Filter  
        (
            Descendants  
            (
                [Период].[Период].[Данные всех периодов].[<%periodYear%>],
                [Период].[Период].[День],
                SELF  
            ),
            [Период].[Период].CurrentMember.Name = "1" and
            not IsEmpty([Measures].[Значение] )
        ) '  
    member [Территории].[РФ].[UniqName]  
    AS '[Период].[Период].CurrentMember.UniqueName' 
SELECT
    {
        {[Территории].[РФ].[UniqName]} + [Территории] 
    }  ON COLUMNS ,
   NON EMPTY {[Периоды]} ON ROWS  
FROM [СТАТ_Мониторинг СЭР]     
WHERE     
    (
        [Measures].[Значение ] ,
        [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[объемы]     
    )     
  
  ]]>
  </query>

  <query id="Chart2_query">
    <![CDATA[
-- STAT_0002_0003_Chart1 

WITH
    member [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты ]
    as '[Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты].[объемы]'
    member [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты ]
    as '[Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:].[объемы]'
    member [Показатели].[Мониторинг СЭР].[Все показатели].[Итого ]
    as '[Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты ] + [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты ] '
SELECT
    NON EMPTY {<%LastDate%>} ON COLUMNS ,
    NON EMPTY
    {
        [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты ],
        [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты ]
        --[Показатели].[Мониторинг СЭР].[Все показатели].[Итого ]
    } ON ROWS
FROM [СТАТ_Мониторинг СЭР]
WHERE
    (
        [Территории].[РФ].[Все территории].[Российская Федерация].<%region%>,
        [Measures].[Значение]
    )
  ]]>
  </query>

  <query id="Chart3_query">
    <![CDATA[
    
WITH    
 member [Measures].[Значение ] 
    as 'IIF
        (
            isEmpty([Measures].[Значение]),
            0,
            [Measures].[Значение]
        )'
    SET [Территории]  
    AS 'Filter
        (
            Descendants 
            (
                [Территории].[РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ],
                [Территории].[РФ].[Субъект РФ],
                SELF     
            ),
            not
            (
                [Территории].[РФ].CurrentMember is [Территории].[РФ].CurrentMember.Parent.DataMember
            )
        )' 
    SET [Периоды]  
    AS 'Filter  
        (
            Descendants  
            (
                [Период].[Период].[Данные всех периодов].[<%periodYear%>],
                [Период].[Период].[День],
                SELF  
            ),
            [Период].[Период].CurrentMember.Name = "1" and
            not IsEmpty([Measures].[Значение] )
        ) '  
    member [Территории].[РФ].[UniqName]  
    AS '[Период].[Период].CurrentMember.UniqueName' 
SELECT
    {
        {[Территории].[РФ].[UniqName]} + [Территории] 
    }  ON COLUMNS ,
   NON EMPTY {[Периоды]} ON ROWS  
FROM [СТАТ_Мониторинг СЭР]     
WHERE     
    (
        [Measures].[Значение ] ,
        [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты].[объемы]     
    )

  ]]>
  </query>

  <query id="Dates">
    <![CDATA[
   -- STAT_0002_0003_Dates
WITH 
    
    Set [Непустые периоды] 
    as 'Descendants 
        (
            [Период].[Период].[Данные всех периодов].[<%periodYear%>],
            [Период].[Период].[День],
            SELF 
        ) ' 
        
     member [Показатели].[Мониторинг СЭР].[Показатель]
    as ' Aggregate
        (
            {
                
                [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:],
                
                [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты]
            }
        ) '
SELECT
    {[Measures].[Значение]} ON COLUMNS ,
    NON EMPTY {[Непустые периоды]} DIMENSION PROPERTIES MEMBER_UNIQUE_NAME ON ROWS 
FROM [СТАТ_Мониторинг СЭР] 
WHERE 
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - Субъект РФ] ,
        [Территории].[РФ].[Все территории].[Российская Федерация].<%region%>,
        [Показатели].[Мониторинг СЭР].[Показатель]
    ) 
      ]]>
  </query>

  <query id="Dates1">
    <![CDATA[
      -- STAT_0002_0003_Dates1  
WITH
    Set [Непустые периоды]
    as ' 
           Descendants 
        (
            [Период].[Период].[Данные всех периодов],
            [Период].[Период].[День],
            SELF  
        ) '
    member [Показатели].[Мониторинг СЭР].[Показатель]
    as ' Aggregate
        (
            {
                
                [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:],
                
                [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты]
            }
        ) '
SELECT
    {[Measures].[Значение]} ON COLUMNS ,
    NON EMPTY {[Непустые периоды]} DIMENSION PROPERTIES MEMBER_UNIQUE_NAME ON ROWS
FROM [СТАТ_Мониторинг СЭР]
WHERE  
    (
        [Источники данных].[Все источники данных].[СТАТ Отчетность - Субъект РФ] ,
        [Территории].[РФ].[Все территории].[Российская Федерация].<%region%>,
        [Показатели].[Мониторинг СЭР].[Показатель] 
    ) 
    
      ]]>
  </query>

  <query id="LastDate">
    <![CDATA[
    
    -- последняя дата
with
    member Measures.[ДанныеНа]
    as '[Период].[Период].CurrentMember.UniqueName'
    member [Показатели].[Мониторинг СЭР].[Показатель]
    as ' Aggregate
        (
            {
                
                [Показатели].[Мониторинг СЭР].[Все показатели].[Потребительские кредиты:],
                
                [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты]
            }
        ) '
select

    {Measures.[ДанныеНа]} on columns, NON EMPTY
    {
        Tail
        (
            NonEmptyCrossjoin({[Период].[Период].[День].Members})
        )
    } on rows
FROM [СТАТ_Мониторинг СЭР]
WHERE
    ([Территории].[РФ].[Все территории].[Российская Федерация].<%region%>,
        [Источники данных].[Все источники данных].[СТАТ Отчетность - Субъект РФ],
        [Показатели].[Мониторинг СЭР].[Показатель]
        
    )
    
    ]]>
  </query>

  <query id="ChartDate">
    <![CDATA[

WITH
    SET [Территории]
    AS 'Filter
        (
            Descendants
            (
                [Территории].[РФ].[Все территории].[Российская Федерация].[Уральский федеральный округ],
                [Территории].[РФ].[Субъект РФ],
                SELF
            ),
            not
            (
                [Территории].[РФ].CurrentMember is [Территории].[РФ].CurrentMember.Parent.DataMember
            )
        )'
    SET [Периоды]
    AS 'Filter
        (
            Descendants
            (
                [Период].[Период].[Данные всех периодов].[<%periodYear%>],
                [Период].[Период].[День],
                SELF
            ),
            [Период].[Период].CurrentMember.Name = "1" and
            not IsEmpty([Measures].[Значение] )
        ) '
    member [Территории].[РФ].[UniqName]
    AS '[Период].[Период].CurrentMember.UniqueName'
SELECT
    {
        {[Территории].[РФ].[UniqName]} + [Территории]
    } ON COLUMNS ,
    NON EMPTY {[Периоды]} ON ROWS
FROM [СТАТ_Мониторинг СЭР]
WHERE
    (
        [Measures].[Значение] ,
        [Показатели].[Мониторинг СЭР].[Все показатели].[Ипотечные кредиты].[объемы]
    )
    
    ]]>
  </query>

</root>

